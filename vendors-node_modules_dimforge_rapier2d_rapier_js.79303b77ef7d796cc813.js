"use strict";
(self["webpackChunktippy_project_website"] = self["webpackChunktippy_project_website"] || []).push([["vendors-node_modules_dimforge_rapier2d_rapier_js"],{

/***/ "./node_modules/@dimforge/rapier2d/dynamics/ccd_solver.js":
/*!****************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/ccd_solver.js ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CCDSolver": () => (/* binding */ CCDSolver)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The CCD solver responsible for resolving Continuous Collision Detection.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `ccdSolver.free()`
 * once you are done using it.
 */
var CCDSolver = /** @class */ (function () {
    function CCDSolver(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawCCDSolver();
    }
    /**
     * Release the WASM memory occupied by this narrow-phase.
     */
    CCDSolver.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    return CCDSolver;
}());

//# sourceMappingURL=ccd_solver.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/coefficient_combine_rule.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/coefficient_combine_rule.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CoefficientCombineRule": () => (/* binding */ CoefficientCombineRule)
/* harmony export */ });
/**
 * A rule applied to combine coefficients.
 *
 * Use this when configuring the `ColliderDesc` to specify
 * how friction and restitution coefficient should be combined
 * in a contact.
 */
var CoefficientCombineRule;
(function (CoefficientCombineRule) {
    CoefficientCombineRule[CoefficientCombineRule["Average"] = 0] = "Average";
    CoefficientCombineRule[CoefficientCombineRule["Min"] = 1] = "Min";
    CoefficientCombineRule[CoefficientCombineRule["Multiply"] = 2] = "Multiply";
    CoefficientCombineRule[CoefficientCombineRule["Max"] = 3] = "Max";
})(CoefficientCombineRule || (CoefficientCombineRule = {}));
//# sourceMappingURL=coefficient_combine_rule.js.map

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/index.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RigidBody": () => (/* reexport safe */ _rigid_body__WEBPACK_IMPORTED_MODULE_0__.RigidBody),
/* harmony export */   "RigidBodyDesc": () => (/* reexport safe */ _rigid_body__WEBPACK_IMPORTED_MODULE_0__.RigidBodyDesc),
/* harmony export */   "RigidBodyType": () => (/* reexport safe */ _rigid_body__WEBPACK_IMPORTED_MODULE_0__.RigidBodyType),
/* harmony export */   "RigidBodySet": () => (/* reexport safe */ _rigid_body_set__WEBPACK_IMPORTED_MODULE_1__.RigidBodySet),
/* harmony export */   "IntegrationParameters": () => (/* reexport safe */ _integration_parameters__WEBPACK_IMPORTED_MODULE_2__.IntegrationParameters),
/* harmony export */   "BallJoint": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.BallJoint),
/* harmony export */   "FixedJoint": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.FixedJoint),
/* harmony export */   "Joint": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.Joint),
/* harmony export */   "JointParams": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.JointParams),
/* harmony export */   "JointType": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.JointType),
/* harmony export */   "PrismaticJoint": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.PrismaticJoint),
/* harmony export */   "SpringModel": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.SpringModel),
/* harmony export */   "UnitJoint": () => (/* reexport safe */ _joint__WEBPACK_IMPORTED_MODULE_3__.UnitJoint),
/* harmony export */   "JointSet": () => (/* reexport safe */ _joint_set__WEBPACK_IMPORTED_MODULE_4__.JointSet),
/* harmony export */   "CoefficientCombineRule": () => (/* reexport safe */ _coefficient_combine_rule__WEBPACK_IMPORTED_MODULE_5__.CoefficientCombineRule),
/* harmony export */   "CCDSolver": () => (/* reexport safe */ _ccd_solver__WEBPACK_IMPORTED_MODULE_6__.CCDSolver),
/* harmony export */   "IslandManager": () => (/* reexport safe */ _island_manager__WEBPACK_IMPORTED_MODULE_7__.IslandManager)
/* harmony export */ });
/* harmony import */ var _rigid_body__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rigid_body */ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body.js");
/* harmony import */ var _rigid_body_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rigid_body_set */ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body_set.js");
/* harmony import */ var _integration_parameters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./integration_parameters */ "./node_modules/@dimforge/rapier2d/dynamics/integration_parameters.js");
/* harmony import */ var _joint__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./joint */ "./node_modules/@dimforge/rapier2d/dynamics/joint.js");
/* harmony import */ var _joint_set__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./joint_set */ "./node_modules/@dimforge/rapier2d/dynamics/joint_set.js");
/* harmony import */ var _coefficient_combine_rule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./coefficient_combine_rule */ "./node_modules/@dimforge/rapier2d/dynamics/coefficient_combine_rule.js");
/* harmony import */ var _ccd_solver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ccd_solver */ "./node_modules/@dimforge/rapier2d/dynamics/ccd_solver.js");
/* harmony import */ var _island_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./island_manager */ "./node_modules/@dimforge/rapier2d/dynamics/island_manager.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_island_manager__WEBPACK_IMPORTED_MODULE_7__, _ccd_solver__WEBPACK_IMPORTED_MODULE_6__, _joint_set__WEBPACK_IMPORTED_MODULE_4__, _joint__WEBPACK_IMPORTED_MODULE_3__, _integration_parameters__WEBPACK_IMPORTED_MODULE_2__, _rigid_body_set__WEBPACK_IMPORTED_MODULE_1__, _rigid_body__WEBPACK_IMPORTED_MODULE_0__]);
([_island_manager__WEBPACK_IMPORTED_MODULE_7__, _ccd_solver__WEBPACK_IMPORTED_MODULE_6__, _joint_set__WEBPACK_IMPORTED_MODULE_4__, _joint__WEBPACK_IMPORTED_MODULE_3__, _integration_parameters__WEBPACK_IMPORTED_MODULE_2__, _rigid_body_set__WEBPACK_IMPORTED_MODULE_1__, _rigid_body__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);








//# sourceMappingURL=index.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/integration_parameters.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/integration_parameters.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntegrationParameters": () => (/* binding */ IntegrationParameters)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

var IntegrationParameters = /** @class */ (function () {
    function IntegrationParameters(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawIntegrationParameters();
    }
    /**
     * Free the WASM memory used by these integration parameters.
     */
    IntegrationParameters.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    Object.defineProperty(IntegrationParameters.prototype, "dt", {
        /**
         * The timestep length (default: `1.0 / 60.0`)
         */
        get: function () {
            return this.raw.dt;
        },
        set: function (value) {
            this.raw.dt = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "erp", {
        /**
         * The Error Reduction Parameter in `[0, 1]` is the proportion of
         * the positional error to be corrected at each time step (default: `0.2`).
         */
        get: function () {
            return this.raw.erp;
        },
        set: function (value) {
            this.raw.erp = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "jointErp", {
        /**
         * The Error Reduction Parameter for joints in `[0, 1]` is the proportion of
         * the positional error to be corrected at each time step (default: `0.2`).
         */
        get: function () {
            return this.raw.jointErp;
        },
        set: function (value) {
            this.raw.jointErp = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "warmstartCoeff", {
        /**
         * Each cached impulse are multiplied by this coefficient in `[0, 1]`
         * when they are re-used to initialize the solver (default `1.0`).
         */
        get: function () {
            return this.raw.warmstartCoeff;
        },
        set: function (value) {
            this.raw.warmstartCoeff = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "allowedLinearError", {
        /**
         * Amount of penetration the engine wont attempt to correct (default: `0.001m`).
         */
        get: function () {
            return this.raw.allowedLinearError;
        },
        set: function (value) {
            this.raw.allowedLinearError = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "predictionDistance", {
        /**
         * The maximal distance separating two objects that will generate predictive contacts (default: `0.002`).
         */
        get: function () {
            return this.raw.predictionDistance;
        },
        set: function (value) {
            this.raw.predictionDistance = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "allowedAngularError", {
        /**
         * Amount of angular drift of joint limits the engine wont
         * attempt to correct (default: `0.001rad`).
         */
        get: function () {
            return this.raw.allowedAngularError;
        },
        set: function (value) {
            this.raw.allowedAngularError = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "maxLinearCorrection", {
        /**
         * Maximum linear correction during one step of the non-linear position solver (default: `0.2`).
         */
        get: function () {
            return this.raw.maxLinearCorrection;
        },
        set: function (value) {
            this.raw.maxLinearCorrection = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "maxAngularCorrection", {
        /**
         * Maximum angular correction during one step of the non-linear position solver (default: `0.2`).
         */
        get: function () {
            return this.raw.maxAngularCorrection;
        },
        set: function (value) {
            this.raw.maxAngularCorrection = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "maxVelocityIterations", {
        /**
         * Maximum number of iterations performed by the velocity constraints solver (default: `4`).
         */
        get: function () {
            return this.raw.maxVelocityIterations;
        },
        set: function (value) {
            this.raw.maxVelocityIterations = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "maxPositionIterations", {
        /**
         * Maximum number of iterations performed by the position-based constraints solver (default: `1`).
         */
        get: function () {
            return this.raw.maxPositionIterations;
        },
        set: function (value) {
            this.raw.maxPositionIterations = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "minIslandSize", {
        /**
         * Minimum number of dynamic bodies in each active island (default: `128`).
         */
        get: function () {
            return this.raw.minIslandSize;
        },
        set: function (value) {
            this.raw.minIslandSize = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IntegrationParameters.prototype, "maxCcdSubsteps", {
        /**
         * Maximum number of substeps performed by the  solver (default: `1`).
         */
        get: function () {
            return this.raw.maxCcdSubsteps;
        },
        set: function (value) {
            this.raw.maxCcdSubsteps = value;
        },
        enumerable: false,
        configurable: true
    });
    return IntegrationParameters;
}());

//# sourceMappingURL=integration_parameters.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/island_manager.js":
/*!********************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/island_manager.js ***!
  \********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IslandManager": () => (/* binding */ IslandManager)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The CCD solver responsible for resolving Continuous Collision Detection.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `ccdSolver.free()`
 * once you are done using it.
 */
var IslandManager = /** @class */ (function () {
    function IslandManager(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawIslandManager();
    }
    /**
     * Release the WASM memory occupied by this narrow-phase.
     */
    IslandManager.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Applies the given closure to the handle of each active rigid-bodies contained by this set.
     *
     * A rigid-body is active if it is not sleeping, i.e., if it moved recently.
     *
     * @param f - The closure to apply.
     */
    IslandManager.prototype.forEachActiveRigidBodyHandle = function (f) {
        this.raw.forEachActiveRigidBodyHandle(f);
    };
    return IslandManager;
}());

//# sourceMappingURL=island_manager.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/joint.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/joint.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JointType": () => (/* binding */ JointType),
/* harmony export */   "SpringModel": () => (/* binding */ SpringModel),
/* harmony export */   "Joint": () => (/* binding */ Joint),
/* harmony export */   "UnitJoint": () => (/* binding */ UnitJoint),
/* harmony export */   "FixedJoint": () => (/* binding */ FixedJoint),
/* harmony export */   "PrismaticJoint": () => (/* binding */ PrismaticJoint),
/* harmony export */   "BallJoint": () => (/* binding */ BallJoint),
/* harmony export */   "JointParams": () => (/* binding */ JointParams)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_1__, _math__WEBPACK_IMPORTED_MODULE_0__]);
([_raw__WEBPACK_IMPORTED_MODULE_1__, _math__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * An enum grouping all possible types of joints:
 * - `Ball`: A Ball joint that removes all relative linear degrees of freedom between the affected bodies.
 * - `Fixed`: A fixed joint that removes all relative degrees of freedom between the affected bodies.
 * - `Prismatic`: A prismatic joint that removes all degrees of freedom between the affected
 *                bodies except for the translation along one axis.
 * - `Revolute`: (3D only) A revolute joint that removes all degrees of freedom between the affected
 *               bodies except for the rotation along one axis.
 */
var JointType;
(function (JointType) {
    JointType[JointType["Ball"] = 0] = "Ball";
    JointType[JointType["Fixed"] = 1] = "Fixed";
    JointType[JointType["Prismatic"] = 2] = "Prismatic";
})(JointType || (JointType = {}));
var SpringModel;
(function (SpringModel) {
    SpringModel[SpringModel["Disabled"] = 0] = "Disabled";
    SpringModel[SpringModel["VelocityBased"] = 1] = "VelocityBased";
    SpringModel[SpringModel["AccelerationBased"] = 2] = "AccelerationBased";
    SpringModel[SpringModel["ForceBased"] = 3] = "ForceBased";
})(SpringModel || (SpringModel = {}));
var Joint = /** @class */ (function () {
    function Joint(rawSet, handle) {
        this.rawSet = rawSet;
        this.handle = handle;
    }
    /**
     * Checks if this joint is still valid (i.e. that it has
     * not been deleted from the joint set yet).
     */
    Joint.prototype.isValid = function () {
        return this.rawSet.contains(this.handle);
    };
    /**
     * The unique integer identifier of the first rigid-body this joint it attached to.
     */
    Joint.prototype.bodyHandle1 = function () {
        return this.rawSet.jointBodyHandle1(this.handle);
    };
    /**
     * The unique integer identifier of the second rigid-body this joint is attached to.
     */
    Joint.prototype.bodyHandle2 = function () {
        return this.rawSet.jointBodyHandle2(this.handle);
    };
    /**
     * The type of this joint given as a string.
     */
    Joint.prototype.type = function () {
        return this.rawSet.jointType(this.handle);
    };
    /**
     * The position of the first anchor of this joint.
     *
     * The first anchor gives the position of the points application point on the
     * local frame of the first rigid-body it is attached to.
     */
    Joint.prototype.anchor1 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.jointAnchor1(this.handle));
    };
    /**
     * The position of the second anchor of this joint.
     *
     * The second anchor gives the position of the points application point on the
     * local frame of the second rigid-body it is attached to.
     */
    Joint.prototype.anchor2 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.jointAnchor2(this.handle));
    };
    /**
     * The first axis of this joint, if any.
     *
     * For joints where an application axis makes sense (e.g. the revolute and prismatic joins),
     * this returns the application axis on the first rigid-body this joint is attached to, expressed
     * in the local-space of this first rigid-body.
     */
    Joint.prototype.axis1 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.jointAxis1(this.handle));
    };
    /**
     * The second axis of this joint, if any.
     *
     * For joints where an application axis makes sense (e.g. the revolute and prismatic joins),
     * this returns the application axis on the second rigid-body this joint is attached to, expressed
     * in the local-space of this second rigid-body.
     */
    Joint.prototype.axis2 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.jointAxis2(this.handle));
    };
    return Joint;
}());

var UnitJoint = /** @class */ (function (_super) {
    __extends(UnitJoint, _super);
    function UnitJoint() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Are the limits enabled for this joint?
     */
    UnitJoint.prototype.limitsEnabled = function () {
        return this.rawSet.jointLimitsEnabled(this.handle);
    };
    /**
     * The min limit of this joint.
     */
    UnitJoint.prototype.limitsMin = function () {
        return this.rawSet.jointLimitsMin(this.handle);
    };
    /**
     * The max limit of this joint.
     */
    UnitJoint.prototype.limitsMax = function () {
        return this.rawSet.jointLimitsMax(this.handle);
    };
    UnitJoint.prototype.configureMotorModel = function (model) {
        this.rawSet.jointConfigureMotorModel(this.handle, model);
    };
    UnitJoint.prototype.configureMotorVelocity = function (targetVel, factor) {
        this.rawSet.jointConfigureUnitMotorVelocity(this.handle, targetVel, factor);
    };
    UnitJoint.prototype.configureMotorPosition = function (targetPos, stiffness, damping) {
        this.rawSet.jointConfigureUnitMotorPosition(this.handle, targetPos, stiffness, damping);
    };
    UnitJoint.prototype.configureMotor = function (targetPos, targetVel, stiffness, damping) {
        this.rawSet.jointConfigureUnitMotor(this.handle, targetPos, targetVel, stiffness, damping);
    };
    return UnitJoint;
}(Joint));

var FixedJoint = /** @class */ (function (_super) {
    __extends(FixedJoint, _super);
    function FixedJoint() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return FixedJoint;
}(Joint));

var PrismaticJoint = /** @class */ (function (_super) {
    __extends(PrismaticJoint, _super);
    function PrismaticJoint() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return PrismaticJoint;
}(UnitJoint));

// #if DIM2
var BallJoint = /** @class */ (function (_super) {
    __extends(BallJoint, _super);
    function BallJoint() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return BallJoint;
}(UnitJoint));

// #endif
var JointParams = /** @class */ (function () {
    function JointParams() {
    }
    /**
     * Create a new joint descriptor that builds Ball joints.
     *
     * A ball joints allows three relative rotational degrees of freedom
     * by preventing any relative translation between the anchors of the
     * two attached rigid-bodies.
     *
     * @param anchor1 - Point where the joint is attached on the first rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     * @param anchor2 - Point where the joint is attached on the second rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     */
    JointParams.ball = function (anchor1, anchor2) {
        var res = new JointParams();
        res.anchor1 = anchor1;
        res.anchor2 = anchor2;
        res.jointType = JointType.Ball;
        return res;
    };
    /**
     * Creates a new joint descriptor that builds a Fixed joint.
     *
     * A fixed joint removes all the degrees of freedom between the affected bodies, ensuring their
     * anchor and local frames coincide in world-space.
     *
     * @param anchor1 - Point where the joint is attached on the first rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     * @param frame1 - The reference orientation of the joint wrt. the first rigid-body.
     * @param anchor2 - Point where the joint is attached on the second rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     * @param frame2 - The reference orientation of the joint wrt. the second rigid-body.
     */
    JointParams.fixed = function (anchor1, frame1, anchor2, frame2) {
        var res = new JointParams();
        res.anchor1 = anchor1;
        res.anchor2 = anchor2;
        res.frame1 = frame1;
        res.frame2 = frame2;
        res.jointType = JointType.Fixed;
        return res;
    };
    // #if DIM2
    /**
     * Creates a new joint descriptor that builds a Prismatic joint.
     *
     * A prismatic joint removes all the degrees of freedom between the
     * affected bodies, except for the translation along one axis.
     *
     * @param anchor1 - Point where the joint is attached on the first rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     * @param axis1 - Axis of the joint, expressed in the local-space of the first rigid-body it is attached to.
     * @param anchor2 - Point where the joint is attached on the second rigid-body affected by this joint. Expressed in the
     *                  local-space of the rigid-body.
     * @param axis2 - Axis of the joint, expressed in the local-space of the second rigid-body it is attached to.
     */
    JointParams.prismatic = function (anchor1, axis1, anchor2, axis2) {
        var res = new JointParams();
        res.anchor1 = anchor1;
        res.axis1 = axis1;
        res.anchor2 = anchor2;
        res.axis2 = axis2;
        res.jointType = JointType.Prismatic;
        return res;
    };
    // #endif
    JointParams.prototype.intoRaw = function () {
        var rawA1 = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(this.anchor1);
        var rawA2 = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(this.anchor2);
        var rawAx1;
        var rawAx2;
        var result;
        var limitsEnabled = false;
        var limitsMin = 0.0;
        var limitsMax = 0.0;
        switch (this.jointType) {
            case JointType.Ball:
                result = _raw__WEBPACK_IMPORTED_MODULE_1__.RawJointParams.ball(rawA1, rawA2);
                break;
            case JointType.Fixed:
                var rawFra1 = _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.intoRaw(this.frame1);
                var rawFra2 = _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.intoRaw(this.frame2);
                result = _raw__WEBPACK_IMPORTED_MODULE_1__.RawJointParams.fixed(rawA1, rawFra1, rawA2, rawFra2);
                rawFra1.free();
                rawFra2.free();
                break;
            case JointType.Prismatic:
                rawAx1 = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(this.axis1);
                rawAx2 = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(this.axis2);
                if (!!this.limitsEnabled) {
                    limitsEnabled = true;
                    limitsMin = this.limits[0];
                    limitsMax = this.limits[1];
                }
                // #if DIM2
                result = _raw__WEBPACK_IMPORTED_MODULE_1__.RawJointParams.prismatic(rawA1, rawAx1, rawA2, rawAx2, limitsEnabled, limitsMin, limitsMax);
                // #endif
                rawAx1.free();
                rawAx2.free();
                break;
        }
        rawA1.free();
        rawA2.free();
        return result;
    };
    return JointParams;
}());

//# sourceMappingURL=joint.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/joint_set.js":
/*!***************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/joint_set.js ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JointSet": () => (/* binding */ JointSet)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _joint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./joint */ "./node_modules/@dimforge/rapier2d/dynamics/joint.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_joint__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_joint__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);


/**
 * A set of joints.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `jointSet.free()`
 * once you are done using it (and all the joints it created).
 */
var JointSet = /** @class */ (function () {
    function JointSet(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawJointSet();
    }
    /**
     * Release the WASM memory occupied by this joint set.
     */
    JointSet.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Creates a new joint and return its integer handle.
     *
     * @param bodies - The set of rigid-bodies containing the bodies the joint is attached to.
     * @param desc - The joint's parameters.
     * @param parent1 - The handle of the first rigid-body this joint is attached to.
     * @param parent2 - The handle of the second rigid-body this joint is attached to.
     */
    JointSet.prototype.createJoint = function (bodies, desc, parent1, parent2) {
        var rawParams = desc.intoRaw();
        var result = this.raw.createJoint(bodies.raw, rawParams, parent1, parent2);
        rawParams.free();
        return result;
    };
    /**
     * Remove a joint from this set.
     *
     * @param handle - The integer handle of the joint.
     * @param bodies - The set of rigid-bodies containing the rigid-bodies attached by the removed joint.
     * @param wake_up - If `true`, the rigid-bodies attached by the removed joint will be woken-up automatically.
     */
    JointSet.prototype.remove = function (handle, islands, bodies, wake_up) {
        this.raw.remove(handle, islands.raw, bodies.raw, wake_up);
    };
    /**
     * The number of joints on this set.
     */
    JointSet.prototype.len = function () {
        return this.raw.len();
    };
    /**
     * Does this set contain a joint with the given handle?
     *
     * @param handle - The joint handle to check.
     */
    JointSet.prototype.contains = function (handle) {
        return this.raw.contains(handle);
    };
    /**
     * Gets the joint with the given handle.
     *
     * Returns `null` if no joint with the specified handle exists.
     * Note that two distinct calls with the same `handle` will return two
     * different JavaScript objects that both represent the same joint.
     *
     * @param handle - The integer handle of the joint to retrieve.
     */
    JointSet.prototype.get = function (handle) {
        if (this.raw.contains(handle)) {
            switch (this.raw.jointType(handle)) {
                case _joint__WEBPACK_IMPORTED_MODULE_1__.JointType.Ball:
                    return new _joint__WEBPACK_IMPORTED_MODULE_1__.BallJoint(this.raw, handle);
                case _joint__WEBPACK_IMPORTED_MODULE_1__.JointType.Prismatic:
                    return new _joint__WEBPACK_IMPORTED_MODULE_1__.PrismaticJoint(this.raw, handle);
                case _joint__WEBPACK_IMPORTED_MODULE_1__.JointType.Fixed:
                    return new _joint__WEBPACK_IMPORTED_MODULE_1__.FixedJoint(this.raw, handle);
            }
        }
        else {
            return null;
        }
    };
    /**
     * Applies the given closure to each joints contained by this set.
     *
     * @param f - The closure to apply.
     */
    JointSet.prototype.forEachJoint = function (f) {
        var _this = this;
        this.raw.forEachJointHandle(function (handle) {
            f(new _joint__WEBPACK_IMPORTED_MODULE_1__.Joint(_this.raw, handle));
        });
    };
    /**
     * Applies the given closure to the handle of each joints contained by this set.
     *
     * @param f - The closure to apply.
     */
    JointSet.prototype.forEachJointHandle = function (f) {
        this.raw.forEachJointHandle(f);
    };
    return JointSet;
}());

//# sourceMappingURL=joint_set.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body.js":
/*!****************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/rigid_body.js ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RigidBodyType": () => (/* binding */ RigidBodyType),
/* harmony export */   "RigidBody": () => (/* binding */ RigidBody),
/* harmony export */   "RigidBodyDesc": () => (/* binding */ RigidBodyDesc)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_0__]);
_math__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The simulation status of a rigid-body.
 */
// TODO: rename this to RigidBodyType
var RigidBodyType;
(function (RigidBodyType) {
    /**
     * A `RigidBodyType::Dynamic` body can be affected by all external forces.
     */
    RigidBodyType[RigidBodyType["Dynamic"] = 0] = "Dynamic";
    /**
     * A `RigidBodyType::Static` body cannot be affected by external forces.
     */
    RigidBodyType[RigidBodyType["Static"] = 1] = "Static";
    /**
     * A `RigidBodyType::KinematicPositionBased` body cannot be affected by any external forces but can be controlled
     * by the user at the position level while keeping realistic one-way interaction with dynamic bodies.
     *
     * One-way interaction means that a kinematic body can push a dynamic body, but a kinematic body
     * cannot be pushed by anything. In other words, the trajectory of a kinematic body can only be
     * modified by the user and is independent from any contact or joint it is involved in.
     */
    RigidBodyType[RigidBodyType["KinematicPositionBased"] = 2] = "KinematicPositionBased";
    /**
     * A `RigidBodyType::KinematicVelocityBased` body cannot be affected by any external forces but can be controlled
     * by the user at the velocity level while keeping realistic one-way interaction with dynamic bodies.
     *
     * One-way interaction means that a kinematic body can push a dynamic body, but a kinematic body
     * cannot be pushed by anything. In other words, the trajectory of a kinematic body can only be
     * modified by the user and is independent from any contact or joint it is involved in.
     */
    RigidBodyType[RigidBodyType["KinematicVelocityBased"] = 3] = "KinematicVelocityBased";
})(RigidBodyType || (RigidBodyType = {}));
/**
 * A rigid-body.
 */
var RigidBody = /** @class */ (function () {
    function RigidBody(rawSet, handle) {
        this.rawSet = rawSet;
        this.handle = handle;
    }
    /**
     * Checks if this rigid-body is still valid (i.e. that it has
     * not been deleted from the rigid-body set yet.
     */
    RigidBody.prototype.isValid = function () {
        return this.rawSet.contains(this.handle);
    };
    /**
     * Locks or unlocks the ability of this rigid-body to translate.
     *
     * @param locked - If `true`, this rigid-body will no longer translate due to forces and impulses.
     * @param wakeUp - If `true`, this rigid-body will be automatically awaken if it is currently asleep.
     */
    RigidBody.prototype.lockTranslations = function (locked, wakeUp) {
        return this.rawSet.rbLockTranslations(this.handle, locked, wakeUp);
    };
    /**
     * Locks or unlocks the ability of this rigid-body to rotate.
     *
     * @param locked - If `true`, this rigid-body will no longer rotate due to torques and impulses.
     * @param wakeUp - If `true`, this rigid-body will be automatically awaken if it is currently asleep.
     */
    RigidBody.prototype.lockRotations = function (locked, wakeUp) {
        return this.rawSet.rbLockRotations(this.handle, locked, wakeUp);
    };
    /**
     * The dominance group, in [-127, +127] this rigid-body is part of.
     */
    RigidBody.prototype.dominanceGroup = function () {
        return this.rawSet.rbDominanceGroup(this.handle);
    };
    /**
     * Sets the dominance group of this rigid-body.
     *
     * @param group - The dominance group of this rigid-body. Must be a signed integer in the range [-127, +127].
     */
    RigidBody.prototype.setDominanceGroup = function (group) {
        this.rawSet.rbSetDominanceGroup(this.handle, group);
    };
    /**
     * Enable or disable CCD (Continuous Collision Detection) for this rigid-body.
     *
     * @param enabled - If `true`, CCD will be enabled for this rigid-body.
     */
    RigidBody.prototype.enableCcd = function (enabled) {
        this.rawSet.rbEnableCcd(this.handle, enabled);
    };
    /**
     * The world-space translation of this rigid-body.
     */
    RigidBody.prototype.translation = function () {
        var res = this.rawSet.rbTranslation(this.handle);
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(res);
    };
    /**
     * The world-space orientation of this rigid-body.
     */
    RigidBody.prototype.rotation = function () {
        var res = this.rawSet.rbRotation(this.handle);
        return _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.fromRaw(res);
    };
    /**
     * The world-space next translation of this rigid-body.
     *
     * If this rigid-body is kinematic this value is set by the `setNextKinematicTranslation`
     * method and is used for estimating the kinematic body velocity at the next timestep.
     * For non-kinematic bodies, this value is currently unspecified.
     */
    RigidBody.prototype.nextTranslation = function () {
        var res = this.rawSet.rbNextTranslation(this.handle);
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(res);
    };
    /**
     * The world-space next orientation of this rigid-body.
     *
     * If this rigid-body is kinematic this value is set by the `setNextKinematicRotation`
     * method and is used for estimating the kinematic body velocity at the next timestep.
     * For non-kinematic bodies, this value is currently unspecified.
     */
    RigidBody.prototype.nextRotation = function () {
        var res = this.rawSet.rbNextRotation(this.handle);
        return _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.fromRaw(res);
    };
    /**
     * Sets the translation of this rigid-body.
     *
     * @param tra - The world-space position of the rigid-body.
     * @param wakeUp - Forces the rigid-body to wake-up so it is properly affected by forces if it
     *                 wasn't moving before modifying its position.
     */
    RigidBody.prototype.setTranslation = function (tra, wakeUp) {
        // #if DIM2
        this.rawSet.rbSetTranslation(this.handle, tra.x, tra.y, wakeUp);
        // #endif
    };
    /**
     * Sets the linear velocity fo this rigid-body.
     *
     * @param vel - The linear velocity to set.
     * @param wakeUp - Forces the rigid-body to wake-up if it was asleep.
     */
    RigidBody.prototype.setLinvel = function (vel, wakeUp) {
        var rawVel = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(vel);
        this.rawSet.rbSetLinvel(this.handle, rawVel, wakeUp);
        rawVel.free();
    };
    /**
     * The scale factor applied to the gravity affecting
     * this rigid-body.
     */
    RigidBody.prototype.gravityScale = function () {
        return this.rawSet.rbGravityScale(this.handle);
    };
    /**
     * Sets the scale factor applied to the gravity affecting
     * this rigid-body.
     *
     * @param factor - The scale factor to set. A value of 0.0 means
     *   that this rigid-body will on longer be affected by gravity.
     * @param wakeUp - Forces the rigid-body to wake-up if it was asleep.
     */
    RigidBody.prototype.setGravityScale = function (factor, wakeUp) {
        this.rawSet.rbSetGravityScale(this.handle, factor, wakeUp);
    };
    // #if DIM2
    /**
     * Sets the rotation angle of this rigid-body.
     *
     * @param angle - The rotation angle, in radians.
     * @param wakeUp - Forces the rigid-body to wake-up so it is properly affected by forces if it
     * wasn't moving before modifying its position.
     */
    RigidBody.prototype.setRotation = function (angle, wakeUp) {
        this.rawSet.rbSetRotation(this.handle, angle, wakeUp);
    };
    /**
     * Sets the angular velocity fo this rigid-body.
     *
     * @param vel - The angular velocity to set.
     * @param wakeUp - Forces the rigid-body to wake-up if it was asleep.
     */
    RigidBody.prototype.setAngvel = function (vel, wakeUp) {
        this.rawSet.rbSetAngvel(this.handle, vel, wakeUp);
    };
    // #endif
    /**
     * If this rigid body is kinematic, sets its future translation after the next timestep integration.
     *
     * This should be used instead of `rigidBody.setTranslation` to make the dynamic object
     * interacting with this kinematic body behave as expected. Internally, Rapier will compute
     * an artificial velocity for this rigid-body from its current position and its next kinematic
     * position. This velocity will be used to compute forces on dynamic bodies interacting with
     * this body.
     *
     * @param t - The kinematic translation to set.
     */
    RigidBody.prototype.setNextKinematicTranslation = function (t) {
        // #if DIM2
        this.rawSet.rbSetNextKinematicTranslation(this.handle, t.x, t.y);
        // #endif
    };
    // #if DIM2
    /**
     * If this rigid body is kinematic, sets its future rotation after the next timestep integration.
     *
     * This should be used instead of `rigidBody.setRotation` to make the dynamic object
     * interacting with this kinematic body behave as expected. Internally, Rapier will compute
     * an artificial velocity for this rigid-body from its current position and its next kinematic
     * position. This velocity will be used to compute forces on dynamic bodies interacting with
     * this body.
     *
     * @param angle - The kinematic rotation angle, in radians.
     */
    RigidBody.prototype.setNextKinematicRotation = function (angle) {
        this.rawSet.rbSetNextKinematicRotation(this.handle, angle);
    };
    // #endif
    /**
     * The linear velocity of this rigid-body.
     */
    RigidBody.prototype.linvel = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.rbLinvel(this.handle));
    };
    // #if DIM2
    /**
     * The angular velocity of this rigid-body.
     */
    RigidBody.prototype.angvel = function () {
        return this.rawSet.rbAngvel(this.handle);
    };
    // #endif
    /**
     * The mass of this rigid-body.
     */
    RigidBody.prototype.mass = function () {
        return this.rawSet.rbMass(this.handle);
    };
    /**
     * Put this rigid body to sleep.
     *
     * A sleeping body no longer moves and is no longer simulated by the physics engine unless
     * it is waken up. It can be woken manually with `this.wakeUp()` or automatically due to
     * external forces like contacts.
     */
    RigidBody.prototype.sleep = function () {
        this.rawSet.rbSleep(this.handle);
    };
    /**
     * Wakes this rigid-body up.
     *
     * A dynamic rigid-body that does not move during several consecutive frames will
     * be put to sleep by the physics engine, i.e., it will stop being simulated in order
     * to avoid useless computations.
     * This methods forces a sleeping rigid-body to wake-up. This is useful, e.g., before modifying
     * the position of a dynamic body so that it is properly simulated afterwards.
     */
    RigidBody.prototype.wakeUp = function () {
        this.rawSet.rbWakeUp(this.handle);
    };
    /**
     * Is CCD enabled for this rigid-body?
     */
    RigidBody.prototype.isCcdEnabled = function () {
        this.rawSet.rbIsCcdEnabled(this.handle);
    };
    /**
     * The number of colliders attached to this rigid-body.
     */
    RigidBody.prototype.numColliders = function () {
        return this.rawSet.rbNumColliders(this.handle);
    };
    /**
     * Retrieves the handle of the `i-th` collider attached to this rigid-body.
     *
     * @param i - The index of the collider to retrieve. Must be a number in `[0, this.numColliders()[`.
     *         This index is **not** the same as the unique identifier of the collider.
     */
    RigidBody.prototype.collider = function (i) {
        return this.rawSet.rbCollider(this.handle, i);
    };
    /**
     * The status of this rigid-body: static, dynamic, or kinematic.
     */
    RigidBody.prototype.bodyType = function () {
        return this.rawSet.rbBodyType(this.handle);
    };
    /**
     * Is this rigid-body sleeping?
     */
    RigidBody.prototype.isSleeping = function () {
        return this.rawSet.rbIsSleeping(this.handle);
    };
    /**
     * Is the velocity of this rigid-body not zero?
     */
    RigidBody.prototype.isMoving = function () {
        return this.rawSet.rbIsMoving(this.handle);
    };
    /**
     * Is this rigid-body static?
     */
    RigidBody.prototype.isStatic = function () {
        return this.rawSet.rbIsStatic(this.handle);
    };
    /**
     * Is this rigid-body kinematic?
     */
    RigidBody.prototype.isKinematic = function () {
        return this.rawSet.rbIsKinematic(this.handle);
    };
    /**
     * Is this rigid-body dynamic?
     */
    RigidBody.prototype.isDynamic = function () {
        return this.rawSet.rbIsDynamic(this.handle);
    };
    /**
     * The linear damping coefficient of this rigid-body.
     */
    RigidBody.prototype.linearDamping = function () {
        return this.rawSet.rbLinearDamping(this.handle);
    };
    /**
     * The angular damping coefficient of this rigid-body.
     */
    RigidBody.prototype.angularDamping = function () {
        return this.rawSet.rbAngularDamping(this.handle);
    };
    /**
     * Sets the linear damping factor applied to this rigid-body.
     *
     * @param factor - The damping factor to set.
     */
    RigidBody.prototype.setLinearDamping = function (factor) {
        this.rawSet.rbSetLinearDamping(this.handle, factor);
    };
    /**
     * Sets the linear damping factor applied to this rigid-body.
     *
     * @param factor - The damping factor to set.
     */
    RigidBody.prototype.setAngularDamping = function (factor) {
        this.rawSet.rbSetAngularDamping(this.handle, factor);
    };
    /**
     * Applies a force at the center-of-mass of this rigid-body.
     *
     * @param force - the world-space force to apply on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyForce = function (force, wakeUp) {
        var rawForce = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(force);
        this.rawSet.rbApplyForce(this.handle, rawForce, wakeUp);
        rawForce.free();
    };
    /**
     * Applies an impulse at the center-of-mass of this rigid-body.
     *
     * @param impulse - the world-space impulse to apply on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyImpulse = function (impulse, wakeUp) {
        var rawImpulse = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(impulse);
        this.rawSet.rbApplyImpulse(this.handle, rawImpulse, wakeUp);
        rawImpulse.free();
    };
    // #if DIM2
    /**
     * Applies a torque at the center-of-mass of this rigid-body.
     *
     * @param torque - the torque to apply on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyTorque = function (torque, wakeUp) {
        this.rawSet.rbApplyTorque(this.handle, torque, wakeUp);
    };
    // #endif
    // #if DIM2
    /**
     * Applies an impulsive torque at the center-of-mass of this rigid-body.
     *
     * @param torqueImpulse - the torque impulse to apply on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyTorqueImpulse = function (torqueImpulse, wakeUp) {
        this.rawSet.rbApplyTorqueImpulse(this.handle, torqueImpulse, wakeUp);
    };
    // #endif
    /**
     * Applies a force at the given world-space point of this rigid-body.
     *
     * @param force - the world-space force to apply on the rigid-body.
     * @param point - the world-space point where the impulse is to be applied on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyForceAtPoint = function (force, point, wakeUp) {
        var rawForce = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(force);
        var rawPoint = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(point);
        this.rawSet.rbApplyForceAtPoint(this.handle, rawForce, rawPoint, wakeUp);
        rawForce.free();
        rawPoint.free();
    };
    /**
     * Applies an impulse at the given world-space point of this rigid-body.
     *
     * @param impulse - the world-space impulse to apply on the rigid-body.
     * @param point - the world-space point where the impulse is to be applied on the rigid-body.
     * @param wakeUp - should the rigid-body be automatically woken-up?
     */
    RigidBody.prototype.applyImpulseAtPoint = function (impulse, point, wakeUp) {
        var rawImpulse = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(impulse);
        var rawPoint = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.intoRaw(point);
        this.rawSet.rbApplyImpulseAtPoint(this.handle, rawImpulse, rawPoint, wakeUp);
        rawImpulse.free();
        rawPoint.free();
    };
    return RigidBody;
}());

var RigidBodyDesc = /** @class */ (function () {
    function RigidBodyDesc(status) {
        this.status = status;
        this.translation = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.zeros();
        this.rotation = _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.identity();
        this.gravityScale = 1.0;
        this.linvel = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.zeros();
        this.mass = 0.0;
        this.translationsEnabled = true;
        this.centerOfMass = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.zeros();
        // #if DIM2
        this.angvel = 0.0;
        this.principalAngularInertia = 0.0;
        this.rotationsEnabled = true;
        // #endif
        this.linearDamping = 0.0;
        this.angularDamping = 0.0;
        this.canSleep = true;
        this.ccdEnabled = false;
        this.dominanceGroup = 0;
    }
    /**
     * A rigid-body descriptor used to build a dynamic rigid-body.
     */
    RigidBodyDesc.newDynamic = function () {
        return new RigidBodyDesc(RigidBodyType.Dynamic);
    };
    /**
     * A rigid-body descriptor used to build a position-based kinematic rigid-body.
     */
    RigidBodyDesc.newKinematicPositionBased = function () {
        return new RigidBodyDesc(RigidBodyType.KinematicPositionBased);
    };
    /**
     * A rigid-body descriptor used to build a velocity-based kinematic rigid-body.
     */
    RigidBodyDesc.newKinematicVelocityBased = function () {
        return new RigidBodyDesc(RigidBodyType.KinematicVelocityBased);
    };
    /**
     * A rigid-body descriptor used to build a static rigid-body.
     */
    RigidBodyDesc.newStatic = function () {
        return new RigidBodyDesc(RigidBodyType.Static);
    };
    RigidBodyDesc.prototype.setDominanceGroup = function (group) {
        this.dominanceGroup = group;
        return this;
    };
    // #if DIM2
    /**
     * Sets the initial translation of the rigid-body to create.
     */
    RigidBodyDesc.prototype.setTranslation = function (x, y) {
        if (typeof x != "number" || typeof y != "number")
            throw TypeError("The translation components must be numbers.");
        this.translation = { x: x, y: y };
        return this;
    };
    // #endif
    /**
     * Sets the initial rotation of the rigid-body to create.
     *
     * @param rot - The rotation to set.
     */
    RigidBodyDesc.prototype.setRotation = function (rot) {
        this.rotation = rot;
        return this;
    };
    /**
     * Sets the scale factor applied to the gravity affecting
     * the rigid-body being built.
     *
     * @param scale - The scale factor. Set this to `0.0` if the rigid-body
     *   needs to ignore gravity.
     */
    RigidBodyDesc.prototype.setGravityScale = function (scale) {
        this.gravityScale = scale;
        return this;
    };
    /**
     * Sets the initial mass of the rigid-body being built, before adding colliders' contributions.
     *
     * @param mass − The initial mass of the rigid-body to create.
     */
    RigidBodyDesc.prototype.setAdditionalMass = function (mass) {
        this.mass = mass;
        return this;
    };
    /**
     * Locks all translations that would have resulted from forces on
     * the created rigid-body.
     */
    RigidBodyDesc.prototype.lockTranslations = function () {
        this.translationsEnabled = false;
        return this;
    };
    // #if DIM2
    /**
     * Sets the initial linear velocity of the rigid-body to create.
     *
     * @param x - The linear velocity to set along the `x` axis.
     * @param y - The linear velocity to set along the `y` axis.
     */
    RigidBodyDesc.prototype.setLinvel = function (x, y) {
        if (typeof x != "number" || typeof y != "number")
            throw TypeError("The linvel components must be numbers.");
        this.linvel = { x: x, y: y };
        return this;
    };
    /**
     * Sets the initial angular velocity of the rigid-body to create.
     *
     * @param vel - The angular velocity to set.
     */
    RigidBodyDesc.prototype.setAngvel = function (vel) {
        this.angvel = vel;
        return this;
    };
    /**
     * Sets the mass properties of the rigid-body being built.
     *
     * Note that the final mass properties of the rigid-bodies depends
     * on the initial mass-properties of the rigid-body (set by this method)
     * to which is added the contributions of all the colliders with non-zero density
     * attached to this rigid-body.
     *
     * Therefore, if you want your provided mass properties to be the final
     * mass properties of your rigid-body, don't attach colliders to it, or
     * only attach colliders with densities equal to zero.
     *
     * @param mass − The initial mass of the rigid-body to create.
     * @param centerOfMass − The initial center-of-mass of the rigid-body to create.
     * @param principalAngularInertia − The initial principal angular inertia of the rigid-body to create.
     */
    RigidBodyDesc.prototype.setAdditionalMassProperties = function (mass, centerOfMass, principalAngularInertia) {
        this.mass = mass;
        this.centerOfMass = centerOfMass;
        this.principalAngularInertia = principalAngularInertia;
        return this;
    };
    /**
     * Sets the mass properties of the rigid-body being built.
     *
     * @param principalAngularInertia − The initial principal angular inertia of the rigid-body to create.
     */
    RigidBodyDesc.prototype.setAdditionalPrincipalAngularInertia = function (principalAngularInertia) {
        this.principalAngularInertia = principalAngularInertia;
        return this;
    };
    /**
     * Locks all rotations that would have resulted from forces on
     * the created rigid-body.
     */
    RigidBodyDesc.prototype.lockRotations = function () {
        this.rotationsEnabled = false;
        return this;
    };
    // #endif
    /**
     * Sets the linear damping of the rigid-body to create.
     *
     * This will progressively slowdown the translational movement of the rigid-body.
     *
     * @param damping - The angular damping coefficient. Should be >= 0. The higher this
     *                  value is, the stronger the translational slowdown will be.
     */
    RigidBodyDesc.prototype.setLinearDamping = function (damping) {
        this.linearDamping = damping;
        return this;
    };
    /**
     * Sets the angular damping of the rigid-body to create.
     *
     * This will progressively slowdown the rotational movement of the rigid-body.
     *
     * @param damping - The angular damping coefficient. Should be >= 0. The higher this
     *                  value is, the stronger the rotational slowdown will be.
     */
    RigidBodyDesc.prototype.setAngularDamping = function (damping) {
        this.angularDamping = damping;
        return this;
    };
    /**
     * Sets whether or not the rigid-body to create can sleep.
     *
     * @param can - true if the rigid-body can sleep, false if it can't.
     */
    RigidBodyDesc.prototype.setCanSleep = function (can) {
        this.canSleep = can;
        return this;
    };
    /**
     * Sets whether Continuous Collision Detection (CCD) is enabled for this rigid-body.
     *
     * @param enabled - true if the rigid-body has CCD enabled.
     */
    RigidBodyDesc.prototype.setCcdEnabled = function (enabled) {
        this.ccdEnabled = enabled;
        return this;
    };
    return RigidBodyDesc;
}());

//# sourceMappingURL=rigid_body.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body_set.js":
/*!********************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/dynamics/rigid_body_set.js ***!
  \********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RigidBodySet": () => (/* binding */ RigidBodySet)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _rigid_body__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rigid_body */ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_rigid_body__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_rigid_body__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);



/**
 * A set of rigid bodies that can be handled by a physics pipeline.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `jointSet.free()`
 * once you are done using it (and all the rigid-bodies it created).
 */
var RigidBodySet = /** @class */ (function () {
    function RigidBodySet(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawRigidBodySet();
    }
    /**
     * Release the WASM memory occupied by this rigid-body set.
     */
    RigidBodySet.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Creates a new rigid-body and return its integer handle.
     *
     * @param desc - The description of the rigid-body to create.
     */
    RigidBodySet.prototype.createRigidBody = function (desc) {
        var rawTra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(desc.translation);
        var rawRot = _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps.intoRaw(desc.rotation);
        var rawLv = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(desc.linvel);
        var rawCom = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(desc.centerOfMass);
        var handle = this.raw.createRigidBody(rawTra, rawRot, desc.gravityScale, desc.mass, desc.translationsEnabled, rawCom, rawLv, 
        // #if DIM2
        desc.angvel, desc.principalAngularInertia, desc.rotationsEnabled, 
        // #endif
        desc.linearDamping, desc.angularDamping, desc.status, desc.canSleep, desc.ccdEnabled, desc.dominanceGroup);
        rawTra.free();
        rawRot.free();
        rawLv.free();
        rawCom.free();
        return handle;
    };
    /**
     * Removes a rigid-body from this set.
     *
     * This will also remove all the colliders and joints attached to the rigid-body.
     *
     * @param handle - The integer handle of the rigid-body to remove.
     * @param colliders - The set of colliders that may contain colliders attached to the removed rigid-body.
     * @param joints - The set of joints that may contain joints attached to the removed rigid-body.
     */
    RigidBodySet.prototype.remove = function (handle, islands, colliders, joints) {
        this.raw.remove(handle, islands.raw, colliders.raw, joints.raw);
    };
    /**
     * The number of rigid-bodies on this set.
     */
    RigidBodySet.prototype.len = function () {
        return this.raw.len();
    };
    /**
     * Does this set contain a rigid-body with the given handle?
     *
     * @param handle - The rigid-body handle to check.
     */
    RigidBodySet.prototype.contains = function (handle) {
        return this.raw.contains(handle);
    };
    /**
     * Gets the rigid-body with the given handle.
     *
     * @param handle - The handle of the rigid-body to retrieve.
     */
    RigidBodySet.prototype.get = function (handle) {
        if (this.raw.contains(handle)) {
            return new _rigid_body__WEBPACK_IMPORTED_MODULE_2__.RigidBody(this.raw, handle);
        }
        else {
            return null;
        }
    };
    /**
     * Applies the given closure to each rigid-body contained by this set.
     *
     * @param f - The closure to apply.
     */
    RigidBodySet.prototype.forEachRigidBody = function (f) {
        var _this = this;
        this.forEachRigidBodyHandle(function (handle) {
            f(new _rigid_body__WEBPACK_IMPORTED_MODULE_2__.RigidBody(_this.raw, handle));
        });
    };
    /**
     * Applies the given closure to the handle of each rigid-body contained by this set.
     *
     * @param f - The closure to apply.
     */
    RigidBodySet.prototype.forEachRigidBodyHandle = function (f) {
        this.raw.forEachRigidBodyHandle(f);
    };
    /**
     * Applies the given closure to each active rigid-bodies contained by this set.
     *
     * A rigid-body is active if it is not sleeping, i.e., if it moved recently.
     *
     * @param f - The closure to apply.
     */
    RigidBodySet.prototype.forEachActiveRigidBody = function (islands, f) {
        var _this = this;
        islands.forEachActiveRigidBodyHandle(function (handle) {
            f(new _rigid_body__WEBPACK_IMPORTED_MODULE_2__.RigidBody(_this.raw, handle));
        });
    };
    return RigidBodySet;
}());

//# sourceMappingURL=rigid_body_set.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/exports.js":
/*!****************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/exports.js ***!
  \****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "version": () => (/* binding */ version),
/* harmony export */   "RotationOps": () => (/* reexport safe */ _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps),
/* harmony export */   "Vector2": () => (/* reexport safe */ _math__WEBPACK_IMPORTED_MODULE_1__.Vector2),
/* harmony export */   "VectorOps": () => (/* reexport safe */ _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps),
/* harmony export */   "BallJoint": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.BallJoint),
/* harmony export */   "CCDSolver": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.CCDSolver),
/* harmony export */   "CoefficientCombineRule": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.CoefficientCombineRule),
/* harmony export */   "FixedJoint": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.FixedJoint),
/* harmony export */   "IntegrationParameters": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.IntegrationParameters),
/* harmony export */   "IslandManager": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.IslandManager),
/* harmony export */   "Joint": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.Joint),
/* harmony export */   "JointParams": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.JointParams),
/* harmony export */   "JointSet": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.JointSet),
/* harmony export */   "JointType": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.JointType),
/* harmony export */   "PrismaticJoint": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.PrismaticJoint),
/* harmony export */   "RigidBody": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.RigidBody),
/* harmony export */   "RigidBodyDesc": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.RigidBodyDesc),
/* harmony export */   "RigidBodySet": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.RigidBodySet),
/* harmony export */   "RigidBodyType": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.RigidBodyType),
/* harmony export */   "SpringModel": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.SpringModel),
/* harmony export */   "UnitJoint": () => (/* reexport safe */ _dynamics__WEBPACK_IMPORTED_MODULE_2__.UnitJoint),
/* harmony export */   "ActiveCollisionTypes": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ActiveCollisionTypes),
/* harmony export */   "Ball": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Ball),
/* harmony export */   "BroadPhase": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.BroadPhase),
/* harmony export */   "Capsule": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Capsule),
/* harmony export */   "Collider": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Collider),
/* harmony export */   "ColliderDesc": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ColliderDesc),
/* harmony export */   "ColliderSet": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ColliderSet),
/* harmony export */   "ConvexPolygon": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ConvexPolygon),
/* harmony export */   "Cuboid": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Cuboid),
/* harmony export */   "Heightfield": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Heightfield),
/* harmony export */   "NarrowPhase": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.NarrowPhase),
/* harmony export */   "PointColliderProjection": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.PointColliderProjection),
/* harmony export */   "Polyline": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Polyline),
/* harmony export */   "Ray": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Ray),
/* harmony export */   "RayColliderIntersection": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.RayColliderIntersection),
/* harmony export */   "RayColliderToi": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.RayColliderToi),
/* harmony export */   "RoundConvexPolygon": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.RoundConvexPolygon),
/* harmony export */   "RoundCuboid": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.RoundCuboid),
/* harmony export */   "RoundTriangle": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.RoundTriangle),
/* harmony export */   "Segment": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Segment),
/* harmony export */   "ShapeColliderTOI": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ShapeColliderTOI),
/* harmony export */   "ShapeType": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.ShapeType),
/* harmony export */   "TempContactManifold": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.TempContactManifold),
/* harmony export */   "TriMesh": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.TriMesh),
/* harmony export */   "Triangle": () => (/* reexport safe */ _geometry__WEBPACK_IMPORTED_MODULE_3__.Triangle),
/* harmony export */   "ActiveEvents": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.ActiveEvents),
/* harmony export */   "ActiveHooks": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.ActiveHooks),
/* harmony export */   "EventQueue": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.EventQueue),
/* harmony export */   "PhysicsPipeline": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.PhysicsPipeline),
/* harmony export */   "SerializationPipeline": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.SerializationPipeline),
/* harmony export */   "SolverFlags": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.SolverFlags),
/* harmony export */   "World": () => (/* reexport safe */ _pipeline__WEBPACK_IMPORTED_MODULE_4__.World)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/index.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ "./node_modules/@dimforge/rapier2d/geometry/index.js");
/* harmony import */ var _pipeline__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/index.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pipeline__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _dynamics__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_pipeline__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _dynamics__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);

function version() {
    return (0,_raw__WEBPACK_IMPORTED_MODULE_0__.version)();
}





//# sourceMappingURL=exports.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/broad_phase.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/broad_phase.js ***!
  \*****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BroadPhase": () => (/* binding */ BroadPhase)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The broad-phase used for coarse collision-detection.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `broadPhase.free()`
 * once you are done using it.
 */
var BroadPhase = /** @class */ (function () {
    function BroadPhase(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawBroadPhase();
    }
    /**
     * Release the WASM memory occupied by this broad-phase.
     */
    BroadPhase.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    return BroadPhase;
}());

//# sourceMappingURL=broad_phase.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/collider.js":
/*!**************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/collider.js ***!
  \**************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActiveCollisionTypes": () => (/* binding */ ActiveCollisionTypes),
/* harmony export */   "Collider": () => (/* binding */ Collider),
/* harmony export */   "ColliderDesc": () => (/* binding */ ColliderDesc)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/coefficient_combine_rule.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shape */ "./node_modules/@dimforge/rapier2d/geometry/shape.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shape__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_0__]);
([_shape__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);



/// Flags affecting whether or not collision-detection happens between two colliders
/// depending on the type of rigid-bodies they are attached to.
var ActiveCollisionTypes;
(function (ActiveCollisionTypes) {
    /// Enable collision-detection between a collider attached to a dynamic body
    /// and another collider attached to a dynamic body.
    ActiveCollisionTypes[ActiveCollisionTypes["DYNAMIC_DYNAMIC"] = 1] = "DYNAMIC_DYNAMIC";
    /// Enable collision-detection between a collider attached to a dynamic body
    /// and another collider attached to a kinematic body.
    ActiveCollisionTypes[ActiveCollisionTypes["DYNAMIC_KINEMATIC"] = 12] = "DYNAMIC_KINEMATIC";
    /// Enable collision-detection between a collider attached to a dynamic body
    /// and another collider attached to a static body (or not attached to any body).
    ActiveCollisionTypes[ActiveCollisionTypes["DYNAMIC_STATIC"] = 2] = "DYNAMIC_STATIC";
    /// Enable collision-detection between a collider attached to a kinematic body
    /// and another collider attached to a kinematic body.
    ActiveCollisionTypes[ActiveCollisionTypes["KINEMATIC_KINEMATIC"] = 52224] = "KINEMATIC_KINEMATIC";
    /// Enable collision-detection between a collider attached to a kinematic body
    /// and another collider attached to a static body (or not attached to any body).
    ActiveCollisionTypes[ActiveCollisionTypes["KINEMATIC_STATIC"] = 8704] = "KINEMATIC_STATIC";
    /// Enable collision-detection between a collider attached to a static body (or
    /// not attached to any body) and another collider attached to a static body (or
    /// not attached to any body).
    ActiveCollisionTypes[ActiveCollisionTypes["STATIC_STATIC"] = 32] = "STATIC_STATIC";
    /// The default active collision types, enabling collisions between a dynamic body
    /// and another body of any type, but not enabling collisions between two non-dynamic bodies.
    ActiveCollisionTypes[ActiveCollisionTypes["DEFAULT"] = 15] = "DEFAULT";
    /// Enable collisions between any kind of rigid-bodies (including between two non-dynamic bodies).
    ActiveCollisionTypes[ActiveCollisionTypes["ALL"] = 60943] = "ALL";
})(ActiveCollisionTypes || (ActiveCollisionTypes = {}));
/**
 * A geometric entity that can be attached to a body so it can be affected
 * by contacts and proximity queries.
 */
var Collider = /** @class */ (function () {
    function Collider(rawSet, handle) {
        this.rawSet = rawSet;
        this.handle = handle;
    }
    /**
     * Checks if this collider is still valid (i.e. that it has
     * not been deleted from the collider set yet.
     */
    Collider.prototype.isValid = function () {
        return this.rawSet.contains(this.handle);
    };
    /**
     * The world-space translation of this rigid-body.
     */
    Collider.prototype.translation = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.coTranslation(this.handle));
    };
    /**
     * The world-space orientation of this rigid-body.
     */
    Collider.prototype.rotation = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.fromRaw(this.rawSet.coRotation(this.handle));
    };
    /**
     * Is this collider a sensor?
     */
    Collider.prototype.isSensor = function () {
        return this.rawSet.coIsSensor(this.handle);
    };
    Collider.prototype.setSensor = function (isSensor) {
        this.rawSet.coSetSensor(this.handle, isSensor);
    };
    Collider.prototype.setShape = function (shape) {
        var rawShape = shape.intoRaw();
        this.rawSet.coSetShape(this.handle, rawShape);
        rawShape.free();
    };
    /**
     * Sets the restitution coefficient of the collider to be created.
     *
     * @param restitution - The restitution coefficient in `[0, 1]`. A value of 0 (the default) means no bouncing behavior
     *                   while 1 means perfect bouncing (though energy may still be lost due to numerical errors of the
     *                   constraints solver).
     */
    Collider.prototype.setRestitution = function (restitution) {
        this.rawSet.coSetRestitution(this.handle, restitution);
    };
    /**
     * Sets the friction coefficient of the collider to be created.
     *
     * @param friction - The friction coefficient. Must be greater or equal to 0. This is generally smaller than 1. The
     *                   higher the coefficient, the stronger friction forces will be for contacts with the collider
     *                   being built.
     */
    Collider.prototype.setFriction = function (friction) {
        this.rawSet.coSetFriction(this.handle, friction);
    };
    /**
     * Gets the rule used to combine the friction coefficients of two colliders
     * colliders involved in a contact.
     */
    Collider.prototype.frictionCombineRule = function () {
        return this.rawSet.coFrictionCombineRule(this.handle);
    };
    /**
     * Sets the rule used to combine the friction coefficients of two colliders
     * colliders involved in a contact.
     *
     * @param rule − The combine rule to apply.
     */
    Collider.prototype.setFrictionCombineRule = function (rule) {
        this.rawSet.coSetFrictionCombineRule(this.handle, rule);
    };
    /**
     * Gets the rule used to combine the restitution coefficients of two colliders
     * colliders involved in a contact.
     */
    Collider.prototype.restitutionCombineRule = function () {
        return this.rawSet.coRestitutionCombineRule(this.handle);
    };
    /**
     * Sets the rule used to combine the restitution coefficients of two colliders
     * colliders involved in a contact.
     *
     * @param rule − The combine rule to apply.
     */
    Collider.prototype.setRestitutionCombineRule = function (rule) {
        this.rawSet.coSetRestitutionCombineRule(this.handle, rule);
    };
    /**
     * Sets the collision groups used by this collider.
     *
     * Two colliders will interact iff. their collision groups are compatible.
     * See the documentation of `InteractionGroups` for details on teh used bit pattern.
     *
     * @param groups - The collision groups used for the collider being built.
     */
    Collider.prototype.setCollisionGroups = function (groups) {
        this.rawSet.coSetCollisionGroups(this.handle, groups);
    };
    /**
     * Sets the solver groups used by this collider.
     *
     * Forces between two colliders in contact will be computed iff their solver
     * groups are compatible.
     * See the documentation of `InteractionGroups` for details on the used bit pattern.
     *
     * @param groups - The solver groups used for the collider being built.
     */
    Collider.prototype.setSolverGroups = function (groups) {
        this.rawSet.coSetSolverGroups(this.handle, groups);
    };
    /**
     * Get the physics hooks active for this collider.
     */
    Collider.prototype.activeHooks = function () {
        this.rawSet.coActiveHooks(this.handle);
    };
    /**
     * Set the physics hooks active for this collider.
     *
     * Use this to enable custom filtering rules for contact/intersecstion pairs involving this collider.
     *
     * @param activeHooks - The hooks active for contact/intersection pairs involving this collider.
     */
    Collider.prototype.setActiveHooks = function (activeHooks) {
        this.rawSet.coSetActiveHooks(this.handle, activeHooks);
    };
    /**
     * The events active for this collider.
     */
    Collider.prototype.activeEvents = function () {
        return this.rawSet.coActiveEvents(this.handle);
    };
    /**
     * Set the events active for this collider.
     *
     * Use this to enable contact and/or intersection event reporting for this collider.
     *
     * @param activeEvents - The events active for contact/intersection pairs involving this collider.
     */
    Collider.prototype.setActiveEvents = function (activeEvents) {
        this.rawSet.coSetActiveEvents(this.handle, activeEvents);
    };
    /**
     * Gets the collision types active for this collider.
     */
    Collider.prototype.activeCollisionTypes = function () {
        return this.rawSet.coActiveCollisionTypes(this.handle);
    };
    /**
     * Set the collision types active for this collider.
     *
     * @param activeCollisionTypes - The hooks active for contact/intersection pairs involving this collider.
     */
    Collider.prototype.setActiveCollisionTypes = function (activeCollisionTypes) {
        this.rawSet.coSetActiveCollisionTypes(this.handle, activeCollisionTypes);
    };
    /**
     * Sets the translation of this collider.
     *
     * @param tra - The world-space position of the collider.
     */
    Collider.prototype.setTranslation = function (tra) {
        // #if DIM2
        this.rawSet.coSetTranslation(this.handle, tra.x, tra.y);
        // #endif
    };
    /**
     * Sets the translation of this collider relative to its parent rigid-body.
     *
     * Does nothing if this collider isn't attached to a rigid-body.
     *
     * @param tra - The new translation of the collider relative to its parent.
     */
    Collider.prototype.setTranslationWrtParent = function (tra) {
        // #if DIM2
        this.rawSet.coSetTranslationWrtParent(this.handle, tra.x, tra.y);
        // #endif
    };
    // #if DIM2
    /**
     * Sets the rotation angle of this collider.
     *
     * @param angle - The rotation angle, in radians.
     */
    Collider.prototype.setRotation = function (angle) {
        this.rawSet.coSetRotation(this.handle, angle);
    };
    /**
     * Sets the rotation angle of this collider relative to its parent rigid-body.
     *
     * Does nothing if this collider isn't attached to a rigid-body.
     *
     * @param angle - The rotation angle, in radians.
     */
    Collider.prototype.setRotationWrtParent = function (angle) {
        this.rawSet.coSetRotationWrtParent(this.handle, angle);
    };
    // #endif
    /**
     * The type of the shape of this collider.
     */
    Collider.prototype.shapeType = function () {
        return this.rawSet.coShapeType(this.handle);
    };
    /**
     * The half-extents of this collider if it is a cuboid shape.
     */
    Collider.prototype.halfExtents = function () {
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(this.rawSet.coHalfExtents(this.handle));
    };
    /**
     * The radius of this collider if it is a ball, cylinder, capsule, or cone shape.
     */
    Collider.prototype.radius = function () {
        return this.rawSet.coRadius(this.handle);
    };
    /**
     * The radius of the round edges of this collider if it is a round cylinder.
     */
    Collider.prototype.roundRadius = function () {
        return this.rawSet.coRoundRadius(this.handle);
    };
    /**
     * The half height of this collider if it is a cylinder, capsule, or cone shape.
     */
    Collider.prototype.halfHeight = function () {
        return this.rawSet.coHalfHeight(this.handle);
    };
    /**
     * If this collider has a triangle mesh, polyline, convex polygon, or convex polyhedron shape,
     * this returns the vertex buffer of said shape.
     */
    Collider.prototype.vertices = function () {
        return this.rawSet.coVertices(this.handle);
    };
    /**
     * If this collider has a triangle mesh, polyline, or convex polyhedron shape,
     * this returns the index buffer of said shape.
     */
    Collider.prototype.indices = function () {
        return this.rawSet.coIndices(this.handle);
    };
    /**
     * If this collider has a heightfield shape, this returns the heights buffer of
     * the heightfield.
     * In 3D, the returned height matrix is provided in column-major order.
     */
    Collider.prototype.heightfieldHeights = function () {
        return this.rawSet.coHeightfieldHeights(this.handle);
    };
    /**
     * If this collider has a heightfield shape, this returns the scale
     * applied to it.
     */
    Collider.prototype.heightfieldScale = function () {
        var scale = this.rawSet.coHeightfieldScale(this.handle);
        return _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(scale);
    };
    /**
     * The unique integer identifier of the rigid-body this collider is attached to.
     */
    Collider.prototype.parent = function () {
        return this.rawSet.coParent(this.handle);
    };
    /**
     * The friction coefficient of this collider.
     */
    Collider.prototype.friction = function () {
        return this.rawSet.coFriction(this.handle);
    };
    /**
     * The density of this collider.
     */
    Collider.prototype.density = function () {
        return this.rawSet.coDensity(this.handle);
    };
    /**
     * The collision groups of this collider.
     */
    Collider.prototype.collisionGroups = function () {
        return this.rawSet.coCollisionGroups(this.handle);
    };
    /**
     * The solver groups of this collider.
     */
    Collider.prototype.solverGroups = function () {
        return this.rawSet.coSolverGroups(this.handle);
    };
    return Collider;
}());

var ColliderDesc = /** @class */ (function () {
    /**
     * Initializes a collider descriptor from the collision shape.
     *
     * @param shape - The shape of the collider being built.
     */
    function ColliderDesc(shape) {
        this.shape = shape;
        this.useMassProps = false;
        this.density = 1.0;
        this.friction = 0.5;
        this.restitution = 0.0;
        this.rotation = _math__WEBPACK_IMPORTED_MODULE_0__.RotationOps.identity();
        this.translation = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.zeros();
        this.isSensor = false;
        this.collisionGroups = 4294967295;
        this.solverGroups = 4294967295;
        this.frictionCombineRule = _dynamics__WEBPACK_IMPORTED_MODULE_1__.CoefficientCombineRule.Average;
        this.restitutionCombineRule = _dynamics__WEBPACK_IMPORTED_MODULE_1__.CoefficientCombineRule.Average;
        this.activeCollisionTypes = ActiveCollisionTypes.DEFAULT;
        this.activeEvents = 0;
        this.activeHooks = 0;
        this.mass = 0.0;
        this.centerOfMass = _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.zeros();
        // #if DIM2
        this.principalAngularInertia = 0.0;
        this.rotationsEnabled = true;
        // #endif
    }
    /**
     * Create a new collider descriptor with a ball shape.
     *
     * @param radius - The radius of the ball.
     */
    ColliderDesc.ball = function (radius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Ball(radius);
        return new ColliderDesc(shape);
    };
    /**
     * Create a new collider descriptor with a capsule shape.
     *
     * @param halfHeight - The half-height of the capsule, along the `y` axis.
     * @param radius - The radius of the capsule basis.
     */
    ColliderDesc.capsule = function (halfHeight, radius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Capsule(halfHeight, radius);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new segment shape.
     *
     * @param a - The first point of the segment.
     * @param b - The second point of the segment.
     */
    ColliderDesc.segment = function (a, b) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Segment(a, b);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new triangle shape.
     *
     * @param a - The first point of the triangle.
     * @param b - The second point of the triangle.
     * @param c - The third point of the triangle.
     */
    ColliderDesc.triangle = function (a, b, c) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Triangle(a, b, c);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new triangle shape with round corners.
     *
     * @param a - The first point of the triangle.
     * @param b - The second point of the triangle.
     * @param c - The third point of the triangle.
     * @param borderRadius - The radius of the borders of this triangle. In 3D,
     *   this is also equal to half the thickness of the triangle.
     */
    ColliderDesc.roundTriangle = function (a, b, c, borderRadius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.RoundTriangle(a, b, c, borderRadius);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor with a polyline shape.
     *
     * @param vertices - The coordinates of the polyline's vertices.
     * @param indices - The indices of the polyline's segments. If this is `null`,
     *    the vertices are assumed to describe a line strip.
     */
    ColliderDesc.polyline = function (vertices, indices) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Polyline(vertices, indices);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor with a triangle mesh shape.
     *
     * @param vertices - The coordinates of the triangle mesh's vertices.
     * @param indices - The indices of the triangle mesh's triangles.
     */
    ColliderDesc.trimesh = function (vertices, indices) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.TriMesh(vertices, indices);
        return new ColliderDesc(shape);
    };
    // #if DIM2
    /**
     * Creates a new collider descriptor with a rectangular shape.
     *
     * @param hx - The half-width of the rectangle along its local `x` axis.
     * @param hy - The half-width of the rectangle along its local `y` axis.
     */
    ColliderDesc.cuboid = function (hx, hy) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Cuboid(hx, hy);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor with a rectangular shape with round borders.
     *
     * @param hx - The half-width of the rectangle along its local `x` axis.
     * @param hy - The half-width of the rectangle along its local `y` axis.
     * @param borderRadius - The radius of the cuboid's borders.
     */
    ColliderDesc.roundCuboid = function (hx, hy, borderRadius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.RoundCuboid(hx, hy, borderRadius);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor with a heightfield shape.
     *
     * @param heights - The heights of the heightfield, along its local `y` axis.
     * @param scale - The scale factor applied to the heightfield.
     */
    ColliderDesc.heightfield = function (heights, scale) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.Heightfield(heights, scale);
        return new ColliderDesc(shape);
    };
    /**
     * Computes the convex-hull of the given points and use the resulting
     * convex polygon as the shape for this new collider descriptor.
     *
     * @param points - The point that will be used to compute the convex-hull.
     */
    ColliderDesc.convexHull = function (points) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.ConvexPolygon(points, false);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor that uses the given set of points assumed
     * to form a convex polyline (no convex-hull computation will be done).
     *
     * @param vertices - The vertices of the convex polyline.
     */
    ColliderDesc.convexPolyline = function (vertices) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.ConvexPolygon(vertices, true);
        return new ColliderDesc(shape);
    };
    /**
     * Computes the convex-hull of the given points and use the resulting
     * convex polygon as the shape for this new collider descriptor. A
     * border is added to that convex polygon to give it round corners.
     *
     * @param points - The point that will be used to compute the convex-hull.
     * @param borderRadius - The radius of the round border added to the convex polygon.
     */
    ColliderDesc.roundConvexHull = function (points, borderRadius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.RoundConvexPolygon(points, borderRadius, false);
        return new ColliderDesc(shape);
    };
    /**
     * Creates a new collider descriptor that uses the given set of points assumed
     * to form a round convex polyline (no convex-hull computation will be done).
     *
     * @param vertices - The vertices of the convex polyline.
     * @param borderRadius - The radius of the round border added to the convex polyline.
     */
    ColliderDesc.roundConvexPolyline = function (vertices, borderRadius) {
        var shape = new _shape__WEBPACK_IMPORTED_MODULE_2__.RoundConvexPolygon(vertices, borderRadius, true);
        return new ColliderDesc(shape);
    };
    // #endif
    // #if DIM2
    /**
     * Sets the position of the collider to be created relative to the rigid-body it is attached to.
     */
    ColliderDesc.prototype.setTranslation = function (x, y) {
        if (typeof x != "number" || typeof y != "number")
            throw TypeError("The translation components must be numbers.");
        this.translation = { x: x, y: y };
        return this;
    };
    // #endif
    /**
     * Sets the rotation of the collider to be created relative to the rigid-body it is attached to.
     *
     * @param rot - The rotation of the collider to be created relative to the rigid-body it is attached to.
     */
    ColliderDesc.prototype.setRotation = function (rot) {
        this.rotation = rot;
        return this;
    };
    /**
     * Sets whether or not the collider being created is a sensor.
     *
     * A sensor collider does not take part of the physics simulation, but generates
     * proximity events.
     *
     * @param is - Set to `true` of the collider built is to be a sensor.
     */
    ColliderDesc.prototype.setSensor = function (is) {
        this.isSensor = is;
        return this;
    };
    /**
     * Sets the density of the collider being built.
     *
     * @param density - The density to set, must be greater or equal to 0. A density of 0 means that this collider
     *                  will not affect the mass or angular inertia of the rigid-body it is attached to.
     */
    ColliderDesc.prototype.setDensity = function (density) {
        this.useMassProps = false;
        this.density = density;
        return this;
    };
    // #if DIM2
    /**
     * Sets the mass properties of the collider being built.
     *
     * This replaces the mass-properties automatically computed from the collider's density and shape.
     * These mass-properties will be added to the mass-properties of the rigid-body this collider will be attached to.
     *
     * @param mass − The mass of the collider to create.
     * @param centerOfMass − The center-of-mass of the collider to create.
     * @param principalAngularInertia − The principal angular inertia of the collider to create.
     */
    ColliderDesc.prototype.setMassProperties = function (mass, centerOfMass, principalAngularInertia) {
        this.useMassProps = true;
        this.mass = mass;
        this.centerOfMass = centerOfMass;
        this.principalAngularInertia = principalAngularInertia;
        return this;
    };
    // #endif
    /**
     * Sets the restitution coefficient of the collider to be created.
     *
     * @param restitution - The restitution coefficient in `[0, 1]`. A value of 0 (the default) means no bouncing behavior
     *                   while 1 means perfect bouncing (though energy may still be lost due to numerical errors of the
     *                   constraints solver).
     */
    ColliderDesc.prototype.setRestitution = function (restitution) {
        this.restitution = restitution;
        return this;
    };
    /**
     * Sets the friction coefficient of the collider to be created.
     *
     * @param friction - The friction coefficient. Must be greater or equal to 0. This is generally smaller than 1. The
     *                   higher the coefficient, the stronger friction forces will be for contacts with the collider
     *                   being built.
     */
    ColliderDesc.prototype.setFriction = function (friction) {
        this.friction = friction;
        return this;
    };
    /**
     * Sets the rule used to combine the friction coefficients of two colliders
     * colliders involved in a contact.
     *
     * @param rule − The combine rule to apply.
     */
    ColliderDesc.prototype.setFrictionCombineRule = function (rule) {
        this.frictionCombineRule = rule;
        return this;
    };
    /**
     * Sets the rule used to combine the restitution coefficients of two colliders
     * colliders involved in a contact.
     *
     * @param rule − The combine rule to apply.
     */
    ColliderDesc.prototype.setRestitutionCombineRule = function (rule) {
        this.restitutionCombineRule = rule;
        return this;
    };
    /**
     * Sets the collision groups used by this collider.
     *
     * Two colliders will interact iff. their collision groups are compatible.
     * See the documentation of `InteractionGroups` for details on teh used bit pattern.
     *
     * @param groups - The collision groups used for the collider being built.
     */
    ColliderDesc.prototype.setCollisionGroups = function (groups) {
        this.collisionGroups = groups;
        return this;
    };
    /**
     * Sets the solver groups used by this collider.
     *
     * Forces between two colliders in contact will be computed iff their solver
     * groups are compatible.
     * See the documentation of `InteractionGroups` for details on the used bit pattern.
     *
     * @param groups - The solver groups used for the collider being built.
     */
    ColliderDesc.prototype.setSolverGroups = function (groups) {
        this.solverGroups = groups;
        return this;
    };
    /**
     * Set the physics hooks active for this collider.
     *
     * Use this to enable custom filtering rules for contact/intersecstion pairs involving this collider.
     *
     * @param activeHooks - The hooks active for contact/intersection pairs involving this collider.
     */
    ColliderDesc.prototype.setActiveHooks = function (activeHooks) {
        this.activeHooks = activeHooks;
        return this;
    };
    /**
     * Set the events active for this collider.
     *
     * Use this to enable contact and/or intersection event reporting for this collider.
     *
     * @param activeEvents - The events active for contact/intersection pairs involving this collider.
     */
    ColliderDesc.prototype.setActiveEvents = function (activeEvents) {
        this.activeEvents = activeEvents;
        return this;
    };
    /**
     * Set the collision types active for this collider.
     *
     * @param activeCollisionTypes - The hooks active for contact/intersection pairs involving this collider.
     */
    ColliderDesc.prototype.setActiveCollisionTypes = function (activeCollisionTypes) {
        this.activeCollisionTypes = activeCollisionTypes;
        return this;
    };
    return ColliderDesc;
}());

//# sourceMappingURL=collider.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/collider_set.js":
/*!******************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/collider_set.js ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColliderSet": () => (/* binding */ ColliderSet)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _collider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collider */ "./node_modules/@dimforge/rapier2d/geometry/collider.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_collider__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_collider__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);



/**
 * A set of rigid bodies that can be handled by a physics pipeline.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `colliderSet.free()`
 * once you are done using it (and all the rigid-bodies it created).
 */
var ColliderSet = /** @class */ (function () {
    function ColliderSet(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawColliderSet();
    }
    /**
     * Release the WASM memory occupied by this collider set.
     */
    ColliderSet.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Creates a new collider and return its integer handle.
     *
     * @param bodies - The set of bodies where the collider's parent can be found.
     * @param desc - The collider's description.
     * @param parentHandle - The inteer handle of the rigid-body this collider is attached to.
     */
    ColliderSet.prototype.createCollider = function (bodies, desc, parentHandle) {
        var hasParent = parentHandle != undefined && parentHandle != null;
        if (hasParent && isNaN(parentHandle))
            throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");
        var rawShape = desc.shape.intoRaw();
        var rawTra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(desc.translation);
        var rawRot = _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps.intoRaw(desc.rotation);
        var rawCom = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(desc.centerOfMass);
        var handle = this.raw.createCollider(rawShape, rawTra, rawRot, desc.useMassProps, desc.mass, rawCom, 
        // #if DIM2
        desc.principalAngularInertia, 
        // #endif
        desc.density, desc.friction, desc.restitution, desc.frictionCombineRule, desc.restitutionCombineRule, desc.isSensor, desc.collisionGroups, desc.solverGroups, desc.activeCollisionTypes, desc.activeHooks, desc.activeEvents, hasParent, hasParent ? parentHandle : 0, bodies.raw);
        rawShape.free();
        rawTra.free();
        rawRot.free();
        rawCom.free();
        return handle;
    };
    /**
     * Remove a collider from this set.
     *
     * @param handle - The integer handle of the collider to remove.
     * @param bodies - The set of rigid-body containing the rigid-body the collider is attached to.
     * @param wakeUp - If `true`, the rigid-body the removed collider is attached to will be woken-up automatically.
     */
    ColliderSet.prototype.remove = function (handle, islands, bodies, wakeUp) {
        this.raw.remove(handle, islands.raw, bodies.raw, wakeUp);
    };
    /**
     * Gets the rigid-body with the given handle.
     *
     * @param handle - The handle of the rigid-body to retrieve.
     */
    ColliderSet.prototype.get = function (handle) {
        if (this.raw.contains(handle)) {
            return new _collider__WEBPACK_IMPORTED_MODULE_2__.Collider(this.raw, handle);
        }
        else {
            return null;
        }
    };
    /**
     * The number of colliders on this set.
     */
    ColliderSet.prototype.len = function () {
        return this.raw.len();
    };
    /**
     * Does this set contain a collider with the given handle?
     *
     * @param handle - The collider handle to check.
     */
    ColliderSet.prototype.contains = function (handle) {
        return this.raw.contains(handle);
    };
    /**
     * Applies the given closure to each collider contained by this set.
     *
     * @param f - The closure to apply.
     */
    ColliderSet.prototype.forEachCollider = function (f) {
        var _this = this;
        this.forEachColliderHandle(function (handle) {
            f(new _collider__WEBPACK_IMPORTED_MODULE_2__.Collider(_this.raw, handle));
        });
    };
    /**
     * Applies the given closure to the handles of each collider contained by this set.
     *
     * @param f - The closure to apply.
     */
    ColliderSet.prototype.forEachColliderHandle = function (f) {
        this.raw.forEachColliderHandle(f);
    };
    return ColliderSet;
}());

//# sourceMappingURL=collider_set.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/index.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BroadPhase": () => (/* reexport safe */ _broad_phase__WEBPACK_IMPORTED_MODULE_0__.BroadPhase),
/* harmony export */   "NarrowPhase": () => (/* reexport safe */ _narrow_phase__WEBPACK_IMPORTED_MODULE_1__.NarrowPhase),
/* harmony export */   "TempContactManifold": () => (/* reexport safe */ _narrow_phase__WEBPACK_IMPORTED_MODULE_1__.TempContactManifold),
/* harmony export */   "Ball": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Ball),
/* harmony export */   "Capsule": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Capsule),
/* harmony export */   "ConvexPolygon": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.ConvexPolygon),
/* harmony export */   "Cuboid": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Cuboid),
/* harmony export */   "Heightfield": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Heightfield),
/* harmony export */   "Polyline": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Polyline),
/* harmony export */   "RoundConvexPolygon": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.RoundConvexPolygon),
/* harmony export */   "RoundCuboid": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.RoundCuboid),
/* harmony export */   "RoundTriangle": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.RoundTriangle),
/* harmony export */   "Segment": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Segment),
/* harmony export */   "ShapeType": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.ShapeType),
/* harmony export */   "TriMesh": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.TriMesh),
/* harmony export */   "Triangle": () => (/* reexport safe */ _shape__WEBPACK_IMPORTED_MODULE_2__.Triangle),
/* harmony export */   "ActiveCollisionTypes": () => (/* reexport safe */ _collider__WEBPACK_IMPORTED_MODULE_3__.ActiveCollisionTypes),
/* harmony export */   "Collider": () => (/* reexport safe */ _collider__WEBPACK_IMPORTED_MODULE_3__.Collider),
/* harmony export */   "ColliderDesc": () => (/* reexport safe */ _collider__WEBPACK_IMPORTED_MODULE_3__.ColliderDesc),
/* harmony export */   "ColliderSet": () => (/* reexport safe */ _collider_set__WEBPACK_IMPORTED_MODULE_4__.ColliderSet),
/* harmony export */   "Ray": () => (/* reexport safe */ _ray__WEBPACK_IMPORTED_MODULE_5__.Ray),
/* harmony export */   "RayColliderIntersection": () => (/* reexport safe */ _ray__WEBPACK_IMPORTED_MODULE_5__.RayColliderIntersection),
/* harmony export */   "RayColliderToi": () => (/* reexport safe */ _ray__WEBPACK_IMPORTED_MODULE_5__.RayColliderToi),
/* harmony export */   "PointColliderProjection": () => (/* reexport safe */ _point__WEBPACK_IMPORTED_MODULE_6__.PointColliderProjection),
/* harmony export */   "ShapeColliderTOI": () => (/* reexport safe */ _toi__WEBPACK_IMPORTED_MODULE_7__.ShapeColliderTOI)
/* harmony export */ });
/* harmony import */ var _broad_phase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broad_phase */ "./node_modules/@dimforge/rapier2d/geometry/broad_phase.js");
/* harmony import */ var _narrow_phase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./narrow_phase */ "./node_modules/@dimforge/rapier2d/geometry/narrow_phase.js");
/* harmony import */ var _shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shape */ "./node_modules/@dimforge/rapier2d/geometry/shape.js");
/* harmony import */ var _collider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collider */ "./node_modules/@dimforge/rapier2d/geometry/collider.js");
/* harmony import */ var _collider_set__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./collider_set */ "./node_modules/@dimforge/rapier2d/geometry/collider_set.js");
/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ray */ "./node_modules/@dimforge/rapier2d/geometry/ray.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./point */ "./node_modules/@dimforge/rapier2d/geometry/point.js");
/* harmony import */ var _toi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./toi */ "./node_modules/@dimforge/rapier2d/geometry/toi.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_toi__WEBPACK_IMPORTED_MODULE_7__, _point__WEBPACK_IMPORTED_MODULE_6__, _ray__WEBPACK_IMPORTED_MODULE_5__, _collider_set__WEBPACK_IMPORTED_MODULE_4__, _collider__WEBPACK_IMPORTED_MODULE_3__, _shape__WEBPACK_IMPORTED_MODULE_2__, _narrow_phase__WEBPACK_IMPORTED_MODULE_1__, _broad_phase__WEBPACK_IMPORTED_MODULE_0__]);
([_toi__WEBPACK_IMPORTED_MODULE_7__, _point__WEBPACK_IMPORTED_MODULE_6__, _ray__WEBPACK_IMPORTED_MODULE_5__, _collider_set__WEBPACK_IMPORTED_MODULE_4__, _collider__WEBPACK_IMPORTED_MODULE_3__, _shape__WEBPACK_IMPORTED_MODULE_2__, _narrow_phase__WEBPACK_IMPORTED_MODULE_1__, _broad_phase__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);









//# sourceMappingURL=index.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/narrow_phase.js":
/*!******************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/narrow_phase.js ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NarrowPhase": () => (/* binding */ NarrowPhase),
/* harmony export */   "TempContactManifold": () => (/* binding */ TempContactManifold)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);


/**
 * The narrow-phase used for precise collision-detection.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `narrowPhase.free()`
 * once you are done using it.
 */
var NarrowPhase = /** @class */ (function () {
    function NarrowPhase(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawNarrowPhase();
        this.tempManifold = new TempContactManifold(null);
    }
    /**
     * Release the WASM memory occupied by this narrow-phase.
     */
    NarrowPhase.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Enumerates all the colliders potentially in contact with the given collider.
     *
     * @param collider1 - The second collider involved in the contact.
     * @param f - Closure that will be called on each collider that is in contact with `collider1`.
     */
    NarrowPhase.prototype.contactsWith = function (collider1, f) {
        this.raw.contacts_with(collider1, f);
    };
    /**
     * Enumerates all the colliders intersecting the given colliders, assuming one of them
     * is a sensor.
     */
    NarrowPhase.prototype.intersectionsWith = function (collider1, f) {
        this.raw.intersections_with(collider1, f);
    };
    /**
     * Iterates through all the contact manifolds between the given pair of colliders.
     *
     * @param collider1 - The first collider involved in the contact.
     * @param collider2 - The second collider involved in the contact.
     * @param f - Closure that will be called on each contact manifold between the two colliders. If the second argument
     *            passed to this closure is `true`, then the contact manifold data is flipped, i.e., methods like `localNormal1`
     *            actually apply to the `collider2` and fields like `localNormal2` apply to the `collider1`.
     */
    NarrowPhase.prototype.contactPair = function (collider1, collider2, f) {
        var rawPair = this.raw.contact_pair(collider1, collider2);
        if (!!rawPair) {
            var flipped = rawPair.collider1() != collider1;
            var i = void 0;
            for (i = 0; i < rawPair.numContactManifolds(); ++i) {
                this.tempManifold.raw = rawPair.contactManifold(i);
                if (!!this.tempManifold.raw) {
                    f(this.tempManifold, flipped);
                }
                // SAFETY: The RawContactManifold stores a raw pointer that will be invalidated
                //         at the next timestep. So we must be sure to free the pair here
                //         to avoid unsoundness in the Rust code.
                this.tempManifold.free();
            }
            rawPair.free();
        }
    };
    /**
     * Returns `true` if `collider1` and `collider2` intersect and at least one of them is a sensor.
     * @param collider1 − The first collider involved in the intersection.
     * @param collider2 − The second collider involved in the intersection.
     */
    NarrowPhase.prototype.intersectionPair = function (collider1, collider2) {
        return this.raw.intersection_pair(collider1, collider2);
    };
    return NarrowPhase;
}());

var TempContactManifold = /** @class */ (function () {
    function TempContactManifold(raw) {
        this.raw = raw;
    }
    TempContactManifold.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    TempContactManifold.prototype.normal = function () {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.normal());
    };
    TempContactManifold.prototype.localNormal1 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.local_n1());
    };
    TempContactManifold.prototype.localNormal2 = function () {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.local_n2());
    };
    TempContactManifold.prototype.subshape1 = function () {
        return this.raw.subshape1();
    };
    TempContactManifold.prototype.subshape2 = function () {
        return this.raw.subshape2();
    };
    TempContactManifold.prototype.numContacts = function () {
        return this.raw.num_contacts();
    };
    TempContactManifold.prototype.localContactPoint1 = function (i) {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.contact_local_p1(i));
    };
    TempContactManifold.prototype.localContactPoint2 = function (i) {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.contact_local_p2(i));
    };
    TempContactManifold.prototype.contactDist = function (i) {
        return this.raw.contact_dist(i);
    };
    TempContactManifold.prototype.contactFid1 = function (i) {
        return this.raw.contact_fid1(i);
    };
    TempContactManifold.prototype.contactFid2 = function (i) {
        return this.raw.contact_fid2(i);
    };
    TempContactManifold.prototype.contactImpulse = function (i) {
        return this.raw.contact_impulse(i);
    };
    // #if DIM2
    TempContactManifold.prototype.contactTangentImpulse = function (i) {
        return this.raw.contact_tangent_impulse(i);
    };
    // #endif
    TempContactManifold.prototype.numSolverContacts = function () {
        return this.raw.num_solver_contacts();
    };
    TempContactManifold.prototype.solverContactPoint = function (i) {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.solver_contact_point(i));
    };
    TempContactManifold.prototype.solverContactDist = function (i) {
        return this.raw.solver_contact_dist(i);
    };
    TempContactManifold.prototype.solverContactFriction = function (i) {
        return this.raw.solver_contact_friction(i);
    };
    TempContactManifold.prototype.solverContactRestitution = function (i) {
        return this.raw.solver_contact_restitution(i);
    };
    TempContactManifold.prototype.solverContactTangentVelocity = function (i) {
        return _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.fromRaw(this.raw.solver_contact_tangent_velocity(i));
    };
    return TempContactManifold;
}());

//# sourceMappingURL=narrow_phase.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/point.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/point.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PointColliderProjection": () => (/* binding */ PointColliderProjection)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_0__]);
_math__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The intersection between a ray and a collider.
 */
var PointColliderProjection = /** @class */ (function () {
    function PointColliderProjection(colliderHandle, point, isInside) {
        this.colliderHandle = colliderHandle;
        this.point = point;
        this.isInside = isInside;
    }
    PointColliderProjection.fromRaw = function (raw) {
        if (!raw)
            return null;
        var result = new PointColliderProjection(raw.colliderHandle(), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.point()), raw.isInside());
        raw.free();
        return result;
    };
    return PointColliderProjection;
}());

//# sourceMappingURL=point.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/ray.js":
/*!*********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/ray.js ***!
  \*********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ray": () => (/* binding */ Ray),
/* harmony export */   "RayColliderIntersection": () => (/* binding */ RayColliderIntersection),
/* harmony export */   "RayColliderToi": () => (/* binding */ RayColliderToi)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_0__]);
_math__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * A ray. This is a directed half-line.
 */
var Ray = /** @class */ (function () {
    /**
     * Builds a ray from its origin and direction.
     *
     * @param origin - The ray's starting point.
     * @param dir - The ray's direction of propagation.
     */
    function Ray(origin, dir) {
        this.origin = origin;
        this.dir = dir;
    }
    Ray.prototype.pointAt = function (t) {
        return {
            x: this.origin.x + this.dir.x * t,
            y: this.origin.y + this.dir.y * t,
        };
    };
    ;
    return Ray;
}());

/**
 * The intersection between a ray and a collider.
 */
var RayColliderIntersection = /** @class */ (function () {
    function RayColliderIntersection(colliderHandle, toi, normal) {
        this.colliderHandle = colliderHandle;
        this.toi = toi;
        this.normal = normal;
    }
    RayColliderIntersection.fromRaw = function (raw) {
        if (!raw)
            return null;
        var result = new RayColliderIntersection(raw.colliderHandle(), raw.toi(), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.normal()));
        raw.free();
        return result;
    };
    return RayColliderIntersection;
}());

/**
 * The time of impact between a ray and a collider.
 */
var RayColliderToi = /** @class */ (function () {
    function RayColliderToi(colliderHandle, toi) {
        this.colliderHandle = colliderHandle;
        this.toi = toi;
    }
    RayColliderToi.fromRaw = function (raw) {
        if (!raw)
            return null;
        var result = new RayColliderToi(raw.colliderHandle(), raw.toi());
        raw.free();
        return result;
    };
    return RayColliderToi;
}());

//# sourceMappingURL=ray.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/shape.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/shape.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShapeType": () => (/* binding */ ShapeType),
/* harmony export */   "Ball": () => (/* binding */ Ball),
/* harmony export */   "Cuboid": () => (/* binding */ Cuboid),
/* harmony export */   "RoundCuboid": () => (/* binding */ RoundCuboid),
/* harmony export */   "Capsule": () => (/* binding */ Capsule),
/* harmony export */   "Segment": () => (/* binding */ Segment),
/* harmony export */   "Triangle": () => (/* binding */ Triangle),
/* harmony export */   "RoundTriangle": () => (/* binding */ RoundTriangle),
/* harmony export */   "Polyline": () => (/* binding */ Polyline),
/* harmony export */   "TriMesh": () => (/* binding */ TriMesh),
/* harmony export */   "ConvexPolygon": () => (/* binding */ ConvexPolygon),
/* harmony export */   "RoundConvexPolygon": () => (/* binding */ RoundConvexPolygon),
/* harmony export */   "Heightfield": () => (/* binding */ Heightfield)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__, _math__WEBPACK_IMPORTED_MODULE_1__]);
([_raw__WEBPACK_IMPORTED_MODULE_0__, _math__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);


/**
 * An enumeration representing the type of a shape.
 */
var ShapeType;
(function (ShapeType) {
    ShapeType[ShapeType["Ball"] = 0] = "Ball";
    ShapeType[ShapeType["Cuboid"] = 1] = "Cuboid";
    ShapeType[ShapeType["Capsule"] = 2] = "Capsule";
    ShapeType[ShapeType["Segment"] = 3] = "Segment";
    ShapeType[ShapeType["Polyline"] = 4] = "Polyline";
    ShapeType[ShapeType["Triangle"] = 5] = "Triangle";
    ShapeType[ShapeType["TriMesh"] = 6] = "TriMesh";
    ShapeType[ShapeType["HeightField"] = 7] = "HeightField";
    // Compound = 8,
    ShapeType[ShapeType["ConvexPolygon"] = 9] = "ConvexPolygon";
    ShapeType[ShapeType["RoundCuboid"] = 10] = "RoundCuboid";
    ShapeType[ShapeType["RoundTriangle"] = 11] = "RoundTriangle";
    ShapeType[ShapeType["RoundConvexPolygon"] = 12] = "RoundConvexPolygon";
})(ShapeType || (ShapeType = {}));
// #endif
/**
 * A shape that is a sphere in 3D and a circle in 2D.
 */
var Ball = /** @class */ (function () {
    /**
     * Creates a new ball with the given radius.
     * @param radius - The balls radius.
     */
    function Ball(radius) {
        this.radius = radius;
    }
    Ball.prototype.intoRaw = function () {
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.ball(this.radius);
    };
    return Ball;
}());

/**
 * A shape that is a box in 3D and a rectangle in 2D.
 */
var Cuboid = /** @class */ (function () {
    // #if DIM2
    /**
     * Creates a new 2D rectangle.
     * @param hx - The half width of the rectangle.
     * @param hy - The helf height of the rectangle.
     */
    function Cuboid(hx, hy) {
        this.halfExtents = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps["new"](hx, hy);
    }
    // #endif
    Cuboid.prototype.intoRaw = function () {
        // #if DIM2
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.cuboid(this.halfExtents.x, this.halfExtents.y);
        // #endif
    };
    return Cuboid;
}());

/**
 * A shape that is a box in 3D and a rectangle in 2D, with round corners.
 */
var RoundCuboid = /** @class */ (function () {
    // #if DIM2
    /**
     * Creates a new 2D rectangle.
     * @param hx - The half width of the rectangle.
     * @param hy - The helf height of the rectangle.
     * @param borderRadius - The radius of the borders of this cuboid. This will
     *   effectively increase the half-extents of the cuboid by this radius.
     */
    function RoundCuboid(hx, hy, borderRadius) {
        this.halfExtents = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps["new"](hx, hy);
        this.borderRadius = borderRadius;
    }
    // #endif
    RoundCuboid.prototype.intoRaw = function () {
        // #if DIM2
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.roundCuboid(this.halfExtents.x, this.halfExtents.y, this.borderRadius);
        // #endif
    };
    return RoundCuboid;
}());

/**
 * A shape that is a capsule.
 */
var Capsule = /** @class */ (function () {
    /**
     * Creates a new capsule with the given radius and half-height.
     * @param halfHeight - The balls half-height along the `y` axis.
     * @param radius - The balls radius.
     */
    function Capsule(halfHeight, radius) {
        this.halfHeight = halfHeight;
        this.radius = radius;
    }
    Capsule.prototype.intoRaw = function () {
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.capsule(this.halfHeight, this.radius);
    };
    return Capsule;
}());

/**
 * A shape that is a segment.
 */
var Segment = /** @class */ (function () {
    /**
     * Creates a new segment shape.
     * @param a - The first point of the segment.
     * @param b - The second point of the segment.
     */
    function Segment(a, b) {
        this.a = a;
        this.b = b;
    }
    Segment.prototype.intoRaw = function () {
        var ra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.a);
        var rb = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.b);
        var result = _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.segment(ra, rb);
        ra.free();
        rb.free();
        return result;
    };
    return Segment;
}());

/**
 * A shape that is a segment.
 */
var Triangle = /** @class */ (function () {
    /**
     * Creates a new triangle shape.
     *
     * @param a - The first point of the triangle.
     * @param b - The second point of the triangle.
     * @param c - The third point of the triangle.
     */
    function Triangle(a, b, c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }
    Triangle.prototype.intoRaw = function () {
        var ra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.a);
        var rb = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.b);
        var rc = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.c);
        var result = _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.triangle(ra, rb, rc);
        ra.free();
        rb.free();
        rc.free();
        return result;
    };
    return Triangle;
}());

/**
 * A shape that is a triangle with round borders and a non-zero thickness.
 */
var RoundTriangle = /** @class */ (function () {
    /**
     * Creates a new triangle shape with round corners.
     *
     * @param a - The first point of the triangle.
     * @param b - The second point of the triangle.
     * @param c - The third point of the triangle.
     * @param borderRadius - The radius of the borders of this triangle. In 3D,
     *   this is also equal to half the thickness of the triangle.
     */
    function RoundTriangle(a, b, c, borderRadius) {
        this.a = a;
        this.b = b;
        this.c = c;
        this.borderRadius = borderRadius;
    }
    RoundTriangle.prototype.intoRaw = function () {
        var ra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.a);
        var rb = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.b);
        var rc = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.c);
        var result = _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.roundTriangle(ra, rb, rc, this.borderRadius);
        ra.free();
        rb.free();
        rc.free();
        return result;
    };
    return RoundTriangle;
}());

/**
 * A shape that is a triangle mesh.
 */
var Polyline = /** @class */ (function () {
    /**
     * Creates a new polyline shape.
     *
     * @param vertices - The coordinates of the polyline's vertices.
     * @param indices - The indices of the polyline's segments. If this is `null` then
     *    the vertices are assumed to form a line strip.
     */
    function Polyline(vertices, indices) {
        this.vertices = vertices;
        this.indices = !!indices ? indices : new Uint32Array(0);
    }
    Polyline.prototype.intoRaw = function () {
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.polyline(this.vertices, this.indices);
    };
    return Polyline;
}());

/**
 * A shape that is a triangle mesh.
 */
var TriMesh = /** @class */ (function () {
    /**
     * Creates a new triangle mesh shape.
     *
     * @param vertices - The coordinates of the triangle mesh's vertices.
     * @param indices - The indices of the triangle mesh's triangles.
     */
    function TriMesh(vertices, indices) {
        this.vertices = vertices;
        this.indices = indices;
    }
    TriMesh.prototype.intoRaw = function () {
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.trimesh(this.vertices, this.indices);
    };
    return TriMesh;
}());

// #if DIM2
/**
 * A shape that is a convex polygon.
 */
var ConvexPolygon = /** @class */ (function () {
    /**
     * Creates a new convex polygon shape.
     *
     * @param vertices - The coordinates of the convex polygon's vertices.
     * @param skipConvexHullComputation - If set to `true`, the input points will
     *   be assumed to form a convex polyline and no convex-hull computation will
     *   be done automatically.
     */
    function ConvexPolygon(vertices, skipConvexHullComputation) {
        this.vertices = vertices;
        this.skipConvexHullComputation = !!skipConvexHullComputation;
    }
    ConvexPolygon.prototype.intoRaw = function () {
        if (this.skipConvexHullComputation) {
            return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.convexPolyline(this.vertices);
        }
        else {
            return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.convexHull(this.vertices);
        }
    };
    return ConvexPolygon;
}());

/**
 * A shape that is a convex polygon.
 */
var RoundConvexPolygon = /** @class */ (function () {
    /**
     * Creates a new convex polygon shape.
     *
     * @param vertices - The coordinates of the convex polygon's vertices.
     * @param borderRadius - The radius of the borders of this convex polygon.
     * @param skipConvexHullComputation - If set to `true`, the input points will
     *   be assumed to form a convex polyline and no convex-hull computation will
     *   be done automatically.
     */
    function RoundConvexPolygon(vertices, borderRadius, skipConvexHullComputation) {
        this.vertices = vertices;
        this.borderRadius = borderRadius;
        this.skipConvexHullComputation = !!skipConvexHullComputation;
    }
    RoundConvexPolygon.prototype.intoRaw = function () {
        if (this.skipConvexHullComputation) {
            return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.roundConvexPolyline(this.vertices, this.borderRadius);
        }
        else {
            return _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.roundConvexHull(this.vertices, this.borderRadius);
        }
    };
    return RoundConvexPolygon;
}());

/**
 * A shape that is a heightfield.
 */
var Heightfield = /** @class */ (function () {
    /**
     * Creates a new heightfield shape.
     *
     * @param heights - The heights of the heightfield, along its local `y` axis.
     * @param scale - The scale factor applied to the heightfield.
     */
    function Heightfield(heights, scale) {
        this.heights = heights;
        this.scale = scale;
    }
    Heightfield.prototype.intoRaw = function () {
        var rawScale = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(this.scale);
        var rawShape = _raw__WEBPACK_IMPORTED_MODULE_0__.RawShape.heightfield(this.heights, rawScale);
        rawScale.free();
        return rawShape;
    };
    return Heightfield;
}());

// #endif
//# sourceMappingURL=shape.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/geometry/toi.js":
/*!*********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/geometry/toi.js ***!
  \*********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShapeColliderTOI": () => (/* binding */ ShapeColliderTOI)
/* harmony export */ });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_0__]);
_math__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * The intersection between a ray and a collider.
 */
var ShapeColliderTOI = /** @class */ (function () {
    function ShapeColliderTOI(colliderHandle, toi, witness1, witness2, normal1, normal2) {
        this.colliderHandle = colliderHandle;
        this.toi = toi;
        this.witness1 = witness1;
        this.witness2 = witness2;
        this.normal1 = normal1;
        this.normal2 = normal2;
    }
    ShapeColliderTOI.fromRaw = function (raw) {
        if (!raw)
            return null;
        var result = new ShapeColliderTOI(raw.colliderHandle(), raw.toi(), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.witness1()), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.witness2()), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.normal1()), _math__WEBPACK_IMPORTED_MODULE_0__.VectorOps.fromRaw(raw.normal2()));
        raw.free();
        return result;
    };
    return ShapeColliderTOI;
}());

//# sourceMappingURL=toi.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/math.js":
/*!*************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/math.js ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Vector2": () => (/* binding */ Vector2),
/* harmony export */   "VectorOps": () => (/* binding */ VectorOps),
/* harmony export */   "RotationOps": () => (/* binding */ RotationOps)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/**
 * A 2D vector.
 */
var Vector2 = /** @class */ (function () {
    function Vector2(x, y) {
        this.x = x;
        this.y = y;
    }
    return Vector2;
}());

var VectorOps = /** @class */ (function () {
    function VectorOps() {
    }
    VectorOps.new = function (x, y) {
        return new Vector2(x, y);
    };
    VectorOps.zeros = function () {
        return VectorOps.new(0.0, 0.0);
    };
    // FIXME: type ram: RawVector?
    VectorOps.fromRaw = function (raw) {
        if (!raw)
            return null;
        var res = VectorOps.new(raw.x, raw.y);
        raw.free();
        return res;
    };
    VectorOps.intoRaw = function (v) {
        return new _raw__WEBPACK_IMPORTED_MODULE_0__.RawVector(v.x, v.y);
    };
    return VectorOps;
}());

var RotationOps = /** @class */ (function () {
    function RotationOps() {
    }
    RotationOps.identity = function () {
        return 0.0;
    };
    RotationOps.fromRaw = function (raw) {
        if (!raw)
            return null;
        var res = raw.angle;
        raw.free();
        return res;
    };
    RotationOps.intoRaw = function (angle) {
        return _raw__WEBPACK_IMPORTED_MODULE_0__.RawRotation.fromAngle(angle);
    };
    return RotationOps;
}());

// #endif
//# sourceMappingURL=math.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/event_queue.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/event_queue.js ***!
  \*****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActiveEvents": () => (/* binding */ ActiveEvents),
/* harmony export */   "EventQueue": () => (/* binding */ EventQueue)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_raw__WEBPACK_IMPORTED_MODULE_0__]);
_raw__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];

/// Flags indicating what events are enabled for colliders.
var ActiveEvents;
(function (ActiveEvents) {
    /// Enable intersection events.
    ActiveEvents[ActiveEvents["INTERSECTION_EVENTS"] = 1] = "INTERSECTION_EVENTS";
    /// Enable contact events.
    ActiveEvents[ActiveEvents["CONTACT_EVENTS"] = 2] = "CONTACT_EVENTS";
})(ActiveEvents || (ActiveEvents = {}));
/**
 * A structure responsible for collecting events generated
 * by the physics engine.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `eventQueue.free()`
 * once you are done using it.
 */
var EventQueue = /** @class */ (function () {
    /**
     * Creates a new event collector.
     *
     * @param autoDrain -setting this to `true` is strongly recommended. If true, the collector will
     * be automatically drained before each `world.step(collector)`. If false, the collector will
     * keep all events in memory unless it is manually drained/cleared; this may lead to unbounded use of
     * RAM if no drain is performed.
     */
    function EventQueue(autoDrain, raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawEventQueue(autoDrain);
    }
    /**
     * Release the WASM memory occupied by this event-queue.
     */
    EventQueue.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Applies the given javascript closure on each contact event of this collector, then clear
     * the internal contact event buffer.
     *
     * @param f - JavaScript closure applied to each contact event. The
     * closure should take three arguments: two integers representing the handles of the colliders
     * involved in the contact, and a boolean indicating if the contact started (true) or stopped
     * (false).
     */
    EventQueue.prototype.drainContactEvents = function (f) {
        this.raw.drainContactEvents(f);
    };
    /**
     * Applies the given javascript closure on each intersection event of this collector, then clear
     * the internal intersection event buffer.
     *
     * @param f - JavaScript closure applied to each intersection event. The
     * closure should take four arguments: two integers representing the handles of the colliders
     * involved in the intersection, and a boolean indicating if they started intersecting (true) or
     * stopped intersecting (false).
     */
    EventQueue.prototype.drainIntersectionEvents = function (f) {
        this.raw.drainIntersectionEvents(f);
    };
    /**
     * Removes all events contained by this collector
     */
    EventQueue.prototype.clear = function () {
        this.raw.clear();
    };
    return EventQueue;
}());

//# sourceMappingURL=event_queue.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/index.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "World": () => (/* reexport safe */ _world__WEBPACK_IMPORTED_MODULE_0__.World),
/* harmony export */   "PhysicsPipeline": () => (/* reexport safe */ _physics_pipeline__WEBPACK_IMPORTED_MODULE_1__.PhysicsPipeline),
/* harmony export */   "SerializationPipeline": () => (/* reexport safe */ _serialization_pipeline__WEBPACK_IMPORTED_MODULE_2__.SerializationPipeline),
/* harmony export */   "ActiveEvents": () => (/* reexport safe */ _event_queue__WEBPACK_IMPORTED_MODULE_3__.ActiveEvents),
/* harmony export */   "EventQueue": () => (/* reexport safe */ _event_queue__WEBPACK_IMPORTED_MODULE_3__.EventQueue),
/* harmony export */   "ActiveHooks": () => (/* reexport safe */ _physics_hooks__WEBPACK_IMPORTED_MODULE_4__.ActiveHooks),
/* harmony export */   "SolverFlags": () => (/* reexport safe */ _physics_hooks__WEBPACK_IMPORTED_MODULE_4__.SolverFlags)
/* harmony export */ });
/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./world */ "./node_modules/@dimforge/rapier2d/pipeline/world.js");
/* harmony import */ var _physics_pipeline__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./physics_pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/physics_pipeline.js");
/* harmony import */ var _serialization_pipeline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serialization_pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/serialization_pipeline.js");
/* harmony import */ var _event_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event_queue */ "./node_modules/@dimforge/rapier2d/pipeline/event_queue.js");
/* harmony import */ var _physics_hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./physics_hooks */ "./node_modules/@dimforge/rapier2d/pipeline/physics_hooks.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_event_queue__WEBPACK_IMPORTED_MODULE_3__, _serialization_pipeline__WEBPACK_IMPORTED_MODULE_2__, _physics_pipeline__WEBPACK_IMPORTED_MODULE_1__, _world__WEBPACK_IMPORTED_MODULE_0__]);
([_event_queue__WEBPACK_IMPORTED_MODULE_3__, _serialization_pipeline__WEBPACK_IMPORTED_MODULE_2__, _physics_pipeline__WEBPACK_IMPORTED_MODULE_1__, _world__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);





//# sourceMappingURL=index.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/physics_hooks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/physics_hooks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActiveHooks": () => (/* binding */ ActiveHooks),
/* harmony export */   "SolverFlags": () => (/* binding */ SolverFlags)
/* harmony export */ });
var ActiveHooks;
(function (ActiveHooks) {
    ActiveHooks[ActiveHooks["FILTER_CONTACT_PAIRS"] = 1] = "FILTER_CONTACT_PAIRS";
    ActiveHooks[ActiveHooks["FILTER_INTERSECTION_PAIRS"] = 2] = "FILTER_INTERSECTION_PAIRS";
    // MODIFY_SOLVER_CONTACTS = 0b0100, /* Not supported yet in JS. */
})(ActiveHooks || (ActiveHooks = {}));
var SolverFlags;
(function (SolverFlags) {
    SolverFlags[SolverFlags["EMPTY"] = 0] = "EMPTY";
    SolverFlags[SolverFlags["COMPUTE_IMPULSE"] = 1] = "COMPUTE_IMPULSE";
})(SolverFlags || (SolverFlags = {}));
//# sourceMappingURL=physics_hooks.js.map

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/physics_pipeline.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/physics_pipeline.js ***!
  \**********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PhysicsPipeline": () => (/* binding */ PhysicsPipeline)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);


var PhysicsPipeline = /** @class */ (function () {
    function PhysicsPipeline(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawPhysicsPipeline();
    }
    PhysicsPipeline.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    PhysicsPipeline.prototype.step = function (gravity, integrationParameters, islands, broadPhase, narrowPhase, bodies, colliders, joints, ccdSolver, eventQueue, hooks) {
        var rawG = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(gravity);
        if (!!eventQueue) {
            this.raw.stepWithEvents(rawG, integrationParameters.raw, islands.raw, broadPhase.raw, narrowPhase.raw, bodies.raw, colliders.raw, joints.raw, ccdSolver.raw, eventQueue.raw, hooks, !!hooks ? hooks.filterContactPair : null, !!hooks ? hooks.filterIntersectionPair : null);
        }
        else {
            this.raw.step(rawG, integrationParameters.raw, islands.raw, broadPhase.raw, narrowPhase.raw, bodies.raw, colliders.raw, joints.raw, ccdSolver.raw);
        }
        rawG.free();
    };
    return PhysicsPipeline;
}());

//# sourceMappingURL=physics_pipeline.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/query_pipeline.js":
/*!********************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/query_pipeline.js ***!
  \********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "QueryPipeline": () => (/* binding */ QueryPipeline)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/ray.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/point.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/toi.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_math__WEBPACK_IMPORTED_MODULE_1__, _geometry__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _geometry__WEBPACK_IMPORTED_MODULE_2__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_math__WEBPACK_IMPORTED_MODULE_1__, _geometry__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _geometry__WEBPACK_IMPORTED_MODULE_2__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);



/**
 * A pipeline for performing queries on all the colliders of a scene.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `queryPipeline.free()`
 * once you are done using it (and all the rigid-bodies it created).
 */
var QueryPipeline = /** @class */ (function () {
    function QueryPipeline(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawQueryPipeline();
    }
    /**
     * Release the WASM memory occupied by this query pipeline.
     */
    QueryPipeline.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Updates the acceleration structure of the query pipeline.
     * @param bodies - The set of rigid-bodies taking part in this pipeline.
     * @param colliders - The set of colliders taking part in this pipeline.
     */
    QueryPipeline.prototype.update = function (islands, bodies, colliders) {
        this.raw.update(islands.raw, bodies.raw, colliders.raw);
    };
    /**
     * Find the closest intersection between a ray and a set of collider.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     */
    QueryPipeline.prototype.castRay = function (colliders, ray, maxToi, solid, groups) {
        var rawOrig = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.origin);
        var rawDir = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.dir);
        var result = _geometry__WEBPACK_IMPORTED_MODULE_2__.RayColliderToi.fromRaw(this.raw.castRay(colliders.raw, rawOrig, rawDir, maxToi, solid, groups));
        rawOrig.free();
        rawDir.free();
        return result;
    };
    /**
     * Find the closest intersection between a ray and a set of collider.
     *
     * This also computes the normal at the hit point.
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     */
    QueryPipeline.prototype.castRayAndGetNormal = function (colliders, ray, maxToi, solid, groups) {
        var rawOrig = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.origin);
        var rawDir = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.dir);
        var result = _geometry__WEBPACK_IMPORTED_MODULE_2__.RayColliderIntersection.fromRaw(this.raw.castRayAndGetNormal(colliders.raw, rawOrig, rawDir, maxToi, solid, groups));
        rawOrig.free();
        rawDir.free();
        return result;
    };
    /**
     * Cast a ray and collects all the intersections between a ray and the scene.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     * @param callback - The callback called once per hit (in no particular order) between a ray and a collider.
     *   If this callback returns `false`, then the cast will stop and no further hits will be detected/reported.
     */
    QueryPipeline.prototype.intersectionsWithRay = function (colliders, ray, maxToi, solid, groups, callback) {
        var rawOrig = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.origin);
        var rawDir = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(ray.dir);
        var rawCallback = function (rawInter) {
            return callback(_geometry__WEBPACK_IMPORTED_MODULE_2__.RayColliderIntersection.fromRaw(rawInter));
        };
        this.raw.intersectionsWithRay(colliders.raw, rawOrig, rawDir, maxToi, solid, groups, rawCallback);
        rawOrig.free();
        rawDir.free();
    };
    /**
     * Gets the handle of up to one collider intersecting the given shape.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param shapePos - The position of the shape used for the intersection test.
     * @param shapeRot - The orientation of the shape used for the intersection test.
     * @param shape - The shape used for the intersection test.
     * @param groups - The bit groups and filter associated to the ray, in order to only
     *   hit the colliders with collision groups compatible with the ray's group.
     */
    QueryPipeline.prototype.intersectionWithShape = function (colliders, shapePos, shapeRot, shape, groups) {
        var rawPos = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(shapePos);
        var rawRot = _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps.intoRaw(shapeRot);
        var rawShape = shape.intoRaw();
        var result = this.raw.intersectionWithShape(colliders.raw, rawPos, rawRot, rawShape, groups);
        rawPos.free();
        rawRot.free();
        rawShape.free();
        return result;
    };
    /**
     * Find the projection of a point on the closest collider.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param point - The point to project.
     * @param solid - If this is set to `true` then the collider shapes are considered to
     *   be plain (if the point is located inside of a plain shape, its projection is the point
     *   itself). If it is set to `false` the collider shapes are considered to be hollow
     *   (if the point is located inside of an hollow shape, it is projected on the shape's
     *   boundary).
     * @param groups - The bit groups and filter associated to the point to project, in order to only
     *   project on colliders with collision groups compatible with the ray's group.
     */
    QueryPipeline.prototype.projectPoint = function (colliders, point, solid, groups) {
        var rawPoint = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(point);
        var result = _geometry__WEBPACK_IMPORTED_MODULE_3__.PointColliderProjection.fromRaw(this.raw.projectPoint(colliders.raw, rawPoint, solid, groups));
        rawPoint.free();
        return result;
    };
    /**
     * Find all the colliders containing the given point.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param point - The point used for the containment test.
     * @param groups - The bit groups and filter associated to the point to test, in order to only
     *   test on colliders with collision groups compatible with the ray's group.
     * @param callback - A function called with the handles of each collider with a shape
     *   containing the `point`.
     */
    QueryPipeline.prototype.intersectionsWithPoint = function (colliders, point, groups, callback) {
        var rawPoint = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(point);
        this.raw.intersectionsWithPoint(colliders.raw, rawPoint, groups, callback);
        rawPoint.free();
    };
    /**
     * Casts a shape at a constant linear velocity and retrieve the first collider it hits.
     * This is similar to ray-casting except that we are casting a whole shape instead of
     * just a point (the ray origin).
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param shapePos - The initial position of the shape to cast.
     * @param shapeRot - The initial rotation of the shape to cast.
     * @param shapeVel - The constant velocity of the shape to cast (i.e. the cast direction).
     * @param shape - The shape to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the distance traveled by the shape to `shapeVel.norm() * maxToi`.
     * @param groups - The bit groups and filter associated to the shape to cast, in order to only
     *   test on colliders with collision groups compatible with this group.
     */
    QueryPipeline.prototype.castShape = function (colliders, shapePos, shapeRot, shapeVel, shape, maxToi, groups) {
        var rawPos = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(shapePos);
        var rawRot = _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps.intoRaw(shapeRot);
        var rawVel = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(shapeVel);
        var rawShape = shape.intoRaw();
        var result = _geometry__WEBPACK_IMPORTED_MODULE_4__.ShapeColliderTOI.fromRaw(this.raw.castShape(colliders.raw, rawPos, rawRot, rawVel, rawShape, maxToi, groups));
        rawPos.free();
        rawRot.free();
        rawVel.free();
        rawShape.free();
        return result;
    };
    /**
     * Retrieve all the colliders intersecting the given shape.
     *
     * @param colliders - The set of colliders taking part in this pipeline.
     * @param shapePos - The position of the shape to test.
     * @param shapeRot - The orientation of the shape to test.
     * @param shape - The shape to test.
     * @param groups - The bit groups and filter associated to the shape to test, in order to only
     *   test on colliders with collision groups compatible with this group.
     * @param callback - A function called with the handles of each collider intersecting the `shape`.
     */
    QueryPipeline.prototype.intersectionsWithShape = function (colliders, shapePos, shapeRot, shape, groups, callback) {
        var rawPos = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(shapePos);
        var rawRot = _math__WEBPACK_IMPORTED_MODULE_1__.RotationOps.intoRaw(shapeRot);
        var rawShape = shape.intoRaw();
        this.raw.intersectionsWithShape(colliders.raw, rawPos, rawRot, rawShape, groups, callback);
        rawPos.free();
        rawRot.free();
        rawShape.free();
    };
    /**
     * Finds the handles of all the colliders with an AABB intersecting the given AABB.
     *
     * @param aabbCenter - The center of the AABB to test.
     * @param aabbHalfExtents - The half-extents of the AABB to test.
     * @param callback - The callback that will be called with the handles of all the colliders
     *                   currently intersecting the given AABB.
     */
    QueryPipeline.prototype.collidersWithAabbIntersectingAabb = function (aabbCenter, aabbHalfExtents, callback) {
        var rawCenter = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(aabbCenter);
        var rawHalfExtents = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(aabbHalfExtents);
        this.raw.collidersWithAabbIntersectingAabb(rawCenter, rawHalfExtents, callback);
        rawCenter.free();
        rawHalfExtents.free();
    };
    return QueryPipeline;
}());

//# sourceMappingURL=query_pipeline.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/serialization_pipeline.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/serialization_pipeline.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SerializationPipeline": () => (/* binding */ SerializationPipeline)
/* harmony export */ });
/* harmony import */ var _raw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../raw */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./world */ "./node_modules/@dimforge/rapier2d/pipeline/world.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_world__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__]);
([_world__WEBPACK_IMPORTED_MODULE_2__, _math__WEBPACK_IMPORTED_MODULE_1__, _raw__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);



/**
 * A pipeline for serializing the physics scene.
 *
 * To avoid leaking WASM resources, this MUST be freed manually with `queryPipeline.free()`
 * once you are done using it (and all the rigid-bodies it created).
 */
var SerializationPipeline = /** @class */ (function () {
    function SerializationPipeline(raw) {
        this.raw = raw || new _raw__WEBPACK_IMPORTED_MODULE_0__.RawSerializationPipeline();
    }
    /**
     * Release the WASM memory occupied by this serialization pipeline.
     */
    SerializationPipeline.prototype.free = function () {
        this.raw.free();
        this.raw = undefined;
    };
    /**
     * Serialize a complete physics state into a single byte array.
     * @param gravity - The current gravity affecting the simulation.
     * @param integrationParameters - The integration parameters of the simulation.
     * @param broadPhase - The broad-phase of the simulation.
     * @param narrowPhase - The narrow-phase of the simulation.
     * @param bodies - The rigid-bodies taking part into the simulation.
     * @param colliders - The colliders taking part into the simulation.
     * @param joints - The joints taking part into the simulation.
     */
    SerializationPipeline.prototype.serializeAll = function (gravity, integrationParameters, islands, broadPhase, narrowPhase, bodies, colliders, joints) {
        var rawGra = _math__WEBPACK_IMPORTED_MODULE_1__.VectorOps.intoRaw(gravity);
        var res = this.raw.serializeAll(rawGra, integrationParameters.raw, islands.raw, broadPhase.raw, narrowPhase.raw, bodies.raw, colliders.raw, joints.raw);
        rawGra.free();
        return res;
    };
    /**
     * Deserialize the complete physics state from a single byte array.
     *
     * @param data - The byte array to deserialize.
     */
    SerializationPipeline.prototype.deserializeAll = function (data) {
        return _world__WEBPACK_IMPORTED_MODULE_2__.World.fromRaw(this.raw.deserializeAll(data));
    };
    return SerializationPipeline;
}());

//# sourceMappingURL=serialization_pipeline.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/pipeline/world.js":
/*!***********************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/pipeline/world.js ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "World": () => (/* binding */ World)
/* harmony export */ });
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/broad_phase.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/narrow_phase.js");
/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geometry */ "./node_modules/@dimforge/rapier2d/geometry/collider_set.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/integration_parameters.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/island_manager.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/rigid_body_set.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/joint_set.js");
/* harmony import */ var _dynamics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dynamics */ "./node_modules/@dimforge/rapier2d/dynamics/ccd_solver.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math */ "./node_modules/@dimforge/rapier2d/math.js");
/* harmony import */ var _physics_pipeline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./physics_pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/physics_pipeline.js");
/* harmony import */ var _query_pipeline__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query_pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/query_pipeline.js");
/* harmony import */ var _serialization_pipeline__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./serialization_pipeline */ "./node_modules/@dimforge/rapier2d/pipeline/serialization_pipeline.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_serialization_pipeline__WEBPACK_IMPORTED_MODULE_10__, _math__WEBPACK_IMPORTED_MODULE_11__, _physics_pipeline__WEBPACK_IMPORTED_MODULE_9__, _query_pipeline__WEBPACK_IMPORTED_MODULE_8__, _dynamics__WEBPACK_IMPORTED_MODULE_7__, _dynamics__WEBPACK_IMPORTED_MODULE_6__, _geometry__WEBPACK_IMPORTED_MODULE_5__, _dynamics__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _geometry__WEBPACK_IMPORTED_MODULE_2__, _dynamics__WEBPACK_IMPORTED_MODULE_1__, _dynamics__WEBPACK_IMPORTED_MODULE_0__]);
([_serialization_pipeline__WEBPACK_IMPORTED_MODULE_10__, _math__WEBPACK_IMPORTED_MODULE_11__, _physics_pipeline__WEBPACK_IMPORTED_MODULE_9__, _query_pipeline__WEBPACK_IMPORTED_MODULE_8__, _dynamics__WEBPACK_IMPORTED_MODULE_7__, _dynamics__WEBPACK_IMPORTED_MODULE_6__, _geometry__WEBPACK_IMPORTED_MODULE_5__, _dynamics__WEBPACK_IMPORTED_MODULE_4__, _geometry__WEBPACK_IMPORTED_MODULE_3__, _geometry__WEBPACK_IMPORTED_MODULE_2__, _dynamics__WEBPACK_IMPORTED_MODULE_1__, _dynamics__WEBPACK_IMPORTED_MODULE_0__] = __webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__);






/**
 * The physics world.
 *
 * This contains all the data-structures necessary for creating and simulating
 * bodies with contacts, joints, and external forces.
 */
var World = /** @class */ (function () {
    function World(gravity, rawIntegrationParameters, rawIslands, rawBroadPhase, rawNarrowPhase, rawBodies, rawColliders, rawJoints, rawCCDSolver, rawQueryPipeline, rawPhysicsPipeline, rawSerializationPipeline) {
        this.gravity = gravity;
        this.integrationParameters = new _dynamics__WEBPACK_IMPORTED_MODULE_0__.IntegrationParameters(rawIntegrationParameters);
        this.islands = new _dynamics__WEBPACK_IMPORTED_MODULE_1__.IslandManager(rawIslands);
        this.broadPhase = new _geometry__WEBPACK_IMPORTED_MODULE_2__.BroadPhase(rawBroadPhase);
        this.narrowPhase = new _geometry__WEBPACK_IMPORTED_MODULE_3__.NarrowPhase(rawNarrowPhase);
        this.bodies = new _dynamics__WEBPACK_IMPORTED_MODULE_4__.RigidBodySet(rawBodies);
        this.colliders = new _geometry__WEBPACK_IMPORTED_MODULE_5__.ColliderSet(rawColliders);
        this.joints = new _dynamics__WEBPACK_IMPORTED_MODULE_6__.JointSet(rawJoints);
        this.ccdSolver = new _dynamics__WEBPACK_IMPORTED_MODULE_7__.CCDSolver(rawCCDSolver);
        this.queryPipeline = new _query_pipeline__WEBPACK_IMPORTED_MODULE_8__.QueryPipeline(rawQueryPipeline);
        this.physicsPipeline = new _physics_pipeline__WEBPACK_IMPORTED_MODULE_9__.PhysicsPipeline(rawPhysicsPipeline);
        this.serializationPipeline = new _serialization_pipeline__WEBPACK_IMPORTED_MODULE_10__.SerializationPipeline(rawSerializationPipeline);
    }
    /**
     * Release the WASM memory occupied by this physics world.
     *
     * All the fields of this physics world will be freed as well,
     * so there is no need to call their `.free()` methods individually.
     */
    World.prototype.free = function () {
        this.integrationParameters.free();
        this.islands.free();
        this.broadPhase.free();
        this.narrowPhase.free();
        this.bodies.free();
        this.colliders.free();
        this.joints.free();
        this.ccdSolver.free();
        this.queryPipeline.free();
        this.physicsPipeline.free();
        this.serializationPipeline.free();
        this.integrationParameters = undefined;
        this.islands = undefined;
        this.broadPhase = undefined;
        this.narrowPhase = undefined;
        this.bodies = undefined;
        this.colliders = undefined;
        this.ccdSolver = undefined;
        this.joints = undefined;
        this.queryPipeline = undefined;
        this.physicsPipeline = undefined;
        this.serializationPipeline = undefined;
    };
    World.fromRaw = function (raw) {
        if (!raw)
            return null;
        return new World(_math__WEBPACK_IMPORTED_MODULE_11__.VectorOps.fromRaw(raw.takeGravity()), raw.takeIntegrationParameters(), raw.takeIslandManager(), raw.takeBroadPhase(), raw.takeNarrowPhase(), raw.takeBodies(), raw.takeColliders(), raw.takeJoints());
    };
    /**
     * Takes a snapshot of this world.
     *
     * Use `World.restoreSnapshot` to create a new physics world with a state identical to
     * the state when `.takeSnapshot()` is called.
     */
    World.prototype.takeSnapshot = function () {
        return this.serializationPipeline.serializeAll(this.gravity, this.integrationParameters, this.islands, this.broadPhase, this.narrowPhase, this.bodies, this.colliders, this.joints);
    };
    /**
     * Creates a new physics world from a snapshot.
     *
     * This new physics world will be an identical copy of the snapshoted physics world.
     */
    World.restoreSnapshot = function (data) {
        var deser = new _serialization_pipeline__WEBPACK_IMPORTED_MODULE_10__.SerializationPipeline();
        return deser.deserializeAll(data);
    };
    /**
     * Advance the simulation by one time step.
     *
     * All events generated by the physics engine are ignored.
     *
     * @param EventQueue - (optional) structure responsible for collecting
     *   events generated by the physics engine.
     */
    World.prototype.step = function (eventQueue, hooks) {
        this.physicsPipeline.step(this.gravity, this.integrationParameters, this.islands, this.broadPhase, this.narrowPhase, this.bodies, this.colliders, this.joints, this.ccdSolver, eventQueue, hooks);
        this.queryPipeline.update(this.islands, this.bodies, this.colliders);
    };
    Object.defineProperty(World.prototype, "timestep", {
        /**
         * The current simulation timestep.
         */
        get: function () {
            return this.integrationParameters.dt;
        },
        /**
         * Sets the new simulation timestep.
         *
         * The simulation timestep governs by how much the physics state of the world will
         * be integrated. A simulation timestep should:
         * - be as small as possible. Typical values evolve around 0.016 (assuming the chosen unit is milliseconds,
         * corresponds to the time between two frames of a game running at 60FPS).
         * - not vary too much during the course of the simulation. A timestep with large variations may
         * cause instabilities in the simulation.
         *
         * @param timestep - The timestep length, in milliseconds.
         */
        set: function (dt) {
            this.integrationParameters.dt = dt;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(World.prototype, "maxVelocityIterations", {
        /**
         * The maximum velocity iterations the velocity-based force constraint solver can make.
         */
        get: function () {
            return this.integrationParameters.maxVelocityIterations;
        },
        /**
         * Sets the maximum number of velocity iterations (default: 4).
         *
         * The greater this value is, the most rigid and realistic the physics simulation will be.
         * However a greater number of iterations is more computationally intensive.
         *
         * @param niter - The new maximum number of velocity iterations.
         */
        set: function (niter) {
            this.integrationParameters.maxVelocityIterations = niter;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(World.prototype, "maxPositionIterations", {
        /**
         * The maximum position iterations the position-based constraint regularization solver can make.
         */
        get: function () {
            return this.integrationParameters.maxPositionIterations;
        },
        /**
         * Sets the maximum number of position iterations (default: 1).
         *
         * The greater this value is, the less penetrations will be visible after one timestep where
         * the velocity solver did not converge entirely. Large values will degrade significantly
         * the performance of the simulation.
         *
         * To increase realism of the simulation it is recommended, more efficient, and more effecive,
         * to increase the number of velocity iterations instead of this number of position iterations.
         *
         * @param niter - The new maximum number of position iterations.
         */
        set: function (niter) {
            this.integrationParameters.maxPositionIterations = niter;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Creates a new rigid-body from the given rigd-body descriptior.
     *
     * @param body - The description of the rigid-body to create.
     */
    World.prototype.createRigidBody = function (body) {
        return this.bodies.get(this.bodies.createRigidBody(body));
    };
    /**
     * Creates a new collider.
     *
     * @param desc - The description of the collider.
     * @param parentHandle - The handle of the rigid-body this collider is attached to.
     */
    World.prototype.createCollider = function (desc, parentHandle) {
        return this.colliders.get(this.colliders.createCollider(this.bodies, desc, parentHandle));
    };
    /**
     * Creates a new joint from the given joint descriptior.
     *
     * @param joint - The description of the joint to create.
     * @param parent1 - The first rigid-body attached to this joint.
     * @param parent2 - The second rigid-body attached to this joint.
     */
    World.prototype.createJoint = function (params, parent1, parent2) {
        return this.joints.get(this.joints.createJoint(this.bodies, params, parent1.handle, parent2.handle));
    };
    /**
     * Retrieves a rigid-body from its handle.
     *
     * @param handle - The integer handle of the rigid-body to retrieve.
     */
    World.prototype.getRigidBody = function (handle) {
        return this.bodies.get(handle);
    };
    /**
     * Retrieves a collider from its handle.
     *
     * @param handle - The integer handle of the collider to retrieve.
     */
    World.prototype.getCollider = function (handle) {
        return this.colliders.get(handle);
    };
    /**
     * Retrieves a joint from its handle.
     *
     * @param handle - The integer handle of the rigid-body to retrieve.
     */
    World.prototype.getJoint = function (handle) {
        return this.joints.get(handle);
    };
    /**
     * Removes the given rigid-body from this physics world.
     *
     * This will remove this rigid-body as well as all its attached colliders and joints.
     * Every other bodies touching or attached by joints to this rigid-body will be woken-up.
     *
     * @param body - The rigid-body to remove.
     */
    World.prototype.removeRigidBody = function (body) {
        this.bodies.remove(body.handle, this.islands, this.colliders, this.joints);
    };
    /**
     * Removes the given collider from this physics world.
     *
     * @param collider - The collider to remove.
     * @param wakeUp - If set to `true`, the rigid-body this collider is attached to will be awaken.
     */
    World.prototype.removeCollider = function (collider, wakeUp) {
        this.colliders.remove(collider.handle, this.islands, this.bodies, wakeUp);
    };
    /**
     * Removes the given joint from this physics world.
     *
     * @param joint - The joint to remove.
     * @param wakeUp - If set to `true`, the rigid-bodies attached by this joint will be awaken.
     */
    World.prototype.removeJoint = function (joint, wakeUp) {
        this.joints.remove(joint.handle, this.islands, this.bodies, wakeUp);
    };
    /**
     * Applies the given closure to each collider managed by this physics world.
     *
     * @param f(collider) - The function to apply to each collider managed by this physics world. Called as `f(collider)`.
     */
    World.prototype.forEachCollider = function (f) {
        this.colliders.forEachCollider(f);
    };
    /**
     * Applies the given closure to the integer handle of each collider managed by this physics world.
     *
     * @param f(handle) - The function to apply to the integer handle of each collider managed by this physics world. Called as `f(collider)`.
     */
    World.prototype.forEachColliderHandle = function (f) {
        this.colliders.forEachColliderHandle(f);
    };
    /**
     * Applies the given closure to each rigid-body managed by this physics world.
     *
     * @param f(body) - The function to apply to each rigid-body managed by this physics world. Called as `f(collider)`.
     */
    World.prototype.forEachRigidBody = function (f) {
        this.bodies.forEachRigidBody(f);
    };
    /**
     * Applies the given closure to the integer handle of each rigid-body managed by this physics world.
     *
     * @param f(handle) - The function to apply to the integer handle of each rigid-body managed by this physics world. Called as `f(collider)`.
     */
    World.prototype.forEachRigidBodyHandle = function (f) {
        this.bodies.forEachRigidBodyHandle(f);
    };
    /**
     * Applies the given closure to each active rigid-body managed by this physics world.
     *
     * After a short time of inactivity, a rigid-body is automatically deactivated ("asleep") by
     * the physics engine in order to save computational power. A sleeping rigid-body never moves
     * unless it is moved manually by the user.
     *
     * @param f - The function to apply to each active rigid-body managed by this physics world. Called as `f(collider)`.
     */
    World.prototype.forEachActiveRigidBody = function (f) {
        this.bodies.forEachActiveRigidBody(this.islands, f);
    };
    /**
     * Applies the given closure to the integer handle of each active rigid-body
     * managed by this physics world.
     *
     * After a short time of inactivity, a rigid-body is automatically deactivated ("asleep") by
     * the physics engine in order to save computational power. A sleeping rigid-body never moves
     * unless it is moved manually by the user.
     *
     * @param f(handle) - The function to apply to the integer handle of each active rigid-body managed by this
     *   physics world. Called as `f(collider)`.
     */
    World.prototype.forEachActiveRigidBodyHandle = function (f) {
        this.islands.forEachActiveRigidBodyHandle(f);
    };
    /**
     * Find the closest intersection between a ray and the physics world.
     *
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     */
    World.prototype.castRay = function (ray, maxToi, solid, groups) {
        return this.queryPipeline.castRay(this.colliders, ray, maxToi, solid, groups);
    };
    /**
     * Find the closest intersection between a ray and the physics world.
     *
     * This also computes the normal at the hit point.
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     */
    World.prototype.castRayAndGetNormal = function (ray, maxToi, solid, groups) {
        return this.queryPipeline.castRayAndGetNormal(this.colliders, ray, maxToi, solid, groups);
    };
    /**
     * Cast a ray and collects all the intersections between a ray and the scene.
     *
     * @param ray - The ray to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the length of the ray to `ray.dir.norm() * maxToi`.
     * @param solid - If `false` then the ray will attempt to hit the boundary of a shape, even if its
     *   origin already lies inside of a shape. In other terms, `true` implies that all shapes are plain,
     *   whereas `false` implies that all shapes are hollow for this ray-cast.
     * @param groups - Used to filter the colliders that can or cannot be hit by the ray.
     * @param callback - The callback called once per hit (in no particular order) between a ray and a collider.
     *   If this callback returns `false`, then the cast will stop and no further hits will be detected/reported.
     */
    World.prototype.intersectionsWithRay = function (ray, maxToi, solid, groups, callback) {
        this.queryPipeline.intersectionsWithRay(this.colliders, ray, maxToi, solid, groups, callback);
    };
    /**
     * Gets the handle of up to one collider intersecting the given shape.
     *
     * @param shapePos - The position of the shape used for the intersection test.
     * @param shapeRot - The orientation of the shape used for the intersection test.
     * @param shape - The shape used for the intersection test.
     * @param groups - The bit groups and filter associated to the ray, in order to only
     *   hit the colliders with collision groups compatible with the ray's group.
     */
    World.prototype.intersectionWithShape = function (shapePos, shapeRot, shape, groups) {
        return this.queryPipeline.intersectionWithShape(this.colliders, shapePos, shapeRot, shape, groups);
    };
    /**
     * Find the projection of a point on the closest collider.
     *
     * @param point - The point to project.
     * @param solid - If this is set to `true` then the collider shapes are considered to
     *   be plain (if the point is located inside of a plain shape, its projection is the point
     *   itself). If it is set to `false` the collider shapes are considered to be hollow
     *   (if the point is located inside of an hollow shape, it is projected on the shape's
     *   boundary).
     * @param groups - The bit groups and filter associated to the point to project, in order to only
     *   project on colliders with collision groups compatible with the ray's group.
     */
    World.prototype.projectPoint = function (point, solid, groups) {
        return this.queryPipeline.projectPoint(this.colliders, point, solid, groups);
    };
    /**
     * Find all the colliders containing the given point.
     *
     * @param point - The point used for the containment test.
     * @param groups - The bit groups and filter associated to the point to test, in order to only
     *   test on colliders with collision groups compatible with the ray's group.
     * @param callback - A function called with the handles of each collider with a shape
     *   containing the `point`.
     */
    World.prototype.intersectionsWithPoint = function (point, groups, callback) {
        this.queryPipeline.intersectionsWithPoint(this.colliders, point, groups, callback);
    };
    /**
     * Casts a shape at a constant linear velocity and retrieve the first collider it hits.
     * This is similar to ray-casting except that we are casting a whole shape instead of
     * just a point (the ray origin).
     *
     * @param shapePos - The initial position of the shape to cast.
     * @param shapeRot - The initial rotation of the shape to cast.
     * @param shapeVel - The constant velocity of the shape to cast (i.e. the cast direction).
     * @param shape - The shape to cast.
     * @param maxToi - The maximum time-of-impact that can be reported by this cast. This effectively
     *   limits the distance traveled by the shape to `shapeVel.norm() * maxToi`.
     * @param groups - The bit groups and filter associated to the shape to cast, in order to only
     *   test on colliders with collision groups compatible with this group.
     */
    World.prototype.castShape = function (shapePos, shapeRot, shapeVel, shape, maxToi, groups) {
        return this.queryPipeline.castShape(this.colliders, shapePos, shapeRot, shapeVel, shape, maxToi, groups);
    };
    /**
     * Retrieve all the colliders intersecting the given shape.
     *
     * @param shapePos - The position of the shape to test.
     * @param shapeRot - The orientation of the shape to test.
     * @param shape - The shape to test.
     * @param groups - The bit groups and filter associated to the shape to test, in order to only
     *   test on colliders with collision groups compatible with this group.
     * @param callback - A function called with the handles of each collider intersecting the `shape`.
     */
    World.prototype.intersectionsWithShape = function (shapePos, shapeRot, shape, groups, callback) {
        this.queryPipeline.intersectionsWithShape(this.colliders, shapePos, shapeRot, shape, groups, callback);
    };
    /**
     * Finds the handles of all the colliders with an AABB intersecting the given AABB.
     *
     * @param aabbCenter - The center of the AABB to test.
     * @param aabbHalfExtents - The half-extents of the AABB to test.
     * @param callback - The callback that will be called with the handles of all the colliders
     *                   currently intersecting the given AABB.
     */
    World.prototype.collidersWithAabbIntersectingAabb = function (aabbCenter, aabbHalfExtents, callback) {
        this.queryPipeline.collidersWithAabbIntersectingAabb(aabbCenter, aabbHalfExtents, callback);
    };
    /**
     * Enumerates all the colliders potentially in contact with the given collider.
     *
     * @param collider1 - The second collider involved in the contact.
     * @param f - Closure that will be called on each collider that is in contact with `collider1`.
     */
    World.prototype.contactsWith = function (collider1, f) {
        this.narrowPhase.contactsWith(collider1, f);
    };
    /**
     * Enumerates all the colliders intersecting the given colliders, assuming one of them
     * is a sensor.
     */
    World.prototype.intersectionsWith = function (collider1, f) {
        this.narrowPhase.intersectionsWith(collider1, f);
    };
    /**
     * Iterates through all the contact manifolds between the given pair of colliders.
     *
     * @param collider1 - The first collider involved in the contact.
     * @param collider2 - The second collider involved in the contact.
     * @param f - Closure that will be called on each contact manifold between the two colliders. If the second argument
     *            passed to this closure is `true`, then the contact manifold data is flipped, i.e., methods like `localNormal1`
     *            actually apply to the `collider2` and fields like `localNormal2` apply to the `collider1`.
     */
    World.prototype.contactPair = function (collider1, collider2, f) {
        this.narrowPhase.contactPair(collider1, collider2, f);
    };
    /**
     * Returns `true` if `collider1` and `collider2` intersect and at least one of them is a sensor.
     * @param collider1 − The first collider involved in the intersection.
     * @param collider2 − The second collider involved in the intersection.
     */
    World.prototype.intersectionPair = function (collider1, collider2) {
        return this.narrowPhase.intersectionPair(collider1, collider2);
    };
    return World;
}());

//# sourceMappingURL=world.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/rapier.js":
/*!***************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/rapier.js ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActiveCollisionTypes": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ActiveCollisionTypes),
/* harmony export */   "ActiveEvents": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ActiveEvents),
/* harmony export */   "ActiveHooks": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ActiveHooks),
/* harmony export */   "Ball": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Ball),
/* harmony export */   "BallJoint": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.BallJoint),
/* harmony export */   "BroadPhase": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.BroadPhase),
/* harmony export */   "CCDSolver": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.CCDSolver),
/* harmony export */   "Capsule": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Capsule),
/* harmony export */   "CoefficientCombineRule": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.CoefficientCombineRule),
/* harmony export */   "Collider": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Collider),
/* harmony export */   "ColliderDesc": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ColliderDesc),
/* harmony export */   "ColliderSet": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ColliderSet),
/* harmony export */   "ConvexPolygon": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ConvexPolygon),
/* harmony export */   "Cuboid": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Cuboid),
/* harmony export */   "EventQueue": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.EventQueue),
/* harmony export */   "FixedJoint": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.FixedJoint),
/* harmony export */   "Heightfield": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Heightfield),
/* harmony export */   "IntegrationParameters": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.IntegrationParameters),
/* harmony export */   "IslandManager": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.IslandManager),
/* harmony export */   "Joint": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Joint),
/* harmony export */   "JointParams": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.JointParams),
/* harmony export */   "JointSet": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.JointSet),
/* harmony export */   "JointType": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.JointType),
/* harmony export */   "NarrowPhase": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.NarrowPhase),
/* harmony export */   "PhysicsPipeline": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.PhysicsPipeline),
/* harmony export */   "PointColliderProjection": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.PointColliderProjection),
/* harmony export */   "Polyline": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Polyline),
/* harmony export */   "PrismaticJoint": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.PrismaticJoint),
/* harmony export */   "Ray": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Ray),
/* harmony export */   "RayColliderIntersection": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RayColliderIntersection),
/* harmony export */   "RayColliderToi": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RayColliderToi),
/* harmony export */   "RigidBody": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RigidBody),
/* harmony export */   "RigidBodyDesc": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RigidBodyDesc),
/* harmony export */   "RigidBodySet": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RigidBodySet),
/* harmony export */   "RigidBodyType": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RigidBodyType),
/* harmony export */   "RotationOps": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RotationOps),
/* harmony export */   "RoundConvexPolygon": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RoundConvexPolygon),
/* harmony export */   "RoundCuboid": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RoundCuboid),
/* harmony export */   "RoundTriangle": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.RoundTriangle),
/* harmony export */   "Segment": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Segment),
/* harmony export */   "SerializationPipeline": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.SerializationPipeline),
/* harmony export */   "ShapeColliderTOI": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ShapeColliderTOI),
/* harmony export */   "ShapeType": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.ShapeType),
/* harmony export */   "SolverFlags": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.SolverFlags),
/* harmony export */   "SpringModel": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.SpringModel),
/* harmony export */   "TempContactManifold": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.TempContactManifold),
/* harmony export */   "TriMesh": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.TriMesh),
/* harmony export */   "Triangle": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Triangle),
/* harmony export */   "UnitJoint": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.UnitJoint),
/* harmony export */   "Vector2": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.Vector2),
/* harmony export */   "VectorOps": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.VectorOps),
/* harmony export */   "World": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.World),
/* harmony export */   "version": () => (/* reexport safe */ _exports__WEBPACK_IMPORTED_MODULE_0__.version),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exports */ "./node_modules/@dimforge/rapier2d/exports.js");
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_exports__WEBPACK_IMPORTED_MODULE_0__]);
_exports__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_exports__WEBPACK_IMPORTED_MODULE_0__);
//# sourceMappingURL=rapier.js.map
});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js":
/*!*************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "version": () => (/* binding */ version),
/* harmony export */   "RawJointType": () => (/* binding */ RawJointType),
/* harmony export */   "RawSpringModel": () => (/* binding */ RawSpringModel),
/* harmony export */   "RawRigidBodyType": () => (/* binding */ RawRigidBodyType),
/* harmony export */   "RawShapeType": () => (/* binding */ RawShapeType),
/* harmony export */   "RawBroadPhase": () => (/* binding */ RawBroadPhase),
/* harmony export */   "RawCCDSolver": () => (/* binding */ RawCCDSolver),
/* harmony export */   "RawColliderSet": () => (/* binding */ RawColliderSet),
/* harmony export */   "RawContactManifold": () => (/* binding */ RawContactManifold),
/* harmony export */   "RawContactPair": () => (/* binding */ RawContactPair),
/* harmony export */   "RawDeserializedWorld": () => (/* binding */ RawDeserializedWorld),
/* harmony export */   "RawEventQueue": () => (/* binding */ RawEventQueue),
/* harmony export */   "RawIntegrationParameters": () => (/* binding */ RawIntegrationParameters),
/* harmony export */   "RawIslandManager": () => (/* binding */ RawIslandManager),
/* harmony export */   "RawJointParams": () => (/* binding */ RawJointParams),
/* harmony export */   "RawJointSet": () => (/* binding */ RawJointSet),
/* harmony export */   "RawNarrowPhase": () => (/* binding */ RawNarrowPhase),
/* harmony export */   "RawPhysicsPipeline": () => (/* binding */ RawPhysicsPipeline),
/* harmony export */   "RawPointColliderProjection": () => (/* binding */ RawPointColliderProjection),
/* harmony export */   "RawQueryPipeline": () => (/* binding */ RawQueryPipeline),
/* harmony export */   "RawRayColliderIntersection": () => (/* binding */ RawRayColliderIntersection),
/* harmony export */   "RawRayColliderToi": () => (/* binding */ RawRayColliderToi),
/* harmony export */   "RawRigidBodySet": () => (/* binding */ RawRigidBodySet),
/* harmony export */   "RawRotation": () => (/* binding */ RawRotation),
/* harmony export */   "RawSerializationPipeline": () => (/* binding */ RawSerializationPipeline),
/* harmony export */   "RawShape": () => (/* binding */ RawShape),
/* harmony export */   "RawShapeColliderTOI": () => (/* binding */ RawShapeColliderTOI),
/* harmony export */   "RawVector": () => (/* binding */ RawVector),
/* harmony export */   "__wbindgen_object_drop_ref": () => (/* binding */ __wbindgen_object_drop_ref),
/* harmony export */   "__wbindgen_number_new": () => (/* binding */ __wbindgen_number_new),
/* harmony export */   "__wbg_rawraycolliderintersection_new": () => (/* binding */ __wbg_rawraycolliderintersection_new),
/* harmony export */   "__wbindgen_string_new": () => (/* binding */ __wbindgen_string_new),
/* harmony export */   "__wbg_now_885ca88fafee0fd1": () => (/* binding */ __wbg_now_885ca88fafee0fd1),
/* harmony export */   "__wbg_newnoargs_1a11e7e8c906996c": () => (/* binding */ __wbg_newnoargs_1a11e7e8c906996c),
/* harmony export */   "__wbg_get_6d26c712aa73c8b2": () => (/* binding */ __wbg_get_6d26c712aa73c8b2),
/* harmony export */   "__wbg_call_e91f71ddf1f45cff": () => (/* binding */ __wbg_call_e91f71ddf1f45cff),
/* harmony export */   "__wbindgen_object_clone_ref": () => (/* binding */ __wbindgen_object_clone_ref),
/* harmony export */   "__wbg_call_e3c72355d091d5d4": () => (/* binding */ __wbg_call_e3c72355d091d5d4),
/* harmony export */   "__wbg_call_c143b19d87139944": () => (/* binding */ __wbg_call_c143b19d87139944),
/* harmony export */   "__wbg_call_72facd37dbc97ddb": () => (/* binding */ __wbg_call_72facd37dbc97ddb),
/* harmony export */   "__wbg_bind_07839579f523aa89": () => (/* binding */ __wbg_bind_07839579f523aa89),
/* harmony export */   "__wbg_buffer_79a3294266d4e783": () => (/* binding */ __wbg_buffer_79a3294266d4e783),
/* harmony export */   "__wbg_self_b4546ea7b590539e": () => (/* binding */ __wbg_self_b4546ea7b590539e),
/* harmony export */   "__wbg_window_c279fea81f426a68": () => (/* binding */ __wbg_window_c279fea81f426a68),
/* harmony export */   "__wbg_globalThis_038a6ea0ff17789f": () => (/* binding */ __wbg_globalThis_038a6ea0ff17789f),
/* harmony export */   "__wbg_global_4f93ce884bcee597": () => (/* binding */ __wbg_global_4f93ce884bcee597),
/* harmony export */   "__wbindgen_is_undefined": () => (/* binding */ __wbindgen_is_undefined),
/* harmony export */   "__wbg_newwithbyteoffsetandlength_22a36e6023ad3cd0": () => (/* binding */ __wbg_newwithbyteoffsetandlength_22a36e6023ad3cd0),
/* harmony export */   "__wbg_new_945397fb09fec0b8": () => (/* binding */ __wbg_new_945397fb09fec0b8),
/* harmony export */   "__wbg_set_223873223acf6d07": () => (/* binding */ __wbg_set_223873223acf6d07),
/* harmony export */   "__wbg_length_68e13e7bbd918464": () => (/* binding */ __wbg_length_68e13e7bbd918464),
/* harmony export */   "__wbindgen_number_get": () => (/* binding */ __wbindgen_number_get),
/* harmony export */   "__wbindgen_boolean_get": () => (/* binding */ __wbindgen_boolean_get),
/* harmony export */   "__wbindgen_debug_string": () => (/* binding */ __wbindgen_debug_string),
/* harmony export */   "__wbindgen_throw": () => (/* binding */ __wbindgen_throw),
/* harmony export */   "__wbindgen_memory": () => (/* binding */ __wbindgen_memory)
/* harmony export */ });
/* harmony import */ var _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rapier_wasm2d_bg.wasm */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.wasm");
/* module decorator */ module = __webpack_require__.hmd(module);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__]);
_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];


const heap = new Array(32).fill(undefined);

heap.push(undefined, null, true, false);

function getObject(idx) { return heap[idx]; }

let heap_next = heap.length;

function dropObject(idx) {
    if (idx < 36) return;
    heap[idx] = heap_next;
    heap_next = idx;
}

function takeObject(idx) {
    const ret = getObject(idx);
    dropObject(idx);
    return ret;
}

function addHeapObject(obj) {
    if (heap_next === heap.length) heap.push(heap.length + 1);
    const idx = heap_next;
    heap_next = heap[idx];

    heap[idx] = obj;
    return idx;
}

const lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;

let cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });

cachedTextDecoder.decode();

let cachegetUint8Memory0 = null;
function getUint8Memory0() {
    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {
        cachegetUint8Memory0 = new Uint8Array(_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);
    }
    return cachegetUint8Memory0;
}

function getStringFromWasm0(ptr, len) {
    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));
}

function isLikeNone(x) {
    return x === undefined || x === null;
}

let cachegetFloat64Memory0 = null;
function getFloat64Memory0() {
    if (cachegetFloat64Memory0 === null || cachegetFloat64Memory0.buffer !== _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {
        cachegetFloat64Memory0 = new Float64Array(_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);
    }
    return cachegetFloat64Memory0;
}

let cachegetInt32Memory0 = null;
function getInt32Memory0() {
    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {
        cachegetInt32Memory0 = new Int32Array(_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);
    }
    return cachegetInt32Memory0;
}

function debugString(val) {
    // primitive types
    const type = typeof val;
    if (type == 'number' || type == 'boolean' || val == null) {
        return  `${val}`;
    }
    if (type == 'string') {
        return `"${val}"`;
    }
    if (type == 'symbol') {
        const description = val.description;
        if (description == null) {
            return 'Symbol';
        } else {
            return `Symbol(${description})`;
        }
    }
    if (type == 'function') {
        const name = val.name;
        if (typeof name == 'string' && name.length > 0) {
            return `Function(${name})`;
        } else {
            return 'Function';
        }
    }
    // objects
    if (Array.isArray(val)) {
        const length = val.length;
        let debug = '[';
        if (length > 0) {
            debug += debugString(val[0]);
        }
        for(let i = 1; i < length; i++) {
            debug += ', ' + debugString(val[i]);
        }
        debug += ']';
        return debug;
    }
    // Test for built-in
    const builtInMatches = /\[object ([^\]]+)\]/.exec(toString.call(val));
    let className;
    if (builtInMatches.length > 1) {
        className = builtInMatches[1];
    } else {
        // Failed to match the standard '[object ClassName]'
        return toString.call(val);
    }
    if (className == 'Object') {
        // we're a user defined class or Object
        // JSON.stringify avoids problems with cycles, and is generally much
        // easier than looping through ownProperties of `val`.
        try {
            return 'Object(' + JSON.stringify(val) + ')';
        } catch (_) {
            return 'Object';
        }
    }
    // errors
    if (val instanceof Error) {
        return `${val.name}: ${val.message}\n${val.stack}`;
    }
    // TODO we could test for more things here, like `Set`s and `Map`s.
    return className;
}

let WASM_VECTOR_LEN = 0;

const lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;

let cachedTextEncoder = new lTextEncoder('utf-8');

const encodeString = (typeof cachedTextEncoder.encodeInto === 'function'
    ? function (arg, view) {
    return cachedTextEncoder.encodeInto(arg, view);
}
    : function (arg, view) {
    const buf = cachedTextEncoder.encode(arg);
    view.set(buf);
    return {
        read: arg.length,
        written: buf.length
    };
});

function passStringToWasm0(arg, malloc, realloc) {

    if (realloc === undefined) {
        const buf = cachedTextEncoder.encode(arg);
        const ptr = malloc(buf.length);
        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);
        WASM_VECTOR_LEN = buf.length;
        return ptr;
    }

    let len = arg.length;
    let ptr = malloc(len);

    const mem = getUint8Memory0();

    let offset = 0;

    for (; offset < len; offset++) {
        const code = arg.charCodeAt(offset);
        if (code > 0x7F) break;
        mem[ptr + offset] = code;
    }

    if (offset !== len) {
        if (offset !== 0) {
            arg = arg.slice(offset);
        }
        ptr = realloc(ptr, len, len = offset + arg.length * 3);
        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);
        const ret = encodeString(arg, view);

        offset += ret.written;
    }

    WASM_VECTOR_LEN = offset;
    return ptr;
}
/**
* @returns {string}
*/
function version() {
    try {
        const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.version(retptr);
        var r0 = getInt32Memory0()[retptr / 4 + 0];
        var r1 = getInt32Memory0()[retptr / 4 + 1];
        return getStringFromWasm0(r0, r1);
    } finally {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1);
    }
}

let stack_pointer = 32;

function addBorrowedObject(obj) {
    if (stack_pointer == 1) throw new Error('out of js stack');
    heap[--stack_pointer] = obj;
    return stack_pointer;
}

function _assertClass(instance, klass) {
    if (!(instance instanceof klass)) {
        throw new Error(`expected instance of ${klass.name}`);
    }
    return instance.ptr;
}

let cachegetFloat32Memory0 = null;
function getFloat32Memory0() {
    if (cachegetFloat32Memory0 === null || cachegetFloat32Memory0.buffer !== _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {
        cachegetFloat32Memory0 = new Float32Array(_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);
    }
    return cachegetFloat32Memory0;
}

function getArrayF32FromWasm0(ptr, len) {
    return getFloat32Memory0().subarray(ptr / 4, ptr / 4 + len);
}

let cachegetUint32Memory0 = null;
function getUint32Memory0() {
    if (cachegetUint32Memory0 === null || cachegetUint32Memory0.buffer !== _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer) {
        cachegetUint32Memory0 = new Uint32Array(_rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer);
    }
    return cachegetUint32Memory0;
}

function getArrayU32FromWasm0(ptr, len) {
    return getUint32Memory0().subarray(ptr / 4, ptr / 4 + len);
}

function passArrayF32ToWasm0(arg, malloc) {
    const ptr = malloc(arg.length * 4);
    getFloat32Memory0().set(arg, ptr / 4);
    WASM_VECTOR_LEN = arg.length;
    return ptr;
}

function passArray32ToWasm0(arg, malloc) {
    const ptr = malloc(arg.length * 4);
    getUint32Memory0().set(arg, ptr / 4);
    WASM_VECTOR_LEN = arg.length;
    return ptr;
}

function handleError(f, args) {
    try {
        return f.apply(this, args);
    } catch (e) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_exn_store(addHeapObject(e));
    }
}
/**
*/
const RawJointType = Object.freeze({ Ball:0,"0":"Ball",Fixed:1,"1":"Fixed",Prismatic:2,"2":"Prismatic",Revolute:3,"3":"Revolute", });
/**
*/
const RawSpringModel = Object.freeze({ Disabled:0,"0":"Disabled",VelocityBased:1,"1":"VelocityBased",AccelerationBased:2,"2":"AccelerationBased",ForceBased:3,"3":"ForceBased", });
/**
*/
const RawRigidBodyType = Object.freeze({ Dynamic:0,"0":"Dynamic",Static:1,"1":"Static",KinematicPositionBased:2,"2":"KinematicPositionBased",KinematicVelocityBased:3,"3":"KinematicVelocityBased", });
/**
*/
const RawShapeType = Object.freeze({ Ball:0,"0":"Ball",Cuboid:1,"1":"Cuboid",Capsule:2,"2":"Capsule",Segment:3,"3":"Segment",Polyline:4,"4":"Polyline",Triangle:5,"5":"Triangle",TriMesh:6,"6":"TriMesh",HeightField:7,"7":"HeightField",Compound:8,"8":"Compound",ConvexPolygon:9,"9":"ConvexPolygon",RoundCuboid:10,"10":"RoundCuboid",RoundTriangle:11,"11":"RoundTriangle",RoundConvexPolygon:12,"12":"RoundConvexPolygon", });
/**
*/
class RawBroadPhase {

    static __wrap(ptr) {
        const obj = Object.create(RawBroadPhase.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawbroadphase_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawbroadphase_new();
        return RawBroadPhase.__wrap(ret);
    }
}
/**
*/
class RawCCDSolver {

    static __wrap(ptr) {
        const obj = Object.create(RawCCDSolver.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawccdsolver_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawccdsolver_new();
        return RawCCDSolver.__wrap(ret);
    }
}
/**
*/
class RawColliderSet {

    static __wrap(ptr) {
        const obj = Object.create(RawColliderSet.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawcolliderset_free(ptr);
    }
    /**
    * The world-space translation of this collider.
    * @param {number} handle
    * @returns {RawVector}
    */
    coTranslation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coTranslation(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The world-space orientation of this collider.
    * @param {number} handle
    * @returns {RawRotation}
    */
    coRotation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coRotation(this.ptr, handle);
        return RawRotation.__wrap(ret);
    }
    /**
    * Sets the translation of this collider.
    *
    * # Parameters
    * - `x`: the world-space position of the collider along the `x` axis.
    * - `y`: the world-space position of the collider along the `y` axis.
    * - `wakeUp`: forces the collider to wake-up so it is properly affected by forces if it
    * wasn't moving before modifying its position.
    * @param {number} handle
    * @param {number} x
    * @param {number} y
    */
    coSetTranslation(handle, x, y) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetTranslation(this.ptr, handle, x, y);
    }
    /**
    * @param {number} handle
    * @param {number} x
    * @param {number} y
    */
    coSetTranslationWrtParent(handle, x, y) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetTranslationWrtParent(this.ptr, handle, x, y);
    }
    /**
    * Sets the rotation angle of this collider.
    *
    * # Parameters
    * - `angle`: the rotation angle, in radians.
    * - `wakeUp`: forces the collider to wake-up so it is properly affected by forces if it
    * wasn't moving before modifying its position.
    * @param {number} handle
    * @param {number} angle
    */
    coSetRotation(handle, angle) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetRotation(this.ptr, handle, angle);
    }
    /**
    * @param {number} handle
    * @param {number} angle
    */
    coSetRotationWrtParent(handle, angle) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetRotationWrtParent(this.ptr, handle, angle);
    }
    /**
    * Is this collider a sensor?
    * @param {number} handle
    * @returns {boolean}
    */
    coIsSensor(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coIsSensor(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * The type of the shape of this collider.
    * @param {number} handle
    * @returns {number}
    */
    coShapeType(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coShapeType(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The half-extents of this collider if it is has a cuboid shape.
    * @param {number} handle
    * @returns {RawVector | undefined}
    */
    coHalfExtents(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coHalfExtents(this.ptr, handle);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * The radius of this collider if it is a ball, capsule, cylinder, or cone shape.
    * @param {number} handle
    * @returns {number | undefined}
    */
    coRadius(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coRadius(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getFloat32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The radius of this collider if it is a capsule, cylinder, or cone shape.
    * @param {number} handle
    * @returns {number | undefined}
    */
    coHalfHeight(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coHalfHeight(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getFloat32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The radius of the round edges of this collider if it is a round cylinder.
    * @param {number} handle
    * @returns {number | undefined}
    */
    coRoundRadius(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coRoundRadius(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getFloat32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The vertices of this triangle mesh, polyline, convex polyhedron, or convex polyhedron, if it is one.
    * @param {number} handle
    * @returns {Float32Array | undefined}
    */
    coVertices(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coVertices(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getInt32Memory0()[retptr / 4 + 1];
            let v0;
            if (r0 !== 0) {
                v0 = getArrayF32FromWasm0(r0, r1).slice();
                _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 4);
            }
            return v0;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The indices of this triangle mesh, polyline, or convex polyhedron, if it is one.
    * @param {number} handle
    * @returns {Uint32Array | undefined}
    */
    coIndices(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coIndices(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getInt32Memory0()[retptr / 4 + 1];
            let v0;
            if (r0 !== 0) {
                v0 = getArrayU32FromWasm0(r0, r1).slice();
                _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 4);
            }
            return v0;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The height of this heightfield if it is one.
    * @param {number} handle
    * @returns {Float32Array | undefined}
    */
    coHeightfieldHeights(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coHeightfieldHeights(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getInt32Memory0()[retptr / 4 + 1];
            let v0;
            if (r0 !== 0) {
                v0 = getArrayF32FromWasm0(r0, r1).slice();
                _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(r0, r1 * 4);
            }
            return v0;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The scaling factor applied of this heightfield if it is one.
    * @param {number} handle
    * @returns {RawVector | undefined}
    */
    coHeightfieldScale(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coHeightfieldScale(this.ptr, handle);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * The unique integer identifier of the collider this collider is attached to.
    * @param {number} handle
    * @returns {number}
    */
    coParent(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coParent(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The friction coefficient of this collider.
    * @param {number} handle
    * @returns {number}
    */
    coFriction(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coFriction(this.ptr, handle);
        return ret;
    }
    /**
    * The density of this collider.
    * @param {number} handle
    * @returns {number | undefined}
    */
    coDensity(handle) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coDensity(retptr, this.ptr, handle);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getFloat32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * The collision groups of this collider.
    * @param {number} handle
    * @returns {number}
    */
    coCollisionGroups(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coCollisionGroups(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The solver groups of this collider.
    * @param {number} handle
    * @returns {number}
    */
    coSolverGroups(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSolverGroups(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The physics hooks enabled for this collider.
    * @param {number} handle
    * @returns {number}
    */
    coActiveHooks(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coActiveHooks(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The collision types enabled for this collider.
    * @param {number} handle
    * @returns {number}
    */
    coActiveCollisionTypes(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coActiveCollisionTypes(this.ptr, handle);
        return ret;
    }
    /**
    * The events enabled for this collider.
    * @param {number} handle
    * @returns {number}
    */
    coActiveEvents(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coActiveEvents(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @param {boolean} is_sensor
    */
    coSetSensor(handle, is_sensor) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetSensor(this.ptr, handle, is_sensor);
    }
    /**
    * @param {number} handle
    * @param {number} restitution
    */
    coSetRestitution(handle, restitution) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetRestitution(this.ptr, handle, restitution);
    }
    /**
    * @param {number} handle
    * @param {number} friction
    */
    coSetFriction(handle, friction) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetFriction(this.ptr, handle, friction);
    }
    /**
    * @param {number} handle
    * @returns {number}
    */
    coFrictionCombineRule(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coFrictionCombineRule(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @param {number} rule
    */
    coSetFrictionCombineRule(handle, rule) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetFrictionCombineRule(this.ptr, handle, rule);
    }
    /**
    * @param {number} handle
    * @returns {number}
    */
    coRestitutionCombineRule(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coRestitutionCombineRule(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @param {number} rule
    */
    coSetRestitutionCombineRule(handle, rule) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetRestitutionCombineRule(this.ptr, handle, rule);
    }
    /**
    * @param {number} handle
    * @param {number} groups
    */
    coSetCollisionGroups(handle, groups) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetCollisionGroups(this.ptr, handle, groups);
    }
    /**
    * @param {number} handle
    * @param {number} groups
    */
    coSetSolverGroups(handle, groups) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetSolverGroups(this.ptr, handle, groups);
    }
    /**
    * @param {number} handle
    * @param {number} hooks
    */
    coSetActiveHooks(handle, hooks) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetActiveHooks(this.ptr, handle, hooks);
    }
    /**
    * @param {number} handle
    * @param {number} events
    */
    coSetActiveEvents(handle, events) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetActiveEvents(this.ptr, handle, events);
    }
    /**
    * @param {number} handle
    * @param {number} types
    */
    coSetActiveCollisionTypes(handle, types) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetActiveCollisionTypes(this.ptr, handle, types);
    }
    /**
    * @param {number} handle
    * @param {RawShape} shape
    */
    coSetShape(handle, shape) {
        _assertClass(shape, RawShape);
        var ptr0 = shape.ptr;
        shape.ptr = 0;
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_coSetShape(this.ptr, handle, ptr0);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_new();
        return RawColliderSet.__wrap(ret);
    }
    /**
    * @returns {number}
    */
    len() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_len(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @returns {boolean}
    */
    contains(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_contains(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * @param {RawShape} shape
    * @param {RawVector} translation
    * @param {RawRotation} rotation
    * @param {boolean} useMassProps
    * @param {number} mass
    * @param {RawVector} centerOfMass
    * @param {number} principalAngularInertia
    * @param {number} density
    * @param {number} friction
    * @param {number} restitution
    * @param {number} frictionCombineRule
    * @param {number} restitutionCombineRule
    * @param {boolean} isSensor
    * @param {number} collisionGroups
    * @param {number} solverGroups
    * @param {number} activeCollisionTypes
    * @param {number} activeHooks
    * @param {number} activeEvents
    * @param {boolean} hasParent
    * @param {number} parent
    * @param {RawRigidBodySet} bodies
    * @returns {number | undefined}
    */
    createCollider(shape, translation, rotation, useMassProps, mass, centerOfMass, principalAngularInertia, density, friction, restitution, frictionCombineRule, restitutionCombineRule, isSensor, collisionGroups, solverGroups, activeCollisionTypes, activeHooks, activeEvents, hasParent, parent, bodies) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _assertClass(shape, RawShape);
            _assertClass(translation, RawVector);
            _assertClass(rotation, RawRotation);
            _assertClass(centerOfMass, RawVector);
            _assertClass(bodies, RawRigidBodySet);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_createCollider(retptr, this.ptr, shape.ptr, translation.ptr, rotation.ptr, useMassProps, mass, centerOfMass.ptr, principalAngularInertia, density, friction, restitution, frictionCombineRule, restitutionCombineRule, isSensor, collisionGroups, solverGroups, activeCollisionTypes, activeHooks, activeEvents, hasParent, parent, bodies.ptr);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getInt32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1 >>> 0;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * Removes a collider from this set and wake-up the rigid-body it is attached to.
    * @param {number} handle
    * @param {RawIslandManager} islands
    * @param {RawRigidBodySet} bodies
    * @param {boolean} wakeUp
    */
    remove(handle, islands, bodies, wakeUp) {
        _assertClass(islands, RawIslandManager);
        _assertClass(bodies, RawRigidBodySet);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_remove(this.ptr, handle, islands.ptr, bodies.ptr, wakeUp);
    }
    /**
    * Checks if a collider with the given integer handle exists.
    * @param {number} handle
    * @returns {boolean}
    */
    isHandleValid(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_contains(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Applies the given JavaScript function to the integer handle of each collider managed by this collider set.
    *
    * # Parameters
    * - `f(handle)`: the function to apply to the integer handle of each collider managed by this collider set. Called as `f(handle)`.
    * @param {Function} f
    */
    forEachColliderHandle(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcolliderset_forEachColliderHandle(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
}
/**
*/
class RawContactManifold {

    static __wrap(ptr) {
        const obj = Object.create(RawContactManifold.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawcontactmanifold_free(ptr);
    }
    /**
    * @returns {RawVector}
    */
    normal() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_normal(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {RawVector}
    */
    local_n1() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_local_n1(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {RawVector}
    */
    local_n2() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_local_n1(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {number}
    */
    subshape1() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_subshape1(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    subshape2() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_subshape1(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    num_contacts() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_num_contacts(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} i
    * @returns {RawVector | undefined}
    */
    contact_local_p1(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_local_p1(this.ptr, i);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * @param {number} i
    * @returns {RawVector | undefined}
    */
    contact_local_p2(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_local_p1(this.ptr, i);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    contact_dist(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_dist(this.ptr, i);
        return ret;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    contact_fid1(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_fid1(this.ptr, i);
        return ret >>> 0;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    contact_fid2(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_fid2(this.ptr, i);
        return ret >>> 0;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    contact_impulse(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_impulse(this.ptr, i);
        return ret;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    contact_tangent_impulse(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_contact_tangent_impulse(this.ptr, i);
        return ret;
    }
    /**
    * @returns {number}
    */
    num_solver_contacts() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_num_solver_contacts(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} i
    * @returns {RawVector | undefined}
    */
    solver_contact_point(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_solver_contact_point(this.ptr, i);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    solver_contact_dist(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_solver_contact_dist(this.ptr, i);
        return ret;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    solver_contact_friction(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_solver_contact_friction(this.ptr, i);
        return ret;
    }
    /**
    * @param {number} i
    * @returns {number}
    */
    solver_contact_restitution(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_solver_contact_restitution(this.ptr, i);
        return ret;
    }
    /**
    * @param {number} i
    * @returns {RawVector}
    */
    solver_contact_tangent_velocity(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactmanifold_solver_contact_tangent_velocity(this.ptr, i);
        return RawVector.__wrap(ret);
    }
}
/**
*/
class RawContactPair {

    static __wrap(ptr) {
        const obj = Object.create(RawContactPair.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawcontactpair_free(ptr);
    }
    /**
    * @returns {number}
    */
    collider1() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactpair_collider1(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    collider2() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactpair_collider2(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    numContactManifolds() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactpair_numContactManifolds(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} i
    * @returns {RawContactManifold | undefined}
    */
    contactManifold(i) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawcontactpair_contactManifold(this.ptr, i);
        return ret === 0 ? undefined : RawContactManifold.__wrap(ret);
    }
}
/**
*/
class RawDeserializedWorld {

    static __wrap(ptr) {
        const obj = Object.create(RawDeserializedWorld.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawdeserializedworld_free(ptr);
    }
    /**
    * @returns {RawVector | undefined}
    */
    takeGravity() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeGravity(this.ptr);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * @returns {RawIntegrationParameters | undefined}
    */
    takeIntegrationParameters() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeIntegrationParameters(this.ptr);
        return ret === 0 ? undefined : RawIntegrationParameters.__wrap(ret);
    }
    /**
    * @returns {RawIslandManager | undefined}
    */
    takeIslandManager() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeIslandManager(this.ptr);
        return ret === 0 ? undefined : RawIslandManager.__wrap(ret);
    }
    /**
    * @returns {RawBroadPhase | undefined}
    */
    takeBroadPhase() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeBroadPhase(this.ptr);
        return ret === 0 ? undefined : RawBroadPhase.__wrap(ret);
    }
    /**
    * @returns {RawNarrowPhase | undefined}
    */
    takeNarrowPhase() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeNarrowPhase(this.ptr);
        return ret === 0 ? undefined : RawNarrowPhase.__wrap(ret);
    }
    /**
    * @returns {RawRigidBodySet | undefined}
    */
    takeBodies() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeBodies(this.ptr);
        return ret === 0 ? undefined : RawRigidBodySet.__wrap(ret);
    }
    /**
    * @returns {RawColliderSet | undefined}
    */
    takeColliders() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeColliders(this.ptr);
        return ret === 0 ? undefined : RawColliderSet.__wrap(ret);
    }
    /**
    * @returns {RawJointSet | undefined}
    */
    takeJoints() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawdeserializedworld_takeJoints(this.ptr);
        return ret === 0 ? undefined : RawJointSet.__wrap(ret);
    }
}
/**
* A structure responsible for collecting events generated
* by the physics engine.
*/
class RawEventQueue {

    static __wrap(ptr) {
        const obj = Object.create(RawEventQueue.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_raweventqueue_free(ptr);
    }
    /**
    * Creates a new event collector.
    *
    * # Parameters
    * - `autoDrain`: setting this to `true` is strongly recommended. If true, the collector will
    * be automatically drained before each `world.step(collector)`. If false, the collector will
    * keep all events in memory unless it is manually drained/cleared; this may lead to unbounded use of
    * RAM if no drain is performed.
    * @param {boolean} autoDrain
    */
    constructor(autoDrain) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.raweventqueue_new(autoDrain);
        return RawEventQueue.__wrap(ret);
    }
    /**
    * Applies the given javascript closure on each contact event of this collector, then clear
    * the internal contact event buffer.
    *
    * # Parameters
    * - `f(handle1, handle2, started)`:  JavaScript closure applied to each contact event. The
    * closure should take three arguments: two integers representing the handles of the colliders
    * involved in the contact, and a boolean indicating if the contact started (true) or stopped
    * (false).
    * @param {Function} f
    */
    drainContactEvents(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.raweventqueue_drainContactEvents(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
    /**
    * Applies the given javascript closure on each proximity event of this collector, then clear
    * the internal proximity event buffer.
    *
    * # Parameters
    * - `f(handle1, handle2, prev_prox, new_prox)`:  JavaScript closure applied to each proximity event. The
    * closure should take four arguments: two integers representing the handles of the colliders
    * involved in the proximity, and one boolean representing the intersection status.
    * @param {Function} f
    */
    drainIntersectionEvents(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.raweventqueue_drainIntersectionEvents(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
    /**
    * Removes all events contained by this collector.
    */
    clear() {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.raweventqueue_clear(this.ptr);
    }
}
/**
*/
class RawIntegrationParameters {

    static __wrap(ptr) {
        const obj = Object.create(RawIntegrationParameters.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawintegrationparameters_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_new();
        return RawIntegrationParameters.__wrap(ret);
    }
    /**
    * @returns {number}
    */
    get dt() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_dt(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get erp() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_erp(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get jointErp() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_jointErp(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get warmstartCoeff() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_warmstartCoeff(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get allowedLinearError() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_allowedLinearError(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get predictionDistance() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_predictionDistance(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get allowedAngularError() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_allowedAngularError(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get maxLinearCorrection() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_maxLinearCorrection(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get maxAngularCorrection() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_maxAngularCorrection(this.ptr);
        return ret;
    }
    /**
    * @returns {number}
    */
    get maxVelocityIterations() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_maxVelocityIterations(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    get maxPositionIterations() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_maxPositionIterations(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    get minIslandSize() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_minIslandSize(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    get maxCcdSubsteps() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_maxCcdSubsteps(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} value
    */
    set dt(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_dt(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set erp(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_erp(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set jointErp(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_jointErp(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set warmstartCoeff(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_warmstartCoeff(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set allowedLinearError(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_allowedLinearError(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set predictionDistance(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_predictionDistance(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set allowedAngularError(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_allowedAngularError(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set maxLinearCorrection(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_maxLinearCorrection(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set maxAngularCorrection(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_maxAngularCorrection(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set maxVelocityIterations(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_maxVelocityIterations(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set maxPositionIterations(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_maxPositionIterations(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set minIslandSize(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_minIslandSize(this.ptr, value);
    }
    /**
    * @param {number} value
    */
    set maxCcdSubsteps(value) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_maxCcdSubsteps(this.ptr, value);
    }
}
/**
*/
class RawIslandManager {

    static __wrap(ptr) {
        const obj = Object.create(RawIslandManager.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawislandmanager_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawislandmanager_new();
        return RawIslandManager.__wrap(ret);
    }
    /**
    * Applies the given JavaScript function to the integer handle of each active rigid-body
    * managed by this island manager.
    *
    * After a short time of inactivity, a rigid-body is automatically deactivated ("asleep") by
    * the physics engine in order to save computational power. A sleeping rigid-body never moves
    * unless it is moved manually by the user.
    *
    * # Parameters
    * - `f(handle)`: the function to apply to the integer handle of each active rigid-body managed by this
    *   set. Called as `f(collider)`.
    * @param {Function} f
    */
    forEachActiveRigidBodyHandle(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawislandmanager_forEachActiveRigidBodyHandle(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
}
/**
*/
class RawJointParams {

    static __wrap(ptr) {
        const obj = Object.create(RawJointParams.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawjointparams_free(ptr);
    }
    /**
    * Create a new joint descriptor that builds Ball joints.
    *
    * A ball joints allows three relative rotational degrees of freedom
    * by preventing any relative translation between the anchors of the
    * two attached rigid-bodies.
    * @param {RawVector} anchor1
    * @param {RawVector} anchor2
    * @returns {RawJointParams}
    */
    static ball(anchor1, anchor2) {
        _assertClass(anchor1, RawVector);
        _assertClass(anchor2, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointparams_ball(anchor1.ptr, anchor2.ptr);
        return RawJointParams.__wrap(ret);
    }
    /**
    * Creates a new joint descriptor that builds a Prismatic joint.
    *
    * A prismatic joint removes all the degrees of freedom between the
    * affected bodies, except for the translation along one axis.
    *
    * Returns `None` if any of the provided axes cannot be normalized.
    * @param {RawVector} anchor1
    * @param {RawVector} axis1
    * @param {RawVector} anchor2
    * @param {RawVector} axis2
    * @param {boolean} limitsEnabled
    * @param {number} limitsMin
    * @param {number} limitsMax
    * @returns {RawJointParams | undefined}
    */
    static prismatic(anchor1, axis1, anchor2, axis2, limitsEnabled, limitsMin, limitsMax) {
        _assertClass(anchor1, RawVector);
        _assertClass(axis1, RawVector);
        _assertClass(anchor2, RawVector);
        _assertClass(axis2, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointparams_prismatic(anchor1.ptr, axis1.ptr, anchor2.ptr, axis2.ptr, limitsEnabled, limitsMin, limitsMax);
        return ret === 0 ? undefined : RawJointParams.__wrap(ret);
    }
    /**
    * Creates a new joint descriptor that builds a Fixed joint.
    *
    * A fixed joint removes all the degrees of freedom between the affected bodies.
    * @param {RawVector} anchor1
    * @param {RawRotation} axes1
    * @param {RawVector} anchor2
    * @param {RawRotation} axes2
    * @returns {RawJointParams}
    */
    static fixed(anchor1, axes1, anchor2, axes2) {
        _assertClass(anchor1, RawVector);
        _assertClass(axes1, RawRotation);
        _assertClass(anchor2, RawVector);
        _assertClass(axes2, RawRotation);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointparams_fixed(anchor1.ptr, axes1.ptr, anchor2.ptr, axes2.ptr);
        return RawJointParams.__wrap(ret);
    }
}
/**
*/
class RawJointSet {

    static __wrap(ptr) {
        const obj = Object.create(RawJointSet.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawjointset_free(ptr);
    }
    /**
    * The unique integer identifier of the first rigid-body this joint it attached to.
    * @param {number} handle
    * @returns {number}
    */
    jointBodyHandle1(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointBodyHandle1(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The unique integer identifier of the second rigid-body this joint is attached to.
    * @param {number} handle
    * @returns {number}
    */
    jointBodyHandle2(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointBodyHandle2(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The type of this joint given as a string.
    * @param {number} handle
    * @returns {number}
    */
    jointType(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointType(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * The position of the first anchor of this joint.
    *
    * The first anchor gives the position of the points application point on the
    * local frame of the first rigid-body it is attached to.
    * @param {number} handle
    * @returns {RawVector}
    */
    jointAnchor1(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointAnchor1(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The position of the second anchor of this joint.
    *
    * The second anchor gives the position of the points application point on the
    * local frame of the second rigid-body it is attached to.
    * @param {number} handle
    * @returns {RawVector}
    */
    jointAnchor2(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointAnchor2(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The first axis of this joint, if any.
    *
    * For joints where an application axis makes sense (e.g. the revolute and prismatic joins),
    * this returns the application axis on the first rigid-body this joint is attached to, expressed
    * in the local-space of this first rigid-body.
    * @param {number} handle
    * @returns {RawVector | undefined}
    */
    jointAxis1(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointAxis1(this.ptr, handle);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * The second axis of this joint, if any.
    *
    * For joints where an application axis makes sense (e.g. the revolute and prismatic joins),
    * this returns the application axis on the second rigid-body this joint is attached to, expressed
    * in the local-space of this second rigid-body.
    * @param {number} handle
    * @returns {RawVector | undefined}
    */
    jointAxis2(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointAxis2(this.ptr, handle);
        return ret === 0 ? undefined : RawVector.__wrap(ret);
    }
    /**
    * Are the limits for this joint enabled?
    * @param {number} handle
    * @returns {boolean}
    */
    jointLimitsEnabled(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointLimitsEnabled(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * If this is a prismatic joint, returns its lower limit.
    * @param {number} handle
    * @returns {number}
    */
    jointLimitsMin(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointLimitsMin(this.ptr, handle);
        return ret;
    }
    /**
    * If this is a prismatic joint, returns its upper limit.
    * @param {number} handle
    * @returns {number}
    */
    jointLimitsMax(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointLimitsMax(this.ptr, handle);
        return ret;
    }
    /**
    * @param {number} handle
    * @param {number} model
    */
    jointConfigureMotorModel(handle, model) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointConfigureMotorModel(this.ptr, handle, model);
    }
    /**
    * @param {number} handle
    * @param {number} targetVel
    * @param {number} factor
    */
    jointConfigureUnitMotorVelocity(handle, targetVel, factor) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointConfigureUnitMotorVelocity(this.ptr, handle, targetVel, factor);
    }
    /**
    * @param {number} handle
    * @param {number} targetPos
    * @param {number} stiffness
    * @param {number} damping
    */
    jointConfigureUnitMotorPosition(handle, targetPos, stiffness, damping) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointConfigureUnitMotorPosition(this.ptr, handle, targetPos, stiffness, damping);
    }
    /**
    * @param {number} handle
    * @param {number} targetPos
    * @param {number} targetVel
    * @param {number} stiffness
    * @param {number} damping
    */
    jointConfigureUnitMotor(handle, targetPos, targetVel, stiffness, damping) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_jointConfigureUnitMotor(this.ptr, handle, targetPos, targetVel, stiffness, damping);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_new();
        return RawJointSet.__wrap(ret);
    }
    /**
    * @param {RawRigidBodySet} bodies
    * @param {RawJointParams} params
    * @param {number} parent1
    * @param {number} parent2
    * @returns {number}
    */
    createJoint(bodies, params, parent1, parent2) {
        _assertClass(bodies, RawRigidBodySet);
        _assertClass(params, RawJointParams);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_createJoint(this.ptr, bodies.ptr, params.ptr, parent1, parent2);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @param {RawIslandManager} islands
    * @param {RawRigidBodySet} bodies
    * @param {boolean} wakeUp
    */
    remove(handle, islands, bodies, wakeUp) {
        _assertClass(islands, RawIslandManager);
        _assertClass(bodies, RawRigidBodySet);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_remove(this.ptr, handle, islands.ptr, bodies.ptr, wakeUp);
    }
    /**
    * @returns {number}
    */
    len() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_len(this.ptr);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @returns {boolean}
    */
    contains(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_contains(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Applies the given JavaScript function to the integer handle of each joint managed by this physics world.
    *
    * # Parameters
    * - `f(handle)`: the function to apply to the integer handle of each joint managed by this set. Called as `f(collider)`.
    * @param {Function} f
    */
    forEachJointHandle(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawjointset_forEachJointHandle(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
}
/**
*/
class RawNarrowPhase {

    static __wrap(ptr) {
        const obj = Object.create(RawNarrowPhase.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawnarrowphase_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawnarrowphase_new();
        return RawNarrowPhase.__wrap(ret);
    }
    /**
    * @param {number} handle1
    * @param {Function} f
    */
    contacts_with(handle1, f) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawnarrowphase_contacts_with(this.ptr, handle1, addHeapObject(f));
    }
    /**
    * @param {number} handle1
    * @param {number} handle2
    * @returns {RawContactPair | undefined}
    */
    contact_pair(handle1, handle2) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawnarrowphase_contact_pair(this.ptr, handle1, handle2);
        return ret === 0 ? undefined : RawContactPair.__wrap(ret);
    }
    /**
    * @param {number} handle1
    * @param {Function} f
    */
    intersections_with(handle1, f) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawnarrowphase_intersections_with(this.ptr, handle1, addHeapObject(f));
    }
    /**
    * @param {number} handle1
    * @param {number} handle2
    * @returns {boolean}
    */
    intersection_pair(handle1, handle2) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawnarrowphase_intersection_pair(this.ptr, handle1, handle2);
        return ret !== 0;
    }
}
/**
*/
class RawPhysicsPipeline {

    static __wrap(ptr) {
        const obj = Object.create(RawPhysicsPipeline.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawphysicspipeline_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawphysicspipeline_new();
        return RawPhysicsPipeline.__wrap(ret);
    }
    /**
    * @param {RawVector} gravity
    * @param {RawIntegrationParameters} integrationParameters
    * @param {RawIslandManager} islands
    * @param {RawBroadPhase} broadPhase
    * @param {RawNarrowPhase} narrowPhase
    * @param {RawRigidBodySet} bodies
    * @param {RawColliderSet} colliders
    * @param {RawJointSet} joints
    * @param {RawCCDSolver} ccd_solver
    */
    step(gravity, integrationParameters, islands, broadPhase, narrowPhase, bodies, colliders, joints, ccd_solver) {
        _assertClass(gravity, RawVector);
        _assertClass(integrationParameters, RawIntegrationParameters);
        _assertClass(islands, RawIslandManager);
        _assertClass(broadPhase, RawBroadPhase);
        _assertClass(narrowPhase, RawNarrowPhase);
        _assertClass(bodies, RawRigidBodySet);
        _assertClass(colliders, RawColliderSet);
        _assertClass(joints, RawJointSet);
        _assertClass(ccd_solver, RawCCDSolver);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawphysicspipeline_step(this.ptr, gravity.ptr, integrationParameters.ptr, islands.ptr, broadPhase.ptr, narrowPhase.ptr, bodies.ptr, colliders.ptr, joints.ptr, ccd_solver.ptr);
    }
    /**
    * @param {RawVector} gravity
    * @param {RawIntegrationParameters} integrationParameters
    * @param {RawIslandManager} islands
    * @param {RawBroadPhase} broadPhase
    * @param {RawNarrowPhase} narrowPhase
    * @param {RawRigidBodySet} bodies
    * @param {RawColliderSet} colliders
    * @param {RawJointSet} joints
    * @param {RawCCDSolver} ccd_solver
    * @param {RawEventQueue} eventQueue
    * @param {object} hookObject
    * @param {Function} hookFilterContactPair
    * @param {Function} hookFilterIntersectionPair
    */
    stepWithEvents(gravity, integrationParameters, islands, broadPhase, narrowPhase, bodies, colliders, joints, ccd_solver, eventQueue, hookObject, hookFilterContactPair, hookFilterIntersectionPair) {
        _assertClass(gravity, RawVector);
        _assertClass(integrationParameters, RawIntegrationParameters);
        _assertClass(islands, RawIslandManager);
        _assertClass(broadPhase, RawBroadPhase);
        _assertClass(narrowPhase, RawNarrowPhase);
        _assertClass(bodies, RawRigidBodySet);
        _assertClass(colliders, RawColliderSet);
        _assertClass(joints, RawJointSet);
        _assertClass(ccd_solver, RawCCDSolver);
        _assertClass(eventQueue, RawEventQueue);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawphysicspipeline_stepWithEvents(this.ptr, gravity.ptr, integrationParameters.ptr, islands.ptr, broadPhase.ptr, narrowPhase.ptr, bodies.ptr, colliders.ptr, joints.ptr, ccd_solver.ptr, eventQueue.ptr, addHeapObject(hookObject), addHeapObject(hookFilterContactPair), addHeapObject(hookFilterIntersectionPair));
    }
}
/**
*/
class RawPointColliderProjection {

    static __wrap(ptr) {
        const obj = Object.create(RawPointColliderProjection.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawpointcolliderprojection_free(ptr);
    }
    /**
    * @returns {number}
    */
    colliderHandle() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_colliderHandle(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {RawVector}
    */
    point() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_point(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {boolean}
    */
    isInside() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_isInside(this.ptr);
        return ret !== 0;
    }
}
/**
*/
class RawQueryPipeline {

    static __wrap(ptr) {
        const obj = Object.create(RawQueryPipeline.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawquerypipeline_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_new();
        return RawQueryPipeline.__wrap(ret);
    }
    /**
    * @param {RawIslandManager} islands
    * @param {RawRigidBodySet} bodies
    * @param {RawColliderSet} colliders
    */
    update(islands, bodies, colliders) {
        _assertClass(islands, RawIslandManager);
        _assertClass(bodies, RawRigidBodySet);
        _assertClass(colliders, RawColliderSet);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_update(this.ptr, islands.ptr, bodies.ptr, colliders.ptr);
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} rayOrig
    * @param {RawVector} rayDir
    * @param {number} maxToi
    * @param {boolean} solid
    * @param {number} groups
    * @returns {RawRayColliderToi | undefined}
    */
    castRay(colliders, rayOrig, rayDir, maxToi, solid, groups) {
        _assertClass(colliders, RawColliderSet);
        _assertClass(rayOrig, RawVector);
        _assertClass(rayDir, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_castRay(this.ptr, colliders.ptr, rayOrig.ptr, rayDir.ptr, maxToi, solid, groups);
        return ret === 0 ? undefined : RawRayColliderToi.__wrap(ret);
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} rayOrig
    * @param {RawVector} rayDir
    * @param {number} maxToi
    * @param {boolean} solid
    * @param {number} groups
    * @returns {RawRayColliderIntersection | undefined}
    */
    castRayAndGetNormal(colliders, rayOrig, rayDir, maxToi, solid, groups) {
        _assertClass(colliders, RawColliderSet);
        _assertClass(rayOrig, RawVector);
        _assertClass(rayDir, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_castRayAndGetNormal(this.ptr, colliders.ptr, rayOrig.ptr, rayDir.ptr, maxToi, solid, groups);
        return ret === 0 ? undefined : RawRayColliderIntersection.__wrap(ret);
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} rayOrig
    * @param {RawVector} rayDir
    * @param {number} maxToi
    * @param {boolean} solid
    * @param {number} groups
    * @param {Function} callback
    */
    intersectionsWithRay(colliders, rayOrig, rayDir, maxToi, solid, groups, callback) {
        try {
            _assertClass(colliders, RawColliderSet);
            _assertClass(rayOrig, RawVector);
            _assertClass(rayDir, RawVector);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_intersectionsWithRay(this.ptr, colliders.ptr, rayOrig.ptr, rayDir.ptr, maxToi, solid, groups, addBorrowedObject(callback));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} shapePos
    * @param {RawRotation} shapeRot
    * @param {RawShape} shape
    * @param {number} groups
    * @returns {number | undefined}
    */
    intersectionWithShape(colliders, shapePos, shapeRot, shape, groups) {
        try {
            const retptr = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);
            _assertClass(colliders, RawColliderSet);
            _assertClass(shapePos, RawVector);
            _assertClass(shapeRot, RawRotation);
            _assertClass(shape, RawShape);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_intersectionWithShape(retptr, this.ptr, colliders.ptr, shapePos.ptr, shapeRot.ptr, shape.ptr, groups);
            var r0 = getInt32Memory0()[retptr / 4 + 0];
            var r1 = getInt32Memory0()[retptr / 4 + 1];
            return r0 === 0 ? undefined : r1 >>> 0;
        } finally {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16);
        }
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} point
    * @param {boolean} solid
    * @param {number} groups
    * @returns {RawPointColliderProjection | undefined}
    */
    projectPoint(colliders, point, solid, groups) {
        _assertClass(colliders, RawColliderSet);
        _assertClass(point, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_projectPoint(this.ptr, colliders.ptr, point.ptr, solid, groups);
        return ret === 0 ? undefined : RawPointColliderProjection.__wrap(ret);
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} point
    * @param {number} groups
    * @param {Function} callback
    */
    intersectionsWithPoint(colliders, point, groups, callback) {
        try {
            _assertClass(colliders, RawColliderSet);
            _assertClass(point, RawVector);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_intersectionsWithPoint(this.ptr, colliders.ptr, point.ptr, groups, addBorrowedObject(callback));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} shapePos
    * @param {RawRotation} shapeRot
    * @param {RawVector} shapeVel
    * @param {RawShape} shape
    * @param {number} maxToi
    * @param {number} groups
    * @returns {RawShapeColliderTOI | undefined}
    */
    castShape(colliders, shapePos, shapeRot, shapeVel, shape, maxToi, groups) {
        _assertClass(colliders, RawColliderSet);
        _assertClass(shapePos, RawVector);
        _assertClass(shapeRot, RawRotation);
        _assertClass(shapeVel, RawVector);
        _assertClass(shape, RawShape);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_castShape(this.ptr, colliders.ptr, shapePos.ptr, shapeRot.ptr, shapeVel.ptr, shape.ptr, maxToi, groups);
        return ret === 0 ? undefined : RawShapeColliderTOI.__wrap(ret);
    }
    /**
    * @param {RawColliderSet} colliders
    * @param {RawVector} shapePos
    * @param {RawRotation} shapeRot
    * @param {RawShape} shape
    * @param {number} groups
    * @param {Function} callback
    */
    intersectionsWithShape(colliders, shapePos, shapeRot, shape, groups, callback) {
        try {
            _assertClass(colliders, RawColliderSet);
            _assertClass(shapePos, RawVector);
            _assertClass(shapeRot, RawRotation);
            _assertClass(shape, RawShape);
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_intersectionsWithShape(this.ptr, colliders.ptr, shapePos.ptr, shapeRot.ptr, shape.ptr, groups, addBorrowedObject(callback));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
    /**
    * @param {RawVector} aabbCenter
    * @param {RawVector} aabbHalfExtents
    * @param {Function} callback
    */
    collidersWithAabbIntersectingAabb(aabbCenter, aabbHalfExtents, callback) {
        try {
            _assertClass(aabbCenter, RawVector);
            var ptr0 = aabbCenter.ptr;
            aabbCenter.ptr = 0;
            _assertClass(aabbHalfExtents, RawVector);
            var ptr1 = aabbHalfExtents.ptr;
            aabbHalfExtents.ptr = 0;
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawquerypipeline_collidersWithAabbIntersectingAabb(this.ptr, ptr0, ptr1, addBorrowedObject(callback));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
}
/**
*/
class RawRayColliderIntersection {

    static __wrap(ptr) {
        const obj = Object.create(RawRayColliderIntersection.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawraycolliderintersection_free(ptr);
    }
    /**
    * @returns {number}
    */
    colliderHandle() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_colliderHandle(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {RawVector}
    */
    normal() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_normal(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {number}
    */
    toi() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_toi(this.ptr);
        return ret;
    }
}
/**
*/
class RawRayColliderToi {

    static __wrap(ptr) {
        const obj = Object.create(RawRayColliderToi.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawraycollidertoi_free(ptr);
    }
    /**
    * @returns {number}
    */
    colliderHandle() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_colliderHandle(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    toi() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_toi(this.ptr);
        return ret;
    }
}
/**
*/
class RawRigidBodySet {

    static __wrap(ptr) {
        const obj = Object.create(RawRigidBodySet.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawrigidbodyset_free(ptr);
    }
    /**
    * The world-space translation of this rigid-body.
    * @param {number} handle
    * @returns {RawVector}
    */
    rbTranslation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbTranslation(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The world-space orientation of this rigid-body.
    * @param {number} handle
    * @returns {RawRotation}
    */
    rbRotation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbRotation(this.ptr, handle);
        return RawRotation.__wrap(ret);
    }
    /**
    * Put the given rigid-body to sleep.
    * @param {number} handle
    */
    rbSleep(handle) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSleep(this.ptr, handle);
    }
    /**
    * Is this rigid-body sleeping?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsSleeping(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsSleeping(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Is the velocity of this rigid-body not zero?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsMoving(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsMoving(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * The world-space predicted translation of this rigid-body.
    *
    * If this rigid-body is kinematic this value is set by the `setNextKinematicTranslation`
    * method and is used for estimating the kinematic body velocity at the next timestep.
    * For non-kinematic bodies, this value is currently unspecified.
    * @param {number} handle
    * @returns {RawVector}
    */
    rbNextTranslation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbNextTranslation(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The world-space predicted orientation of this rigid-body.
    *
    * If this rigid-body is kinematic this value is set by the `setNextKinematicRotation`
    * method and is used for estimating the kinematic body velocity at the next timestep.
    * For non-kinematic bodies, this value is currently unspecified.
    * @param {number} handle
    * @returns {RawRotation}
    */
    rbNextRotation(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbNextRotation(this.ptr, handle);
        return RawRotation.__wrap(ret);
    }
    /**
    * Sets the translation of this rigid-body.
    *
    * # Parameters
    * - `x`: the world-space position of the rigid-body along the `x` axis.
    * - `y`: the world-space position of the rigid-body along the `y` axis.
    * - `wakeUp`: forces the rigid-body to wake-up so it is properly affected by forces if it
    * wasn't moving before modifying its position.
    * @param {number} handle
    * @param {number} x
    * @param {number} y
    * @param {boolean} wakeUp
    */
    rbSetTranslation(handle, x, y, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetTranslation(this.ptr, handle, x, y, wakeUp);
    }
    /**
    * Sets the rotation angle of this rigid-body.
    *
    * # Parameters
    * - `angle`: the rotation angle, in radians.
    * - `wakeUp`: forces the rigid-body to wake-up so it is properly affected by forces if it
    * wasn't moving before modifying its position.
    * @param {number} handle
    * @param {number} angle
    * @param {boolean} wakeUp
    */
    rbSetRotation(handle, angle, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetRotation(this.ptr, handle, angle, wakeUp);
    }
    /**
    * Sets the linear velocity of this rigid-body.
    * @param {number} handle
    * @param {RawVector} linvel
    * @param {boolean} wakeUp
    */
    rbSetLinvel(handle, linvel, wakeUp) {
        _assertClass(linvel, RawVector);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetLinvel(this.ptr, handle, linvel.ptr, wakeUp);
    }
    /**
    * Sets the angular velocity of this rigid-body.
    * @param {number} handle
    * @param {number} angvel
    * @param {boolean} wakeUp
    */
    rbSetAngvel(handle, angvel, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetAngvel(this.ptr, handle, angvel, wakeUp);
    }
    /**
    * If this rigid body is kinematic, sets its future translation after the next timestep integration.
    *
    * This should be used instead of `rigidBody.setTranslation` to make the dynamic object
    * interacting with this kinematic body behave as expected. Internally, Rapier will compute
    * an artificial velocity for this rigid-body from its current position and its next kinematic
    * position. This velocity will be used to compute forces on dynamic bodies interacting with
    * this body.
    *
    * # Parameters
    * - `x`: the world-space position of the rigid-body along the `x` axis.
    * - `y`: the world-space position of the rigid-body along the `y` axis.
    * @param {number} handle
    * @param {number} x
    * @param {number} y
    */
    rbSetNextKinematicTranslation(handle, x, y) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetNextKinematicTranslation(this.ptr, handle, x, y);
    }
    /**
    * If this rigid body is kinematic, sets its future rotation after the next timestep integration.
    *
    * This should be used instead of `rigidBody.setRotation` to make the dynamic object
    * interacting with this kinematic body behave as expected. Internally, Rapier will compute
    * an artificial velocity for this rigid-body from its current position and its next kinematic
    * position. This velocity will be used to compute forces on dynamic bodies interacting with
    * this body.
    *
    * # Parameters
    * - `angle`: the rotation angle, in radians.
    * @param {number} handle
    * @param {number} angle
    */
    rbSetNextKinematicRotation(handle, angle) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetNextKinematicRotation(this.ptr, handle, angle);
    }
    /**
    * The linear velocity of this rigid-body.
    * @param {number} handle
    * @returns {RawVector}
    */
    rbLinvel(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbLinvel(this.ptr, handle);
        return RawVector.__wrap(ret);
    }
    /**
    * The angular velocity of this rigid-body.
    * @param {number} handle
    * @returns {number}
    */
    rbAngvel(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbAngvel(this.ptr, handle);
        return ret;
    }
    /**
    * @param {number} handle
    * @param {boolean} locked
    * @param {boolean} wake_up
    */
    rbLockTranslations(handle, locked, wake_up) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbLockRotations(this.ptr, handle, locked, wake_up);
    }
    /**
    * @param {number} handle
    * @param {boolean} locked
    * @param {boolean} wake_up
    */
    rbLockRotations(handle, locked, wake_up) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbLockRotations(this.ptr, handle, locked, wake_up);
    }
    /**
    * @param {number} handle
    * @returns {number}
    */
    rbDominanceGroup(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbDominanceGroup(this.ptr, handle);
        return ret;
    }
    /**
    * @param {number} handle
    * @param {number} group
    */
    rbSetDominanceGroup(handle, group) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetDominanceGroup(this.ptr, handle, group);
    }
    /**
    * @param {number} handle
    * @param {boolean} enabled
    */
    rbEnableCcd(handle, enabled) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbEnableCcd(this.ptr, handle, enabled);
    }
    /**
    * The mass of this rigid-body.
    * @param {number} handle
    * @returns {number}
    */
    rbMass(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbMass(this.ptr, handle);
        return ret;
    }
    /**
    * Wakes this rigid-body up.
    *
    * A dynamic rigid-body that does not move during several consecutive frames will
    * be put to sleep by the physics engine, i.e., it will stop being simulated in order
    * to avoid useless computations.
    * This methods forces a sleeping rigid-body to wake-up. This is useful, e.g., before modifying
    * the position of a dynamic body so that it is properly simulated afterwards.
    * @param {number} handle
    */
    rbWakeUp(handle) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbWakeUp(this.ptr, handle);
    }
    /**
    * Is Continuous Collision Detection enabled for this rigid-body?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsCcdEnabled(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsCcdEnabled(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * The number of colliders attached to this rigid-body.
    * @param {number} handle
    * @returns {number}
    */
    rbNumColliders(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbNumColliders(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * Retrieves the `i-th` collider attached to this rigid-body.
    *
    * # Parameters
    * - `at`: The index of the collider to retrieve. Must be a number in `[0, this.numColliders()[`.
    *         This index is **not** the same as the unique identifier of the collider.
    * @param {number} handle
    * @param {number} at
    * @returns {number}
    */
    rbCollider(handle, at) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbCollider(this.ptr, handle, at);
        return ret >>> 0;
    }
    /**
    * The status of this rigid-body: static, dynamic, or kinematic.
    * @param {number} handle
    * @returns {number}
    */
    rbBodyType(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbBodyType(this.ptr, handle);
        return ret >>> 0;
    }
    /**
    * Is this rigid-body static?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsStatic(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsStatic(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Is this rigid-body kinematic?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsKinematic(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsKinematic(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Is this rigid-body dynamic?
    * @param {number} handle
    * @returns {boolean}
    */
    rbIsDynamic(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbIsDynamic(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * The linear damping coefficient of this rigid-body.
    * @param {number} handle
    * @returns {number}
    */
    rbLinearDamping(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbLinearDamping(this.ptr, handle);
        return ret;
    }
    /**
    * The angular damping coefficient of this rigid-body.
    * @param {number} handle
    * @returns {number}
    */
    rbAngularDamping(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbAngularDamping(this.ptr, handle);
        return ret;
    }
    /**
    * @param {number} handle
    * @param {number} factor
    */
    rbSetLinearDamping(handle, factor) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetLinearDamping(this.ptr, handle, factor);
    }
    /**
    * @param {number} handle
    * @param {number} factor
    */
    rbSetAngularDamping(handle, factor) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetAngularDamping(this.ptr, handle, factor);
    }
    /**
    * @param {number} handle
    * @returns {number}
    */
    rbGravityScale(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbGravityScale(this.ptr, handle);
        return ret;
    }
    /**
    * @param {number} handle
    * @param {number} factor
    * @param {boolean} wakeUp
    */
    rbSetGravityScale(handle, factor, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbSetGravityScale(this.ptr, handle, factor, wakeUp);
    }
    /**
    * Applies a force at the center-of-mass of this rigid-body.
    *
    * # Parameters
    * - `force`: the world-space force to apply on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {RawVector} force
    * @param {boolean} wakeUp
    */
    rbApplyForce(handle, force, wakeUp) {
        _assertClass(force, RawVector);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyForce(this.ptr, handle, force.ptr, wakeUp);
    }
    /**
    * Applies an impulse at the center-of-mass of this rigid-body.
    *
    * # Parameters
    * - `impulse`: the world-space impulse to apply on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {RawVector} impulse
    * @param {boolean} wakeUp
    */
    rbApplyImpulse(handle, impulse, wakeUp) {
        _assertClass(impulse, RawVector);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyImpulse(this.ptr, handle, impulse.ptr, wakeUp);
    }
    /**
    * Applies a torque at the center-of-mass of this rigid-body.
    *
    * # Parameters
    * - `torque`: the torque to apply on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {number} torque
    * @param {boolean} wakeUp
    */
    rbApplyTorque(handle, torque, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyTorque(this.ptr, handle, torque, wakeUp);
    }
    /**
    * Applies an impulsive torque at the center-of-mass of this rigid-body.
    *
    * # Parameters
    * - `torque impulse`: the torque impulse to apply on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {number} torque_impulse
    * @param {boolean} wakeUp
    */
    rbApplyTorqueImpulse(handle, torque_impulse, wakeUp) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyTorqueImpulse(this.ptr, handle, torque_impulse, wakeUp);
    }
    /**
    * Applies a force at the given world-space point of this rigid-body.
    *
    * # Parameters
    * - `force`: the world-space force to apply on the rigid-body.
    * - `point`: the world-space point where the impulse is to be applied on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {RawVector} force
    * @param {RawVector} point
    * @param {boolean} wakeUp
    */
    rbApplyForceAtPoint(handle, force, point, wakeUp) {
        _assertClass(force, RawVector);
        _assertClass(point, RawVector);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyForceAtPoint(this.ptr, handle, force.ptr, point.ptr, wakeUp);
    }
    /**
    * Applies an impulse at the given world-space point of this rigid-body.
    *
    * # Parameters
    * - `impulse`: the world-space impulse to apply on the rigid-body.
    * - `point`: the world-space point where the impulse is to be applied on the rigid-body.
    * - `wakeUp`: should the rigid-body be automatically woken-up?
    * @param {number} handle
    * @param {RawVector} impulse
    * @param {RawVector} point
    * @param {boolean} wakeUp
    */
    rbApplyImpulseAtPoint(handle, impulse, point, wakeUp) {
        _assertClass(impulse, RawVector);
        _assertClass(point, RawVector);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_rbApplyImpulseAtPoint(this.ptr, handle, impulse.ptr, point.ptr, wakeUp);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_new();
        return RawRigidBodySet.__wrap(ret);
    }
    /**
    * @param {RawVector} translation
    * @param {RawRotation} rotation
    * @param {number} gravityScale
    * @param {number} mass
    * @param {boolean} transationsEnabled
    * @param {RawVector} centerOfMass
    * @param {RawVector} linvel
    * @param {number} angvel
    * @param {number} principalAngularInertia
    * @param {boolean} rotationsEnabled
    * @param {number} linearDamping
    * @param {number} angularDamping
    * @param {number} rb_type
    * @param {boolean} canSleep
    * @param {boolean} ccdEnabled
    * @param {number} dominanceGroup
    * @returns {number}
    */
    createRigidBody(translation, rotation, gravityScale, mass, transationsEnabled, centerOfMass, linvel, angvel, principalAngularInertia, rotationsEnabled, linearDamping, angularDamping, rb_type, canSleep, ccdEnabled, dominanceGroup) {
        _assertClass(translation, RawVector);
        _assertClass(rotation, RawRotation);
        _assertClass(centerOfMass, RawVector);
        _assertClass(linvel, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_createRigidBody(this.ptr, translation.ptr, rotation.ptr, gravityScale, mass, transationsEnabled, centerOfMass.ptr, linvel.ptr, angvel, principalAngularInertia, rotationsEnabled, linearDamping, angularDamping, rb_type, canSleep, ccdEnabled, dominanceGroup);
        return ret >>> 0;
    }
    /**
    * @param {number} handle
    * @param {RawIslandManager} islands
    * @param {RawColliderSet} colliders
    * @param {RawJointSet} joints
    */
    remove(handle, islands, colliders, joints) {
        _assertClass(islands, RawIslandManager);
        _assertClass(colliders, RawColliderSet);
        _assertClass(joints, RawJointSet);
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_remove(this.ptr, handle, islands.ptr, colliders.ptr, joints.ptr);
    }
    /**
    * The number of rigid-bodies on this set.
    * @returns {number}
    */
    len() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_len(this.ptr);
        return ret >>> 0;
    }
    /**
    * Checks if a rigid-body with the given integer handle exists.
    * @param {number} handle
    * @returns {boolean}
    */
    contains(handle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_contains(this.ptr, handle);
        return ret !== 0;
    }
    /**
    * Applies the given JavaScript function to the integer handle of each rigid-body managed by this set.
    *
    * # Parameters
    * - `f(handle)`: the function to apply to the integer handle of each rigid-body managed by this set. Called as `f(collider)`.
    * @param {Function} f
    */
    forEachRigidBodyHandle(f) {
        try {
            _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrigidbodyset_forEachRigidBodyHandle(this.ptr, addBorrowedObject(f));
        } finally {
            heap[stack_pointer++] = undefined;
        }
    }
}
/**
* A rotation quaternion.
*/
class RawRotation {

    static __wrap(ptr) {
        const obj = Object.create(RawRotation.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawrotation_free(ptr);
    }
    /**
    * The identity rotation.
    * @returns {RawRotation}
    */
    static identity() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrotation_identity();
        return RawRotation.__wrap(ret);
    }
    /**
    * The rotation with thegiven angle.
    * @param {number} angle
    * @returns {RawRotation}
    */
    static fromAngle(angle) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrotation_fromAngle(angle);
        return RawRotation.__wrap(ret);
    }
    /**
    * The imaginary part of this complex number.
    * @returns {number}
    */
    get im() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrotation_im(this.ptr);
        return ret;
    }
    /**
    * The real part of this complex number.
    * @returns {number}
    */
    get re() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_dt(this.ptr);
        return ret;
    }
    /**
    * The rotation angle in radians.
    * @returns {number}
    */
    get angle() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrotation_angle(this.ptr);
        return ret;
    }
}
/**
*/
class RawSerializationPipeline {

    static __wrap(ptr) {
        const obj = Object.create(RawSerializationPipeline.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawserializationpipeline_free(ptr);
    }
    /**
    */
    constructor() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawserializationpipeline_new();
        return RawSerializationPipeline.__wrap(ret);
    }
    /**
    * @param {RawVector} gravity
    * @param {RawIntegrationParameters} integrationParameters
    * @param {RawIslandManager} islands
    * @param {RawBroadPhase} broadPhase
    * @param {RawNarrowPhase} narrowPhase
    * @param {RawRigidBodySet} bodies
    * @param {RawColliderSet} colliders
    * @param {RawJointSet} joints
    * @returns {Uint8Array | undefined}
    */
    serializeAll(gravity, integrationParameters, islands, broadPhase, narrowPhase, bodies, colliders, joints) {
        _assertClass(gravity, RawVector);
        _assertClass(integrationParameters, RawIntegrationParameters);
        _assertClass(islands, RawIslandManager);
        _assertClass(broadPhase, RawBroadPhase);
        _assertClass(narrowPhase, RawNarrowPhase);
        _assertClass(bodies, RawRigidBodySet);
        _assertClass(colliders, RawColliderSet);
        _assertClass(joints, RawJointSet);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawserializationpipeline_serializeAll(this.ptr, gravity.ptr, integrationParameters.ptr, islands.ptr, broadPhase.ptr, narrowPhase.ptr, bodies.ptr, colliders.ptr, joints.ptr);
        return takeObject(ret);
    }
    /**
    * @param {Uint8Array} data
    * @returns {RawDeserializedWorld | undefined}
    */
    deserializeAll(data) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawserializationpipeline_deserializeAll(this.ptr, addHeapObject(data));
        return ret === 0 ? undefined : RawDeserializedWorld.__wrap(ret);
    }
}
/**
*/
class RawShape {

    static __wrap(ptr) {
        const obj = Object.create(RawShape.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawshape_free(ptr);
    }
    /**
    * @param {number} hx
    * @param {number} hy
    * @returns {RawShape}
    */
    static cuboid(hx, hy) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_cuboid(hx, hy);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {number} hx
    * @param {number} hy
    * @param {number} borderRadius
    * @returns {RawShape}
    */
    static roundCuboid(hx, hy, borderRadius) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_roundCuboid(hx, hy, borderRadius);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {number} radius
    * @returns {RawShape}
    */
    static ball(radius) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_ball(radius);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {number} halfHeight
    * @param {number} radius
    * @returns {RawShape}
    */
    static capsule(halfHeight, radius) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_capsule(halfHeight, radius);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} vertices
    * @param {Uint32Array} indices
    * @returns {RawShape}
    */
    static polyline(vertices, indices) {
        var ptr0 = passArrayF32ToWasm0(vertices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ptr1 = passArray32ToWasm0(indices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len1 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_polyline(ptr0, len0, ptr1, len1);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} vertices
    * @param {Uint32Array} indices
    * @returns {RawShape}
    */
    static trimesh(vertices, indices) {
        var ptr0 = passArrayF32ToWasm0(vertices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ptr1 = passArray32ToWasm0(indices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len1 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_trimesh(ptr0, len0, ptr1, len1);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} heights
    * @param {RawVector} scale
    * @returns {RawShape}
    */
    static heightfield(heights, scale) {
        var ptr0 = passArrayF32ToWasm0(heights, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        _assertClass(scale, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_heightfield(ptr0, len0, scale.ptr);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {RawVector} p1
    * @param {RawVector} p2
    * @returns {RawShape}
    */
    static segment(p1, p2) {
        _assertClass(p1, RawVector);
        _assertClass(p2, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_segment(p1.ptr, p2.ptr);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {RawVector} p1
    * @param {RawVector} p2
    * @param {RawVector} p3
    * @returns {RawShape}
    */
    static triangle(p1, p2, p3) {
        _assertClass(p1, RawVector);
        _assertClass(p2, RawVector);
        _assertClass(p3, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_triangle(p1.ptr, p2.ptr, p3.ptr);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {RawVector} p1
    * @param {RawVector} p2
    * @param {RawVector} p3
    * @param {number} borderRadius
    * @returns {RawShape}
    */
    static roundTriangle(p1, p2, p3, borderRadius) {
        _assertClass(p1, RawVector);
        _assertClass(p2, RawVector);
        _assertClass(p3, RawVector);
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_roundTriangle(p1.ptr, p2.ptr, p3.ptr, borderRadius);
        return RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} points
    * @returns {RawShape | undefined}
    */
    static convexHull(points) {
        var ptr0 = passArrayF32ToWasm0(points, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_convexHull(ptr0, len0);
        return ret === 0 ? undefined : RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} points
    * @param {number} borderRadius
    * @returns {RawShape | undefined}
    */
    static roundConvexHull(points, borderRadius) {
        var ptr0 = passArrayF32ToWasm0(points, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_roundConvexHull(ptr0, len0, borderRadius);
        return ret === 0 ? undefined : RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} vertices
    * @returns {RawShape | undefined}
    */
    static convexPolyline(vertices) {
        var ptr0 = passArrayF32ToWasm0(vertices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_convexPolyline(ptr0, len0);
        return ret === 0 ? undefined : RawShape.__wrap(ret);
    }
    /**
    * @param {Float32Array} vertices
    * @param {number} borderRadius
    * @returns {RawShape | undefined}
    */
    static roundConvexPolyline(vertices, borderRadius) {
        var ptr0 = passArrayF32ToWasm0(vertices, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc);
        var len0 = WASM_VECTOR_LEN;
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshape_roundConvexPolyline(ptr0, len0, borderRadius);
        return ret === 0 ? undefined : RawShape.__wrap(ret);
    }
}
/**
*/
class RawShapeColliderTOI {

    static __wrap(ptr) {
        const obj = Object.create(RawShapeColliderTOI.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawshapecollidertoi_free(ptr);
    }
    /**
    * @returns {number}
    */
    colliderHandle() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawpointcolliderprojection_colliderHandle(this.ptr);
        return ret >>> 0;
    }
    /**
    * @returns {number}
    */
    toi() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_toi(this.ptr);
        return ret;
    }
    /**
    * @returns {RawVector}
    */
    witness1() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_normal(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {RawVector}
    */
    witness2() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawraycolliderintersection_normal(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {RawVector}
    */
    normal1() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshapecollidertoi_normal1(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * @returns {RawVector}
    */
    normal2() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawshapecollidertoi_normal1(this.ptr);
        return RawVector.__wrap(ret);
    }
}
/**
* A vector.
*/
class RawVector {

    static __wrap(ptr) {
        const obj = Object.create(RawVector.prototype);
        obj.ptr = ptr;

        return obj;
    }

    __destroy_into_raw() {
        const ptr = this.ptr;
        this.ptr = 0;

        return ptr;
    }

    free() {
        const ptr = this.__destroy_into_raw();
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_rawvector_free(ptr);
    }
    /**
    * Creates a new vector filled with zeros.
    * @returns {RawVector}
    */
    static zero() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawvector_zero();
        return RawVector.__wrap(ret);
    }
    /**
    * Creates a new 2D vector from its two components.
    *
    * # Parameters
    * - `x`: the `x` component of this 2D vector.
    * - `y`: the `y` component of this 2D vector.
    * @param {number} x
    * @param {number} y
    */
    constructor(x, y) {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawvector_new(x, y);
        return RawVector.__wrap(ret);
    }
    /**
    * The `x` component of this vector.
    * @returns {number}
    */
    get x() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_dt(this.ptr);
        return ret;
    }
    /**
    * Sets the `x` component of this vector.
    * @param {number} x
    */
    set x(x) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawintegrationparameters_set_dt(this.ptr, x);
    }
    /**
    * The `y` component of this vector.
    * @returns {number}
    */
    get y() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawrotation_im(this.ptr);
        return ret;
    }
    /**
    * Sets the `y` component of this vector.
    * @param {number} y
    */
    set y(y) {
        _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawvector_set_y(this.ptr, y);
    }
    /**
    * Create a new 2D vector from this vector with its components rearranged as `{x, y}`.
    * @returns {RawVector}
    */
    xy() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawvector_xy(this.ptr);
        return RawVector.__wrap(ret);
    }
    /**
    * Create a new 2D vector from this vector with its components rearranged as `{y, x}`.
    * @returns {RawVector}
    */
    yx() {
        var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.rawvector_yx(this.ptr);
        return RawVector.__wrap(ret);
    }
}

function __wbindgen_object_drop_ref(arg0) {
    takeObject(arg0);
};

function __wbindgen_number_new(arg0) {
    var ret = arg0;
    return addHeapObject(ret);
};

function __wbg_rawraycolliderintersection_new(arg0) {
    var ret = RawRayColliderIntersection.__wrap(arg0);
    return addHeapObject(ret);
};

function __wbindgen_string_new(arg0, arg1) {
    var ret = getStringFromWasm0(arg0, arg1);
    return addHeapObject(ret);
};

function __wbg_now_885ca88fafee0fd1(arg0) {
    var ret = getObject(arg0).now();
    return ret;
};

function __wbg_newnoargs_1a11e7e8c906996c(arg0, arg1) {
    var ret = new Function(getStringFromWasm0(arg0, arg1));
    return addHeapObject(ret);
};

function __wbg_get_6d26c712aa73c8b2() { return handleError(function (arg0, arg1) {
    var ret = Reflect.get(getObject(arg0), getObject(arg1));
    return addHeapObject(ret);
}, arguments) };

function __wbg_call_e91f71ddf1f45cff() { return handleError(function (arg0, arg1) {
    var ret = getObject(arg0).call(getObject(arg1));
    return addHeapObject(ret);
}, arguments) };

function __wbindgen_object_clone_ref(arg0) {
    var ret = getObject(arg0);
    return addHeapObject(ret);
};

function __wbg_call_e3c72355d091d5d4() { return handleError(function (arg0, arg1, arg2) {
    var ret = getObject(arg0).call(getObject(arg1), getObject(arg2));
    return addHeapObject(ret);
}, arguments) };

function __wbg_call_c143b19d87139944() { return handleError(function (arg0, arg1, arg2, arg3) {
    var ret = getObject(arg0).call(getObject(arg1), getObject(arg2), getObject(arg3));
    return addHeapObject(ret);
}, arguments) };

function __wbg_call_72facd37dbc97ddb() { return handleError(function (arg0, arg1, arg2, arg3, arg4) {
    var ret = getObject(arg0).call(getObject(arg1), getObject(arg2), getObject(arg3), getObject(arg4));
    return addHeapObject(ret);
}, arguments) };

function __wbg_bind_07839579f523aa89(arg0, arg1, arg2, arg3) {
    var ret = getObject(arg0).bind(getObject(arg1), getObject(arg2), getObject(arg3));
    return addHeapObject(ret);
};

function __wbg_buffer_79a3294266d4e783(arg0) {
    var ret = getObject(arg0).buffer;
    return addHeapObject(ret);
};

function __wbg_self_b4546ea7b590539e() { return handleError(function () {
    var ret = self.self;
    return addHeapObject(ret);
}, arguments) };

function __wbg_window_c279fea81f426a68() { return handleError(function () {
    var ret = window.window;
    return addHeapObject(ret);
}, arguments) };

function __wbg_globalThis_038a6ea0ff17789f() { return handleError(function () {
    var ret = globalThis.globalThis;
    return addHeapObject(ret);
}, arguments) };

function __wbg_global_4f93ce884bcee597() { return handleError(function () {
    var ret = __webpack_require__.g.global;
    return addHeapObject(ret);
}, arguments) };

function __wbindgen_is_undefined(arg0) {
    var ret = getObject(arg0) === undefined;
    return ret;
};

function __wbg_newwithbyteoffsetandlength_22a36e6023ad3cd0(arg0, arg1, arg2) {
    var ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);
    return addHeapObject(ret);
};

function __wbg_new_945397fb09fec0b8(arg0) {
    var ret = new Uint8Array(getObject(arg0));
    return addHeapObject(ret);
};

function __wbg_set_223873223acf6d07(arg0, arg1, arg2) {
    getObject(arg0).set(getObject(arg1), arg2 >>> 0);
};

function __wbg_length_68e13e7bbd918464(arg0) {
    var ret = getObject(arg0).length;
    return ret;
};

function __wbindgen_number_get(arg0, arg1) {
    const obj = getObject(arg1);
    var ret = typeof(obj) === 'number' ? obj : undefined;
    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;
    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);
};

function __wbindgen_boolean_get(arg0) {
    const v = getObject(arg0);
    var ret = typeof(v) === 'boolean' ? (v ? 1 : 0) : 2;
    return ret;
};

function __wbindgen_debug_string(arg0, arg1) {
    var ret = debugString(getObject(arg1));
    var ptr0 = passStringToWasm0(ret, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc, _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_realloc);
    var len0 = WASM_VECTOR_LEN;
    getInt32Memory0()[arg0 / 4 + 1] = len0;
    getInt32Memory0()[arg0 / 4 + 0] = ptr0;
};

function __wbindgen_throw(arg0, arg1) {
    throw new Error(getStringFromWasm0(arg0, arg1));
};

function __wbindgen_memory() {
    var ret = _rapier_wasm2d_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory;
    return addHeapObject(ret);
};


});

/***/ }),

/***/ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.wasm":
/*!***************************************************************!*\
  !*** ./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.wasm ***!
  \***************************************************************/
/***/ ((module, exports, __webpack_require__) => {

var __webpack_instantiate__ = ([WEBPACK_IMPORTED_MODULE_0]) => {
	return __webpack_require__.v(exports, module.id, "cbca138e55052b7bb569", {
		"./rapier_wasm2d_bg.js": {
			"__wbindgen_object_drop_ref": WEBPACK_IMPORTED_MODULE_0.__wbindgen_object_drop_ref,
			"__wbindgen_number_new": WEBPACK_IMPORTED_MODULE_0.__wbindgen_number_new,
			"__wbg_rawraycolliderintersection_new": WEBPACK_IMPORTED_MODULE_0.__wbg_rawraycolliderintersection_new,
			"__wbindgen_string_new": WEBPACK_IMPORTED_MODULE_0.__wbindgen_string_new,
			"__wbg_now_885ca88fafee0fd1": WEBPACK_IMPORTED_MODULE_0.__wbg_now_885ca88fafee0fd1,
			"__wbg_newnoargs_1a11e7e8c906996c": WEBPACK_IMPORTED_MODULE_0.__wbg_newnoargs_1a11e7e8c906996c,
			"__wbg_get_6d26c712aa73c8b2": WEBPACK_IMPORTED_MODULE_0.__wbg_get_6d26c712aa73c8b2,
			"__wbg_call_e91f71ddf1f45cff": WEBPACK_IMPORTED_MODULE_0.__wbg_call_e91f71ddf1f45cff,
			"__wbindgen_object_clone_ref": WEBPACK_IMPORTED_MODULE_0.__wbindgen_object_clone_ref,
			"__wbg_call_e3c72355d091d5d4": WEBPACK_IMPORTED_MODULE_0.__wbg_call_e3c72355d091d5d4,
			"__wbg_call_c143b19d87139944": WEBPACK_IMPORTED_MODULE_0.__wbg_call_c143b19d87139944,
			"__wbg_call_72facd37dbc97ddb": WEBPACK_IMPORTED_MODULE_0.__wbg_call_72facd37dbc97ddb,
			"__wbg_bind_07839579f523aa89": WEBPACK_IMPORTED_MODULE_0.__wbg_bind_07839579f523aa89,
			"__wbg_buffer_79a3294266d4e783": WEBPACK_IMPORTED_MODULE_0.__wbg_buffer_79a3294266d4e783,
			"__wbg_self_b4546ea7b590539e": WEBPACK_IMPORTED_MODULE_0.__wbg_self_b4546ea7b590539e,
			"__wbg_window_c279fea81f426a68": WEBPACK_IMPORTED_MODULE_0.__wbg_window_c279fea81f426a68,
			"__wbg_globalThis_038a6ea0ff17789f": WEBPACK_IMPORTED_MODULE_0.__wbg_globalThis_038a6ea0ff17789f,
			"__wbg_global_4f93ce884bcee597": WEBPACK_IMPORTED_MODULE_0.__wbg_global_4f93ce884bcee597,
			"__wbindgen_is_undefined": WEBPACK_IMPORTED_MODULE_0.__wbindgen_is_undefined,
			"__wbg_newwithbyteoffsetandlength_22a36e6023ad3cd0": WEBPACK_IMPORTED_MODULE_0.__wbg_newwithbyteoffsetandlength_22a36e6023ad3cd0,
			"__wbg_new_945397fb09fec0b8": WEBPACK_IMPORTED_MODULE_0.__wbg_new_945397fb09fec0b8,
			"__wbg_set_223873223acf6d07": WEBPACK_IMPORTED_MODULE_0.__wbg_set_223873223acf6d07,
			"__wbg_length_68e13e7bbd918464": WEBPACK_IMPORTED_MODULE_0.__wbg_length_68e13e7bbd918464,
			"__wbindgen_number_get": WEBPACK_IMPORTED_MODULE_0.__wbindgen_number_get,
			"__wbindgen_boolean_get": WEBPACK_IMPORTED_MODULE_0.__wbindgen_boolean_get,
			"__wbindgen_debug_string": WEBPACK_IMPORTED_MODULE_0.__wbindgen_debug_string,
			"__wbindgen_throw": WEBPACK_IMPORTED_MODULE_0.__wbindgen_throw,
			"__wbindgen_memory": WEBPACK_IMPORTED_MODULE_0.__wbindgen_memory
		}
	});
}
__webpack_require__.a(module, (__webpack_handle_async_dependencies__) => {
	/* harmony import */ var WEBPACK_IMPORTED_MODULE_0 = __webpack_require__(/*! ./rapier_wasm2d_bg.js */ "./node_modules/@dimforge/rapier2d/rapier_wasm2d_bg.js");
	var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([WEBPACK_IMPORTED_MODULE_0]);
	return __webpack_async_dependencies__.then ? __webpack_async_dependencies__.then(__webpack_instantiate__) : __webpack_instantiate__(__webpack_async_dependencies__);
}, 1);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZGltZm9yZ2VfcmFwaWVyMmRfcmFwaWVyX2pzLjc5MzAzYjc3ZWY3ZDc5NmNjODEzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOENBQVk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNvQjtBQUNyQjs7Ozs7Ozs7Ozs7Ozs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3REFBd0Q7QUFDekQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZDZCO0FBQ0k7QUFDUTtBQUNqQjtBQUNJO0FBQ2U7QUFDZDtBQUNJO0FBQ2pDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUmtEO0FBQ2xEO0FBQ0E7QUFDQSw4QkFBOEIsMERBQXdCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ2dDO0FBQ2pDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUwwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9EQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9EQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFpQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9EQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvREFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFvQjtBQUM1QywyQkFBMkIsa0RBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHFFQUE4QjtBQUNqRSxzQ0FBc0MscUVBQThCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0NBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJDQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQ0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0Q0FBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaURBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNENBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJDQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBVztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaURBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlEQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3VCO0FBQ3hCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwcUJ3QztBQUNTO0FBQ1g7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnREFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNnQjtBQUNqQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDamRvQztBQUNWO0FBQzFCLGlFQUFlLHFDQUFNLEVBQUM7QUFDdEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Q0EsQ0FBQzs7QUFFTSx5Q0FBeUM7QUFDaEQ7QUFDQTtBQUNBLENBQUM7O0FBRU0seUNBQXlDO0FBQ2hEO0FBQ0E7QUFDQSxDQUFDOztBQUVNO0FBQ1A7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBOztBQUVPLHlDQUF5QztBQUNoRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFTSwyQ0FBMkM7QUFDbEQ7QUFDQTtBQUNBLENBQUM7O0FBRU0sK0NBQStDO0FBQ3REO0FBQ0E7QUFDQSxDQUFDOztBQUVNLDJDQUEyQztBQUNsRCxjQUFjLHFCQUFNO0FBQ3BCO0FBQ0EsQ0FBQzs7QUFFTTtBQUNQO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBLHNDQUFzQyxxRUFBc0IsRUFBRSxzRUFBdUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBOztBQUVPO0FBQ1AsY0FBYywwREFBVztBQUN6QjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9keW5hbWljcy9jY2Rfc29sdmVyLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZHluYW1pY3MvY29lZmZpY2llbnRfY29tYmluZV9ydWxlLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZHluYW1pY3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9keW5hbWljcy9pbnRlZ3JhdGlvbl9wYXJhbWV0ZXJzLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZHluYW1pY3MvaXNsYW5kX21hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9keW5hbWljcy9qb2ludC5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2R5bmFtaWNzL2pvaW50X3NldC5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2R5bmFtaWNzL3JpZ2lkX2JvZHkuanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9keW5hbWljcy9yaWdpZF9ib2R5X3NldC5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2V4cG9ydHMuanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9nZW9tZXRyeS9icm9hZF9waGFzZS5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2dlb21ldHJ5L2NvbGxpZGVyLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZ2VvbWV0cnkvY29sbGlkZXJfc2V0LmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZ2VvbWV0cnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9nZW9tZXRyeS9uYXJyb3dfcGhhc2UuanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9nZW9tZXRyeS9wb2ludC5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2dlb21ldHJ5L3JheS5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL2dlb21ldHJ5L3NoYXBlLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvZ2VvbWV0cnkvdG9pLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvbWF0aC5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL3BpcGVsaW5lL2V2ZW50X3F1ZXVlLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvcGlwZWxpbmUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGlwcHktcHJvamVjdC13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL0BkaW1mb3JnZS9yYXBpZXIyZC9waXBlbGluZS9waHlzaWNzX2hvb2tzLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvcGlwZWxpbmUvcGh5c2ljc19waXBlbGluZS5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL3BpcGVsaW5lL3F1ZXJ5X3BpcGVsaW5lLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvcGlwZWxpbmUvc2VyaWFsaXphdGlvbl9waXBlbGluZS5qcyIsIndlYnBhY2s6Ly90aXBweS1wcm9qZWN0LXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvQGRpbWZvcmdlL3JhcGllcjJkL3BpcGVsaW5lL3dvcmxkLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvcmFwaWVyLmpzIiwid2VicGFjazovL3RpcHB5LXByb2plY3Qtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9AZGltZm9yZ2UvcmFwaWVyMmQvcmFwaWVyX3dhc20yZF9iZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSYXdDQ0RTb2x2ZXIgfSBmcm9tIFwiLi4vcmF3XCI7XG4vKipcbiAqIFRoZSBDQ0Qgc29sdmVyIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgQ29udGludW91cyBDb2xsaXNpb24gRGV0ZWN0aW9uLlxuICpcbiAqIFRvIGF2b2lkIGxlYWtpbmcgV0FTTSByZXNvdXJjZXMsIHRoaXMgTVVTVCBiZSBmcmVlZCBtYW51YWxseSB3aXRoIGBjY2RTb2x2ZXIuZnJlZSgpYFxuICogb25jZSB5b3UgYXJlIGRvbmUgdXNpbmcgaXQuXG4gKi9cbnZhciBDQ0RTb2x2ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ0NEU29sdmVyKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3Q0NEU29sdmVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgdGhlIFdBU00gbWVtb3J5IG9jY3VwaWVkIGJ5IHRoaXMgbmFycm93LXBoYXNlLlxuICAgICAqL1xuICAgIENDRFNvbHZlci5wcm90b3R5cGUuZnJlZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yYXcuZnJlZSgpO1xuICAgICAgICB0aGlzLnJhdyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBDQ0RTb2x2ZXI7XG59KCkpO1xuZXhwb3J0IHsgQ0NEU29sdmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jY2Rfc29sdmVyLmpzLm1hcCIsIi8qKlxuICogQSBydWxlIGFwcGxpZWQgdG8gY29tYmluZSBjb2VmZmljaWVudHMuXG4gKlxuICogVXNlIHRoaXMgd2hlbiBjb25maWd1cmluZyB0aGUgYENvbGxpZGVyRGVzY2AgdG8gc3BlY2lmeVxuICogaG93IGZyaWN0aW9uIGFuZCByZXN0aXR1dGlvbiBjb2VmZmljaWVudCBzaG91bGQgYmUgY29tYmluZWRcbiAqIGluIGEgY29udGFjdC5cbiAqL1xuZXhwb3J0IHZhciBDb2VmZmljaWVudENvbWJpbmVSdWxlO1xuKGZ1bmN0aW9uIChDb2VmZmljaWVudENvbWJpbmVSdWxlKSB7XG4gICAgQ29lZmZpY2llbnRDb21iaW5lUnVsZVtDb2VmZmljaWVudENvbWJpbmVSdWxlW1wiQXZlcmFnZVwiXSA9IDBdID0gXCJBdmVyYWdlXCI7XG4gICAgQ29lZmZpY2llbnRDb21iaW5lUnVsZVtDb2VmZmljaWVudENvbWJpbmVSdWxlW1wiTWluXCJdID0gMV0gPSBcIk1pblwiO1xuICAgIENvZWZmaWNpZW50Q29tYmluZVJ1bGVbQ29lZmZpY2llbnRDb21iaW5lUnVsZVtcIk11bHRpcGx5XCJdID0gMl0gPSBcIk11bHRpcGx5XCI7XG4gICAgQ29lZmZpY2llbnRDb21iaW5lUnVsZVtDb2VmZmljaWVudENvbWJpbmVSdWxlW1wiTWF4XCJdID0gM10gPSBcIk1heFwiO1xufSkoQ29lZmZpY2llbnRDb21iaW5lUnVsZSB8fCAoQ29lZmZpY2llbnRDb21iaW5lUnVsZSA9IHt9KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2VmZmljaWVudF9jb21iaW5lX3J1bGUuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi9yaWdpZF9ib2R5JztcbmV4cG9ydCAqIGZyb20gJy4vcmlnaWRfYm9keV9zZXQnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlZ3JhdGlvbl9wYXJhbWV0ZXJzJztcbmV4cG9ydCAqIGZyb20gJy4vam9pbnQnO1xuZXhwb3J0ICogZnJvbSAnLi9qb2ludF9zZXQnO1xuZXhwb3J0ICogZnJvbSAnLi9jb2VmZmljaWVudF9jb21iaW5lX3J1bGUnO1xuZXhwb3J0ICogZnJvbSAnLi9jY2Rfc29sdmVyJztcbmV4cG9ydCAqIGZyb20gJy4vaXNsYW5kX21hbmFnZXInO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgUmF3SW50ZWdyYXRpb25QYXJhbWV0ZXJzIH0gZnJvbSBcIi4uL3Jhd1wiO1xudmFyIEludGVncmF0aW9uUGFyYW1ldGVycyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlZ3JhdGlvblBhcmFtZXRlcnMocmF3KSB7XG4gICAgICAgIHRoaXMucmF3ID0gcmF3IHx8IG5ldyBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnJlZSB0aGUgV0FTTSBtZW1vcnkgdXNlZCBieSB0aGVzZSBpbnRlZ3JhdGlvbiBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIEludGVncmF0aW9uUGFyYW1ldGVycy5wcm90b3R5cGUuZnJlZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yYXcuZnJlZSgpO1xuICAgICAgICB0aGlzLnJhdyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcImR0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aW1lc3RlcCBsZW5ndGggKGRlZmF1bHQ6IGAxLjAgLyA2MC4wYClcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3LmR0O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcuZHQgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcImVycFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgRXJyb3IgUmVkdWN0aW9uIFBhcmFtZXRlciBpbiBgWzAsIDFdYCBpcyB0aGUgcHJvcG9ydGlvbiBvZlxuICAgICAgICAgKiB0aGUgcG9zaXRpb25hbCBlcnJvciB0byBiZSBjb3JyZWN0ZWQgYXQgZWFjaCB0aW1lIHN0ZXAgKGRlZmF1bHQ6IGAwLjJgKS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3LmVycDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmF3LmVycCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVncmF0aW9uUGFyYW1ldGVycy5wcm90b3R5cGUsIFwiam9pbnRFcnBcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIEVycm9yIFJlZHVjdGlvbiBQYXJhbWV0ZXIgZm9yIGpvaW50cyBpbiBgWzAsIDFdYCBpcyB0aGUgcHJvcG9ydGlvbiBvZlxuICAgICAgICAgKiB0aGUgcG9zaXRpb25hbCBlcnJvciB0byBiZSBjb3JyZWN0ZWQgYXQgZWFjaCB0aW1lIHN0ZXAgKGRlZmF1bHQ6IGAwLjJgKS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3LmpvaW50RXJwO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcuam9pbnRFcnAgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcIndhcm1zdGFydENvZWZmXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVhY2ggY2FjaGVkIGltcHVsc2UgYXJlIG11bHRpcGxpZWQgYnkgdGhpcyBjb2VmZmljaWVudCBpbiBgWzAsIDFdYFxuICAgICAgICAgKiB3aGVuIHRoZXkgYXJlIHJlLXVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgc29sdmVyIChkZWZhdWx0IGAxLjBgKS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3Lndhcm1zdGFydENvZWZmO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcud2FybXN0YXJ0Q29lZmYgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcImFsbG93ZWRMaW5lYXJFcnJvclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbW91bnQgb2YgcGVuZXRyYXRpb24gdGhlIGVuZ2luZSB3b250IGF0dGVtcHQgdG8gY29ycmVjdCAoZGVmYXVsdDogYDAuMDAxbWApLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcuYWxsb3dlZExpbmVhckVycm9yO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcuYWxsb3dlZExpbmVhckVycm9yID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZWdyYXRpb25QYXJhbWV0ZXJzLnByb3RvdHlwZSwgXCJwcmVkaWN0aW9uRGlzdGFuY2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heGltYWwgZGlzdGFuY2Ugc2VwYXJhdGluZyB0d28gb2JqZWN0cyB0aGF0IHdpbGwgZ2VuZXJhdGUgcHJlZGljdGl2ZSBjb250YWN0cyAoZGVmYXVsdDogYDAuMDAyYCkuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJhdy5wcmVkaWN0aW9uRGlzdGFuY2U7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJhdy5wcmVkaWN0aW9uRGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcImFsbG93ZWRBbmd1bGFyRXJyb3JcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQW1vdW50IG9mIGFuZ3VsYXIgZHJpZnQgb2Ygam9pbnQgbGltaXRzIHRoZSBlbmdpbmUgd29udFxuICAgICAgICAgKiBhdHRlbXB0IHRvIGNvcnJlY3QgKGRlZmF1bHQ6IGAwLjAwMXJhZGApLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcuYWxsb3dlZEFuZ3VsYXJFcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmF3LmFsbG93ZWRBbmd1bGFyRXJyb3IgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcIm1heExpbmVhckNvcnJlY3Rpb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBsaW5lYXIgY29ycmVjdGlvbiBkdXJpbmcgb25lIHN0ZXAgb2YgdGhlIG5vbi1saW5lYXIgcG9zaXRpb24gc29sdmVyIChkZWZhdWx0OiBgMC4yYCkuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJhdy5tYXhMaW5lYXJDb3JyZWN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcubWF4TGluZWFyQ29ycmVjdGlvbiA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVncmF0aW9uUGFyYW1ldGVycy5wcm90b3R5cGUsIFwibWF4QW5ndWxhckNvcnJlY3Rpb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBhbmd1bGFyIGNvcnJlY3Rpb24gZHVyaW5nIG9uZSBzdGVwIG9mIHRoZSBub24tbGluZWFyIHBvc2l0aW9uIHNvbHZlciAoZGVmYXVsdDogYDAuMmApLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcubWF4QW5ndWxhckNvcnJlY3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJhdy5tYXhBbmd1bGFyQ29ycmVjdGlvbiA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVncmF0aW9uUGFyYW1ldGVycy5wcm90b3R5cGUsIFwibWF4VmVsb2NpdHlJdGVyYXRpb25zXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heGltdW0gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkIGJ5IHRoZSB2ZWxvY2l0eSBjb25zdHJhaW50cyBzb2x2ZXIgKGRlZmF1bHQ6IGA0YCkuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJhdy5tYXhWZWxvY2l0eUl0ZXJhdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJhdy5tYXhWZWxvY2l0eUl0ZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcIm1heFBvc2l0aW9uSXRlcmF0aW9uc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXhpbXVtIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZCBieSB0aGUgcG9zaXRpb24tYmFzZWQgY29uc3RyYWludHMgc29sdmVyIChkZWZhdWx0OiBgMWApLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcubWF4UG9zaXRpb25JdGVyYXRpb25zO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcubWF4UG9zaXRpb25JdGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZWdyYXRpb25QYXJhbWV0ZXJzLnByb3RvdHlwZSwgXCJtaW5Jc2xhbmRTaXplXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pbmltdW0gbnVtYmVyIG9mIGR5bmFtaWMgYm9kaWVzIGluIGVhY2ggYWN0aXZlIGlzbGFuZCAoZGVmYXVsdDogYDEyOGApLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcubWluSXNsYW5kU2l6ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmF3Lm1pbklzbGFuZFNpemUgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlLCBcIm1heENjZFN1YnN0ZXBzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heGltdW0gbnVtYmVyIG9mIHN1YnN0ZXBzIHBlcmZvcm1lZCBieSB0aGUgIHNvbHZlciAoZGVmYXVsdDogYDFgKS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3Lm1heENjZFN1YnN0ZXBzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcubWF4Q2NkU3Vic3RlcHMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBJbnRlZ3JhdGlvblBhcmFtZXRlcnM7XG59KCkpO1xuZXhwb3J0IHsgSW50ZWdyYXRpb25QYXJhbWV0ZXJzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlZ3JhdGlvbl9wYXJhbWV0ZXJzLmpzLm1hcCIsImltcG9ydCB7IFJhd0lzbGFuZE1hbmFnZXIgfSBmcm9tIFwiLi4vcmF3XCI7XG4vKipcbiAqIFRoZSBDQ0Qgc29sdmVyIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgQ29udGludW91cyBDb2xsaXNpb24gRGV0ZWN0aW9uLlxuICpcbiAqIFRvIGF2b2lkIGxlYWtpbmcgV0FTTSByZXNvdXJjZXMsIHRoaXMgTVVTVCBiZSBmcmVlZCBtYW51YWxseSB3aXRoIGBjY2RTb2x2ZXIuZnJlZSgpYFxuICogb25jZSB5b3UgYXJlIGRvbmUgdXNpbmcgaXQuXG4gKi9cbnZhciBJc2xhbmRNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElzbGFuZE1hbmFnZXIocmF3KSB7XG4gICAgICAgIHRoaXMucmF3ID0gcmF3IHx8IG5ldyBSYXdJc2xhbmRNYW5hZ2VyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgdGhlIFdBU00gbWVtb3J5IG9jY3VwaWVkIGJ5IHRoaXMgbmFycm93LXBoYXNlLlxuICAgICAqL1xuICAgIElzbGFuZE1hbmFnZXIucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3LmZyZWUoKTtcbiAgICAgICAgdGhpcy5yYXcgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIHRoZSBoYW5kbGUgb2YgZWFjaCBhY3RpdmUgcmlnaWQtYm9kaWVzIGNvbnRhaW5lZCBieSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEEgcmlnaWQtYm9keSBpcyBhY3RpdmUgaWYgaXQgaXMgbm90IHNsZWVwaW5nLCBpLmUuLCBpZiBpdCBtb3ZlZCByZWNlbnRseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIC0gVGhlIGNsb3N1cmUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgSXNsYW5kTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaEFjdGl2ZVJpZ2lkQm9keUhhbmRsZSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHRoaXMucmF3LmZvckVhY2hBY3RpdmVSaWdpZEJvZHlIYW5kbGUoZik7XG4gICAgfTtcbiAgICByZXR1cm4gSXNsYW5kTWFuYWdlcjtcbn0oKSk7XG5leHBvcnQgeyBJc2xhbmRNYW5hZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc2xhbmRfbWFuYWdlci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgVmVjdG9yT3BzLCBSb3RhdGlvbk9wcyB9IGZyb20gXCIuLi9tYXRoXCI7XG5pbXBvcnQgeyBSYXdKb2ludFBhcmFtcyB9IGZyb20gXCIuLi9yYXdcIjtcbi8qKlxuICogQW4gZW51bSBncm91cGluZyBhbGwgcG9zc2libGUgdHlwZXMgb2Ygam9pbnRzOlxuICogLSBgQmFsbGA6IEEgQmFsbCBqb2ludCB0aGF0IHJlbW92ZXMgYWxsIHJlbGF0aXZlIGxpbmVhciBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYWZmZWN0ZWQgYm9kaWVzLlxuICogLSBgRml4ZWRgOiBBIGZpeGVkIGpvaW50IHRoYXQgcmVtb3ZlcyBhbGwgcmVsYXRpdmUgZGVncmVlcyBvZiBmcmVlZG9tIGJldHdlZW4gdGhlIGFmZmVjdGVkIGJvZGllcy5cbiAqIC0gYFByaXNtYXRpY2A6IEEgcHJpc21hdGljIGpvaW50IHRoYXQgcmVtb3ZlcyBhbGwgZGVncmVlcyBvZiBmcmVlZG9tIGJldHdlZW4gdGhlIGFmZmVjdGVkXG4gKiAgICAgICAgICAgICAgICBib2RpZXMgZXhjZXB0IGZvciB0aGUgdHJhbnNsYXRpb24gYWxvbmcgb25lIGF4aXMuXG4gKiAtIGBSZXZvbHV0ZWA6ICgzRCBvbmx5KSBBIHJldm9sdXRlIGpvaW50IHRoYXQgcmVtb3ZlcyBhbGwgZGVncmVlcyBvZiBmcmVlZG9tIGJldHdlZW4gdGhlIGFmZmVjdGVkXG4gKiAgICAgICAgICAgICAgIGJvZGllcyBleGNlcHQgZm9yIHRoZSByb3RhdGlvbiBhbG9uZyBvbmUgYXhpcy5cbiAqL1xuZXhwb3J0IHZhciBKb2ludFR5cGU7XG4oZnVuY3Rpb24gKEpvaW50VHlwZSkge1xuICAgIEpvaW50VHlwZVtKb2ludFR5cGVbXCJCYWxsXCJdID0gMF0gPSBcIkJhbGxcIjtcbiAgICBKb2ludFR5cGVbSm9pbnRUeXBlW1wiRml4ZWRcIl0gPSAxXSA9IFwiRml4ZWRcIjtcbiAgICBKb2ludFR5cGVbSm9pbnRUeXBlW1wiUHJpc21hdGljXCJdID0gMl0gPSBcIlByaXNtYXRpY1wiO1xufSkoSm9pbnRUeXBlIHx8IChKb2ludFR5cGUgPSB7fSkpO1xuZXhwb3J0IHZhciBTcHJpbmdNb2RlbDtcbihmdW5jdGlvbiAoU3ByaW5nTW9kZWwpIHtcbiAgICBTcHJpbmdNb2RlbFtTcHJpbmdNb2RlbFtcIkRpc2FibGVkXCJdID0gMF0gPSBcIkRpc2FibGVkXCI7XG4gICAgU3ByaW5nTW9kZWxbU3ByaW5nTW9kZWxbXCJWZWxvY2l0eUJhc2VkXCJdID0gMV0gPSBcIlZlbG9jaXR5QmFzZWRcIjtcbiAgICBTcHJpbmdNb2RlbFtTcHJpbmdNb2RlbFtcIkFjY2VsZXJhdGlvbkJhc2VkXCJdID0gMl0gPSBcIkFjY2VsZXJhdGlvbkJhc2VkXCI7XG4gICAgU3ByaW5nTW9kZWxbU3ByaW5nTW9kZWxbXCJGb3JjZUJhc2VkXCJdID0gM10gPSBcIkZvcmNlQmFzZWRcIjtcbn0pKFNwcmluZ01vZGVsIHx8IChTcHJpbmdNb2RlbCA9IHt9KSk7XG52YXIgSm9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSm9pbnQocmF3U2V0LCBoYW5kbGUpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQgPSByYXdTZXQ7XG4gICAgICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhpcyBqb2ludCBpcyBzdGlsbCB2YWxpZCAoaS5lLiB0aGF0IGl0IGhhc1xuICAgICAqIG5vdCBiZWVuIGRlbGV0ZWQgZnJvbSB0aGUgam9pbnQgc2V0IHlldCkuXG4gICAgICovXG4gICAgSm9pbnQucHJvdG90eXBlLmlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb250YWlucyh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgdW5pcXVlIGludGVnZXIgaWRlbnRpZmllciBvZiB0aGUgZmlyc3QgcmlnaWQtYm9keSB0aGlzIGpvaW50IGl0IGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIEpvaW50LnByb3RvdHlwZS5ib2R5SGFuZGxlMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmpvaW50Qm9keUhhbmRsZTEodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBpbnRlZ2VyIGlkZW50aWZpZXIgb2YgdGhlIHNlY29uZCByaWdpZC1ib2R5IHRoaXMgam9pbnQgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgSm9pbnQucHJvdG90eXBlLmJvZHlIYW5kbGUyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuam9pbnRCb2R5SGFuZGxlMih0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIGpvaW50IGdpdmVuIGFzIGEgc3RyaW5nLlxuICAgICAqL1xuICAgIEpvaW50LnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuam9pbnRUeXBlKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoaXMgam9pbnQuXG4gICAgICpcbiAgICAgKiBUaGUgZmlyc3QgYW5jaG9yIGdpdmVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRzIGFwcGxpY2F0aW9uIHBvaW50IG9uIHRoZVxuICAgICAqIGxvY2FsIGZyYW1lIG9mIHRoZSBmaXJzdCByaWdpZC1ib2R5IGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIEpvaW50LnByb3RvdHlwZS5hbmNob3IxID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXdTZXQuam9pbnRBbmNob3IxKHRoaXMuaGFuZGxlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIHNlY29uZCBhbmNob3Igb2YgdGhpcyBqb2ludC5cbiAgICAgKlxuICAgICAqIFRoZSBzZWNvbmQgYW5jaG9yIGdpdmVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRzIGFwcGxpY2F0aW9uIHBvaW50IG9uIHRoZVxuICAgICAqIGxvY2FsIGZyYW1lIG9mIHRoZSBzZWNvbmQgcmlnaWQtYm9keSBpdCBpcyBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICBKb2ludC5wcm90b3R5cGUuYW5jaG9yMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvck9wcy5mcm9tUmF3KHRoaXMucmF3U2V0LmpvaW50QW5jaG9yMih0aGlzLmhhbmRsZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIGZpcnN0IGF4aXMgb2YgdGhpcyBqb2ludCwgaWYgYW55LlxuICAgICAqXG4gICAgICogRm9yIGpvaW50cyB3aGVyZSBhbiBhcHBsaWNhdGlvbiBheGlzIG1ha2VzIHNlbnNlIChlLmcuIHRoZSByZXZvbHV0ZSBhbmQgcHJpc21hdGljIGpvaW5zKSxcbiAgICAgKiB0aGlzIHJldHVybnMgdGhlIGFwcGxpY2F0aW9uIGF4aXMgb24gdGhlIGZpcnN0IHJpZ2lkLWJvZHkgdGhpcyBqb2ludCBpcyBhdHRhY2hlZCB0bywgZXhwcmVzc2VkXG4gICAgICogaW4gdGhlIGxvY2FsLXNwYWNlIG9mIHRoaXMgZmlyc3QgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBKb2ludC5wcm90b3R5cGUuYXhpczEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JPcHMuZnJvbVJhdyh0aGlzLnJhd1NldC5qb2ludEF4aXMxKHRoaXMuaGFuZGxlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgc2Vjb25kIGF4aXMgb2YgdGhpcyBqb2ludCwgaWYgYW55LlxuICAgICAqXG4gICAgICogRm9yIGpvaW50cyB3aGVyZSBhbiBhcHBsaWNhdGlvbiBheGlzIG1ha2VzIHNlbnNlIChlLmcuIHRoZSByZXZvbHV0ZSBhbmQgcHJpc21hdGljIGpvaW5zKSxcbiAgICAgKiB0aGlzIHJldHVybnMgdGhlIGFwcGxpY2F0aW9uIGF4aXMgb24gdGhlIHNlY29uZCByaWdpZC1ib2R5IHRoaXMgam9pbnQgaXMgYXR0YWNoZWQgdG8sIGV4cHJlc3NlZFxuICAgICAqIGluIHRoZSBsb2NhbC1zcGFjZSBvZiB0aGlzIHNlY29uZCByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIEpvaW50LnByb3RvdHlwZS5heGlzMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvck9wcy5mcm9tUmF3KHRoaXMucmF3U2V0LmpvaW50QXhpczIodGhpcy5oYW5kbGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBKb2ludDtcbn0oKSk7XG5leHBvcnQgeyBKb2ludCB9O1xudmFyIFVuaXRKb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVW5pdEpvaW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFVuaXRKb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcmUgdGhlIGxpbWl0cyBlbmFibGVkIGZvciB0aGlzIGpvaW50P1xuICAgICAqL1xuICAgIFVuaXRKb2ludC5wcm90b3R5cGUubGltaXRzRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmpvaW50TGltaXRzRW5hYmxlZCh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgbWluIGxpbWl0IG9mIHRoaXMgam9pbnQuXG4gICAgICovXG4gICAgVW5pdEpvaW50LnByb3RvdHlwZS5saW1pdHNNaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5qb2ludExpbWl0c01pbih0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4IGxpbWl0IG9mIHRoaXMgam9pbnQuXG4gICAgICovXG4gICAgVW5pdEpvaW50LnByb3RvdHlwZS5saW1pdHNNYXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5qb2ludExpbWl0c01heCh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICBVbml0Sm9pbnQucHJvdG90eXBlLmNvbmZpZ3VyZU1vdG9yTW9kZWwgPSBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuam9pbnRDb25maWd1cmVNb3Rvck1vZGVsKHRoaXMuaGFuZGxlLCBtb2RlbCk7XG4gICAgfTtcbiAgICBVbml0Sm9pbnQucHJvdG90eXBlLmNvbmZpZ3VyZU1vdG9yVmVsb2NpdHkgPSBmdW5jdGlvbiAodGFyZ2V0VmVsLCBmYWN0b3IpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuam9pbnRDb25maWd1cmVVbml0TW90b3JWZWxvY2l0eSh0aGlzLmhhbmRsZSwgdGFyZ2V0VmVsLCBmYWN0b3IpO1xuICAgIH07XG4gICAgVW5pdEpvaW50LnByb3RvdHlwZS5jb25maWd1cmVNb3RvclBvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldFBvcywgc3RpZmZuZXNzLCBkYW1waW5nKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LmpvaW50Q29uZmlndXJlVW5pdE1vdG9yUG9zaXRpb24odGhpcy5oYW5kbGUsIHRhcmdldFBvcywgc3RpZmZuZXNzLCBkYW1waW5nKTtcbiAgICB9O1xuICAgIFVuaXRKb2ludC5wcm90b3R5cGUuY29uZmlndXJlTW90b3IgPSBmdW5jdGlvbiAodGFyZ2V0UG9zLCB0YXJnZXRWZWwsIHN0aWZmbmVzcywgZGFtcGluZykge1xuICAgICAgICB0aGlzLnJhd1NldC5qb2ludENvbmZpZ3VyZVVuaXRNb3Rvcih0aGlzLmhhbmRsZSwgdGFyZ2V0UG9zLCB0YXJnZXRWZWwsIHN0aWZmbmVzcywgZGFtcGluZyk7XG4gICAgfTtcbiAgICByZXR1cm4gVW5pdEpvaW50O1xufShKb2ludCkpO1xuZXhwb3J0IHsgVW5pdEpvaW50IH07XG52YXIgRml4ZWRKb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRml4ZWRKb2ludCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGaXhlZEpvaW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBGaXhlZEpvaW50O1xufShKb2ludCkpO1xuZXhwb3J0IHsgRml4ZWRKb2ludCB9O1xudmFyIFByaXNtYXRpY0pvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmlzbWF0aWNKb2ludCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcmlzbWF0aWNKb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUHJpc21hdGljSm9pbnQ7XG59KFVuaXRKb2ludCkpO1xuZXhwb3J0IHsgUHJpc21hdGljSm9pbnQgfTtcbi8vICNpZiBESU0yXG52YXIgQmFsbEpvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYWxsSm9pbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmFsbEpvaW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBCYWxsSm9pbnQ7XG59KFVuaXRKb2ludCkpO1xuZXhwb3J0IHsgQmFsbEpvaW50IH07XG4vLyAjZW5kaWZcbnZhciBKb2ludFBhcmFtcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBKb2ludFBhcmFtcygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGpvaW50IGRlc2NyaXB0b3IgdGhhdCBidWlsZHMgQmFsbCBqb2ludHMuXG4gICAgICpcbiAgICAgKiBBIGJhbGwgam9pbnRzIGFsbG93cyB0aHJlZSByZWxhdGl2ZSByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbVxuICAgICAqIGJ5IHByZXZlbnRpbmcgYW55IHJlbGF0aXZlIHRyYW5zbGF0aW9uIGJldHdlZW4gdGhlIGFuY2hvcnMgb2YgdGhlXG4gICAgICogdHdvIGF0dGFjaGVkIHJpZ2lkLWJvZGllcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmNob3IxIC0gUG9pbnQgd2hlcmUgdGhlIGpvaW50IGlzIGF0dGFjaGVkIG9uIHRoZSBmaXJzdCByaWdpZC1ib2R5IGFmZmVjdGVkIGJ5IHRoaXMgam9pbnQuIEV4cHJlc3NlZCBpbiB0aGVcbiAgICAgKiAgICAgICAgICAgICAgICAgIGxvY2FsLXNwYWNlIG9mIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBhbmNob3IyIC0gUG9pbnQgd2hlcmUgdGhlIGpvaW50IGlzIGF0dGFjaGVkIG9uIHRoZSBzZWNvbmQgcmlnaWQtYm9keSBhZmZlY3RlZCBieSB0aGlzIGpvaW50LiBFeHByZXNzZWQgaW4gdGhlXG4gICAgICogICAgICAgICAgICAgICAgICBsb2NhbC1zcGFjZSBvZiB0aGUgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBKb2ludFBhcmFtcy5iYWxsID0gZnVuY3Rpb24gKGFuY2hvcjEsIGFuY2hvcjIpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBKb2ludFBhcmFtcygpO1xuICAgICAgICByZXMuYW5jaG9yMSA9IGFuY2hvcjE7XG4gICAgICAgIHJlcy5hbmNob3IyID0gYW5jaG9yMjtcbiAgICAgICAgcmVzLmpvaW50VHlwZSA9IEpvaW50VHlwZS5CYWxsO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBqb2ludCBkZXNjcmlwdG9yIHRoYXQgYnVpbGRzIGEgRml4ZWQgam9pbnQuXG4gICAgICpcbiAgICAgKiBBIGZpeGVkIGpvaW50IHJlbW92ZXMgYWxsIHRoZSBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYWZmZWN0ZWQgYm9kaWVzLCBlbnN1cmluZyB0aGVpclxuICAgICAqIGFuY2hvciBhbmQgbG9jYWwgZnJhbWVzIGNvaW5jaWRlIGluIHdvcmxkLXNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuY2hvcjEgLSBQb2ludCB3aGVyZSB0aGUgam9pbnQgaXMgYXR0YWNoZWQgb24gdGhlIGZpcnN0IHJpZ2lkLWJvZHkgYWZmZWN0ZWQgYnkgdGhpcyBqb2ludC4gRXhwcmVzc2VkIGluIHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgbG9jYWwtc3BhY2Ugb2YgdGhlIHJpZ2lkLWJvZHkuXG4gICAgICogQHBhcmFtIGZyYW1lMSAtIFRoZSByZWZlcmVuY2Ugb3JpZW50YXRpb24gb2YgdGhlIGpvaW50IHdydC4gdGhlIGZpcnN0IHJpZ2lkLWJvZHkuXG4gICAgICogQHBhcmFtIGFuY2hvcjIgLSBQb2ludCB3aGVyZSB0aGUgam9pbnQgaXMgYXR0YWNoZWQgb24gdGhlIHNlY29uZCByaWdpZC1ib2R5IGFmZmVjdGVkIGJ5IHRoaXMgam9pbnQuIEV4cHJlc3NlZCBpbiB0aGVcbiAgICAgKiAgICAgICAgICAgICAgICAgIGxvY2FsLXNwYWNlIG9mIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBmcmFtZTIgLSBUaGUgcmVmZXJlbmNlIG9yaWVudGF0aW9uIG9mIHRoZSBqb2ludCB3cnQuIHRoZSBzZWNvbmQgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBKb2ludFBhcmFtcy5maXhlZCA9IGZ1bmN0aW9uIChhbmNob3IxLCBmcmFtZTEsIGFuY2hvcjIsIGZyYW1lMikge1xuICAgICAgICB2YXIgcmVzID0gbmV3IEpvaW50UGFyYW1zKCk7XG4gICAgICAgIHJlcy5hbmNob3IxID0gYW5jaG9yMTtcbiAgICAgICAgcmVzLmFuY2hvcjIgPSBhbmNob3IyO1xuICAgICAgICByZXMuZnJhbWUxID0gZnJhbWUxO1xuICAgICAgICByZXMuZnJhbWUyID0gZnJhbWUyO1xuICAgICAgICByZXMuam9pbnRUeXBlID0gSm9pbnRUeXBlLkZpeGVkO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLy8gI2lmIERJTTJcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGpvaW50IGRlc2NyaXB0b3IgdGhhdCBidWlsZHMgYSBQcmlzbWF0aWMgam9pbnQuXG4gICAgICpcbiAgICAgKiBBIHByaXNtYXRpYyBqb2ludCByZW1vdmVzIGFsbCB0aGUgZGVncmVlcyBvZiBmcmVlZG9tIGJldHdlZW4gdGhlXG4gICAgICogYWZmZWN0ZWQgYm9kaWVzLCBleGNlcHQgZm9yIHRoZSB0cmFuc2xhdGlvbiBhbG9uZyBvbmUgYXhpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmNob3IxIC0gUG9pbnQgd2hlcmUgdGhlIGpvaW50IGlzIGF0dGFjaGVkIG9uIHRoZSBmaXJzdCByaWdpZC1ib2R5IGFmZmVjdGVkIGJ5IHRoaXMgam9pbnQuIEV4cHJlc3NlZCBpbiB0aGVcbiAgICAgKiAgICAgICAgICAgICAgICAgIGxvY2FsLXNwYWNlIG9mIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBheGlzMSAtIEF4aXMgb2YgdGhlIGpvaW50LCBleHByZXNzZWQgaW4gdGhlIGxvY2FsLXNwYWNlIG9mIHRoZSBmaXJzdCByaWdpZC1ib2R5IGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgICAqIEBwYXJhbSBhbmNob3IyIC0gUG9pbnQgd2hlcmUgdGhlIGpvaW50IGlzIGF0dGFjaGVkIG9uIHRoZSBzZWNvbmQgcmlnaWQtYm9keSBhZmZlY3RlZCBieSB0aGlzIGpvaW50LiBFeHByZXNzZWQgaW4gdGhlXG4gICAgICogICAgICAgICAgICAgICAgICBsb2NhbC1zcGFjZSBvZiB0aGUgcmlnaWQtYm9keS5cbiAgICAgKiBAcGFyYW0gYXhpczIgLSBBeGlzIG9mIHRoZSBqb2ludCwgZXhwcmVzc2VkIGluIHRoZSBsb2NhbC1zcGFjZSBvZiB0aGUgc2Vjb25kIHJpZ2lkLWJvZHkgaXQgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgSm9pbnRQYXJhbXMucHJpc21hdGljID0gZnVuY3Rpb24gKGFuY2hvcjEsIGF4aXMxLCBhbmNob3IyLCBheGlzMikge1xuICAgICAgICB2YXIgcmVzID0gbmV3IEpvaW50UGFyYW1zKCk7XG4gICAgICAgIHJlcy5hbmNob3IxID0gYW5jaG9yMTtcbiAgICAgICAgcmVzLmF4aXMxID0gYXhpczE7XG4gICAgICAgIHJlcy5hbmNob3IyID0gYW5jaG9yMjtcbiAgICAgICAgcmVzLmF4aXMyID0gYXhpczI7XG4gICAgICAgIHJlcy5qb2ludFR5cGUgPSBKb2ludFR5cGUuUHJpc21hdGljO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgSm9pbnRQYXJhbXMucHJvdG90eXBlLmludG9SYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYXdBMSA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuYW5jaG9yMSk7XG4gICAgICAgIHZhciByYXdBMiA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuYW5jaG9yMik7XG4gICAgICAgIHZhciByYXdBeDE7XG4gICAgICAgIHZhciByYXdBeDI7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBsaW1pdHNFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBsaW1pdHNNaW4gPSAwLjA7XG4gICAgICAgIHZhciBsaW1pdHNNYXggPSAwLjA7XG4gICAgICAgIHN3aXRjaCAodGhpcy5qb2ludFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSm9pbnRUeXBlLkJhbGw6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gUmF3Sm9pbnRQYXJhbXMuYmFsbChyYXdBMSwgcmF3QTIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBKb2ludFR5cGUuRml4ZWQ6XG4gICAgICAgICAgICAgICAgdmFyIHJhd0ZyYTEgPSBSb3RhdGlvbk9wcy5pbnRvUmF3KHRoaXMuZnJhbWUxKTtcbiAgICAgICAgICAgICAgICB2YXIgcmF3RnJhMiA9IFJvdGF0aW9uT3BzLmludG9SYXcodGhpcy5mcmFtZTIpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFJhd0pvaW50UGFyYW1zLmZpeGVkKHJhd0ExLCByYXdGcmExLCByYXdBMiwgcmF3RnJhMik7XG4gICAgICAgICAgICAgICAgcmF3RnJhMS5mcmVlKCk7XG4gICAgICAgICAgICAgICAgcmF3RnJhMi5mcmVlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEpvaW50VHlwZS5QcmlzbWF0aWM6XG4gICAgICAgICAgICAgICAgcmF3QXgxID0gVmVjdG9yT3BzLmludG9SYXcodGhpcy5heGlzMSk7XG4gICAgICAgICAgICAgICAgcmF3QXgyID0gVmVjdG9yT3BzLmludG9SYXcodGhpcy5heGlzMik7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5saW1pdHNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbWl0c0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsaW1pdHNNaW4gPSB0aGlzLmxpbWl0c1swXTtcbiAgICAgICAgICAgICAgICAgICAgbGltaXRzTWF4ID0gdGhpcy5saW1pdHNbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vICNpZiBESU0yXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gUmF3Sm9pbnRQYXJhbXMucHJpc21hdGljKHJhd0ExLCByYXdBeDEsIHJhd0EyLCByYXdBeDIsIGxpbWl0c0VuYWJsZWQsIGxpbWl0c01pbiwgbGltaXRzTWF4KTtcbiAgICAgICAgICAgICAgICAvLyAjZW5kaWZcbiAgICAgICAgICAgICAgICByYXdBeDEuZnJlZSgpO1xuICAgICAgICAgICAgICAgIHJhd0F4Mi5mcmVlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmF3QTEuZnJlZSgpO1xuICAgICAgICByYXdBMi5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gSm9pbnRQYXJhbXM7XG59KCkpO1xuZXhwb3J0IHsgSm9pbnRQYXJhbXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvaW50LmpzLm1hcCIsImltcG9ydCB7IFJhd0pvaW50U2V0IH0gZnJvbSBcIi4uL3Jhd1wiO1xuaW1wb3J0IHsgQmFsbEpvaW50LCBGaXhlZEpvaW50LCBKb2ludCwgSm9pbnRUeXBlLCBQcmlzbWF0aWNKb2ludCwgfSBmcm9tIFwiLi9qb2ludFwiO1xuLyoqXG4gKiBBIHNldCBvZiBqb2ludHMuXG4gKlxuICogVG8gYXZvaWQgbGVha2luZyBXQVNNIHJlc291cmNlcywgdGhpcyBNVVNUIGJlIGZyZWVkIG1hbnVhbGx5IHdpdGggYGpvaW50U2V0LmZyZWUoKWBcbiAqIG9uY2UgeW91IGFyZSBkb25lIHVzaW5nIGl0IChhbmQgYWxsIHRoZSBqb2ludHMgaXQgY3JlYXRlZCkuXG4gKi9cbnZhciBKb2ludFNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBKb2ludFNldChyYXcpIHtcbiAgICAgICAgdGhpcy5yYXcgPSByYXcgfHwgbmV3IFJhd0pvaW50U2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgdGhlIFdBU00gbWVtb3J5IG9jY3VwaWVkIGJ5IHRoaXMgam9pbnQgc2V0LlxuICAgICAqL1xuICAgIEpvaW50U2V0LnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhdy5mcmVlKCk7XG4gICAgICAgIHRoaXMucmF3ID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBqb2ludCBhbmQgcmV0dXJuIGl0cyBpbnRlZ2VyIGhhbmRsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBib2RpZXMgLSBUaGUgc2V0IG9mIHJpZ2lkLWJvZGllcyBjb250YWluaW5nIHRoZSBib2RpZXMgdGhlIGpvaW50IGlzIGF0dGFjaGVkIHRvLlxuICAgICAqIEBwYXJhbSBkZXNjIC0gVGhlIGpvaW50J3MgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0gcGFyZW50MSAtIFRoZSBoYW5kbGUgb2YgdGhlIGZpcnN0IHJpZ2lkLWJvZHkgdGhpcyBqb2ludCBpcyBhdHRhY2hlZCB0by5cbiAgICAgKiBAcGFyYW0gcGFyZW50MiAtIFRoZSBoYW5kbGUgb2YgdGhlIHNlY29uZCByaWdpZC1ib2R5IHRoaXMgam9pbnQgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgSm9pbnRTZXQucHJvdG90eXBlLmNyZWF0ZUpvaW50ID0gZnVuY3Rpb24gKGJvZGllcywgZGVzYywgcGFyZW50MSwgcGFyZW50Mikge1xuICAgICAgICB2YXIgcmF3UGFyYW1zID0gZGVzYy5pbnRvUmF3KCk7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnJhdy5jcmVhdGVKb2ludChib2RpZXMucmF3LCByYXdQYXJhbXMsIHBhcmVudDEsIHBhcmVudDIpO1xuICAgICAgICByYXdQYXJhbXMuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgam9pbnQgZnJvbSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaW50ZWdlciBoYW5kbGUgb2YgdGhlIGpvaW50LlxuICAgICAqIEBwYXJhbSBib2RpZXMgLSBUaGUgc2V0IG9mIHJpZ2lkLWJvZGllcyBjb250YWluaW5nIHRoZSByaWdpZC1ib2RpZXMgYXR0YWNoZWQgYnkgdGhlIHJlbW92ZWQgam9pbnQuXG4gICAgICogQHBhcmFtIHdha2VfdXAgLSBJZiBgdHJ1ZWAsIHRoZSByaWdpZC1ib2RpZXMgYXR0YWNoZWQgYnkgdGhlIHJlbW92ZWQgam9pbnQgd2lsbCBiZSB3b2tlbi11cCBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIEpvaW50U2V0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaGFuZGxlLCBpc2xhbmRzLCBib2RpZXMsIHdha2VfdXApIHtcbiAgICAgICAgdGhpcy5yYXcucmVtb3ZlKGhhbmRsZSwgaXNsYW5kcy5yYXcsIGJvZGllcy5yYXcsIHdha2VfdXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBqb2ludHMgb24gdGhpcyBzZXQuXG4gICAgICovXG4gICAgSm9pbnRTZXQucHJvdG90eXBlLmxlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmxlbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRG9lcyB0aGlzIHNldCBjb250YWluIGEgam9pbnQgd2l0aCB0aGUgZ2l2ZW4gaGFuZGxlP1xuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZSAtIFRoZSBqb2ludCBoYW5kbGUgdG8gY2hlY2suXG4gICAgICovXG4gICAgSm9pbnRTZXQucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuY29udGFpbnMoaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGpvaW50IHdpdGggdGhlIGdpdmVuIGhhbmRsZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIG5vIGpvaW50IHdpdGggdGhlIHNwZWNpZmllZCBoYW5kbGUgZXhpc3RzLlxuICAgICAqIE5vdGUgdGhhdCB0d28gZGlzdGluY3QgY2FsbHMgd2l0aCB0aGUgc2FtZSBgaGFuZGxlYCB3aWxsIHJldHVybiB0d29cbiAgICAgKiBkaWZmZXJlbnQgSmF2YVNjcmlwdCBvYmplY3RzIHRoYXQgYm90aCByZXByZXNlbnQgdGhlIHNhbWUgam9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFuZGxlIC0gVGhlIGludGVnZXIgaGFuZGxlIG9mIHRoZSBqb2ludCB0byByZXRyaWV2ZS5cbiAgICAgKi9cbiAgICBKb2ludFNldC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICBpZiAodGhpcy5yYXcuY29udGFpbnMoaGFuZGxlKSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnJhdy5qb2ludFR5cGUoaGFuZGxlKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgSm9pbnRUeXBlLkJhbGw6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmFsbEpvaW50KHRoaXMucmF3LCBoYW5kbGUpO1xuICAgICAgICAgICAgICAgIGNhc2UgSm9pbnRUeXBlLlByaXNtYXRpYzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmlzbWF0aWNKb2ludCh0aGlzLnJhdywgaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBjYXNlIEpvaW50VHlwZS5GaXhlZDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaXhlZEpvaW50KHRoaXMucmF3LCBoYW5kbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIGNsb3N1cmUgdG8gZWFjaCBqb2ludHMgY29udGFpbmVkIGJ5IHRoaXMgc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBUaGUgY2xvc3VyZSB0byBhcHBseS5cbiAgICAgKi9cbiAgICBKb2ludFNldC5wcm90b3R5cGUuZm9yRWFjaEpvaW50ID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yYXcuZm9yRWFjaEpvaW50SGFuZGxlKGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgICAgIGYobmV3IEpvaW50KF90aGlzLnJhdywgaGFuZGxlKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZ2l2ZW4gY2xvc3VyZSB0byB0aGUgaGFuZGxlIG9mIGVhY2ggam9pbnRzIGNvbnRhaW5lZCBieSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIC0gVGhlIGNsb3N1cmUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgSm9pbnRTZXQucHJvdG90eXBlLmZvckVhY2hKb2ludEhhbmRsZSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHRoaXMucmF3LmZvckVhY2hKb2ludEhhbmRsZShmKTtcbiAgICB9O1xuICAgIHJldHVybiBKb2ludFNldDtcbn0oKSk7XG5leHBvcnQgeyBKb2ludFNldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9am9pbnRfc2V0LmpzLm1hcCIsImltcG9ydCB7IFJvdGF0aW9uT3BzLCBWZWN0b3JPcHMgfSBmcm9tICcuLi9tYXRoJztcbi8qKlxuICogVGhlIHNpbXVsYXRpb24gc3RhdHVzIG9mIGEgcmlnaWQtYm9keS5cbiAqL1xuLy8gVE9ETzogcmVuYW1lIHRoaXMgdG8gUmlnaWRCb2R5VHlwZVxuZXhwb3J0IHZhciBSaWdpZEJvZHlUeXBlO1xuKGZ1bmN0aW9uIChSaWdpZEJvZHlUeXBlKSB7XG4gICAgLyoqXG4gICAgICogQSBgUmlnaWRCb2R5VHlwZTo6RHluYW1pY2AgYm9keSBjYW4gYmUgYWZmZWN0ZWQgYnkgYWxsIGV4dGVybmFsIGZvcmNlcy5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlUeXBlW1JpZ2lkQm9keVR5cGVbXCJEeW5hbWljXCJdID0gMF0gPSBcIkR5bmFtaWNcIjtcbiAgICAvKipcbiAgICAgKiBBIGBSaWdpZEJvZHlUeXBlOjpTdGF0aWNgIGJvZHkgY2Fubm90IGJlIGFmZmVjdGVkIGJ5IGV4dGVybmFsIGZvcmNlcy5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlUeXBlW1JpZ2lkQm9keVR5cGVbXCJTdGF0aWNcIl0gPSAxXSA9IFwiU3RhdGljXCI7XG4gICAgLyoqXG4gICAgICogQSBgUmlnaWRCb2R5VHlwZTo6S2luZW1hdGljUG9zaXRpb25CYXNlZGAgYm9keSBjYW5ub3QgYmUgYWZmZWN0ZWQgYnkgYW55IGV4dGVybmFsIGZvcmNlcyBidXQgY2FuIGJlIGNvbnRyb2xsZWRcbiAgICAgKiBieSB0aGUgdXNlciBhdCB0aGUgcG9zaXRpb24gbGV2ZWwgd2hpbGUga2VlcGluZyByZWFsaXN0aWMgb25lLXdheSBpbnRlcmFjdGlvbiB3aXRoIGR5bmFtaWMgYm9kaWVzLlxuICAgICAqXG4gICAgICogT25lLXdheSBpbnRlcmFjdGlvbiBtZWFucyB0aGF0IGEga2luZW1hdGljIGJvZHkgY2FuIHB1c2ggYSBkeW5hbWljIGJvZHksIGJ1dCBhIGtpbmVtYXRpYyBib2R5XG4gICAgICogY2Fubm90IGJlIHB1c2hlZCBieSBhbnl0aGluZy4gSW4gb3RoZXIgd29yZHMsIHRoZSB0cmFqZWN0b3J5IG9mIGEga2luZW1hdGljIGJvZHkgY2FuIG9ubHkgYmVcbiAgICAgKiBtb2RpZmllZCBieSB0aGUgdXNlciBhbmQgaXMgaW5kZXBlbmRlbnQgZnJvbSBhbnkgY29udGFjdCBvciBqb2ludCBpdCBpcyBpbnZvbHZlZCBpbi5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlUeXBlW1JpZ2lkQm9keVR5cGVbXCJLaW5lbWF0aWNQb3NpdGlvbkJhc2VkXCJdID0gMl0gPSBcIktpbmVtYXRpY1Bvc2l0aW9uQmFzZWRcIjtcbiAgICAvKipcbiAgICAgKiBBIGBSaWdpZEJvZHlUeXBlOjpLaW5lbWF0aWNWZWxvY2l0eUJhc2VkYCBib2R5IGNhbm5vdCBiZSBhZmZlY3RlZCBieSBhbnkgZXh0ZXJuYWwgZm9yY2VzIGJ1dCBjYW4gYmUgY29udHJvbGxlZFxuICAgICAqIGJ5IHRoZSB1c2VyIGF0IHRoZSB2ZWxvY2l0eSBsZXZlbCB3aGlsZSBrZWVwaW5nIHJlYWxpc3RpYyBvbmUtd2F5IGludGVyYWN0aW9uIHdpdGggZHluYW1pYyBib2RpZXMuXG4gICAgICpcbiAgICAgKiBPbmUtd2F5IGludGVyYWN0aW9uIG1lYW5zIHRoYXQgYSBraW5lbWF0aWMgYm9keSBjYW4gcHVzaCBhIGR5bmFtaWMgYm9keSwgYnV0IGEga2luZW1hdGljIGJvZHlcbiAgICAgKiBjYW5ub3QgYmUgcHVzaGVkIGJ5IGFueXRoaW5nLiBJbiBvdGhlciB3b3JkcywgdGhlIHRyYWplY3Rvcnkgb2YgYSBraW5lbWF0aWMgYm9keSBjYW4gb25seSBiZVxuICAgICAqIG1vZGlmaWVkIGJ5IHRoZSB1c2VyIGFuZCBpcyBpbmRlcGVuZGVudCBmcm9tIGFueSBjb250YWN0IG9yIGpvaW50IGl0IGlzIGludm9sdmVkIGluLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keVR5cGVbUmlnaWRCb2R5VHlwZVtcIktpbmVtYXRpY1ZlbG9jaXR5QmFzZWRcIl0gPSAzXSA9IFwiS2luZW1hdGljVmVsb2NpdHlCYXNlZFwiO1xufSkoUmlnaWRCb2R5VHlwZSB8fCAoUmlnaWRCb2R5VHlwZSA9IHt9KSk7XG4vKipcbiAqIEEgcmlnaWQtYm9keS5cbiAqL1xudmFyIFJpZ2lkQm9keSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSaWdpZEJvZHkocmF3U2V0LCBoYW5kbGUpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQgPSByYXdTZXQ7XG4gICAgICAgIHRoaXMuaGFuZGxlID0gaGFuZGxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhpcyByaWdpZC1ib2R5IGlzIHN0aWxsIHZhbGlkIChpLmUuIHRoYXQgaXQgaGFzXG4gICAgICogbm90IGJlZW4gZGVsZXRlZCBmcm9tIHRoZSByaWdpZC1ib2R5IHNldCB5ZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29udGFpbnModGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9ja3Mgb3IgdW5sb2NrcyB0aGUgYWJpbGl0eSBvZiB0aGlzIHJpZ2lkLWJvZHkgdG8gdHJhbnNsYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2tlZCAtIElmIGB0cnVlYCwgdGhpcyByaWdpZC1ib2R5IHdpbGwgbm8gbG9uZ2VyIHRyYW5zbGF0ZSBkdWUgdG8gZm9yY2VzIGFuZCBpbXB1bHNlcy5cbiAgICAgKiBAcGFyYW0gd2FrZVVwIC0gSWYgYHRydWVgLCB0aGlzIHJpZ2lkLWJvZHkgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGF3YWtlbiBpZiBpdCBpcyBjdXJyZW50bHkgYXNsZWVwLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUubG9ja1RyYW5zbGF0aW9ucyA9IGZ1bmN0aW9uIChsb2NrZWQsIHdha2VVcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJMb2NrVHJhbnNsYXRpb25zKHRoaXMuaGFuZGxlLCBsb2NrZWQsIHdha2VVcCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2NrcyBvciB1bmxvY2tzIHRoZSBhYmlsaXR5IG9mIHRoaXMgcmlnaWQtYm9keSB0byByb3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9ja2VkIC0gSWYgYHRydWVgLCB0aGlzIHJpZ2lkLWJvZHkgd2lsbCBubyBsb25nZXIgcm90YXRlIGR1ZSB0byB0b3JxdWVzIGFuZCBpbXB1bHNlcy5cbiAgICAgKiBAcGFyYW0gd2FrZVVwIC0gSWYgYHRydWVgLCB0aGlzIHJpZ2lkLWJvZHkgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGF3YWtlbiBpZiBpdCBpcyBjdXJyZW50bHkgYXNsZWVwLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUubG9ja1JvdGF0aW9ucyA9IGZ1bmN0aW9uIChsb2NrZWQsIHdha2VVcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJMb2NrUm90YXRpb25zKHRoaXMuaGFuZGxlLCBsb2NrZWQsIHdha2VVcCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgZG9taW5hbmNlIGdyb3VwLCBpbiBbLTEyNywgKzEyN10gdGhpcyByaWdpZC1ib2R5IGlzIHBhcnQgb2YuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5kb21pbmFuY2VHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiRG9taW5hbmNlR3JvdXAodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZG9taW5hbmNlIGdyb3VwIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBncm91cCAtIFRoZSBkb21pbmFuY2UgZ3JvdXAgb2YgdGhpcyByaWdpZC1ib2R5LiBNdXN0IGJlIGEgc2lnbmVkIGludGVnZXIgaW4gdGhlIHJhbmdlIFstMTI3LCArMTI3XS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLnNldERvbWluYW5jZUdyb3VwID0gZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiU2V0RG9taW5hbmNlR3JvdXAodGhpcy5oYW5kbGUsIGdyb3VwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIENDRCAoQ29udGludW91cyBDb2xsaXNpb24gRGV0ZWN0aW9uKSBmb3IgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVuYWJsZWQgLSBJZiBgdHJ1ZWAsIENDRCB3aWxsIGJlIGVuYWJsZWQgZm9yIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmVuYWJsZUNjZCA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiRW5hYmxlQ2NkKHRoaXMuaGFuZGxlLCBlbmFibGVkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB3b3JsZC1zcGFjZSB0cmFuc2xhdGlvbiBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS50cmFuc2xhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMucmF3U2V0LnJiVHJhbnNsYXRpb24odGhpcy5oYW5kbGUpO1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcocmVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB3b3JsZC1zcGFjZSBvcmllbnRhdGlvbiBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5yb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRoaXMucmF3U2V0LnJiUm90YXRpb24odGhpcy5oYW5kbGUpO1xuICAgICAgICByZXR1cm4gUm90YXRpb25PcHMuZnJvbVJhdyhyZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHdvcmxkLXNwYWNlIG5leHQgdHJhbnNsYXRpb24gb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogSWYgdGhpcyByaWdpZC1ib2R5IGlzIGtpbmVtYXRpYyB0aGlzIHZhbHVlIGlzIHNldCBieSB0aGUgYHNldE5leHRLaW5lbWF0aWNUcmFuc2xhdGlvbmBcbiAgICAgKiBtZXRob2QgYW5kIGlzIHVzZWQgZm9yIGVzdGltYXRpbmcgdGhlIGtpbmVtYXRpYyBib2R5IHZlbG9jaXR5IGF0IHRoZSBuZXh0IHRpbWVzdGVwLlxuICAgICAqIEZvciBub24ta2luZW1hdGljIGJvZGllcywgdGhpcyB2YWx1ZSBpcyBjdXJyZW50bHkgdW5zcGVjaWZpZWQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5uZXh0VHJhbnNsYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLnJhd1NldC5yYk5leHRUcmFuc2xhdGlvbih0aGlzLmhhbmRsZSk7XG4gICAgICAgIHJldHVybiBWZWN0b3JPcHMuZnJvbVJhdyhyZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHdvcmxkLXNwYWNlIG5leHQgb3JpZW50YXRpb24gb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogSWYgdGhpcyByaWdpZC1ib2R5IGlzIGtpbmVtYXRpYyB0aGlzIHZhbHVlIGlzIHNldCBieSB0aGUgYHNldE5leHRLaW5lbWF0aWNSb3RhdGlvbmBcbiAgICAgKiBtZXRob2QgYW5kIGlzIHVzZWQgZm9yIGVzdGltYXRpbmcgdGhlIGtpbmVtYXRpYyBib2R5IHZlbG9jaXR5IGF0IHRoZSBuZXh0IHRpbWVzdGVwLlxuICAgICAqIEZvciBub24ta2luZW1hdGljIGJvZGllcywgdGhpcyB2YWx1ZSBpcyBjdXJyZW50bHkgdW5zcGVjaWZpZWQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5uZXh0Um90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLnJhd1NldC5yYk5leHRSb3RhdGlvbih0aGlzLmhhbmRsZSk7XG4gICAgICAgIHJldHVybiBSb3RhdGlvbk9wcy5mcm9tUmF3KHJlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2xhdGlvbiBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhIC0gVGhlIHdvcmxkLXNwYWNlIHBvc2l0aW9uIG9mIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBGb3JjZXMgdGhlIHJpZ2lkLWJvZHkgdG8gd2FrZS11cCBzbyBpdCBpcyBwcm9wZXJseSBhZmZlY3RlZCBieSBmb3JjZXMgaWYgaXRcbiAgICAgKiAgICAgICAgICAgICAgICAgd2Fzbid0IG1vdmluZyBiZWZvcmUgbW9kaWZ5aW5nIGl0cyBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLnNldFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKHRyYSwgd2FrZVVwKSB7XG4gICAgICAgIC8vICNpZiBESU0yXG4gICAgICAgIHRoaXMucmF3U2V0LnJiU2V0VHJhbnNsYXRpb24odGhpcy5oYW5kbGUsIHRyYS54LCB0cmEueSwgd2FrZVVwKTtcbiAgICAgICAgLy8gI2VuZGlmXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsaW5lYXIgdmVsb2NpdHkgZm8gdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlbCAtIFRoZSBsaW5lYXIgdmVsb2NpdHkgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBGb3JjZXMgdGhlIHJpZ2lkLWJvZHkgdG8gd2FrZS11cCBpZiBpdCB3YXMgYXNsZWVwLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuc2V0TGludmVsID0gZnVuY3Rpb24gKHZlbCwgd2FrZVVwKSB7XG4gICAgICAgIHZhciByYXdWZWwgPSBWZWN0b3JPcHMuaW50b1Jhdyh2ZWwpO1xuICAgICAgICB0aGlzLnJhd1NldC5yYlNldExpbnZlbCh0aGlzLmhhbmRsZSwgcmF3VmVsLCB3YWtlVXApO1xuICAgICAgICByYXdWZWwuZnJlZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHNjYWxlIGZhY3RvciBhcHBsaWVkIHRvIHRoZSBncmF2aXR5IGFmZmVjdGluZ1xuICAgICAqIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmdyYXZpdHlTY2FsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiR3Jhdml0eVNjYWxlKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjYWxlIGZhY3RvciBhcHBsaWVkIHRvIHRoZSBncmF2aXR5IGFmZmVjdGluZ1xuICAgICAqIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmYWN0b3IgLSBUaGUgc2NhbGUgZmFjdG9yIHRvIHNldC4gQSB2YWx1ZSBvZiAwLjAgbWVhbnNcbiAgICAgKiAgIHRoYXQgdGhpcyByaWdpZC1ib2R5IHdpbGwgb24gbG9uZ2VyIGJlIGFmZmVjdGVkIGJ5IGdyYXZpdHkuXG4gICAgICogQHBhcmFtIHdha2VVcCAtIEZvcmNlcyB0aGUgcmlnaWQtYm9keSB0byB3YWtlLXVwIGlmIGl0IHdhcyBhc2xlZXAuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5zZXRHcmF2aXR5U2NhbGUgPSBmdW5jdGlvbiAoZmFjdG9yLCB3YWtlVXApIHtcbiAgICAgICAgdGhpcy5yYXdTZXQucmJTZXRHcmF2aXR5U2NhbGUodGhpcy5oYW5kbGUsIGZhY3Rvciwgd2FrZVVwKTtcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcm90YXRpb24gYW5nbGUgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuZ2xlIC0gVGhlIHJvdGF0aW9uIGFuZ2xlLCBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBGb3JjZXMgdGhlIHJpZ2lkLWJvZHkgdG8gd2FrZS11cCBzbyBpdCBpcyBwcm9wZXJseSBhZmZlY3RlZCBieSBmb3JjZXMgaWYgaXRcbiAgICAgKiB3YXNuJ3QgbW92aW5nIGJlZm9yZSBtb2RpZnlpbmcgaXRzIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAoYW5nbGUsIHdha2VVcCkge1xuICAgICAgICB0aGlzLnJhd1NldC5yYlNldFJvdGF0aW9uKHRoaXMuaGFuZGxlLCBhbmdsZSwgd2FrZVVwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgZm8gdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlbCAtIFRoZSBhbmd1bGFyIHZlbG9jaXR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0gd2FrZVVwIC0gRm9yY2VzIHRoZSByaWdpZC1ib2R5IHRvIHdha2UtdXAgaWYgaXQgd2FzIGFzbGVlcC5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLnNldEFuZ3ZlbCA9IGZ1bmN0aW9uICh2ZWwsIHdha2VVcCkge1xuICAgICAgICB0aGlzLnJhd1NldC5yYlNldEFuZ3ZlbCh0aGlzLmhhbmRsZSwgdmVsLCB3YWtlVXApO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYywgc2V0cyBpdHMgZnV0dXJlIHRyYW5zbGF0aW9uIGFmdGVyIHRoZSBuZXh0IHRpbWVzdGVwIGludGVncmF0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGByaWdpZEJvZHkuc2V0VHJhbnNsYXRpb25gIHRvIG1ha2UgdGhlIGR5bmFtaWMgb2JqZWN0XG4gICAgICogaW50ZXJhY3Rpbmcgd2l0aCB0aGlzIGtpbmVtYXRpYyBib2R5IGJlaGF2ZSBhcyBleHBlY3RlZC4gSW50ZXJuYWxseSwgUmFwaWVyIHdpbGwgY29tcHV0ZVxuICAgICAqIGFuIGFydGlmaWNpYWwgdmVsb2NpdHkgZm9yIHRoaXMgcmlnaWQtYm9keSBmcm9tIGl0cyBjdXJyZW50IHBvc2l0aW9uIGFuZCBpdHMgbmV4dCBraW5lbWF0aWNcbiAgICAgKiBwb3NpdGlvbi4gVGhpcyB2ZWxvY2l0eSB3aWxsIGJlIHVzZWQgdG8gY29tcHV0ZSBmb3JjZXMgb24gZHluYW1pYyBib2RpZXMgaW50ZXJhY3Rpbmcgd2l0aFxuICAgICAqIHRoaXMgYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IC0gVGhlIGtpbmVtYXRpYyB0cmFuc2xhdGlvbiB0byBzZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5zZXROZXh0S2luZW1hdGljVHJhbnNsYXRpb24gPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICB0aGlzLnJhd1NldC5yYlNldE5leHRLaW5lbWF0aWNUcmFuc2xhdGlvbih0aGlzLmhhbmRsZSwgdC54LCB0LnkpO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYywgc2V0cyBpdHMgZnV0dXJlIHJvdGF0aW9uIGFmdGVyIHRoZSBuZXh0IHRpbWVzdGVwIGludGVncmF0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGByaWdpZEJvZHkuc2V0Um90YXRpb25gIHRvIG1ha2UgdGhlIGR5bmFtaWMgb2JqZWN0XG4gICAgICogaW50ZXJhY3Rpbmcgd2l0aCB0aGlzIGtpbmVtYXRpYyBib2R5IGJlaGF2ZSBhcyBleHBlY3RlZC4gSW50ZXJuYWxseSwgUmFwaWVyIHdpbGwgY29tcHV0ZVxuICAgICAqIGFuIGFydGlmaWNpYWwgdmVsb2NpdHkgZm9yIHRoaXMgcmlnaWQtYm9keSBmcm9tIGl0cyBjdXJyZW50IHBvc2l0aW9uIGFuZCBpdHMgbmV4dCBraW5lbWF0aWNcbiAgICAgKiBwb3NpdGlvbi4gVGhpcyB2ZWxvY2l0eSB3aWxsIGJlIHVzZWQgdG8gY29tcHV0ZSBmb3JjZXMgb24gZHluYW1pYyBib2RpZXMgaW50ZXJhY3Rpbmcgd2l0aFxuICAgICAqIHRoaXMgYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSAtIFRoZSBraW5lbWF0aWMgcm90YXRpb24gYW5nbGUsIGluIHJhZGlhbnMuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5zZXROZXh0S2luZW1hdGljUm90YXRpb24gPSBmdW5jdGlvbiAoYW5nbGUpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQucmJTZXROZXh0S2luZW1hdGljUm90YXRpb24odGhpcy5oYW5kbGUsIGFuZ2xlKTtcbiAgICB9O1xuICAgIC8vICNlbmRpZlxuICAgIC8qKlxuICAgICAqIFRoZSBsaW5lYXIgdmVsb2NpdHkgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUubGludmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXdTZXQucmJMaW52ZWwodGhpcy5oYW5kbGUpKTtcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogVGhlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuYW5ndmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJBbmd2ZWwodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgLyoqXG4gICAgICogVGhlIG1hc3Mgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUubWFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiTWFzcyh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQdXQgdGhpcyByaWdpZCBib2R5IHRvIHNsZWVwLlxuICAgICAqXG4gICAgICogQSBzbGVlcGluZyBib2R5IG5vIGxvbmdlciBtb3ZlcyBhbmQgaXMgbm8gbG9uZ2VyIHNpbXVsYXRlZCBieSB0aGUgcGh5c2ljcyBlbmdpbmUgdW5sZXNzXG4gICAgICogaXQgaXMgd2FrZW4gdXAuIEl0IGNhbiBiZSB3b2tlbiBtYW51YWxseSB3aXRoIGB0aGlzLndha2VVcCgpYCBvciBhdXRvbWF0aWNhbGx5IGR1ZSB0b1xuICAgICAqIGV4dGVybmFsIGZvcmNlcyBsaWtlIGNvbnRhY3RzLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuc2xlZXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiU2xlZXAodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2FrZXMgdGhpcyByaWdpZC1ib2R5IHVwLlxuICAgICAqXG4gICAgICogQSBkeW5hbWljIHJpZ2lkLWJvZHkgdGhhdCBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzZXZlcmFsIGNvbnNlY3V0aXZlIGZyYW1lcyB3aWxsXG4gICAgICogYmUgcHV0IHRvIHNsZWVwIGJ5IHRoZSBwaHlzaWNzIGVuZ2luZSwgaS5lLiwgaXQgd2lsbCBzdG9wIGJlaW5nIHNpbXVsYXRlZCBpbiBvcmRlclxuICAgICAqIHRvIGF2b2lkIHVzZWxlc3MgY29tcHV0YXRpb25zLlxuICAgICAqIFRoaXMgbWV0aG9kcyBmb3JjZXMgYSBzbGVlcGluZyByaWdpZC1ib2R5IHRvIHdha2UtdXAuIFRoaXMgaXMgdXNlZnVsLCBlLmcuLCBiZWZvcmUgbW9kaWZ5aW5nXG4gICAgICogdGhlIHBvc2l0aW9uIG9mIGEgZHluYW1pYyBib2R5IHNvIHRoYXQgaXQgaXMgcHJvcGVybHkgc2ltdWxhdGVkIGFmdGVyd2FyZHMuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS53YWtlVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiV2FrZVVwKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElzIENDRCBlbmFibGVkIGZvciB0aGlzIHJpZ2lkLWJvZHk/XG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5pc0NjZEVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiSXNDY2RFbmFibGVkKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgY29sbGlkZXJzIGF0dGFjaGVkIHRvIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLm51bUNvbGxpZGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiTnVtQ29sbGlkZXJzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgaGFuZGxlIG9mIHRoZSBgaS10aGAgY29sbGlkZXIgYXR0YWNoZWQgdG8gdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGkgLSBUaGUgaW5kZXggb2YgdGhlIGNvbGxpZGVyIHRvIHJldHJpZXZlLiBNdXN0IGJlIGEgbnVtYmVyIGluIGBbMCwgdGhpcy5udW1Db2xsaWRlcnMoKVtgLlxuICAgICAqICAgICAgICAgVGhpcyBpbmRleCBpcyAqKm5vdCoqIHRoZSBzYW1lIGFzIHRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgY29sbGlkZXIuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5jb2xsaWRlciA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5yYkNvbGxpZGVyKHRoaXMuaGFuZGxlLCBpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhpcyByaWdpZC1ib2R5OiBzdGF0aWMsIGR5bmFtaWMsIG9yIGtpbmVtYXRpYy5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmJvZHlUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJCb2R5VHlwZSh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHJpZ2lkLWJvZHkgc2xlZXBpbmc/XG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5pc1NsZWVwaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJJc1NsZWVwaW5nKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElzIHRoZSB2ZWxvY2l0eSBvZiB0aGlzIHJpZ2lkLWJvZHkgbm90IHplcm8/XG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5pc01vdmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiSXNNb3ZpbmcodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXMgdGhpcyByaWdpZC1ib2R5IHN0YXRpYz9cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmlzU3RhdGljID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJJc1N0YXRpYyh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHJpZ2lkLWJvZHkga2luZW1hdGljP1xuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuaXNLaW5lbWF0aWMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5yYklzS2luZW1hdGljKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElzIHRoaXMgcmlnaWQtYm9keSBkeW5hbWljP1xuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuaXNEeW5hbWljID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQucmJJc0R5bmFtaWModGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIGxpbmVhciBkYW1waW5nIGNvZWZmaWNpZW50IG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmxpbmVhckRhbXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5yYkxpbmVhckRhbXBpbmcodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIGFuZ3VsYXIgZGFtcGluZyBjb2VmZmljaWVudCBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5hbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LnJiQW5ndWxhckRhbXBpbmcodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGluZWFyIGRhbXBpbmcgZmFjdG9yIGFwcGxpZWQgdG8gdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZhY3RvciAtIFRoZSBkYW1waW5nIGZhY3RvciB0byBzZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5zZXRMaW5lYXJEYW1waW5nID0gZnVuY3Rpb24gKGZhY3Rvcikge1xuICAgICAgICB0aGlzLnJhd1NldC5yYlNldExpbmVhckRhbXBpbmcodGhpcy5oYW5kbGUsIGZhY3Rvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsaW5lYXIgZGFtcGluZyBmYWN0b3IgYXBwbGllZCB0byB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmFjdG9yIC0gVGhlIGRhbXBpbmcgZmFjdG9yIHRvIHNldC5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLnNldEFuZ3VsYXJEYW1waW5nID0gZnVuY3Rpb24gKGZhY3Rvcikge1xuICAgICAgICB0aGlzLnJhd1NldC5yYlNldEFuZ3VsYXJEYW1waW5nKHRoaXMuaGFuZGxlLCBmYWN0b3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGZvcmNlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9yY2UgLSB0aGUgd29ybGQtc3BhY2UgZm9yY2UgdG8gYXBwbHkgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgICogQHBhcmFtIHdha2VVcCAtIHNob3VsZCB0aGUgcmlnaWQtYm9keSBiZSBhdXRvbWF0aWNhbGx5IHdva2VuLXVwP1xuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuYXBwbHlGb3JjZSA9IGZ1bmN0aW9uIChmb3JjZSwgd2FrZVVwKSB7XG4gICAgICAgIHZhciByYXdGb3JjZSA9IFZlY3Rvck9wcy5pbnRvUmF3KGZvcmNlKTtcbiAgICAgICAgdGhpcy5yYXdTZXQucmJBcHBseUZvcmNlKHRoaXMuaGFuZGxlLCByYXdGb3JjZSwgd2FrZVVwKTtcbiAgICAgICAgcmF3Rm9yY2UuZnJlZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBpbXB1bHNlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW1wdWxzZSAtIHRoZSB3b3JsZC1zcGFjZSBpbXB1bHNlIHRvIGFwcGx5IG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmFwcGx5SW1wdWxzZSA9IGZ1bmN0aW9uIChpbXB1bHNlLCB3YWtlVXApIHtcbiAgICAgICAgdmFyIHJhd0ltcHVsc2UgPSBWZWN0b3JPcHMuaW50b1JhdyhpbXB1bHNlKTtcbiAgICAgICAgdGhpcy5yYXdTZXQucmJBcHBseUltcHVsc2UodGhpcy5oYW5kbGUsIHJhd0ltcHVsc2UsIHdha2VVcCk7XG4gICAgICAgIHJhd0ltcHVsc2UuZnJlZSgpO1xuICAgIH07XG4gICAgLy8gI2lmIERJTTJcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgdG9ycXVlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9ycXVlIC0gdGhlIHRvcnF1ZSB0byBhcHBseSBvbiB0aGUgcmlnaWQtYm9keS5cbiAgICAgKiBAcGFyYW0gd2FrZVVwIC0gc2hvdWxkIHRoZSByaWdpZC1ib2R5IGJlIGF1dG9tYXRpY2FsbHkgd29rZW4tdXA/XG4gICAgICovXG4gICAgUmlnaWRCb2R5LnByb3RvdHlwZS5hcHBseVRvcnF1ZSA9IGZ1bmN0aW9uICh0b3JxdWUsIHdha2VVcCkge1xuICAgICAgICB0aGlzLnJhd1NldC5yYkFwcGx5VG9ycXVlKHRoaXMuaGFuZGxlLCB0b3JxdWUsIHdha2VVcCk7XG4gICAgfTtcbiAgICAvLyAjZW5kaWZcbiAgICAvLyAjaWYgRElNMlxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYW4gaW1wdWxzaXZlIHRvcnF1ZSBhdCB0aGUgY2VudGVyLW9mLW1hc3Mgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvcnF1ZUltcHVsc2UgLSB0aGUgdG9ycXVlIGltcHVsc2UgdG8gYXBwbHkgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgICogQHBhcmFtIHdha2VVcCAtIHNob3VsZCB0aGUgcmlnaWQtYm9keSBiZSBhdXRvbWF0aWNhbGx5IHdva2VuLXVwP1xuICAgICAqL1xuICAgIFJpZ2lkQm9keS5wcm90b3R5cGUuYXBwbHlUb3JxdWVJbXB1bHNlID0gZnVuY3Rpb24gKHRvcnF1ZUltcHVsc2UsIHdha2VVcCkge1xuICAgICAgICB0aGlzLnJhd1NldC5yYkFwcGx5VG9ycXVlSW1wdWxzZSh0aGlzLmhhbmRsZSwgdG9ycXVlSW1wdWxzZSwgd2FrZVVwKTtcbiAgICB9O1xuICAgIC8vICNlbmRpZlxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBmb3JjZSBhdCB0aGUgZ2l2ZW4gd29ybGQtc3BhY2UgcG9pbnQgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZvcmNlIC0gdGhlIHdvcmxkLXNwYWNlIGZvcmNlIHRvIGFwcGx5IG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBwb2ludCAtIHRoZSB3b3JsZC1zcGFjZSBwb2ludCB3aGVyZSB0aGUgaW1wdWxzZSBpcyB0byBiZSBhcHBsaWVkIG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmFwcGx5Rm9yY2VBdFBvaW50ID0gZnVuY3Rpb24gKGZvcmNlLCBwb2ludCwgd2FrZVVwKSB7XG4gICAgICAgIHZhciByYXdGb3JjZSA9IFZlY3Rvck9wcy5pbnRvUmF3KGZvcmNlKTtcbiAgICAgICAgdmFyIHJhd1BvaW50ID0gVmVjdG9yT3BzLmludG9SYXcocG9pbnQpO1xuICAgICAgICB0aGlzLnJhd1NldC5yYkFwcGx5Rm9yY2VBdFBvaW50KHRoaXMuaGFuZGxlLCByYXdGb3JjZSwgcmF3UG9pbnQsIHdha2VVcCk7XG4gICAgICAgIHJhd0ZvcmNlLmZyZWUoKTtcbiAgICAgICAgcmF3UG9pbnQuZnJlZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBpbXB1bHNlIGF0IHRoZSBnaXZlbiB3b3JsZC1zcGFjZSBwb2ludCBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW1wdWxzZSAtIHRoZSB3b3JsZC1zcGFjZSBpbXB1bHNlIHRvIGFwcGx5IG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBwb2ludCAtIHRoZSB3b3JsZC1zcGFjZSBwb2ludCB3aGVyZSB0aGUgaW1wdWxzZSBpcyB0byBiZSBhcHBsaWVkIG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAgKi9cbiAgICBSaWdpZEJvZHkucHJvdG90eXBlLmFwcGx5SW1wdWxzZUF0UG9pbnQgPSBmdW5jdGlvbiAoaW1wdWxzZSwgcG9pbnQsIHdha2VVcCkge1xuICAgICAgICB2YXIgcmF3SW1wdWxzZSA9IFZlY3Rvck9wcy5pbnRvUmF3KGltcHVsc2UpO1xuICAgICAgICB2YXIgcmF3UG9pbnQgPSBWZWN0b3JPcHMuaW50b1Jhdyhwb2ludCk7XG4gICAgICAgIHRoaXMucmF3U2V0LnJiQXBwbHlJbXB1bHNlQXRQb2ludCh0aGlzLmhhbmRsZSwgcmF3SW1wdWxzZSwgcmF3UG9pbnQsIHdha2VVcCk7XG4gICAgICAgIHJhd0ltcHVsc2UuZnJlZSgpO1xuICAgICAgICByYXdQb2ludC5mcmVlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUmlnaWRCb2R5O1xufSgpKTtcbmV4cG9ydCB7IFJpZ2lkQm9keSB9O1xudmFyIFJpZ2lkQm9keURlc2MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmlnaWRCb2R5RGVzYyhzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMudHJhbnNsYXRpb24gPSBWZWN0b3JPcHMuemVyb3MoKTtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IFJvdGF0aW9uT3BzLmlkZW50aXR5KCk7XG4gICAgICAgIHRoaXMuZ3Jhdml0eVNjYWxlID0gMS4wO1xuICAgICAgICB0aGlzLmxpbnZlbCA9IFZlY3Rvck9wcy56ZXJvcygpO1xuICAgICAgICB0aGlzLm1hc3MgPSAwLjA7XG4gICAgICAgIHRoaXMudHJhbnNsYXRpb25zRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2VudGVyT2ZNYXNzID0gVmVjdG9yT3BzLnplcm9zKCk7XG4gICAgICAgIC8vICNpZiBESU0yXG4gICAgICAgIHRoaXMuYW5ndmVsID0gMC4wO1xuICAgICAgICB0aGlzLnByaW5jaXBhbEFuZ3VsYXJJbmVydGlhID0gMC4wO1xuICAgICAgICB0aGlzLnJvdGF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gMC4wO1xuICAgICAgICB0aGlzLmFuZ3VsYXJEYW1waW5nID0gMC4wO1xuICAgICAgICB0aGlzLmNhblNsZWVwID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jY2RFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9taW5hbmNlR3JvdXAgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJpZ2lkLWJvZHkgZGVzY3JpcHRvciB1c2VkIHRvIGJ1aWxkIGEgZHluYW1pYyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MubmV3RHluYW1pYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSaWdpZEJvZHlEZXNjKFJpZ2lkQm9keVR5cGUuRHluYW1pYyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHJpZ2lkLWJvZHkgZGVzY3JpcHRvciB1c2VkIHRvIGJ1aWxkIGEgcG9zaXRpb24tYmFzZWQga2luZW1hdGljIHJpZ2lkLWJvZHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5uZXdLaW5lbWF0aWNQb3NpdGlvbkJhc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpZ2lkQm9keURlc2MoUmlnaWRCb2R5VHlwZS5LaW5lbWF0aWNQb3NpdGlvbkJhc2VkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgcmlnaWQtYm9keSBkZXNjcmlwdG9yIHVzZWQgdG8gYnVpbGQgYSB2ZWxvY2l0eS1iYXNlZCBraW5lbWF0aWMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlEZXNjLm5ld0tpbmVtYXRpY1ZlbG9jaXR5QmFzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmlnaWRCb2R5RGVzYyhSaWdpZEJvZHlUeXBlLktpbmVtYXRpY1ZlbG9jaXR5QmFzZWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSByaWdpZC1ib2R5IGRlc2NyaXB0b3IgdXNlZCB0byBidWlsZCBhIHN0YXRpYyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MubmV3U3RhdGljID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpZ2lkQm9keURlc2MoUmlnaWRCb2R5VHlwZS5TdGF0aWMpO1xuICAgIH07XG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0RG9taW5hbmNlR3JvdXAgPSBmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgdGhpcy5kb21pbmFuY2VHcm91cCA9IGdyb3VwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW5pdGlhbCB0cmFuc2xhdGlvbiBvZiB0aGUgcmlnaWQtYm9keSB0byBjcmVhdGUuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0VHJhbnNsYXRpb24gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBpZiAodHlwZW9mIHggIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgeSAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiVGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudHMgbXVzdCBiZSBudW1iZXJzLlwiKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGlvbiA9IHsgeDogeCwgeTogeSB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8vICNlbmRpZlxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGluaXRpYWwgcm90YXRpb24gb2YgdGhlIHJpZ2lkLWJvZHkgdG8gY3JlYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJvdCAtIFRoZSByb3RhdGlvbiB0byBzZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAocm90KSB7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSByb3Q7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2NhbGUgZmFjdG9yIGFwcGxpZWQgdG8gdGhlIGdyYXZpdHkgYWZmZWN0aW5nXG4gICAgICogdGhlIHJpZ2lkLWJvZHkgYmVpbmcgYnVpbHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NhbGUgLSBUaGUgc2NhbGUgZmFjdG9yLiBTZXQgdGhpcyB0byBgMC4wYCBpZiB0aGUgcmlnaWQtYm9keVxuICAgICAqICAgbmVlZHMgdG8gaWdub3JlIGdyYXZpdHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0R3Jhdml0eVNjYWxlID0gZnVuY3Rpb24gKHNjYWxlKSB7XG4gICAgICAgIHRoaXMuZ3Jhdml0eVNjYWxlID0gc2NhbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW5pdGlhbCBtYXNzIG9mIHRoZSByaWdpZC1ib2R5IGJlaW5nIGJ1aWx0LCBiZWZvcmUgYWRkaW5nIGNvbGxpZGVycycgY29udHJpYnV0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXNzIOKIkiBUaGUgaW5pdGlhbCBtYXNzIG9mIHRoZSByaWdpZC1ib2R5IHRvIGNyZWF0ZS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlEZXNjLnByb3RvdHlwZS5zZXRBZGRpdGlvbmFsTWFzcyA9IGZ1bmN0aW9uIChtYXNzKSB7XG4gICAgICAgIHRoaXMubWFzcyA9IG1hc3M7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9ja3MgYWxsIHRyYW5zbGF0aW9ucyB0aGF0IHdvdWxkIGhhdmUgcmVzdWx0ZWQgZnJvbSBmb3JjZXMgb25cbiAgICAgKiB0aGUgY3JlYXRlZCByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MucHJvdG90eXBlLmxvY2tUcmFuc2xhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJhbnNsYXRpb25zRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW5pdGlhbCBsaW5lYXIgdmVsb2NpdHkgb2YgdGhlIHJpZ2lkLWJvZHkgdG8gY3JlYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHggLSBUaGUgbGluZWFyIHZlbG9jaXR5IHRvIHNldCBhbG9uZyB0aGUgYHhgIGF4aXMuXG4gICAgICogQHBhcmFtIHkgLSBUaGUgbGluZWFyIHZlbG9jaXR5IHRvIHNldCBhbG9uZyB0aGUgYHlgIGF4aXMuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0TGludmVsID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIHkgIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIlRoZSBsaW52ZWwgY29tcG9uZW50cyBtdXN0IGJlIG51bWJlcnMuXCIpO1xuICAgICAgICB0aGlzLmxpbnZlbCA9IHsgeDogeCwgeTogeSB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgcmlnaWQtYm9keSB0byBjcmVhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmVsIC0gVGhlIGFuZ3VsYXIgdmVsb2NpdHkgdG8gc2V0LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MucHJvdG90eXBlLnNldEFuZ3ZlbCA9IGZ1bmN0aW9uICh2ZWwpIHtcbiAgICAgICAgdGhpcy5hbmd2ZWwgPSB2ZWw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWFzcyBwcm9wZXJ0aWVzIG9mIHRoZSByaWdpZC1ib2R5IGJlaW5nIGJ1aWx0LlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZSBmaW5hbCBtYXNzIHByb3BlcnRpZXMgb2YgdGhlIHJpZ2lkLWJvZGllcyBkZXBlbmRzXG4gICAgICogb24gdGhlIGluaXRpYWwgbWFzcy1wcm9wZXJ0aWVzIG9mIHRoZSByaWdpZC1ib2R5IChzZXQgYnkgdGhpcyBtZXRob2QpXG4gICAgICogdG8gd2hpY2ggaXMgYWRkZWQgdGhlIGNvbnRyaWJ1dGlvbnMgb2YgYWxsIHRoZSBjb2xsaWRlcnMgd2l0aCBub24temVybyBkZW5zaXR5XG4gICAgICogYXR0YWNoZWQgdG8gdGhpcyByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogVGhlcmVmb3JlLCBpZiB5b3Ugd2FudCB5b3VyIHByb3ZpZGVkIG1hc3MgcHJvcGVydGllcyB0byBiZSB0aGUgZmluYWxcbiAgICAgKiBtYXNzIHByb3BlcnRpZXMgb2YgeW91ciByaWdpZC1ib2R5LCBkb24ndCBhdHRhY2ggY29sbGlkZXJzIHRvIGl0LCBvclxuICAgICAqIG9ubHkgYXR0YWNoIGNvbGxpZGVycyB3aXRoIGRlbnNpdGllcyBlcXVhbCB0byB6ZXJvLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hc3Mg4oiSIFRoZSBpbml0aWFsIG1hc3Mgb2YgdGhlIHJpZ2lkLWJvZHkgdG8gY3JlYXRlLlxuICAgICAqIEBwYXJhbSBjZW50ZXJPZk1hc3Mg4oiSIFRoZSBpbml0aWFsIGNlbnRlci1vZi1tYXNzIG9mIHRoZSByaWdpZC1ib2R5IHRvIGNyZWF0ZS5cbiAgICAgKiBAcGFyYW0gcHJpbmNpcGFsQW5ndWxhckluZXJ0aWEg4oiSIFRoZSBpbml0aWFsIHByaW5jaXBhbCBhbmd1bGFyIGluZXJ0aWEgb2YgdGhlIHJpZ2lkLWJvZHkgdG8gY3JlYXRlLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MucHJvdG90eXBlLnNldEFkZGl0aW9uYWxNYXNzUHJvcGVydGllcyA9IGZ1bmN0aW9uIChtYXNzLCBjZW50ZXJPZk1hc3MsIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhKSB7XG4gICAgICAgIHRoaXMubWFzcyA9IG1hc3M7XG4gICAgICAgIHRoaXMuY2VudGVyT2ZNYXNzID0gY2VudGVyT2ZNYXNzO1xuICAgICAgICB0aGlzLnByaW5jaXBhbEFuZ3VsYXJJbmVydGlhID0gcHJpbmNpcGFsQW5ndWxhckluZXJ0aWE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWFzcyBwcm9wZXJ0aWVzIG9mIHRoZSByaWdpZC1ib2R5IGJlaW5nIGJ1aWx0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhIOKIkiBUaGUgaW5pdGlhbCBwcmluY2lwYWwgYW5ndWxhciBpbmVydGlhIG9mIHRoZSByaWdpZC1ib2R5IHRvIGNyZWF0ZS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlEZXNjLnByb3RvdHlwZS5zZXRBZGRpdGlvbmFsUHJpbmNpcGFsQW5ndWxhckluZXJ0aWEgPSBmdW5jdGlvbiAocHJpbmNpcGFsQW5ndWxhckluZXJ0aWEpIHtcbiAgICAgICAgdGhpcy5wcmluY2lwYWxBbmd1bGFySW5lcnRpYSA9IHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvY2tzIGFsbCByb3RhdGlvbnMgdGhhdCB3b3VsZCBoYXZlIHJlc3VsdGVkIGZyb20gZm9yY2VzIG9uXG4gICAgICogdGhlIGNyZWF0ZWQgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlEZXNjLnByb3RvdHlwZS5sb2NrUm90YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJvdGF0aW9uc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyAjZW5kaWZcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsaW5lYXIgZGFtcGluZyBvZiB0aGUgcmlnaWQtYm9keSB0byBjcmVhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgcHJvZ3Jlc3NpdmVseSBzbG93ZG93biB0aGUgdHJhbnNsYXRpb25hbCBtb3ZlbWVudCBvZiB0aGUgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYW1waW5nIC0gVGhlIGFuZ3VsYXIgZGFtcGluZyBjb2VmZmljaWVudC4gU2hvdWxkIGJlID49IDAuIFRoZSBoaWdoZXIgdGhpc1xuICAgICAqICAgICAgICAgICAgICAgICAgdmFsdWUgaXMsIHRoZSBzdHJvbmdlciB0aGUgdHJhbnNsYXRpb25hbCBzbG93ZG93biB3aWxsIGJlLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MucHJvdG90eXBlLnNldExpbmVhckRhbXBpbmcgPSBmdW5jdGlvbiAoZGFtcGluZykge1xuICAgICAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSBkYW1waW5nO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGFuZ3VsYXIgZGFtcGluZyBvZiB0aGUgcmlnaWQtYm9keSB0byBjcmVhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgcHJvZ3Jlc3NpdmVseSBzbG93ZG93biB0aGUgcm90YXRpb25hbCBtb3ZlbWVudCBvZiB0aGUgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYW1waW5nIC0gVGhlIGFuZ3VsYXIgZGFtcGluZyBjb2VmZmljaWVudC4gU2hvdWxkIGJlID49IDAuIFRoZSBoaWdoZXIgdGhpc1xuICAgICAqICAgICAgICAgICAgICAgICAgdmFsdWUgaXMsIHRoZSBzdHJvbmdlciB0aGUgcm90YXRpb25hbCBzbG93ZG93biB3aWxsIGJlLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keURlc2MucHJvdG90eXBlLnNldEFuZ3VsYXJEYW1waW5nID0gZnVuY3Rpb24gKGRhbXBpbmcpIHtcbiAgICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IGRhbXBpbmc7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgcmlnaWQtYm9keSB0byBjcmVhdGUgY2FuIHNsZWVwLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbiAtIHRydWUgaWYgdGhlIHJpZ2lkLWJvZHkgY2FuIHNsZWVwLCBmYWxzZSBpZiBpdCBjYW4ndC5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlEZXNjLnByb3RvdHlwZS5zZXRDYW5TbGVlcCA9IGZ1bmN0aW9uIChjYW4pIHtcbiAgICAgICAgdGhpcy5jYW5TbGVlcCA9IGNhbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgQ29udGludW91cyBDb2xsaXNpb24gRGV0ZWN0aW9uIChDQ0QpIGlzIGVuYWJsZWQgZm9yIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmFibGVkIC0gdHJ1ZSBpZiB0aGUgcmlnaWQtYm9keSBoYXMgQ0NEIGVuYWJsZWQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5RGVzYy5wcm90b3R5cGUuc2V0Q2NkRW5hYmxlZCA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuY2NkRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFJpZ2lkQm9keURlc2M7XG59KCkpO1xuZXhwb3J0IHsgUmlnaWRCb2R5RGVzYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmlnaWRfYm9keS5qcy5tYXAiLCJpbXBvcnQgeyBSYXdSaWdpZEJvZHlTZXQgfSBmcm9tIFwiLi4vcmF3XCI7XG5pbXBvcnQgeyBWZWN0b3JPcHMsIFJvdGF0aW9uT3BzIH0gZnJvbSAnLi4vbWF0aCc7XG5pbXBvcnQgeyBSaWdpZEJvZHkgfSBmcm9tICcuL3JpZ2lkX2JvZHknO1xuLyoqXG4gKiBBIHNldCBvZiByaWdpZCBib2RpZXMgdGhhdCBjYW4gYmUgaGFuZGxlZCBieSBhIHBoeXNpY3MgcGlwZWxpbmUuXG4gKlxuICogVG8gYXZvaWQgbGVha2luZyBXQVNNIHJlc291cmNlcywgdGhpcyBNVVNUIGJlIGZyZWVkIG1hbnVhbGx5IHdpdGggYGpvaW50U2V0LmZyZWUoKWBcbiAqIG9uY2UgeW91IGFyZSBkb25lIHVzaW5nIGl0IChhbmQgYWxsIHRoZSByaWdpZC1ib2RpZXMgaXQgY3JlYXRlZCkuXG4gKi9cbnZhciBSaWdpZEJvZHlTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmlnaWRCb2R5U2V0KHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3UmlnaWRCb2R5U2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgdGhlIFdBU00gbWVtb3J5IG9jY3VwaWVkIGJ5IHRoaXMgcmlnaWQtYm9keSBzZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5U2V0LnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhdy5mcmVlKCk7XG4gICAgICAgIHRoaXMucmF3ID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyByaWdpZC1ib2R5IGFuZCByZXR1cm4gaXRzIGludGVnZXIgaGFuZGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlc2MgLSBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHJpZ2lkLWJvZHkgdG8gY3JlYXRlLlxuICAgICAqL1xuICAgIFJpZ2lkQm9keVNldC5wcm90b3R5cGUuY3JlYXRlUmlnaWRCb2R5ID0gZnVuY3Rpb24gKGRlc2MpIHtcbiAgICAgICAgdmFyIHJhd1RyYSA9IFZlY3Rvck9wcy5pbnRvUmF3KGRlc2MudHJhbnNsYXRpb24pO1xuICAgICAgICB2YXIgcmF3Um90ID0gUm90YXRpb25PcHMuaW50b1JhdyhkZXNjLnJvdGF0aW9uKTtcbiAgICAgICAgdmFyIHJhd0x2ID0gVmVjdG9yT3BzLmludG9SYXcoZGVzYy5saW52ZWwpO1xuICAgICAgICB2YXIgcmF3Q29tID0gVmVjdG9yT3BzLmludG9SYXcoZGVzYy5jZW50ZXJPZk1hc3MpO1xuICAgICAgICB2YXIgaGFuZGxlID0gdGhpcy5yYXcuY3JlYXRlUmlnaWRCb2R5KHJhd1RyYSwgcmF3Um90LCBkZXNjLmdyYXZpdHlTY2FsZSwgZGVzYy5tYXNzLCBkZXNjLnRyYW5zbGF0aW9uc0VuYWJsZWQsIHJhd0NvbSwgcmF3THYsIFxuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICBkZXNjLmFuZ3ZlbCwgZGVzYy5wcmluY2lwYWxBbmd1bGFySW5lcnRpYSwgZGVzYy5yb3RhdGlvbnNFbmFibGVkLCBcbiAgICAgICAgLy8gI2VuZGlmXG4gICAgICAgIGRlc2MubGluZWFyRGFtcGluZywgZGVzYy5hbmd1bGFyRGFtcGluZywgZGVzYy5zdGF0dXMsIGRlc2MuY2FuU2xlZXAsIGRlc2MuY2NkRW5hYmxlZCwgZGVzYy5kb21pbmFuY2VHcm91cCk7XG4gICAgICAgIHJhd1RyYS5mcmVlKCk7XG4gICAgICAgIHJhd1JvdC5mcmVlKCk7XG4gICAgICAgIHJhd0x2LmZyZWUoKTtcbiAgICAgICAgcmF3Q29tLmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByaWdpZC1ib2R5IGZyb20gdGhpcyBzZXQuXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZW1vdmUgYWxsIHRoZSBjb2xsaWRlcnMgYW5kIGpvaW50cyBhdHRhY2hlZCB0byB0aGUgcmlnaWQtYm9keS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaW50ZWdlciBoYW5kbGUgb2YgdGhlIHJpZ2lkLWJvZHkgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcnMgLSBUaGUgc2V0IG9mIGNvbGxpZGVycyB0aGF0IG1heSBjb250YWluIGNvbGxpZGVycyBhdHRhY2hlZCB0byB0aGUgcmVtb3ZlZCByaWdpZC1ib2R5LlxuICAgICAqIEBwYXJhbSBqb2ludHMgLSBUaGUgc2V0IG9mIGpvaW50cyB0aGF0IG1heSBjb250YWluIGpvaW50cyBhdHRhY2hlZCB0byB0aGUgcmVtb3ZlZCByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keVNldC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGhhbmRsZSwgaXNsYW5kcywgY29sbGlkZXJzLCBqb2ludHMpIHtcbiAgICAgICAgdGhpcy5yYXcucmVtb3ZlKGhhbmRsZSwgaXNsYW5kcy5yYXcsIGNvbGxpZGVycy5yYXcsIGpvaW50cy5yYXcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiByaWdpZC1ib2RpZXMgb24gdGhpcyBzZXQuXG4gICAgICovXG4gICAgUmlnaWRCb2R5U2V0LnByb3RvdHlwZS5sZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5sZW4oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERvZXMgdGhpcyBzZXQgY29udGFpbiBhIHJpZ2lkLWJvZHkgd2l0aCB0aGUgZ2l2ZW4gaGFuZGxlP1xuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZSAtIFRoZSByaWdpZC1ib2R5IGhhbmRsZSB0byBjaGVjay5cbiAgICAgKi9cbiAgICBSaWdpZEJvZHlTZXQucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuY29udGFpbnMoaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJpZ2lkLWJvZHkgd2l0aCB0aGUgZ2l2ZW4gaGFuZGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZSAtIFRoZSBoYW5kbGUgb2YgdGhlIHJpZ2lkLWJvZHkgdG8gcmV0cmlldmUuXG4gICAgICovXG4gICAgUmlnaWRCb2R5U2V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgIGlmICh0aGlzLnJhdy5jb250YWlucyhoYW5kbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJpZ2lkQm9keSh0aGlzLnJhdywgaGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIGVhY2ggcmlnaWQtYm9keSBjb250YWluZWQgYnkgdGhpcyBzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZiAtIFRoZSBjbG9zdXJlIHRvIGFwcGx5LlxuICAgICAqL1xuICAgIFJpZ2lkQm9keVNldC5wcm90b3R5cGUuZm9yRWFjaFJpZ2lkQm9keSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZm9yRWFjaFJpZ2lkQm9keUhhbmRsZShmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgICAgICBmKG5ldyBSaWdpZEJvZHkoX3RoaXMucmF3LCBoYW5kbGUpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIHRoZSBoYW5kbGUgb2YgZWFjaCByaWdpZC1ib2R5IGNvbnRhaW5lZCBieSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIC0gVGhlIGNsb3N1cmUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5U2V0LnByb3RvdHlwZS5mb3JFYWNoUmlnaWRCb2R5SGFuZGxlID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdGhpcy5yYXcuZm9yRWFjaFJpZ2lkQm9keUhhbmRsZShmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIGNsb3N1cmUgdG8gZWFjaCBhY3RpdmUgcmlnaWQtYm9kaWVzIGNvbnRhaW5lZCBieSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEEgcmlnaWQtYm9keSBpcyBhY3RpdmUgaWYgaXQgaXMgbm90IHNsZWVwaW5nLCBpLmUuLCBpZiBpdCBtb3ZlZCByZWNlbnRseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIC0gVGhlIGNsb3N1cmUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgUmlnaWRCb2R5U2V0LnByb3RvdHlwZS5mb3JFYWNoQWN0aXZlUmlnaWRCb2R5ID0gZnVuY3Rpb24gKGlzbGFuZHMsIGYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaXNsYW5kcy5mb3JFYWNoQWN0aXZlUmlnaWRCb2R5SGFuZGxlKGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgICAgIGYobmV3IFJpZ2lkQm9keShfdGhpcy5yYXcsIGhhbmRsZSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSaWdpZEJvZHlTZXQ7XG59KCkpO1xuZXhwb3J0IHsgUmlnaWRCb2R5U2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yaWdpZF9ib2R5X3NldC5qcy5tYXAiLCJpbXBvcnQgeyB2ZXJzaW9uIGFzIHZlcnMgfSBmcm9tIFwiLi9yYXdcIjtcbmV4cG9ydCBmdW5jdGlvbiB2ZXJzaW9uKCkge1xuICAgIHJldHVybiB2ZXJzKCk7XG59XG5leHBvcnQgKiBmcm9tICcuL21hdGgnO1xuZXhwb3J0ICogZnJvbSAnLi9keW5hbWljcyc7XG5leHBvcnQgKiBmcm9tICcuL2dlb21ldHJ5JztcbmV4cG9ydCAqIGZyb20gJy4vcGlwZWxpbmUnO1xuZXhwb3J0ICogZnJvbSAnLi9pbml0Jztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cG9ydHMuanMubWFwIiwiaW1wb3J0IHsgUmF3QnJvYWRQaGFzZSB9IGZyb20gXCIuLi9yYXdcIjtcbi8qKlxuICogVGhlIGJyb2FkLXBoYXNlIHVzZWQgZm9yIGNvYXJzZSBjb2xsaXNpb24tZGV0ZWN0aW9uLlxuICpcbiAqIFRvIGF2b2lkIGxlYWtpbmcgV0FTTSByZXNvdXJjZXMsIHRoaXMgTVVTVCBiZSBmcmVlZCBtYW51YWxseSB3aXRoIGBicm9hZFBoYXNlLmZyZWUoKWBcbiAqIG9uY2UgeW91IGFyZSBkb25lIHVzaW5nIGl0LlxuICovXG52YXIgQnJvYWRQaGFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm9hZFBoYXNlKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3QnJvYWRQaGFzZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWxlYXNlIHRoZSBXQVNNIG1lbW9yeSBvY2N1cGllZCBieSB0aGlzIGJyb2FkLXBoYXNlLlxuICAgICAqL1xuICAgIEJyb2FkUGhhc2UucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3LmZyZWUoKTtcbiAgICAgICAgdGhpcy5yYXcgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQnJvYWRQaGFzZTtcbn0oKSk7XG5leHBvcnQgeyBCcm9hZFBoYXNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icm9hZF9waGFzZS5qcy5tYXAiLCJpbXBvcnQgeyBSb3RhdGlvbk9wcywgVmVjdG9yT3BzIH0gZnJvbSAnLi4vbWF0aCc7XG5pbXBvcnQgeyBDb2VmZmljaWVudENvbWJpbmVSdWxlIH0gZnJvbSAnLi4vZHluYW1pY3MnO1xuaW1wb3J0IHsgQ3Vib2lkLCBCYWxsLCBDYXBzdWxlLCBUcmlNZXNoLCBQb2x5bGluZSwgSGVpZ2h0ZmllbGQsIFNlZ21lbnQsIFRyaWFuZ2xlLCBSb3VuZFRyaWFuZ2xlLCBSb3VuZEN1Ym9pZCwgXG4vLyAjaWYgRElNMlxuQ29udmV4UG9seWdvbiwgUm91bmRDb252ZXhQb2x5Z29uLFxuLy8gI2VuZGlmXG4gfSBmcm9tICcuL3NoYXBlJztcbi8vLyBGbGFncyBhZmZlY3Rpbmcgd2hldGhlciBvciBub3QgY29sbGlzaW9uLWRldGVjdGlvbiBoYXBwZW5zIGJldHdlZW4gdHdvIGNvbGxpZGVyc1xuLy8vIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiByaWdpZC1ib2RpZXMgdGhleSBhcmUgYXR0YWNoZWQgdG8uXG5leHBvcnQgdmFyIEFjdGl2ZUNvbGxpc2lvblR5cGVzO1xuKGZ1bmN0aW9uIChBY3RpdmVDb2xsaXNpb25UeXBlcykge1xuICAgIC8vLyBFbmFibGUgY29sbGlzaW9uLWRldGVjdGlvbiBiZXR3ZWVuIGEgY29sbGlkZXIgYXR0YWNoZWQgdG8gYSBkeW5hbWljIGJvZHlcbiAgICAvLy8gYW5kIGFub3RoZXIgY29sbGlkZXIgYXR0YWNoZWQgdG8gYSBkeW5hbWljIGJvZHkuXG4gICAgQWN0aXZlQ29sbGlzaW9uVHlwZXNbQWN0aXZlQ29sbGlzaW9uVHlwZXNbXCJEWU5BTUlDX0RZTkFNSUNcIl0gPSAxXSA9IFwiRFlOQU1JQ19EWU5BTUlDXCI7XG4gICAgLy8vIEVuYWJsZSBjb2xsaXNpb24tZGV0ZWN0aW9uIGJldHdlZW4gYSBjb2xsaWRlciBhdHRhY2hlZCB0byBhIGR5bmFtaWMgYm9keVxuICAgIC8vLyBhbmQgYW5vdGhlciBjb2xsaWRlciBhdHRhY2hlZCB0byBhIGtpbmVtYXRpYyBib2R5LlxuICAgIEFjdGl2ZUNvbGxpc2lvblR5cGVzW0FjdGl2ZUNvbGxpc2lvblR5cGVzW1wiRFlOQU1JQ19LSU5FTUFUSUNcIl0gPSAxMl0gPSBcIkRZTkFNSUNfS0lORU1BVElDXCI7XG4gICAgLy8vIEVuYWJsZSBjb2xsaXNpb24tZGV0ZWN0aW9uIGJldHdlZW4gYSBjb2xsaWRlciBhdHRhY2hlZCB0byBhIGR5bmFtaWMgYm9keVxuICAgIC8vLyBhbmQgYW5vdGhlciBjb2xsaWRlciBhdHRhY2hlZCB0byBhIHN0YXRpYyBib2R5IChvciBub3QgYXR0YWNoZWQgdG8gYW55IGJvZHkpLlxuICAgIEFjdGl2ZUNvbGxpc2lvblR5cGVzW0FjdGl2ZUNvbGxpc2lvblR5cGVzW1wiRFlOQU1JQ19TVEFUSUNcIl0gPSAyXSA9IFwiRFlOQU1JQ19TVEFUSUNcIjtcbiAgICAvLy8gRW5hYmxlIGNvbGxpc2lvbi1kZXRlY3Rpb24gYmV0d2VlbiBhIGNvbGxpZGVyIGF0dGFjaGVkIHRvIGEga2luZW1hdGljIGJvZHlcbiAgICAvLy8gYW5kIGFub3RoZXIgY29sbGlkZXIgYXR0YWNoZWQgdG8gYSBraW5lbWF0aWMgYm9keS5cbiAgICBBY3RpdmVDb2xsaXNpb25UeXBlc1tBY3RpdmVDb2xsaXNpb25UeXBlc1tcIktJTkVNQVRJQ19LSU5FTUFUSUNcIl0gPSA1MjIyNF0gPSBcIktJTkVNQVRJQ19LSU5FTUFUSUNcIjtcbiAgICAvLy8gRW5hYmxlIGNvbGxpc2lvbi1kZXRlY3Rpb24gYmV0d2VlbiBhIGNvbGxpZGVyIGF0dGFjaGVkIHRvIGEga2luZW1hdGljIGJvZHlcbiAgICAvLy8gYW5kIGFub3RoZXIgY29sbGlkZXIgYXR0YWNoZWQgdG8gYSBzdGF0aWMgYm9keSAob3Igbm90IGF0dGFjaGVkIHRvIGFueSBib2R5KS5cbiAgICBBY3RpdmVDb2xsaXNpb25UeXBlc1tBY3RpdmVDb2xsaXNpb25UeXBlc1tcIktJTkVNQVRJQ19TVEFUSUNcIl0gPSA4NzA0XSA9IFwiS0lORU1BVElDX1NUQVRJQ1wiO1xuICAgIC8vLyBFbmFibGUgY29sbGlzaW9uLWRldGVjdGlvbiBiZXR3ZWVuIGEgY29sbGlkZXIgYXR0YWNoZWQgdG8gYSBzdGF0aWMgYm9keSAob3JcbiAgICAvLy8gbm90IGF0dGFjaGVkIHRvIGFueSBib2R5KSBhbmQgYW5vdGhlciBjb2xsaWRlciBhdHRhY2hlZCB0byBhIHN0YXRpYyBib2R5IChvclxuICAgIC8vLyBub3QgYXR0YWNoZWQgdG8gYW55IGJvZHkpLlxuICAgIEFjdGl2ZUNvbGxpc2lvblR5cGVzW0FjdGl2ZUNvbGxpc2lvblR5cGVzW1wiU1RBVElDX1NUQVRJQ1wiXSA9IDMyXSA9IFwiU1RBVElDX1NUQVRJQ1wiO1xuICAgIC8vLyBUaGUgZGVmYXVsdCBhY3RpdmUgY29sbGlzaW9uIHR5cGVzLCBlbmFibGluZyBjb2xsaXNpb25zIGJldHdlZW4gYSBkeW5hbWljIGJvZHlcbiAgICAvLy8gYW5kIGFub3RoZXIgYm9keSBvZiBhbnkgdHlwZSwgYnV0IG5vdCBlbmFibGluZyBjb2xsaXNpb25zIGJldHdlZW4gdHdvIG5vbi1keW5hbWljIGJvZGllcy5cbiAgICBBY3RpdmVDb2xsaXNpb25UeXBlc1tBY3RpdmVDb2xsaXNpb25UeXBlc1tcIkRFRkFVTFRcIl0gPSAxNV0gPSBcIkRFRkFVTFRcIjtcbiAgICAvLy8gRW5hYmxlIGNvbGxpc2lvbnMgYmV0d2VlbiBhbnkga2luZCBvZiByaWdpZC1ib2RpZXMgKGluY2x1ZGluZyBiZXR3ZWVuIHR3byBub24tZHluYW1pYyBib2RpZXMpLlxuICAgIEFjdGl2ZUNvbGxpc2lvblR5cGVzW0FjdGl2ZUNvbGxpc2lvblR5cGVzW1wiQUxMXCJdID0gNjA5NDNdID0gXCJBTExcIjtcbn0pKEFjdGl2ZUNvbGxpc2lvblR5cGVzIHx8IChBY3RpdmVDb2xsaXNpb25UeXBlcyA9IHt9KSk7XG4vKipcbiAqIEEgZ2VvbWV0cmljIGVudGl0eSB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byBhIGJvZHkgc28gaXQgY2FuIGJlIGFmZmVjdGVkXG4gKiBieSBjb250YWN0cyBhbmQgcHJveGltaXR5IHF1ZXJpZXMuXG4gKi9cbnZhciBDb2xsaWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsaWRlcihyYXdTZXQsIGhhbmRsZSkge1xuICAgICAgICB0aGlzLnJhd1NldCA9IHJhd1NldDtcbiAgICAgICAgdGhpcy5oYW5kbGUgPSBoYW5kbGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGlzIGNvbGxpZGVyIGlzIHN0aWxsIHZhbGlkIChpLmUuIHRoYXQgaXQgaGFzXG4gICAgICogbm90IGJlZW4gZGVsZXRlZCBmcm9tIHRoZSBjb2xsaWRlciBzZXQgeWV0LlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29udGFpbnModGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHdvcmxkLXNwYWNlIHRyYW5zbGF0aW9uIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUudHJhbnNsYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JPcHMuZnJvbVJhdyh0aGlzLnJhd1NldC5jb1RyYW5zbGF0aW9uKHRoaXMuaGFuZGxlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgd29ybGQtc3BhY2Ugb3JpZW50YXRpb24gb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5yb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFJvdGF0aW9uT3BzLmZyb21SYXcodGhpcy5yYXdTZXQuY29Sb3RhdGlvbih0aGlzLmhhbmRsZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXMgdGhpcyBjb2xsaWRlciBhIHNlbnNvcj9cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuaXNTZW5zb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb0lzU2Vuc29yKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zZXRTZW5zb3IgPSBmdW5jdGlvbiAoaXNTZW5zb3IpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuY29TZXRTZW5zb3IodGhpcy5oYW5kbGUsIGlzU2Vuc29yKTtcbiAgICB9O1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zZXRTaGFwZSA9IGZ1bmN0aW9uIChzaGFwZSkge1xuICAgICAgICB2YXIgcmF3U2hhcGUgPSBzaGFwZS5pbnRvUmF3KCk7XG4gICAgICAgIHRoaXMucmF3U2V0LmNvU2V0U2hhcGUodGhpcy5oYW5kbGUsIHJhd1NoYXBlKTtcbiAgICAgICAgcmF3U2hhcGUuZnJlZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcmVzdGl0dXRpb24gY29lZmZpY2llbnQgb2YgdGhlIGNvbGxpZGVyIHRvIGJlIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzdGl0dXRpb24gLSBUaGUgcmVzdGl0dXRpb24gY29lZmZpY2llbnQgaW4gYFswLCAxXWAuIEEgdmFsdWUgb2YgMCAodGhlIGRlZmF1bHQpIG1lYW5zIG5vIGJvdW5jaW5nIGJlaGF2aW9yXG4gICAgICogICAgICAgICAgICAgICAgICAgd2hpbGUgMSBtZWFucyBwZXJmZWN0IGJvdW5jaW5nICh0aG91Z2ggZW5lcmd5IG1heSBzdGlsbCBiZSBsb3N0IGR1ZSB0byBudW1lcmljYWwgZXJyb3JzIG9mIHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzIHNvbHZlcikuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24gKHJlc3RpdHV0aW9uKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LmNvU2V0UmVzdGl0dXRpb24odGhpcy5oYW5kbGUsIHJlc3RpdHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZyaWN0aW9uIGNvZWZmaWNpZW50IG9mIHRoZSBjb2xsaWRlciB0byBiZSBjcmVhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZyaWN0aW9uIC0gVGhlIGZyaWN0aW9uIGNvZWZmaWNpZW50LiBNdXN0IGJlIGdyZWF0ZXIgb3IgZXF1YWwgdG8gMC4gVGhpcyBpcyBnZW5lcmFsbHkgc21hbGxlciB0aGFuIDEuIFRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgIGhpZ2hlciB0aGUgY29lZmZpY2llbnQsIHRoZSBzdHJvbmdlciBmcmljdGlvbiBmb3JjZXMgd2lsbCBiZSBmb3IgY29udGFjdHMgd2l0aCB0aGUgY29sbGlkZXJcbiAgICAgKiAgICAgICAgICAgICAgICAgICBiZWluZyBidWlsdC5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuc2V0RnJpY3Rpb24gPSBmdW5jdGlvbiAoZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuY29TZXRGcmljdGlvbih0aGlzLmhhbmRsZSwgZnJpY3Rpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcnVsZSB1c2VkIHRvIGNvbWJpbmUgdGhlIGZyaWN0aW9uIGNvZWZmaWNpZW50cyBvZiB0d28gY29sbGlkZXJzXG4gICAgICogY29sbGlkZXJzIGludm9sdmVkIGluIGEgY29udGFjdC5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuZnJpY3Rpb25Db21iaW5lUnVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvRnJpY3Rpb25Db21iaW5lUnVsZSh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBydWxlIHVzZWQgdG8gY29tYmluZSB0aGUgZnJpY3Rpb24gY29lZmZpY2llbnRzIG9mIHR3byBjb2xsaWRlcnNcbiAgICAgKiBjb2xsaWRlcnMgaW52b2x2ZWQgaW4gYSBjb250YWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHJ1bGUg4oiSIFRoZSBjb21iaW5lIHJ1bGUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldEZyaWN0aW9uQ29tYmluZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB0aGlzLnJhd1NldC5jb1NldEZyaWN0aW9uQ29tYmluZVJ1bGUodGhpcy5oYW5kbGUsIHJ1bGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcnVsZSB1c2VkIHRvIGNvbWJpbmUgdGhlIHJlc3RpdHV0aW9uIGNvZWZmaWNpZW50cyBvZiB0d28gY29sbGlkZXJzXG4gICAgICogY29sbGlkZXJzIGludm9sdmVkIGluIGEgY29udGFjdC5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUucmVzdGl0dXRpb25Db21iaW5lUnVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvUmVzdGl0dXRpb25Db21iaW5lUnVsZSh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBydWxlIHVzZWQgdG8gY29tYmluZSB0aGUgcmVzdGl0dXRpb24gY29lZmZpY2llbnRzIG9mIHR3byBjb2xsaWRlcnNcbiAgICAgKiBjb2xsaWRlcnMgaW52b2x2ZWQgaW4gYSBjb250YWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHJ1bGUg4oiSIFRoZSBjb21iaW5lIHJ1bGUgdG8gYXBwbHkuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uQ29tYmluZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB0aGlzLnJhd1NldC5jb1NldFJlc3RpdHV0aW9uQ29tYmluZVJ1bGUodGhpcy5oYW5kbGUsIHJ1bGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29sbGlzaW9uIGdyb3VwcyB1c2VkIGJ5IHRoaXMgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBUd28gY29sbGlkZXJzIHdpbGwgaW50ZXJhY3QgaWZmLiB0aGVpciBjb2xsaXNpb24gZ3JvdXBzIGFyZSBjb21wYXRpYmxlLlxuICAgICAqIFNlZSB0aGUgZG9jdW1lbnRhdGlvbiBvZiBgSW50ZXJhY3Rpb25Hcm91cHNgIGZvciBkZXRhaWxzIG9uIHRlaCB1c2VkIGJpdCBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBjb2xsaXNpb24gZ3JvdXBzIHVzZWQgZm9yIHRoZSBjb2xsaWRlciBiZWluZyBidWlsdC5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuc2V0Q29sbGlzaW9uR3JvdXBzID0gZnVuY3Rpb24gKGdyb3Vwcykge1xuICAgICAgICB0aGlzLnJhd1NldC5jb1NldENvbGxpc2lvbkdyb3Vwcyh0aGlzLmhhbmRsZSwgZ3JvdXBzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNvbHZlciBncm91cHMgdXNlZCBieSB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogRm9yY2VzIGJldHdlZW4gdHdvIGNvbGxpZGVycyBpbiBjb250YWN0IHdpbGwgYmUgY29tcHV0ZWQgaWZmIHRoZWlyIHNvbHZlclxuICAgICAqIGdyb3VwcyBhcmUgY29tcGF0aWJsZS5cbiAgICAgKiBTZWUgdGhlIGRvY3VtZW50YXRpb24gb2YgYEludGVyYWN0aW9uR3JvdXBzYCBmb3IgZGV0YWlscyBvbiB0aGUgdXNlZCBiaXQgcGF0dGVybi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBUaGUgc29sdmVyIGdyb3VwcyB1c2VkIGZvciB0aGUgY29sbGlkZXIgYmVpbmcgYnVpbHQuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFNvbHZlckdyb3VwcyA9IGZ1bmN0aW9uIChncm91cHMpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuY29TZXRTb2x2ZXJHcm91cHModGhpcy5oYW5kbGUsIGdyb3Vwcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBoeXNpY3MgaG9va3MgYWN0aXZlIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5hY3RpdmVIb29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuY29BY3RpdmVIb29rcyh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHBoeXNpY3MgaG9va3MgYWN0aXZlIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgdG8gZW5hYmxlIGN1c3RvbSBmaWx0ZXJpbmcgcnVsZXMgZm9yIGNvbnRhY3QvaW50ZXJzZWNzdGlvbiBwYWlycyBpbnZvbHZpbmcgdGhpcyBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmVIb29rcyAtIFRoZSBob29rcyBhY3RpdmUgZm9yIGNvbnRhY3QvaW50ZXJzZWN0aW9uIHBhaXJzIGludm9sdmluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zZXRBY3RpdmVIb29rcyA9IGZ1bmN0aW9uIChhY3RpdmVIb29rcykge1xuICAgICAgICB0aGlzLnJhd1NldC5jb1NldEFjdGl2ZUhvb2tzKHRoaXMuaGFuZGxlLCBhY3RpdmVIb29rcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnRzIGFjdGl2ZSBmb3IgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuYWN0aXZlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29BY3RpdmVFdmVudHModGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBldmVudHMgYWN0aXZlIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgdG8gZW5hYmxlIGNvbnRhY3QgYW5kL29yIGludGVyc2VjdGlvbiBldmVudCByZXBvcnRpbmcgZm9yIHRoaXMgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlRXZlbnRzIC0gVGhlIGV2ZW50cyBhY3RpdmUgZm9yIGNvbnRhY3QvaW50ZXJzZWN0aW9uIHBhaXJzIGludm9sdmluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zZXRBY3RpdmVFdmVudHMgPSBmdW5jdGlvbiAoYWN0aXZlRXZlbnRzKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LmNvU2V0QWN0aXZlRXZlbnRzKHRoaXMuaGFuZGxlLCBhY3RpdmVFdmVudHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY29sbGlzaW9uIHR5cGVzIGFjdGl2ZSBmb3IgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuYWN0aXZlQ29sbGlzaW9uVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb0FjdGl2ZUNvbGxpc2lvblR5cGVzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29sbGlzaW9uIHR5cGVzIGFjdGl2ZSBmb3IgdGhpcyBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmVDb2xsaXNpb25UeXBlcyAtIFRoZSBob29rcyBhY3RpdmUgZm9yIGNvbnRhY3QvaW50ZXJzZWN0aW9uIHBhaXJzIGludm9sdmluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zZXRBY3RpdmVDb2xsaXNpb25UeXBlcyA9IGZ1bmN0aW9uIChhY3RpdmVDb2xsaXNpb25UeXBlcykge1xuICAgICAgICB0aGlzLnJhd1NldC5jb1NldEFjdGl2ZUNvbGxpc2lvblR5cGVzKHRoaXMuaGFuZGxlLCBhY3RpdmVDb2xsaXNpb25UeXBlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2xhdGlvbiBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYSAtIFRoZSB3b3JsZC1zcGFjZSBwb3NpdGlvbiBvZiB0aGUgY29sbGlkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKHRyYSkge1xuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICB0aGlzLnJhd1NldC5jb1NldFRyYW5zbGF0aW9uKHRoaXMuaGFuZGxlLCB0cmEueCwgdHJhLnkpO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYW5zbGF0aW9uIG9mIHRoaXMgY29sbGlkZXIgcmVsYXRpdmUgdG8gaXRzIHBhcmVudCByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogRG9lcyBub3RoaW5nIGlmIHRoaXMgY29sbGlkZXIgaXNuJ3QgYXR0YWNoZWQgdG8gYSByaWdpZC1ib2R5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYSAtIFRoZSBuZXcgdHJhbnNsYXRpb24gb2YgdGhlIGNvbGxpZGVyIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFRyYW5zbGF0aW9uV3J0UGFyZW50ID0gZnVuY3Rpb24gKHRyYSkge1xuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICB0aGlzLnJhd1NldC5jb1NldFRyYW5zbGF0aW9uV3J0UGFyZW50KHRoaXMuaGFuZGxlLCB0cmEueCwgdHJhLnkpO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcm90YXRpb24gYW5nbGUgb2YgdGhpcyBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSAtIFRoZSByb3RhdGlvbiBhbmdsZSwgaW4gcmFkaWFucy5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAoYW5nbGUpIHtcbiAgICAgICAgdGhpcy5yYXdTZXQuY29TZXRSb3RhdGlvbih0aGlzLmhhbmRsZSwgYW5nbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcm90YXRpb24gYW5nbGUgb2YgdGhpcyBjb2xsaWRlciByZWxhdGl2ZSB0byBpdHMgcGFyZW50IHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBEb2VzIG5vdGhpbmcgaWYgdGhpcyBjb2xsaWRlciBpc24ndCBhdHRhY2hlZCB0byBhIHJpZ2lkLWJvZHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5nbGUgLSBUaGUgcm90YXRpb24gYW5nbGUsIGluIHJhZGlhbnMuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNldFJvdGF0aW9uV3J0UGFyZW50ID0gZnVuY3Rpb24gKGFuZ2xlKSB7XG4gICAgICAgIHRoaXMucmF3U2V0LmNvU2V0Um90YXRpb25XcnRQYXJlbnQodGhpcy5oYW5kbGUsIGFuZ2xlKTtcbiAgICB9O1xuICAgIC8vICNlbmRpZlxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBzaGFwZSBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5zaGFwZVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb1NoYXBlVHlwZSh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgaGFsZi1leHRlbnRzIG9mIHRoaXMgY29sbGlkZXIgaWYgaXQgaXMgYSBjdWJvaWQgc2hhcGUuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLmhhbGZFeHRlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXdTZXQuY29IYWxmRXh0ZW50cyh0aGlzLmhhbmRsZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHJhZGl1cyBvZiB0aGlzIGNvbGxpZGVyIGlmIGl0IGlzIGEgYmFsbCwgY3lsaW5kZXIsIGNhcHN1bGUsIG9yIGNvbmUgc2hhcGUuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnJhZGl1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvUmFkaXVzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHJvdW5kIGVkZ2VzIG9mIHRoaXMgY29sbGlkZXIgaWYgaXQgaXMgYSByb3VuZCBjeWxpbmRlci5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUucm91bmRSYWRpdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb1JvdW5kUmFkaXVzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBoYWxmIGhlaWdodCBvZiB0aGlzIGNvbGxpZGVyIGlmIGl0IGlzIGEgY3lsaW5kZXIsIGNhcHN1bGUsIG9yIGNvbmUgc2hhcGUuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLmhhbGZIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1NldC5jb0hhbGZIZWlnaHQodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBjb2xsaWRlciBoYXMgYSB0cmlhbmdsZSBtZXNoLCBwb2x5bGluZSwgY29udmV4IHBvbHlnb24sIG9yIGNvbnZleCBwb2x5aGVkcm9uIHNoYXBlLFxuICAgICAqIHRoaXMgcmV0dXJucyB0aGUgdmVydGV4IGJ1ZmZlciBvZiBzYWlkIHNoYXBlLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS52ZXJ0aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvVmVydGljZXModGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBjb2xsaWRlciBoYXMgYSB0cmlhbmdsZSBtZXNoLCBwb2x5bGluZSwgb3IgY29udmV4IHBvbHloZWRyb24gc2hhcGUsXG4gICAgICogdGhpcyByZXR1cm5zIHRoZSBpbmRleCBidWZmZXIgb2Ygc2FpZCBzaGFwZS5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUuaW5kaWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvSW5kaWNlcyh0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJZiB0aGlzIGNvbGxpZGVyIGhhcyBhIGhlaWdodGZpZWxkIHNoYXBlLCB0aGlzIHJldHVybnMgdGhlIGhlaWdodHMgYnVmZmVyIG9mXG4gICAgICogdGhlIGhlaWdodGZpZWxkLlxuICAgICAqIEluIDNELCB0aGUgcmV0dXJuZWQgaGVpZ2h0IG1hdHJpeCBpcyBwcm92aWRlZCBpbiBjb2x1bW4tbWFqb3Igb3JkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLmhlaWdodGZpZWxkSGVpZ2h0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvSGVpZ2h0ZmllbGRIZWlnaHRzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElmIHRoaXMgY29sbGlkZXIgaGFzIGEgaGVpZ2h0ZmllbGQgc2hhcGUsIHRoaXMgcmV0dXJucyB0aGUgc2NhbGVcbiAgICAgKiBhcHBsaWVkIHRvIGl0LlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5oZWlnaHRmaWVsZFNjYWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLnJhd1NldC5jb0hlaWdodGZpZWxkU2NhbGUodGhpcy5oYW5kbGUpO1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcoc2NhbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBpbnRlZ2VyIGlkZW50aWZpZXIgb2YgdGhlIHJpZ2lkLWJvZHkgdGhpcyBjb2xsaWRlciBpcyBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICBDb2xsaWRlci5wcm90b3R5cGUucGFyZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29QYXJlbnQodGhpcy5oYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIGZyaWN0aW9uIGNvZWZmaWNpZW50IG9mIHRoaXMgY29sbGlkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLmZyaWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29GcmljdGlvbih0aGlzLmhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVuc2l0eSBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyLnByb3RvdHlwZS5kZW5zaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXdTZXQuY29EZW5zaXR5KHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsaXNpb24gZ3JvdXBzIG9mIHRoaXMgY29sbGlkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLmNvbGxpc2lvbkdyb3VwcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvQ29sbGlzaW9uR3JvdXBzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBzb2x2ZXIgZ3JvdXBzIG9mIHRoaXMgY29sbGlkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXIucHJvdG90eXBlLnNvbHZlckdyb3VwcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3U2V0LmNvU29sdmVyR3JvdXBzKHRoaXMuaGFuZGxlKTtcbiAgICB9O1xuICAgIHJldHVybiBDb2xsaWRlcjtcbn0oKSk7XG5leHBvcnQgeyBDb2xsaWRlciB9O1xudmFyIENvbGxpZGVyRGVzYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIGNvbGxpZGVyIGRlc2NyaXB0b3IgZnJvbSB0aGUgY29sbGlzaW9uIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIG9mIHRoZSBjb2xsaWRlciBiZWluZyBidWlsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsaWRlckRlc2Moc2hhcGUpIHtcbiAgICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xuICAgICAgICB0aGlzLnVzZU1hc3NQcm9wcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbnNpdHkgPSAxLjA7XG4gICAgICAgIHRoaXMuZnJpY3Rpb24gPSAwLjU7XG4gICAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAwLjA7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSBSb3RhdGlvbk9wcy5pZGVudGl0eSgpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0aW9uID0gVmVjdG9yT3BzLnplcm9zKCk7XG4gICAgICAgIHRoaXMuaXNTZW5zb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb2xsaXNpb25Hcm91cHMgPSA0Mjk0OTY3Mjk1O1xuICAgICAgICB0aGlzLnNvbHZlckdyb3VwcyA9IDQyOTQ5NjcyOTU7XG4gICAgICAgIHRoaXMuZnJpY3Rpb25Db21iaW5lUnVsZSA9IENvZWZmaWNpZW50Q29tYmluZVJ1bGUuQXZlcmFnZTtcbiAgICAgICAgdGhpcy5yZXN0aXR1dGlvbkNvbWJpbmVSdWxlID0gQ29lZmZpY2llbnRDb21iaW5lUnVsZS5BdmVyYWdlO1xuICAgICAgICB0aGlzLmFjdGl2ZUNvbGxpc2lvblR5cGVzID0gQWN0aXZlQ29sbGlzaW9uVHlwZXMuREVGQVVMVDtcbiAgICAgICAgdGhpcy5hY3RpdmVFdmVudHMgPSAwO1xuICAgICAgICB0aGlzLmFjdGl2ZUhvb2tzID0gMDtcbiAgICAgICAgdGhpcy5tYXNzID0gMC4wO1xuICAgICAgICB0aGlzLmNlbnRlck9mTWFzcyA9IFZlY3Rvck9wcy56ZXJvcygpO1xuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICB0aGlzLnByaW5jaXBhbEFuZ3VsYXJJbmVydGlhID0gMC4wO1xuICAgICAgICB0aGlzLnJvdGF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGNvbGxpZGVyIGRlc2NyaXB0b3Igd2l0aCBhIGJhbGwgc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgYmFsbC5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MuYmFsbCA9IGZ1bmN0aW9uIChyYWRpdXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IEJhbGwocmFkaXVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGNvbGxpZGVyIGRlc2NyaXB0b3Igd2l0aCBhIGNhcHN1bGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFsZkhlaWdodCAtIFRoZSBoYWxmLWhlaWdodCBvZiB0aGUgY2Fwc3VsZSwgYWxvbmcgdGhlIGB5YCBheGlzLlxuICAgICAqIEBwYXJhbSByYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSBjYXBzdWxlIGJhc2lzLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5jYXBzdWxlID0gZnVuY3Rpb24gKGhhbGZIZWlnaHQsIHJhZGl1cykge1xuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgQ2Fwc3VsZShoYWxmSGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICByZXR1cm4gbmV3IENvbGxpZGVyRGVzYyhzaGFwZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNlZ21lbnQgc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSAtIFRoZSBmaXJzdCBwb2ludCBvZiB0aGUgc2VnbWVudC5cbiAgICAgKiBAcGFyYW0gYiAtIFRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIHNlZ21lbnQuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnNlZ21lbnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgU2VnbWVudChhLCBiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0cmlhbmdsZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIC0gVGhlIGZpcnN0IHBvaW50IG9mIHRoZSB0cmlhbmdsZS5cbiAgICAgKiBAcGFyYW0gYiAtIFRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqIEBwYXJhbSBjIC0gVGhlIHRoaXJkIHBvaW50IG9mIHRoZSB0cmlhbmdsZS5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MudHJpYW5nbGUgPSBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgVHJpYW5nbGUoYSwgYiwgYyk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlkZXJEZXNjKHNoYXBlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdHJpYW5nbGUgc2hhcGUgd2l0aCByb3VuZCBjb3JuZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgLSBUaGUgZmlyc3QgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqIEBwYXJhbSBiIC0gVGhlIHNlY29uZCBwb2ludCBvZiB0aGUgdHJpYW5nbGUuXG4gICAgICogQHBhcmFtIGMgLSBUaGUgdGhpcmQgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqIEBwYXJhbSBib3JkZXJSYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSBib3JkZXJzIG9mIHRoaXMgdHJpYW5nbGUuIEluIDNELFxuICAgICAqICAgdGhpcyBpcyBhbHNvIGVxdWFsIHRvIGhhbGYgdGhlIHRoaWNrbmVzcyBvZiB0aGUgdHJpYW5nbGUuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnJvdW5kVHJpYW5nbGUgPSBmdW5jdGlvbiAoYSwgYiwgYywgYm9yZGVyUmFkaXVzKSB7XG4gICAgICAgIHZhciBzaGFwZSA9IG5ldyBSb3VuZFRyaWFuZ2xlKGEsIGIsIGMsIGJvcmRlclJhZGl1cyk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlkZXJEZXNjKHNoYXBlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgY29sbGlkZXIgZGVzY3JpcHRvciB3aXRoIGEgcG9seWxpbmUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmVydGljZXMgLSBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlsaW5lJ3MgdmVydGljZXMuXG4gICAgICogQHBhcmFtIGluZGljZXMgLSBUaGUgaW5kaWNlcyBvZiB0aGUgcG9seWxpbmUncyBzZWdtZW50cy4gSWYgdGhpcyBpcyBgbnVsbGAsXG4gICAgICogICAgdGhlIHZlcnRpY2VzIGFyZSBhc3N1bWVkIHRvIGRlc2NyaWJlIGEgbGluZSBzdHJpcC5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MucG9seWxpbmUgPSBmdW5jdGlvbiAodmVydGljZXMsIGluZGljZXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IFBvbHlsaW5lKHZlcnRpY2VzLCBpbmRpY2VzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlciBkZXNjcmlwdG9yIHdpdGggYSB0cmlhbmdsZSBtZXNoIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSB0cmlhbmdsZSBtZXNoJ3MgdmVydGljZXMuXG4gICAgICogQHBhcmFtIGluZGljZXMgLSBUaGUgaW5kaWNlcyBvZiB0aGUgdHJpYW5nbGUgbWVzaCdzIHRyaWFuZ2xlcy5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MudHJpbWVzaCA9IGZ1bmN0aW9uICh2ZXJ0aWNlcywgaW5kaWNlcykge1xuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgVHJpTWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlkZXJEZXNjKHNoYXBlKTtcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlciBkZXNjcmlwdG9yIHdpdGggYSByZWN0YW5ndWxhciBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoeCAtIFRoZSBoYWxmLXdpZHRoIG9mIHRoZSByZWN0YW5nbGUgYWxvbmcgaXRzIGxvY2FsIGB4YCBheGlzLlxuICAgICAqIEBwYXJhbSBoeSAtIFRoZSBoYWxmLXdpZHRoIG9mIHRoZSByZWN0YW5nbGUgYWxvbmcgaXRzIGxvY2FsIGB5YCBheGlzLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5jdWJvaWQgPSBmdW5jdGlvbiAoaHgsIGh5KSB7XG4gICAgICAgIHZhciBzaGFwZSA9IG5ldyBDdWJvaWQoaHgsIGh5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlciBkZXNjcmlwdG9yIHdpdGggYSByZWN0YW5ndWxhciBzaGFwZSB3aXRoIHJvdW5kIGJvcmRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaHggLSBUaGUgaGFsZi13aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIGFsb25nIGl0cyBsb2NhbCBgeGAgYXhpcy5cbiAgICAgKiBAcGFyYW0gaHkgLSBUaGUgaGFsZi13aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIGFsb25nIGl0cyBsb2NhbCBgeWAgYXhpcy5cbiAgICAgKiBAcGFyYW0gYm9yZGVyUmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgY3Vib2lkJ3MgYm9yZGVycy5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2Mucm91bmRDdWJvaWQgPSBmdW5jdGlvbiAoaHgsIGh5LCBib3JkZXJSYWRpdXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IFJvdW5kQ3Vib2lkKGh4LCBoeSwgYm9yZGVyUmFkaXVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlciBkZXNjcmlwdG9yIHdpdGggYSBoZWlnaHRmaWVsZCBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoZWlnaHRzIC0gVGhlIGhlaWdodHMgb2YgdGhlIGhlaWdodGZpZWxkLCBhbG9uZyBpdHMgbG9jYWwgYHlgIGF4aXMuXG4gICAgICogQHBhcmFtIHNjYWxlIC0gVGhlIHNjYWxlIGZhY3RvciBhcHBsaWVkIHRvIHRoZSBoZWlnaHRmaWVsZC5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MuaGVpZ2h0ZmllbGQgPSBmdW5jdGlvbiAoaGVpZ2h0cywgc2NhbGUpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IEhlaWdodGZpZWxkKGhlaWdodHMsIHNjYWxlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGNvbnZleC1odWxsIG9mIHRoZSBnaXZlbiBwb2ludHMgYW5kIHVzZSB0aGUgcmVzdWx0aW5nXG4gICAgICogY29udmV4IHBvbHlnb24gYXMgdGhlIHNoYXBlIGZvciB0aGlzIG5ldyBjb2xsaWRlciBkZXNjcmlwdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBvaW50cyAtIFRoZSBwb2ludCB0aGF0IHdpbGwgYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb252ZXgtaHVsbC5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MuY29udmV4SHVsbCA9IGZ1bmN0aW9uIChwb2ludHMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IENvbnZleFBvbHlnb24ocG9pbnRzLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlkZXJEZXNjKHNoYXBlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgY29sbGlkZXIgZGVzY3JpcHRvciB0aGF0IHVzZXMgdGhlIGdpdmVuIHNldCBvZiBwb2ludHMgYXNzdW1lZFxuICAgICAqIHRvIGZvcm0gYSBjb252ZXggcG9seWxpbmUgKG5vIGNvbnZleC1odWxsIGNvbXB1dGF0aW9uIHdpbGwgYmUgZG9uZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmVydGljZXMgLSBUaGUgdmVydGljZXMgb2YgdGhlIGNvbnZleCBwb2x5bGluZS5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MuY29udmV4UG9seWxpbmUgPSBmdW5jdGlvbiAodmVydGljZXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IENvbnZleFBvbHlnb24odmVydGljZXMsIHRydWUpO1xuICAgICAgICByZXR1cm4gbmV3IENvbGxpZGVyRGVzYyhzaGFwZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgY29udmV4LWh1bGwgb2YgdGhlIGdpdmVuIHBvaW50cyBhbmQgdXNlIHRoZSByZXN1bHRpbmdcbiAgICAgKiBjb252ZXggcG9seWdvbiBhcyB0aGUgc2hhcGUgZm9yIHRoaXMgbmV3IGNvbGxpZGVyIGRlc2NyaXB0b3IuIEFcbiAgICAgKiBib3JkZXIgaXMgYWRkZWQgdG8gdGhhdCBjb252ZXggcG9seWdvbiB0byBnaXZlIGl0IHJvdW5kIGNvcm5lcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcG9pbnRzIC0gVGhlIHBvaW50IHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGNvbnZleC1odWxsLlxuICAgICAqIEBwYXJhbSBib3JkZXJSYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSByb3VuZCBib3JkZXIgYWRkZWQgdG8gdGhlIGNvbnZleCBwb2x5Z29uLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5yb3VuZENvbnZleEh1bGwgPSBmdW5jdGlvbiAocG9pbnRzLCBib3JkZXJSYWRpdXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IFJvdW5kQ29udmV4UG9seWdvbihwb2ludHMsIGJvcmRlclJhZGl1cywgZmFsc2UpO1xuICAgICAgICByZXR1cm4gbmV3IENvbGxpZGVyRGVzYyhzaGFwZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbGxpZGVyIGRlc2NyaXB0b3IgdGhhdCB1c2VzIHRoZSBnaXZlbiBzZXQgb2YgcG9pbnRzIGFzc3VtZWRcbiAgICAgKiB0byBmb3JtIGEgcm91bmQgY29udmV4IHBvbHlsaW5lIChubyBjb252ZXgtaHVsbCBjb21wdXRhdGlvbiB3aWxsIGJlIGRvbmUpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIHZlcnRpY2VzIG9mIHRoZSBjb252ZXggcG9seWxpbmUuXG4gICAgICogQHBhcmFtIGJvcmRlclJhZGl1cyAtIFRoZSByYWRpdXMgb2YgdGhlIHJvdW5kIGJvcmRlciBhZGRlZCB0byB0aGUgY29udmV4IHBvbHlsaW5lLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5yb3VuZENvbnZleFBvbHlsaW5lID0gZnVuY3Rpb24gKHZlcnRpY2VzLCBib3JkZXJSYWRpdXMpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IFJvdW5kQ29udmV4UG9seWdvbih2ZXJ0aWNlcywgYm9yZGVyUmFkaXVzLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsaWRlckRlc2Moc2hhcGUpO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgLy8gI2lmIERJTTJcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiB0aGUgY29sbGlkZXIgdG8gYmUgY3JlYXRlZCByZWxhdGl2ZSB0byB0aGUgcmlnaWQtYm9keSBpdCBpcyBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MucHJvdG90eXBlLnNldFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIHkgIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIlRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnRzIG11c3QgYmUgbnVtYmVycy5cIik7XG4gICAgICAgIHRoaXMudHJhbnNsYXRpb24gPSB7IHg6IHgsIHk6IHkgfTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyAjZW5kaWZcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSByb3RhdGlvbiBvZiB0aGUgY29sbGlkZXIgdG8gYmUgY3JlYXRlZCByZWxhdGl2ZSB0byB0aGUgcmlnaWQtYm9keSBpdCBpcyBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByb3QgLSBUaGUgcm90YXRpb24gb2YgdGhlIGNvbGxpZGVyIHRvIGJlIGNyZWF0ZWQgcmVsYXRpdmUgdG8gdGhlIHJpZ2lkLWJvZHkgaXQgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3QpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHJvdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IHRoZSBjb2xsaWRlciBiZWluZyBjcmVhdGVkIGlzIGEgc2Vuc29yLlxuICAgICAqXG4gICAgICogQSBzZW5zb3IgY29sbGlkZXIgZG9lcyBub3QgdGFrZSBwYXJ0IG9mIHRoZSBwaHlzaWNzIHNpbXVsYXRpb24sIGJ1dCBnZW5lcmF0ZXNcbiAgICAgKiBwcm94aW1pdHkgZXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlzIC0gU2V0IHRvIGB0cnVlYCBvZiB0aGUgY29sbGlkZXIgYnVpbHQgaXMgdG8gYmUgYSBzZW5zb3IuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRTZW5zb3IgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgICAgdGhpcy5pc1NlbnNvciA9IGlzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRlbnNpdHkgb2YgdGhlIGNvbGxpZGVyIGJlaW5nIGJ1aWx0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlbnNpdHkgLSBUaGUgZGVuc2l0eSB0byBzZXQsIG11c3QgYmUgZ3JlYXRlciBvciBlcXVhbCB0byAwLiBBIGRlbnNpdHkgb2YgMCBtZWFucyB0aGF0IHRoaXMgY29sbGlkZXJcbiAgICAgKiAgICAgICAgICAgICAgICAgIHdpbGwgbm90IGFmZmVjdCB0aGUgbWFzcyBvciBhbmd1bGFyIGluZXJ0aWEgb2YgdGhlIHJpZ2lkLWJvZHkgaXQgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXREZW5zaXR5ID0gZnVuY3Rpb24gKGRlbnNpdHkpIHtcbiAgICAgICAgdGhpcy51c2VNYXNzUHJvcHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZW5zaXR5ID0gZGVuc2l0eTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyAjaWYgRElNMlxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG1hc3MgcHJvcGVydGllcyBvZiB0aGUgY29sbGlkZXIgYmVpbmcgYnVpbHQuXG4gICAgICpcbiAgICAgKiBUaGlzIHJlcGxhY2VzIHRoZSBtYXNzLXByb3BlcnRpZXMgYXV0b21hdGljYWxseSBjb21wdXRlZCBmcm9tIHRoZSBjb2xsaWRlcidzIGRlbnNpdHkgYW5kIHNoYXBlLlxuICAgICAqIFRoZXNlIG1hc3MtcHJvcGVydGllcyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBtYXNzLXByb3BlcnRpZXMgb2YgdGhlIHJpZ2lkLWJvZHkgdGhpcyBjb2xsaWRlciB3aWxsIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hc3Mg4oiSIFRoZSBtYXNzIG9mIHRoZSBjb2xsaWRlciB0byBjcmVhdGUuXG4gICAgICogQHBhcmFtIGNlbnRlck9mTWFzcyDiiJIgVGhlIGNlbnRlci1vZi1tYXNzIG9mIHRoZSBjb2xsaWRlciB0byBjcmVhdGUuXG4gICAgICogQHBhcmFtIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhIOKIkiBUaGUgcHJpbmNpcGFsIGFuZ3VsYXIgaW5lcnRpYSBvZiB0aGUgY29sbGlkZXIgdG8gY3JlYXRlLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5wcm90b3R5cGUuc2V0TWFzc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAobWFzcywgY2VudGVyT2ZNYXNzLCBwcmluY2lwYWxBbmd1bGFySW5lcnRpYSkge1xuICAgICAgICB0aGlzLnVzZU1hc3NQcm9wcyA9IHRydWU7XG4gICAgICAgIHRoaXMubWFzcyA9IG1hc3M7XG4gICAgICAgIHRoaXMuY2VudGVyT2ZNYXNzID0gY2VudGVyT2ZNYXNzO1xuICAgICAgICB0aGlzLnByaW5jaXBhbEFuZ3VsYXJJbmVydGlhID0gcHJpbmNpcGFsQW5ndWxhckluZXJ0aWE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcmVzdGl0dXRpb24gY29lZmZpY2llbnQgb2YgdGhlIGNvbGxpZGVyIHRvIGJlIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzdGl0dXRpb24gLSBUaGUgcmVzdGl0dXRpb24gY29lZmZpY2llbnQgaW4gYFswLCAxXWAuIEEgdmFsdWUgb2YgMCAodGhlIGRlZmF1bHQpIG1lYW5zIG5vIGJvdW5jaW5nIGJlaGF2aW9yXG4gICAgICogICAgICAgICAgICAgICAgICAgd2hpbGUgMSBtZWFucyBwZXJmZWN0IGJvdW5jaW5nICh0aG91Z2ggZW5lcmd5IG1heSBzdGlsbCBiZSBsb3N0IGR1ZSB0byBudW1lcmljYWwgZXJyb3JzIG9mIHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzIHNvbHZlcikuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRSZXN0aXR1dGlvbiA9IGZ1bmN0aW9uIChyZXN0aXR1dGlvbikge1xuICAgICAgICB0aGlzLnJlc3RpdHV0aW9uID0gcmVzdGl0dXRpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZnJpY3Rpb24gY29lZmZpY2llbnQgb2YgdGhlIGNvbGxpZGVyIHRvIGJlIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJpY3Rpb24gLSBUaGUgZnJpY3Rpb24gY29lZmZpY2llbnQuIE11c3QgYmUgZ3JlYXRlciBvciBlcXVhbCB0byAwLiBUaGlzIGlzIGdlbmVyYWxseSBzbWFsbGVyIHRoYW4gMS4gVGhlXG4gICAgICogICAgICAgICAgICAgICAgICAgaGlnaGVyIHRoZSBjb2VmZmljaWVudCwgdGhlIHN0cm9uZ2VyIGZyaWN0aW9uIGZvcmNlcyB3aWxsIGJlIGZvciBjb250YWN0cyB3aXRoIHRoZSBjb2xsaWRlclxuICAgICAqICAgICAgICAgICAgICAgICAgIGJlaW5nIGJ1aWx0LlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5wcm90b3R5cGUuc2V0RnJpY3Rpb24gPSBmdW5jdGlvbiAoZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IGZyaWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJ1bGUgdXNlZCB0byBjb21iaW5lIHRoZSBmcmljdGlvbiBjb2VmZmljaWVudHMgb2YgdHdvIGNvbGxpZGVyc1xuICAgICAqIGNvbGxpZGVycyBpbnZvbHZlZCBpbiBhIGNvbnRhY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcnVsZSDiiJIgVGhlIGNvbWJpbmUgcnVsZSB0byBhcHBseS5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MucHJvdG90eXBlLnNldEZyaWN0aW9uQ29tYmluZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB0aGlzLmZyaWN0aW9uQ29tYmluZVJ1bGUgPSBydWxlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJ1bGUgdXNlZCB0byBjb21iaW5lIHRoZSByZXN0aXR1dGlvbiBjb2VmZmljaWVudHMgb2YgdHdvIGNvbGxpZGVyc1xuICAgICAqIGNvbGxpZGVycyBpbnZvbHZlZCBpbiBhIGNvbnRhY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcnVsZSDiiJIgVGhlIGNvbWJpbmUgcnVsZSB0byBhcHBseS5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MucHJvdG90eXBlLnNldFJlc3RpdHV0aW9uQ29tYmluZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB0aGlzLnJlc3RpdHV0aW9uQ29tYmluZVJ1bGUgPSBydWxlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvbGxpc2lvbiBncm91cHMgdXNlZCBieSB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogVHdvIGNvbGxpZGVycyB3aWxsIGludGVyYWN0IGlmZi4gdGhlaXIgY29sbGlzaW9uIGdyb3VwcyBhcmUgY29tcGF0aWJsZS5cbiAgICAgKiBTZWUgdGhlIGRvY3VtZW50YXRpb24gb2YgYEludGVyYWN0aW9uR3JvdXBzYCBmb3IgZGV0YWlscyBvbiB0ZWggdXNlZCBiaXQgcGF0dGVybi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBUaGUgY29sbGlzaW9uIGdyb3VwcyB1c2VkIGZvciB0aGUgY29sbGlkZXIgYmVpbmcgYnVpbHQuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRDb2xsaXNpb25Hcm91cHMgPSBmdW5jdGlvbiAoZ3JvdXBzKSB7XG4gICAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXBzID0gZ3JvdXBzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNvbHZlciBncm91cHMgdXNlZCBieSB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogRm9yY2VzIGJldHdlZW4gdHdvIGNvbGxpZGVycyBpbiBjb250YWN0IHdpbGwgYmUgY29tcHV0ZWQgaWZmIHRoZWlyIHNvbHZlclxuICAgICAqIGdyb3VwcyBhcmUgY29tcGF0aWJsZS5cbiAgICAgKiBTZWUgdGhlIGRvY3VtZW50YXRpb24gb2YgYEludGVyYWN0aW9uR3JvdXBzYCBmb3IgZGV0YWlscyBvbiB0aGUgdXNlZCBiaXQgcGF0dGVybi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBUaGUgc29sdmVyIGdyb3VwcyB1c2VkIGZvciB0aGUgY29sbGlkZXIgYmVpbmcgYnVpbHQuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRTb2x2ZXJHcm91cHMgPSBmdW5jdGlvbiAoZ3JvdXBzKSB7XG4gICAgICAgIHRoaXMuc29sdmVyR3JvdXBzID0gZ3JvdXBzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcGh5c2ljcyBob29rcyBhY3RpdmUgZm9yIHRoaXMgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyB0byBlbmFibGUgY3VzdG9tIGZpbHRlcmluZyBydWxlcyBmb3IgY29udGFjdC9pbnRlcnNlY3N0aW9uIHBhaXJzIGludm9sdmluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGl2ZUhvb2tzIC0gVGhlIGhvb2tzIGFjdGl2ZSBmb3IgY29udGFjdC9pbnRlcnNlY3Rpb24gcGFpcnMgaW52b2x2aW5nIHRoaXMgY29sbGlkZXIuXG4gICAgICovXG4gICAgQ29sbGlkZXJEZXNjLnByb3RvdHlwZS5zZXRBY3RpdmVIb29rcyA9IGZ1bmN0aW9uIChhY3RpdmVIb29rcykge1xuICAgICAgICB0aGlzLmFjdGl2ZUhvb2tzID0gYWN0aXZlSG9va3M7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBldmVudHMgYWN0aXZlIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgdG8gZW5hYmxlIGNvbnRhY3QgYW5kL29yIGludGVyc2VjdGlvbiBldmVudCByZXBvcnRpbmcgZm9yIHRoaXMgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlRXZlbnRzIC0gVGhlIGV2ZW50cyBhY3RpdmUgZm9yIGNvbnRhY3QvaW50ZXJzZWN0aW9uIHBhaXJzIGludm9sdmluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIENvbGxpZGVyRGVzYy5wcm90b3R5cGUuc2V0QWN0aXZlRXZlbnRzID0gZnVuY3Rpb24gKGFjdGl2ZUV2ZW50cykge1xuICAgICAgICB0aGlzLmFjdGl2ZUV2ZW50cyA9IGFjdGl2ZUV2ZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbGxpc2lvbiB0eXBlcyBhY3RpdmUgZm9yIHRoaXMgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlQ29sbGlzaW9uVHlwZXMgLSBUaGUgaG9va3MgYWN0aXZlIGZvciBjb250YWN0L2ludGVyc2VjdGlvbiBwYWlycyBpbnZvbHZpbmcgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBDb2xsaWRlckRlc2MucHJvdG90eXBlLnNldEFjdGl2ZUNvbGxpc2lvblR5cGVzID0gZnVuY3Rpb24gKGFjdGl2ZUNvbGxpc2lvblR5cGVzKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlQ29sbGlzaW9uVHlwZXMgPSBhY3RpdmVDb2xsaXNpb25UeXBlcztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gQ29sbGlkZXJEZXNjO1xufSgpKTtcbmV4cG9ydCB7IENvbGxpZGVyRGVzYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGlkZXIuanMubWFwIiwiaW1wb3J0IHsgUmF3Q29sbGlkZXJTZXQgfSBmcm9tIFwiLi4vcmF3XCI7XG5pbXBvcnQgeyBSb3RhdGlvbk9wcywgVmVjdG9yT3BzIH0gZnJvbSAnLi4vbWF0aCc7XG5pbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gJy4vY29sbGlkZXInO1xuLyoqXG4gKiBBIHNldCBvZiByaWdpZCBib2RpZXMgdGhhdCBjYW4gYmUgaGFuZGxlZCBieSBhIHBoeXNpY3MgcGlwZWxpbmUuXG4gKlxuICogVG8gYXZvaWQgbGVha2luZyBXQVNNIHJlc291cmNlcywgdGhpcyBNVVNUIGJlIGZyZWVkIG1hbnVhbGx5IHdpdGggYGNvbGxpZGVyU2V0LmZyZWUoKWBcbiAqIG9uY2UgeW91IGFyZSBkb25lIHVzaW5nIGl0IChhbmQgYWxsIHRoZSByaWdpZC1ib2RpZXMgaXQgY3JlYXRlZCkuXG4gKi9cbnZhciBDb2xsaWRlclNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsaWRlclNldChyYXcpIHtcbiAgICAgICAgdGhpcy5yYXcgPSByYXcgfHwgbmV3IFJhd0NvbGxpZGVyU2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgdGhlIFdBU00gbWVtb3J5IG9jY3VwaWVkIGJ5IHRoaXMgY29sbGlkZXIgc2V0LlxuICAgICAqL1xuICAgIENvbGxpZGVyU2V0LnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhdy5mcmVlKCk7XG4gICAgICAgIHRoaXMucmF3ID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlciBhbmQgcmV0dXJuIGl0cyBpbnRlZ2VyIGhhbmRsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBib2RpZXMgLSBUaGUgc2V0IG9mIGJvZGllcyB3aGVyZSB0aGUgY29sbGlkZXIncyBwYXJlbnQgY2FuIGJlIGZvdW5kLlxuICAgICAqIEBwYXJhbSBkZXNjIC0gVGhlIGNvbGxpZGVyJ3MgZGVzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHBhcmVudEhhbmRsZSAtIFRoZSBpbnRlZXIgaGFuZGxlIG9mIHRoZSByaWdpZC1ib2R5IHRoaXMgY29sbGlkZXIgaXMgYXR0YWNoZWQgdG8uXG4gICAgICovXG4gICAgQ29sbGlkZXJTZXQucHJvdG90eXBlLmNyZWF0ZUNvbGxpZGVyID0gZnVuY3Rpb24gKGJvZGllcywgZGVzYywgcGFyZW50SGFuZGxlKSB7XG4gICAgICAgIHZhciBoYXNQYXJlbnQgPSBwYXJlbnRIYW5kbGUgIT0gdW5kZWZpbmVkICYmIHBhcmVudEhhbmRsZSAhPSBudWxsO1xuICAgICAgICBpZiAoaGFzUGFyZW50ICYmIGlzTmFOKHBhcmVudEhhbmRsZSkpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgYSBjb2xsaWRlciB3aXRoIGEgcGFyZW50IHJpZ2lkLWJvZHkgaGFuZGxlIHRoYXQgaXMgbm90IGEgbnVtYmVyLlwiKTtcbiAgICAgICAgdmFyIHJhd1NoYXBlID0gZGVzYy5zaGFwZS5pbnRvUmF3KCk7XG4gICAgICAgIHZhciByYXdUcmEgPSBWZWN0b3JPcHMuaW50b1JhdyhkZXNjLnRyYW5zbGF0aW9uKTtcbiAgICAgICAgdmFyIHJhd1JvdCA9IFJvdGF0aW9uT3BzLmludG9SYXcoZGVzYy5yb3RhdGlvbik7XG4gICAgICAgIHZhciByYXdDb20gPSBWZWN0b3JPcHMuaW50b1JhdyhkZXNjLmNlbnRlck9mTWFzcyk7XG4gICAgICAgIHZhciBoYW5kbGUgPSB0aGlzLnJhdy5jcmVhdGVDb2xsaWRlcihyYXdTaGFwZSwgcmF3VHJhLCByYXdSb3QsIGRlc2MudXNlTWFzc1Byb3BzLCBkZXNjLm1hc3MsIHJhd0NvbSwgXG4gICAgICAgIC8vICNpZiBESU0yXG4gICAgICAgIGRlc2MucHJpbmNpcGFsQW5ndWxhckluZXJ0aWEsIFxuICAgICAgICAvLyAjZW5kaWZcbiAgICAgICAgZGVzYy5kZW5zaXR5LCBkZXNjLmZyaWN0aW9uLCBkZXNjLnJlc3RpdHV0aW9uLCBkZXNjLmZyaWN0aW9uQ29tYmluZVJ1bGUsIGRlc2MucmVzdGl0dXRpb25Db21iaW5lUnVsZSwgZGVzYy5pc1NlbnNvciwgZGVzYy5jb2xsaXNpb25Hcm91cHMsIGRlc2Muc29sdmVyR3JvdXBzLCBkZXNjLmFjdGl2ZUNvbGxpc2lvblR5cGVzLCBkZXNjLmFjdGl2ZUhvb2tzLCBkZXNjLmFjdGl2ZUV2ZW50cywgaGFzUGFyZW50LCBoYXNQYXJlbnQgPyBwYXJlbnRIYW5kbGUgOiAwLCBib2RpZXMucmF3KTtcbiAgICAgICAgcmF3U2hhcGUuZnJlZSgpO1xuICAgICAgICByYXdUcmEuZnJlZSgpO1xuICAgICAgICByYXdSb3QuZnJlZSgpO1xuICAgICAgICByYXdDb20uZnJlZSgpO1xuICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY29sbGlkZXIgZnJvbSB0aGlzIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaW50ZWdlciBoYW5kbGUgb2YgdGhlIGNvbGxpZGVyIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gYm9kaWVzIC0gVGhlIHNldCBvZiByaWdpZC1ib2R5IGNvbnRhaW5pbmcgdGhlIHJpZ2lkLWJvZHkgdGhlIGNvbGxpZGVyIGlzIGF0dGFjaGVkIHRvLlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBJZiBgdHJ1ZWAsIHRoZSByaWdpZC1ib2R5IHRoZSByZW1vdmVkIGNvbGxpZGVyIGlzIGF0dGFjaGVkIHRvIHdpbGwgYmUgd29rZW4tdXAgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBDb2xsaWRlclNldC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGhhbmRsZSwgaXNsYW5kcywgYm9kaWVzLCB3YWtlVXApIHtcbiAgICAgICAgdGhpcy5yYXcucmVtb3ZlKGhhbmRsZSwgaXNsYW5kcy5yYXcsIGJvZGllcy5yYXcsIHdha2VVcCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByaWdpZC1ib2R5IHdpdGggdGhlIGdpdmVuIGhhbmRsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaGFuZGxlIG9mIHRoZSByaWdpZC1ib2R5IHRvIHJldHJpZXZlLlxuICAgICAqL1xuICAgIENvbGxpZGVyU2V0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgIGlmICh0aGlzLnJhdy5jb250YWlucyhoYW5kbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxpZGVyKHRoaXMucmF3LCBoYW5kbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgY29sbGlkZXJzIG9uIHRoaXMgc2V0LlxuICAgICAqL1xuICAgIENvbGxpZGVyU2V0LnByb3RvdHlwZS5sZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5sZW4oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERvZXMgdGhpcyBzZXQgY29udGFpbiBhIGNvbGxpZGVyIHdpdGggdGhlIGdpdmVuIGhhbmRsZT9cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgY29sbGlkZXIgaGFuZGxlIHRvIGNoZWNrLlxuICAgICAqL1xuICAgIENvbGxpZGVyU2V0LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhaW5zKGhhbmRsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIGVhY2ggY29sbGlkZXIgY29udGFpbmVkIGJ5IHRoaXMgc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBUaGUgY2xvc3VyZSB0byBhcHBseS5cbiAgICAgKi9cbiAgICBDb2xsaWRlclNldC5wcm90b3R5cGUuZm9yRWFjaENvbGxpZGVyID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5mb3JFYWNoQ29sbGlkZXJIYW5kbGUoZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICAgICAgZihuZXcgQ29sbGlkZXIoX3RoaXMucmF3LCBoYW5kbGUpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIHRoZSBoYW5kbGVzIG9mIGVhY2ggY29sbGlkZXIgY29udGFpbmVkIGJ5IHRoaXMgc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBUaGUgY2xvc3VyZSB0byBhcHBseS5cbiAgICAgKi9cbiAgICBDb2xsaWRlclNldC5wcm90b3R5cGUuZm9yRWFjaENvbGxpZGVySGFuZGxlID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdGhpcy5yYXcuZm9yRWFjaENvbGxpZGVySGFuZGxlKGYpO1xuICAgIH07XG4gICAgcmV0dXJuIENvbGxpZGVyU2V0O1xufSgpKTtcbmV4cG9ydCB7IENvbGxpZGVyU2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsaWRlcl9zZXQuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi9icm9hZF9waGFzZSc7XG5leHBvcnQgKiBmcm9tICcuL25hcnJvd19waGFzZSc7XG5leHBvcnQgKiBmcm9tICcuL3NoYXBlJztcbmV4cG9ydCAqIGZyb20gJy4vY29sbGlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9jb2xsaWRlcl9zZXQnO1xuZXhwb3J0ICogZnJvbSAnLi9yYXknO1xuZXhwb3J0ICogZnJvbSAnLi9wb2ludCc7XG5leHBvcnQgKiBmcm9tICcuL3RvaSc7XG5leHBvcnQgKiBmcm9tICcuL2ludGVyYWN0aW9uX2dyb3Vwcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBSYXdOYXJyb3dQaGFzZSB9IGZyb20gXCIuLi9yYXdcIjtcbmltcG9ydCB7IFZlY3Rvck9wcyB9IGZyb20gXCIuLi9tYXRoXCI7XG4vKipcbiAqIFRoZSBuYXJyb3ctcGhhc2UgdXNlZCBmb3IgcHJlY2lzZSBjb2xsaXNpb24tZGV0ZWN0aW9uLlxuICpcbiAqIFRvIGF2b2lkIGxlYWtpbmcgV0FTTSByZXNvdXJjZXMsIHRoaXMgTVVTVCBiZSBmcmVlZCBtYW51YWxseSB3aXRoIGBuYXJyb3dQaGFzZS5mcmVlKClgXG4gKiBvbmNlIHlvdSBhcmUgZG9uZSB1c2luZyBpdC5cbiAqL1xudmFyIE5hcnJvd1BoYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5hcnJvd1BoYXNlKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3TmFycm93UGhhc2UoKTtcbiAgICAgICAgdGhpcy50ZW1wTWFuaWZvbGQgPSBuZXcgVGVtcENvbnRhY3RNYW5pZm9sZChudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVsZWFzZSB0aGUgV0FTTSBtZW1vcnkgb2NjdXBpZWQgYnkgdGhpcyBuYXJyb3ctcGhhc2UuXG4gICAgICovXG4gICAgTmFycm93UGhhc2UucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3LmZyZWUoKTtcbiAgICAgICAgdGhpcy5yYXcgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCB0aGUgY29sbGlkZXJzIHBvdGVudGlhbGx5IGluIGNvbnRhY3Qgd2l0aCB0aGUgZ2l2ZW4gY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXIxIC0gVGhlIHNlY29uZCBjb2xsaWRlciBpbnZvbHZlZCBpbiB0aGUgY29udGFjdC5cbiAgICAgKiBAcGFyYW0gZiAtIENsb3N1cmUgdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIGNvbGxpZGVyIHRoYXQgaXMgaW4gY29udGFjdCB3aXRoIGBjb2xsaWRlcjFgLlxuICAgICAqL1xuICAgIE5hcnJvd1BoYXNlLnByb3RvdHlwZS5jb250YWN0c1dpdGggPSBmdW5jdGlvbiAoY29sbGlkZXIxLCBmKSB7XG4gICAgICAgIHRoaXMucmF3LmNvbnRhY3RzX3dpdGgoY29sbGlkZXIxLCBmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIHRoZSBjb2xsaWRlcnMgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBjb2xsaWRlcnMsIGFzc3VtaW5nIG9uZSBvZiB0aGVtXG4gICAgICogaXMgYSBzZW5zb3IuXG4gICAgICovXG4gICAgTmFycm93UGhhc2UucHJvdG90eXBlLmludGVyc2VjdGlvbnNXaXRoID0gZnVuY3Rpb24gKGNvbGxpZGVyMSwgZikge1xuICAgICAgICB0aGlzLnJhdy5pbnRlcnNlY3Rpb25zX3dpdGgoY29sbGlkZXIxLCBmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIHRocm91Z2ggYWxsIHRoZSBjb250YWN0IG1hbmlmb2xkcyBiZXR3ZWVuIHRoZSBnaXZlbiBwYWlyIG9mIGNvbGxpZGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcjEgLSBUaGUgZmlyc3QgY29sbGlkZXIgaW52b2x2ZWQgaW4gdGhlIGNvbnRhY3QuXG4gICAgICogQHBhcmFtIGNvbGxpZGVyMiAtIFRoZSBzZWNvbmQgY29sbGlkZXIgaW52b2x2ZWQgaW4gdGhlIGNvbnRhY3QuXG4gICAgICogQHBhcmFtIGYgLSBDbG9zdXJlIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBjb250YWN0IG1hbmlmb2xkIGJldHdlZW4gdGhlIHR3byBjb2xsaWRlcnMuIElmIHRoZSBzZWNvbmQgYXJndW1lbnRcbiAgICAgKiAgICAgICAgICAgIHBhc3NlZCB0byB0aGlzIGNsb3N1cmUgaXMgYHRydWVgLCB0aGVuIHRoZSBjb250YWN0IG1hbmlmb2xkIGRhdGEgaXMgZmxpcHBlZCwgaS5lLiwgbWV0aG9kcyBsaWtlIGBsb2NhbE5vcm1hbDFgXG4gICAgICogICAgICAgICAgICBhY3R1YWxseSBhcHBseSB0byB0aGUgYGNvbGxpZGVyMmAgYW5kIGZpZWxkcyBsaWtlIGBsb2NhbE5vcm1hbDJgIGFwcGx5IHRvIHRoZSBgY29sbGlkZXIxYC5cbiAgICAgKi9cbiAgICBOYXJyb3dQaGFzZS5wcm90b3R5cGUuY29udGFjdFBhaXIgPSBmdW5jdGlvbiAoY29sbGlkZXIxLCBjb2xsaWRlcjIsIGYpIHtcbiAgICAgICAgdmFyIHJhd1BhaXIgPSB0aGlzLnJhdy5jb250YWN0X3BhaXIoY29sbGlkZXIxLCBjb2xsaWRlcjIpO1xuICAgICAgICBpZiAoISFyYXdQYWlyKSB7XG4gICAgICAgICAgICB2YXIgZmxpcHBlZCA9IHJhd1BhaXIuY29sbGlkZXIxKCkgIT0gY29sbGlkZXIxO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmF3UGFpci5udW1Db250YWN0TWFuaWZvbGRzKCk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcE1hbmlmb2xkLnJhdyA9IHJhd1BhaXIuY29udGFjdE1hbmlmb2xkKGkpO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMudGVtcE1hbmlmb2xkLnJhdykge1xuICAgICAgICAgICAgICAgICAgICBmKHRoaXMudGVtcE1hbmlmb2xkLCBmbGlwcGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU0FGRVRZOiBUaGUgUmF3Q29udGFjdE1hbmlmb2xkIHN0b3JlcyBhIHJhdyBwb2ludGVyIHRoYXQgd2lsbCBiZSBpbnZhbGlkYXRlZFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgYXQgdGhlIG5leHQgdGltZXN0ZXAuIFNvIHdlIG11c3QgYmUgc3VyZSB0byBmcmVlIHRoZSBwYWlyIGhlcmVcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRvIGF2b2lkIHVuc291bmRuZXNzIGluIHRoZSBSdXN0IGNvZGUuXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wTWFuaWZvbGQuZnJlZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmF3UGFpci5mcmVlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGBjb2xsaWRlcjFgIGFuZCBgY29sbGlkZXIyYCBpbnRlcnNlY3QgYW5kIGF0IGxlYXN0IG9uZSBvZiB0aGVtIGlzIGEgc2Vuc29yLlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcjEg4oiSIFRoZSBmaXJzdCBjb2xsaWRlciBpbnZvbHZlZCBpbiB0aGUgaW50ZXJzZWN0aW9uLlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcjIg4oiSIFRoZSBzZWNvbmQgY29sbGlkZXIgaW52b2x2ZWQgaW4gdGhlIGludGVyc2VjdGlvbi5cbiAgICAgKi9cbiAgICBOYXJyb3dQaGFzZS5wcm90b3R5cGUuaW50ZXJzZWN0aW9uUGFpciA9IGZ1bmN0aW9uIChjb2xsaWRlcjEsIGNvbGxpZGVyMikge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuaW50ZXJzZWN0aW9uX3BhaXIoY29sbGlkZXIxLCBjb2xsaWRlcjIpO1xuICAgIH07XG4gICAgcmV0dXJuIE5hcnJvd1BoYXNlO1xufSgpKTtcbmV4cG9ydCB7IE5hcnJvd1BoYXNlIH07XG52YXIgVGVtcENvbnRhY3RNYW5pZm9sZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUZW1wQ29udGFjdE1hbmlmb2xkKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICB9XG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUuZnJlZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yYXcuZnJlZSgpO1xuICAgICAgICB0aGlzLnJhdyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLm5vcm1hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvck9wcy5mcm9tUmF3KHRoaXMucmF3Lm5vcm1hbCgpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmxvY2FsTm9ybWFsMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFZlY3Rvck9wcy5mcm9tUmF3KHRoaXMucmF3LmxvY2FsX24xKCkpO1xuICAgIH07XG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUubG9jYWxOb3JtYWwyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXcubG9jYWxfbjIoKSk7XG4gICAgfTtcbiAgICBUZW1wQ29udGFjdE1hbmlmb2xkLnByb3RvdHlwZS5zdWJzaGFwZTEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zdWJzaGFwZTEoKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLnN1YnNoYXBlMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnN1YnNoYXBlMigpO1xuICAgIH07XG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUubnVtQ29udGFjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5udW1fY29udGFjdHMoKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmxvY2FsQ29udGFjdFBvaW50MSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JPcHMuZnJvbVJhdyh0aGlzLnJhdy5jb250YWN0X2xvY2FsX3AxKGkpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmxvY2FsQ29udGFjdFBvaW50MiA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3JPcHMuZnJvbVJhdyh0aGlzLnJhdy5jb250YWN0X2xvY2FsX3AyKGkpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmNvbnRhY3REaXN0ID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhY3RfZGlzdChpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmNvbnRhY3RGaWQxID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhY3RfZmlkMShpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmNvbnRhY3RGaWQyID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhY3RfZmlkMihpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLmNvbnRhY3RJbXB1bHNlID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhY3RfaW1wdWxzZShpKTtcbiAgICB9O1xuICAgIC8vICNpZiBESU0yXG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUuY29udGFjdFRhbmdlbnRJbXB1bHNlID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNvbnRhY3RfdGFuZ2VudF9pbXB1bHNlKGkpO1xuICAgIH07XG4gICAgLy8gI2VuZGlmXG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUubnVtU29sdmVyQ29udGFjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5udW1fc29sdmVyX2NvbnRhY3RzKCk7XG4gICAgfTtcbiAgICBUZW1wQ29udGFjdE1hbmlmb2xkLnByb3RvdHlwZS5zb2x2ZXJDb250YWN0UG9pbnQgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXcuc29sdmVyX2NvbnRhY3RfcG9pbnQoaSkpO1xuICAgIH07XG4gICAgVGVtcENvbnRhY3RNYW5pZm9sZC5wcm90b3R5cGUuc29sdmVyQ29udGFjdERpc3QgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc29sdmVyX2NvbnRhY3RfZGlzdChpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLnNvbHZlckNvbnRhY3RGcmljdGlvbiA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zb2x2ZXJfY29udGFjdF9mcmljdGlvbihpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLnNvbHZlckNvbnRhY3RSZXN0aXR1dGlvbiA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zb2x2ZXJfY29udGFjdF9yZXN0aXR1dGlvbihpKTtcbiAgICB9O1xuICAgIFRlbXBDb250YWN0TWFuaWZvbGQucHJvdG90eXBlLnNvbHZlckNvbnRhY3RUYW5nZW50VmVsb2NpdHkgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLmZyb21SYXcodGhpcy5yYXcuc29sdmVyX2NvbnRhY3RfdGFuZ2VudF92ZWxvY2l0eShpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGVtcENvbnRhY3RNYW5pZm9sZDtcbn0oKSk7XG5leHBvcnQgeyBUZW1wQ29udGFjdE1hbmlmb2xkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXJyb3dfcGhhc2UuanMubWFwIiwiaW1wb3J0IHsgVmVjdG9yT3BzIH0gZnJvbSBcIi4uL21hdGhcIjtcbi8qKlxuICogVGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIGEgcmF5IGFuZCBhIGNvbGxpZGVyLlxuICovXG52YXIgUG9pbnRDb2xsaWRlclByb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG9pbnRDb2xsaWRlclByb2plY3Rpb24oY29sbGlkZXJIYW5kbGUsIHBvaW50LCBpc0luc2lkZSkge1xuICAgICAgICB0aGlzLmNvbGxpZGVySGFuZGxlID0gY29sbGlkZXJIYW5kbGU7XG4gICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgdGhpcy5pc0luc2lkZSA9IGlzSW5zaWRlO1xuICAgIH1cbiAgICBQb2ludENvbGxpZGVyUHJvamVjdGlvbi5mcm9tUmF3ID0gZnVuY3Rpb24gKHJhdykge1xuICAgICAgICBpZiAoIXJhdylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFBvaW50Q29sbGlkZXJQcm9qZWN0aW9uKHJhdy5jb2xsaWRlckhhbmRsZSgpLCBWZWN0b3JPcHMuZnJvbVJhdyhyYXcucG9pbnQoKSksIHJhdy5pc0luc2lkZSgpKTtcbiAgICAgICAgcmF3LmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBQb2ludENvbGxpZGVyUHJvamVjdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBQb2ludENvbGxpZGVyUHJvamVjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9pbnQuanMubWFwIiwiaW1wb3J0IHsgVmVjdG9yT3BzIH0gZnJvbSBcIi4uL21hdGhcIjtcbi8qKlxuICogQSByYXkuIFRoaXMgaXMgYSBkaXJlY3RlZCBoYWxmLWxpbmUuXG4gKi9cbnZhciBSYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgcmF5IGZyb20gaXRzIG9yaWdpbiBhbmQgZGlyZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9yaWdpbiAtIFRoZSByYXkncyBzdGFydGluZyBwb2ludC5cbiAgICAgKiBAcGFyYW0gZGlyIC0gVGhlIHJheSdzIGRpcmVjdGlvbiBvZiBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSYXkob3JpZ2luLCBkaXIpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgIH1cbiAgICBSYXkucHJvdG90eXBlLnBvaW50QXQgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5vcmlnaW4ueCArIHRoaXMuZGlyLnggKiB0LFxuICAgICAgICAgICAgeTogdGhpcy5vcmlnaW4ueSArIHRoaXMuZGlyLnkgKiB0LFxuICAgICAgICB9O1xuICAgIH07XG4gICAgO1xuICAgIHJldHVybiBSYXk7XG59KCkpO1xuZXhwb3J0IHsgUmF5IH07XG4vKipcbiAqIFRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiBhIHJheSBhbmQgYSBjb2xsaWRlci5cbiAqL1xudmFyIFJheUNvbGxpZGVySW50ZXJzZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJheUNvbGxpZGVySW50ZXJzZWN0aW9uKGNvbGxpZGVySGFuZGxlLCB0b2ksIG5vcm1hbCkge1xuICAgICAgICB0aGlzLmNvbGxpZGVySGFuZGxlID0gY29sbGlkZXJIYW5kbGU7XG4gICAgICAgIHRoaXMudG9pID0gdG9pO1xuICAgICAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbDtcbiAgICB9XG4gICAgUmF5Q29sbGlkZXJJbnRlcnNlY3Rpb24uZnJvbVJhdyA9IGZ1bmN0aW9uIChyYXcpIHtcbiAgICAgICAgaWYgKCFyYXcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBSYXlDb2xsaWRlckludGVyc2VjdGlvbihyYXcuY29sbGlkZXJIYW5kbGUoKSwgcmF3LnRvaSgpLCBWZWN0b3JPcHMuZnJvbVJhdyhyYXcubm9ybWFsKCkpKTtcbiAgICAgICAgcmF3LmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBSYXlDb2xsaWRlckludGVyc2VjdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBSYXlDb2xsaWRlckludGVyc2VjdGlvbiB9O1xuLyoqXG4gKiBUaGUgdGltZSBvZiBpbXBhY3QgYmV0d2VlbiBhIHJheSBhbmQgYSBjb2xsaWRlci5cbiAqL1xudmFyIFJheUNvbGxpZGVyVG9pID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJheUNvbGxpZGVyVG9pKGNvbGxpZGVySGFuZGxlLCB0b2kpIHtcbiAgICAgICAgdGhpcy5jb2xsaWRlckhhbmRsZSA9IGNvbGxpZGVySGFuZGxlO1xuICAgICAgICB0aGlzLnRvaSA9IHRvaTtcbiAgICB9XG4gICAgUmF5Q29sbGlkZXJUb2kuZnJvbVJhdyA9IGZ1bmN0aW9uIChyYXcpIHtcbiAgICAgICAgaWYgKCFyYXcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBSYXlDb2xsaWRlclRvaShyYXcuY29sbGlkZXJIYW5kbGUoKSwgcmF3LnRvaSgpKTtcbiAgICAgICAgcmF3LmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBSYXlDb2xsaWRlclRvaTtcbn0oKSk7XG5leHBvcnQgeyBSYXlDb2xsaWRlclRvaSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmF5LmpzLm1hcCIsImltcG9ydCB7IFZlY3Rvck9wcyB9IGZyb20gXCIuLi9tYXRoXCI7XG5pbXBvcnQgeyBSYXdTaGFwZSB9IGZyb20gXCIuLi9yYXdcIjtcbi8qKlxuICogQW4gZW51bWVyYXRpb24gcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIGEgc2hhcGUuXG4gKi9cbmV4cG9ydCB2YXIgU2hhcGVUeXBlO1xuKGZ1bmN0aW9uIChTaGFwZVR5cGUpIHtcbiAgICBTaGFwZVR5cGVbU2hhcGVUeXBlW1wiQmFsbFwiXSA9IDBdID0gXCJCYWxsXCI7XG4gICAgU2hhcGVUeXBlW1NoYXBlVHlwZVtcIkN1Ym9pZFwiXSA9IDFdID0gXCJDdWJvaWRcIjtcbiAgICBTaGFwZVR5cGVbU2hhcGVUeXBlW1wiQ2Fwc3VsZVwiXSA9IDJdID0gXCJDYXBzdWxlXCI7XG4gICAgU2hhcGVUeXBlW1NoYXBlVHlwZVtcIlNlZ21lbnRcIl0gPSAzXSA9IFwiU2VnbWVudFwiO1xuICAgIFNoYXBlVHlwZVtTaGFwZVR5cGVbXCJQb2x5bGluZVwiXSA9IDRdID0gXCJQb2x5bGluZVwiO1xuICAgIFNoYXBlVHlwZVtTaGFwZVR5cGVbXCJUcmlhbmdsZVwiXSA9IDVdID0gXCJUcmlhbmdsZVwiO1xuICAgIFNoYXBlVHlwZVtTaGFwZVR5cGVbXCJUcmlNZXNoXCJdID0gNl0gPSBcIlRyaU1lc2hcIjtcbiAgICBTaGFwZVR5cGVbU2hhcGVUeXBlW1wiSGVpZ2h0RmllbGRcIl0gPSA3XSA9IFwiSGVpZ2h0RmllbGRcIjtcbiAgICAvLyBDb21wb3VuZCA9IDgsXG4gICAgU2hhcGVUeXBlW1NoYXBlVHlwZVtcIkNvbnZleFBvbHlnb25cIl0gPSA5XSA9IFwiQ29udmV4UG9seWdvblwiO1xuICAgIFNoYXBlVHlwZVtTaGFwZVR5cGVbXCJSb3VuZEN1Ym9pZFwiXSA9IDEwXSA9IFwiUm91bmRDdWJvaWRcIjtcbiAgICBTaGFwZVR5cGVbU2hhcGVUeXBlW1wiUm91bmRUcmlhbmdsZVwiXSA9IDExXSA9IFwiUm91bmRUcmlhbmdsZVwiO1xuICAgIFNoYXBlVHlwZVtTaGFwZVR5cGVbXCJSb3VuZENvbnZleFBvbHlnb25cIl0gPSAxMl0gPSBcIlJvdW5kQ29udmV4UG9seWdvblwiO1xufSkoU2hhcGVUeXBlIHx8IChTaGFwZVR5cGUgPSB7fSkpO1xuLy8gI2VuZGlmXG4vKipcbiAqIEEgc2hhcGUgdGhhdCBpcyBhIHNwaGVyZSBpbiAzRCBhbmQgYSBjaXJjbGUgaW4gMkQuXG4gKi9cbnZhciBCYWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYmFsbCB3aXRoIHRoZSBnaXZlbiByYWRpdXMuXG4gICAgICogQHBhcmFtIHJhZGl1cyAtIFRoZSBiYWxscyByYWRpdXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFsbChyYWRpdXMpIHtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gICAgfVxuICAgIEJhbGwucHJvdG90eXBlLmludG9SYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5iYWxsKHRoaXMucmFkaXVzKTtcbiAgICB9O1xuICAgIHJldHVybiBCYWxsO1xufSgpKTtcbmV4cG9ydCB7IEJhbGwgfTtcbi8qKlxuICogQSBzaGFwZSB0aGF0IGlzIGEgYm94IGluIDNEIGFuZCBhIHJlY3RhbmdsZSBpbiAyRC5cbiAqL1xudmFyIEN1Ym9pZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyAjaWYgRElNMlxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgMkQgcmVjdGFuZ2xlLlxuICAgICAqIEBwYXJhbSBoeCAtIFRoZSBoYWxmIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUuXG4gICAgICogQHBhcmFtIGh5IC0gVGhlIGhlbGYgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ3Vib2lkKGh4LCBoeSkge1xuICAgICAgICB0aGlzLmhhbGZFeHRlbnRzID0gVmVjdG9yT3BzLm5ldyhoeCwgaHkpO1xuICAgIH1cbiAgICAvLyAjZW5kaWZcbiAgICBDdWJvaWQucHJvdG90eXBlLmludG9SYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICNpZiBESU0yXG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5jdWJvaWQodGhpcy5oYWxmRXh0ZW50cy54LCB0aGlzLmhhbGZFeHRlbnRzLnkpO1xuICAgICAgICAvLyAjZW5kaWZcbiAgICB9O1xuICAgIHJldHVybiBDdWJvaWQ7XG59KCkpO1xuZXhwb3J0IHsgQ3Vib2lkIH07XG4vKipcbiAqIEEgc2hhcGUgdGhhdCBpcyBhIGJveCBpbiAzRCBhbmQgYSByZWN0YW5nbGUgaW4gMkQsIHdpdGggcm91bmQgY29ybmVycy5cbiAqL1xudmFyIFJvdW5kQ3Vib2lkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8vICNpZiBESU0yXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyAyRCByZWN0YW5nbGUuXG4gICAgICogQHBhcmFtIGh4IC0gVGhlIGhhbGYgd2lkdGggb2YgdGhlIHJlY3RhbmdsZS5cbiAgICAgKiBAcGFyYW0gaHkgLSBUaGUgaGVsZiBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZS5cbiAgICAgKiBAcGFyYW0gYm9yZGVyUmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgYm9yZGVycyBvZiB0aGlzIGN1Ym9pZC4gVGhpcyB3aWxsXG4gICAgICogICBlZmZlY3RpdmVseSBpbmNyZWFzZSB0aGUgaGFsZi1leHRlbnRzIG9mIHRoZSBjdWJvaWQgYnkgdGhpcyByYWRpdXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUm91bmRDdWJvaWQoaHgsIGh5LCBib3JkZXJSYWRpdXMpIHtcbiAgICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IFZlY3Rvck9wcy5uZXcoaHgsIGh5KTtcbiAgICAgICAgdGhpcy5ib3JkZXJSYWRpdXMgPSBib3JkZXJSYWRpdXM7XG4gICAgfVxuICAgIC8vICNlbmRpZlxuICAgIFJvdW5kQ3Vib2lkLnByb3RvdHlwZS5pbnRvUmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAjaWYgRElNMlxuICAgICAgICByZXR1cm4gUmF3U2hhcGUucm91bmRDdWJvaWQodGhpcy5oYWxmRXh0ZW50cy54LCB0aGlzLmhhbGZFeHRlbnRzLnksIHRoaXMuYm9yZGVyUmFkaXVzKTtcbiAgICAgICAgLy8gI2VuZGlmXG4gICAgfTtcbiAgICByZXR1cm4gUm91bmRDdWJvaWQ7XG59KCkpO1xuZXhwb3J0IHsgUm91bmRDdWJvaWQgfTtcbi8qKlxuICogQSBzaGFwZSB0aGF0IGlzIGEgY2Fwc3VsZS5cbiAqL1xudmFyIENhcHN1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjYXBzdWxlIHdpdGggdGhlIGdpdmVuIHJhZGl1cyBhbmQgaGFsZi1oZWlnaHQuXG4gICAgICogQHBhcmFtIGhhbGZIZWlnaHQgLSBUaGUgYmFsbHMgaGFsZi1oZWlnaHQgYWxvbmcgdGhlIGB5YCBheGlzLlxuICAgICAqIEBwYXJhbSByYWRpdXMgLSBUaGUgYmFsbHMgcmFkaXVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhcHN1bGUoaGFsZkhlaWdodCwgcmFkaXVzKSB7XG4gICAgICAgIHRoaXMuaGFsZkhlaWdodCA9IGhhbGZIZWlnaHQ7XG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xuICAgIH1cbiAgICBDYXBzdWxlLnByb3RvdHlwZS5pbnRvUmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUmF3U2hhcGUuY2Fwc3VsZSh0aGlzLmhhbGZIZWlnaHQsIHRoaXMucmFkaXVzKTtcbiAgICB9O1xuICAgIHJldHVybiBDYXBzdWxlO1xufSgpKTtcbmV4cG9ydCB7IENhcHN1bGUgfTtcbi8qKlxuICogQSBzaGFwZSB0aGF0IGlzIGEgc2VnbWVudC5cbiAqL1xudmFyIFNlZ21lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzZWdtZW50IHNoYXBlLlxuICAgICAqIEBwYXJhbSBhIC0gVGhlIGZpcnN0IHBvaW50IG9mIHRoZSBzZWdtZW50LlxuICAgICAqIEBwYXJhbSBiIC0gVGhlIHNlY29uZCBwb2ludCBvZiB0aGUgc2VnbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZWdtZW50KGEsIGIpIHtcbiAgICAgICAgdGhpcy5hID0gYTtcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICB9XG4gICAgU2VnbWVudC5wcm90b3R5cGUuaW50b1JhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJhID0gVmVjdG9yT3BzLmludG9SYXcodGhpcy5hKTtcbiAgICAgICAgdmFyIHJiID0gVmVjdG9yT3BzLmludG9SYXcodGhpcy5iKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFJhd1NoYXBlLnNlZ21lbnQocmEsIHJiKTtcbiAgICAgICAgcmEuZnJlZSgpO1xuICAgICAgICByYi5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gU2VnbWVudDtcbn0oKSk7XG5leHBvcnQgeyBTZWdtZW50IH07XG4vKipcbiAqIEEgc2hhcGUgdGhhdCBpcyBhIHNlZ21lbnQuXG4gKi9cbnZhciBUcmlhbmdsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRyaWFuZ2xlIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgLSBUaGUgZmlyc3QgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqIEBwYXJhbSBiIC0gVGhlIHNlY29uZCBwb2ludCBvZiB0aGUgdHJpYW5nbGUuXG4gICAgICogQHBhcmFtIGMgLSBUaGUgdGhpcmQgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyaWFuZ2xlKGEsIGIsIGMpIHtcbiAgICAgICAgdGhpcy5hID0gYTtcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICAgICAgdGhpcy5jID0gYztcbiAgICB9XG4gICAgVHJpYW5nbGUucHJvdG90eXBlLmludG9SYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYSA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuYSk7XG4gICAgICAgIHZhciByYiA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuYik7XG4gICAgICAgIHZhciByYyA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuYyk7XG4gICAgICAgIHZhciByZXN1bHQgPSBSYXdTaGFwZS50cmlhbmdsZShyYSwgcmIsIHJjKTtcbiAgICAgICAgcmEuZnJlZSgpO1xuICAgICAgICByYi5mcmVlKCk7XG4gICAgICAgIHJjLmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIHJldHVybiBUcmlhbmdsZTtcbn0oKSk7XG5leHBvcnQgeyBUcmlhbmdsZSB9O1xuLyoqXG4gKiBBIHNoYXBlIHRoYXQgaXMgYSB0cmlhbmdsZSB3aXRoIHJvdW5kIGJvcmRlcnMgYW5kIGEgbm9uLXplcm8gdGhpY2tuZXNzLlxuICovXG52YXIgUm91bmRUcmlhbmdsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRyaWFuZ2xlIHNoYXBlIHdpdGggcm91bmQgY29ybmVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIC0gVGhlIGZpcnN0IHBvaW50IG9mIHRoZSB0cmlhbmdsZS5cbiAgICAgKiBAcGFyYW0gYiAtIFRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqIEBwYXJhbSBjIC0gVGhlIHRoaXJkIHBvaW50IG9mIHRoZSB0cmlhbmdsZS5cbiAgICAgKiBAcGFyYW0gYm9yZGVyUmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgYm9yZGVycyBvZiB0aGlzIHRyaWFuZ2xlLiBJbiAzRCxcbiAgICAgKiAgIHRoaXMgaXMgYWxzbyBlcXVhbCB0byBoYWxmIHRoZSB0aGlja25lc3Mgb2YgdGhlIHRyaWFuZ2xlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJvdW5kVHJpYW5nbGUoYSwgYiwgYywgYm9yZGVyUmFkaXVzKSB7XG4gICAgICAgIHRoaXMuYSA9IGE7XG4gICAgICAgIHRoaXMuYiA9IGI7XG4gICAgICAgIHRoaXMuYyA9IGM7XG4gICAgICAgIHRoaXMuYm9yZGVyUmFkaXVzID0gYm9yZGVyUmFkaXVzO1xuICAgIH1cbiAgICBSb3VuZFRyaWFuZ2xlLnByb3RvdHlwZS5pbnRvUmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmEgPSBWZWN0b3JPcHMuaW50b1Jhdyh0aGlzLmEpO1xuICAgICAgICB2YXIgcmIgPSBWZWN0b3JPcHMuaW50b1Jhdyh0aGlzLmIpO1xuICAgICAgICB2YXIgcmMgPSBWZWN0b3JPcHMuaW50b1Jhdyh0aGlzLmMpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gUmF3U2hhcGUucm91bmRUcmlhbmdsZShyYSwgcmIsIHJjLCB0aGlzLmJvcmRlclJhZGl1cyk7XG4gICAgICAgIHJhLmZyZWUoKTtcbiAgICAgICAgcmIuZnJlZSgpO1xuICAgICAgICByYy5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gUm91bmRUcmlhbmdsZTtcbn0oKSk7XG5leHBvcnQgeyBSb3VuZFRyaWFuZ2xlIH07XG4vKipcbiAqIEEgc2hhcGUgdGhhdCBpcyBhIHRyaWFuZ2xlIG1lc2guXG4gKi9cbnZhciBQb2x5bGluZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHBvbHlsaW5lIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwb2x5bGluZSdzIHZlcnRpY2VzLlxuICAgICAqIEBwYXJhbSBpbmRpY2VzIC0gVGhlIGluZGljZXMgb2YgdGhlIHBvbHlsaW5lJ3Mgc2VnbWVudHMuIElmIHRoaXMgaXMgYG51bGxgIHRoZW5cbiAgICAgKiAgICB0aGUgdmVydGljZXMgYXJlIGFzc3VtZWQgdG8gZm9ybSBhIGxpbmUgc3RyaXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9seWxpbmUodmVydGljZXMsIGluZGljZXMpIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgICAgICB0aGlzLmluZGljZXMgPSAhIWluZGljZXMgPyBpbmRpY2VzIDogbmV3IFVpbnQzMkFycmF5KDApO1xuICAgIH1cbiAgICBQb2x5bGluZS5wcm90b3R5cGUuaW50b1JhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFJhd1NoYXBlLnBvbHlsaW5lKHRoaXMudmVydGljZXMsIHRoaXMuaW5kaWNlcyk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWxpbmU7XG59KCkpO1xuZXhwb3J0IHsgUG9seWxpbmUgfTtcbi8qKlxuICogQSBzaGFwZSB0aGF0IGlzIGEgdHJpYW5nbGUgbWVzaC5cbiAqL1xudmFyIFRyaU1lc2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0cmlhbmdsZSBtZXNoIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSB0cmlhbmdsZSBtZXNoJ3MgdmVydGljZXMuXG4gICAgICogQHBhcmFtIGluZGljZXMgLSBUaGUgaW5kaWNlcyBvZiB0aGUgdHJpYW5nbGUgbWVzaCdzIHRyaWFuZ2xlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlNZXNoKHZlcnRpY2VzLCBpbmRpY2VzKSB7XG4gICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICAgICAgdGhpcy5pbmRpY2VzID0gaW5kaWNlcztcbiAgICB9XG4gICAgVHJpTWVzaC5wcm90b3R5cGUuaW50b1JhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFJhd1NoYXBlLnRyaW1lc2godGhpcy52ZXJ0aWNlcywgdGhpcy5pbmRpY2VzKTtcbiAgICB9O1xuICAgIHJldHVybiBUcmlNZXNoO1xufSgpKTtcbmV4cG9ydCB7IFRyaU1lc2ggfTtcbi8vICNpZiBESU0yXG4vKipcbiAqIEEgc2hhcGUgdGhhdCBpcyBhIGNvbnZleCBwb2x5Z29uLlxuICovXG52YXIgQ29udmV4UG9seWdvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbnZleCBwb2x5Z29uIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBjb252ZXggcG9seWdvbidzIHZlcnRpY2VzLlxuICAgICAqIEBwYXJhbSBza2lwQ29udmV4SHVsbENvbXB1dGF0aW9uIC0gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIGlucHV0IHBvaW50cyB3aWxsXG4gICAgICogICBiZSBhc3N1bWVkIHRvIGZvcm0gYSBjb252ZXggcG9seWxpbmUgYW5kIG5vIGNvbnZleC1odWxsIGNvbXB1dGF0aW9uIHdpbGxcbiAgICAgKiAgIGJlIGRvbmUgYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb252ZXhQb2x5Z29uKHZlcnRpY2VzLCBza2lwQ29udmV4SHVsbENvbXB1dGF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICAgICAgdGhpcy5za2lwQ29udmV4SHVsbENvbXB1dGF0aW9uID0gISFza2lwQ29udmV4SHVsbENvbXB1dGF0aW9uO1xuICAgIH1cbiAgICBDb252ZXhQb2x5Z29uLnByb3RvdHlwZS5pbnRvUmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5za2lwQ29udmV4SHVsbENvbXB1dGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUmF3U2hhcGUuY29udmV4UG9seWxpbmUodGhpcy52ZXJ0aWNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUmF3U2hhcGUuY29udmV4SHVsbCh0aGlzLnZlcnRpY2VzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENvbnZleFBvbHlnb247XG59KCkpO1xuZXhwb3J0IHsgQ29udmV4UG9seWdvbiB9O1xuLyoqXG4gKiBBIHNoYXBlIHRoYXQgaXMgYSBjb252ZXggcG9seWdvbi5cbiAqL1xudmFyIFJvdW5kQ29udmV4UG9seWdvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbnZleCBwb2x5Z29uIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIC0gVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBjb252ZXggcG9seWdvbidzIHZlcnRpY2VzLlxuICAgICAqIEBwYXJhbSBib3JkZXJSYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSBib3JkZXJzIG9mIHRoaXMgY29udmV4IHBvbHlnb24uXG4gICAgICogQHBhcmFtIHNraXBDb252ZXhIdWxsQ29tcHV0YXRpb24gLSBJZiBzZXQgdG8gYHRydWVgLCB0aGUgaW5wdXQgcG9pbnRzIHdpbGxcbiAgICAgKiAgIGJlIGFzc3VtZWQgdG8gZm9ybSBhIGNvbnZleCBwb2x5bGluZSBhbmQgbm8gY29udmV4LWh1bGwgY29tcHV0YXRpb24gd2lsbFxuICAgICAqICAgYmUgZG9uZSBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJvdW5kQ29udmV4UG9seWdvbih2ZXJ0aWNlcywgYm9yZGVyUmFkaXVzLCBza2lwQ29udmV4SHVsbENvbXB1dGF0aW9uKSB7XG4gICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICAgICAgdGhpcy5ib3JkZXJSYWRpdXMgPSBib3JkZXJSYWRpdXM7XG4gICAgICAgIHRoaXMuc2tpcENvbnZleEh1bGxDb21wdXRhdGlvbiA9ICEhc2tpcENvbnZleEh1bGxDb21wdXRhdGlvbjtcbiAgICB9XG4gICAgUm91bmRDb252ZXhQb2x5Z29uLnByb3RvdHlwZS5pbnRvUmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5za2lwQ29udmV4SHVsbENvbXB1dGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gUmF3U2hhcGUucm91bmRDb252ZXhQb2x5bGluZSh0aGlzLnZlcnRpY2VzLCB0aGlzLmJvcmRlclJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUmF3U2hhcGUucm91bmRDb252ZXhIdWxsKHRoaXMudmVydGljZXMsIHRoaXMuYm9yZGVyUmFkaXVzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJvdW5kQ29udmV4UG9seWdvbjtcbn0oKSk7XG5leHBvcnQgeyBSb3VuZENvbnZleFBvbHlnb24gfTtcbi8qKlxuICogQSBzaGFwZSB0aGF0IGlzIGEgaGVpZ2h0ZmllbGQuXG4gKi9cbnZhciBIZWlnaHRmaWVsZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGhlaWdodGZpZWxkIHNoYXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGhlaWdodHMgLSBUaGUgaGVpZ2h0cyBvZiB0aGUgaGVpZ2h0ZmllbGQsIGFsb25nIGl0cyBsb2NhbCBgeWAgYXhpcy5cbiAgICAgKiBAcGFyYW0gc2NhbGUgLSBUaGUgc2NhbGUgZmFjdG9yIGFwcGxpZWQgdG8gdGhlIGhlaWdodGZpZWxkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEhlaWdodGZpZWxkKGhlaWdodHMsIHNjYWxlKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0cyA9IGhlaWdodHM7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB9XG4gICAgSGVpZ2h0ZmllbGQucHJvdG90eXBlLmludG9SYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYXdTY2FsZSA9IFZlY3Rvck9wcy5pbnRvUmF3KHRoaXMuc2NhbGUpO1xuICAgICAgICB2YXIgcmF3U2hhcGUgPSBSYXdTaGFwZS5oZWlnaHRmaWVsZCh0aGlzLmhlaWdodHMsIHJhd1NjYWxlKTtcbiAgICAgICAgcmF3U2NhbGUuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmF3U2hhcGU7XG4gICAgfTtcbiAgICByZXR1cm4gSGVpZ2h0ZmllbGQ7XG59KCkpO1xuZXhwb3J0IHsgSGVpZ2h0ZmllbGQgfTtcbi8vICNlbmRpZlxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcGUuanMubWFwIiwiaW1wb3J0IHsgVmVjdG9yT3BzIH0gZnJvbSBcIi4uL21hdGhcIjtcbi8qKlxuICogVGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIGEgcmF5IGFuZCBhIGNvbGxpZGVyLlxuICovXG52YXIgU2hhcGVDb2xsaWRlclRPSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaGFwZUNvbGxpZGVyVE9JKGNvbGxpZGVySGFuZGxlLCB0b2ksIHdpdG5lc3MxLCB3aXRuZXNzMiwgbm9ybWFsMSwgbm9ybWFsMikge1xuICAgICAgICB0aGlzLmNvbGxpZGVySGFuZGxlID0gY29sbGlkZXJIYW5kbGU7XG4gICAgICAgIHRoaXMudG9pID0gdG9pO1xuICAgICAgICB0aGlzLndpdG5lc3MxID0gd2l0bmVzczE7XG4gICAgICAgIHRoaXMud2l0bmVzczIgPSB3aXRuZXNzMjtcbiAgICAgICAgdGhpcy5ub3JtYWwxID0gbm9ybWFsMTtcbiAgICAgICAgdGhpcy5ub3JtYWwyID0gbm9ybWFsMjtcbiAgICB9XG4gICAgU2hhcGVDb2xsaWRlclRPSS5mcm9tUmF3ID0gZnVuY3Rpb24gKHJhdykge1xuICAgICAgICBpZiAoIXJhdylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFNoYXBlQ29sbGlkZXJUT0kocmF3LmNvbGxpZGVySGFuZGxlKCksIHJhdy50b2koKSwgVmVjdG9yT3BzLmZyb21SYXcocmF3LndpdG5lc3MxKCkpLCBWZWN0b3JPcHMuZnJvbVJhdyhyYXcud2l0bmVzczIoKSksIFZlY3Rvck9wcy5mcm9tUmF3KHJhdy5ub3JtYWwxKCkpLCBWZWN0b3JPcHMuZnJvbVJhdyhyYXcubm9ybWFsMigpKSk7XG4gICAgICAgIHJhdy5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gU2hhcGVDb2xsaWRlclRPSTtcbn0oKSk7XG5leHBvcnQgeyBTaGFwZUNvbGxpZGVyVE9JIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b2kuanMubWFwIiwiaW1wb3J0IHsgUmF3VmVjdG9yLCBSYXdSb3RhdGlvbiB9IGZyb20gXCIuL3Jhd1wiO1xuLyoqXG4gKiBBIDJEIHZlY3Rvci5cbiAqL1xudmFyIFZlY3RvcjIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmVjdG9yMih4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuICAgIHJldHVybiBWZWN0b3IyO1xufSgpKTtcbmV4cG9ydCB7IFZlY3RvcjIgfTtcbnZhciBWZWN0b3JPcHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmVjdG9yT3BzKCkge1xuICAgIH1cbiAgICBWZWN0b3JPcHMubmV3ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgsIHkpO1xuICAgIH07XG4gICAgVmVjdG9yT3BzLnplcm9zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVmVjdG9yT3BzLm5ldygwLjAsIDAuMCk7XG4gICAgfTtcbiAgICAvLyBGSVhNRTogdHlwZSByYW06IFJhd1ZlY3Rvcj9cbiAgICBWZWN0b3JPcHMuZnJvbVJhdyA9IGZ1bmN0aW9uIChyYXcpIHtcbiAgICAgICAgaWYgKCFyYXcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJlcyA9IFZlY3Rvck9wcy5uZXcocmF3LngsIHJhdy55KTtcbiAgICAgICAgcmF3LmZyZWUoKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFZlY3Rvck9wcy5pbnRvUmF3ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYXdWZWN0b3Iodi54LCB2LnkpO1xuICAgIH07XG4gICAgcmV0dXJuIFZlY3Rvck9wcztcbn0oKSk7XG5leHBvcnQgeyBWZWN0b3JPcHMgfTtcbnZhciBSb3RhdGlvbk9wcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3RhdGlvbk9wcygpIHtcbiAgICB9XG4gICAgUm90YXRpb25PcHMuaWRlbnRpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAwLjA7XG4gICAgfTtcbiAgICBSb3RhdGlvbk9wcy5mcm9tUmF3ID0gZnVuY3Rpb24gKHJhdykge1xuICAgICAgICBpZiAoIXJhdylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcmVzID0gcmF3LmFuZ2xlO1xuICAgICAgICByYXcuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUm90YXRpb25PcHMuaW50b1JhdyA9IGZ1bmN0aW9uIChhbmdsZSkge1xuICAgICAgICByZXR1cm4gUmF3Um90YXRpb24uZnJvbUFuZ2xlKGFuZ2xlKTtcbiAgICB9O1xuICAgIHJldHVybiBSb3RhdGlvbk9wcztcbn0oKSk7XG5leHBvcnQgeyBSb3RhdGlvbk9wcyB9O1xuLy8gI2VuZGlmXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLmpzLm1hcCIsImltcG9ydCB7IFJhd0V2ZW50UXVldWUgfSBmcm9tICcuLi9yYXcnO1xuLy8vIEZsYWdzIGluZGljYXRpbmcgd2hhdCBldmVudHMgYXJlIGVuYWJsZWQgZm9yIGNvbGxpZGVycy5cbmV4cG9ydCB2YXIgQWN0aXZlRXZlbnRzO1xuKGZ1bmN0aW9uIChBY3RpdmVFdmVudHMpIHtcbiAgICAvLy8gRW5hYmxlIGludGVyc2VjdGlvbiBldmVudHMuXG4gICAgQWN0aXZlRXZlbnRzW0FjdGl2ZUV2ZW50c1tcIklOVEVSU0VDVElPTl9FVkVOVFNcIl0gPSAxXSA9IFwiSU5URVJTRUNUSU9OX0VWRU5UU1wiO1xuICAgIC8vLyBFbmFibGUgY29udGFjdCBldmVudHMuXG4gICAgQWN0aXZlRXZlbnRzW0FjdGl2ZUV2ZW50c1tcIkNPTlRBQ1RfRVZFTlRTXCJdID0gMl0gPSBcIkNPTlRBQ1RfRVZFTlRTXCI7XG59KShBY3RpdmVFdmVudHMgfHwgKEFjdGl2ZUV2ZW50cyA9IHt9KSk7XG4vKipcbiAqIEEgc3RydWN0dXJlIHJlc3BvbnNpYmxlIGZvciBjb2xsZWN0aW5nIGV2ZW50cyBnZW5lcmF0ZWRcbiAqIGJ5IHRoZSBwaHlzaWNzIGVuZ2luZS5cbiAqXG4gKiBUbyBhdm9pZCBsZWFraW5nIFdBU00gcmVzb3VyY2VzLCB0aGlzIE1VU1QgYmUgZnJlZWQgbWFudWFsbHkgd2l0aCBgZXZlbnRRdWV1ZS5mcmVlKClgXG4gKiBvbmNlIHlvdSBhcmUgZG9uZSB1c2luZyBpdC5cbiAqL1xudmFyIEV2ZW50UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBldmVudCBjb2xsZWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXV0b0RyYWluIC1zZXR0aW5nIHRoaXMgdG8gYHRydWVgIGlzIHN0cm9uZ2x5IHJlY29tbWVuZGVkLiBJZiB0cnVlLCB0aGUgY29sbGVjdG9yIHdpbGxcbiAgICAgKiBiZSBhdXRvbWF0aWNhbGx5IGRyYWluZWQgYmVmb3JlIGVhY2ggYHdvcmxkLnN0ZXAoY29sbGVjdG9yKWAuIElmIGZhbHNlLCB0aGUgY29sbGVjdG9yIHdpbGxcbiAgICAgKiBrZWVwIGFsbCBldmVudHMgaW4gbWVtb3J5IHVubGVzcyBpdCBpcyBtYW51YWxseSBkcmFpbmVkL2NsZWFyZWQ7IHRoaXMgbWF5IGxlYWQgdG8gdW5ib3VuZGVkIHVzZSBvZlxuICAgICAqIFJBTSBpZiBubyBkcmFpbiBpcyBwZXJmb3JtZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRXZlbnRRdWV1ZShhdXRvRHJhaW4sIHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3RXZlbnRRdWV1ZShhdXRvRHJhaW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWxlYXNlIHRoZSBXQVNNIG1lbW9yeSBvY2N1cGllZCBieSB0aGlzIGV2ZW50LXF1ZXVlLlxuICAgICAqL1xuICAgIEV2ZW50UXVldWUucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3LmZyZWUoKTtcbiAgICAgICAgdGhpcy5yYXcgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBqYXZhc2NyaXB0IGNsb3N1cmUgb24gZWFjaCBjb250YWN0IGV2ZW50IG9mIHRoaXMgY29sbGVjdG9yLCB0aGVuIGNsZWFyXG4gICAgICogdGhlIGludGVybmFsIGNvbnRhY3QgZXZlbnQgYnVmZmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBKYXZhU2NyaXB0IGNsb3N1cmUgYXBwbGllZCB0byBlYWNoIGNvbnRhY3QgZXZlbnQuIFRoZVxuICAgICAqIGNsb3N1cmUgc2hvdWxkIHRha2UgdGhyZWUgYXJndW1lbnRzOiB0d28gaW50ZWdlcnMgcmVwcmVzZW50aW5nIHRoZSBoYW5kbGVzIG9mIHRoZSBjb2xsaWRlcnNcbiAgICAgKiBpbnZvbHZlZCBpbiB0aGUgY29udGFjdCwgYW5kIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBjb250YWN0IHN0YXJ0ZWQgKHRydWUpIG9yIHN0b3BwZWRcbiAgICAgKiAoZmFsc2UpLlxuICAgICAqL1xuICAgIEV2ZW50UXVldWUucHJvdG90eXBlLmRyYWluQ29udGFjdEV2ZW50cyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHRoaXMucmF3LmRyYWluQ29udGFjdEV2ZW50cyhmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIGphdmFzY3JpcHQgY2xvc3VyZSBvbiBlYWNoIGludGVyc2VjdGlvbiBldmVudCBvZiB0aGlzIGNvbGxlY3RvciwgdGhlbiBjbGVhclxuICAgICAqIHRoZSBpbnRlcm5hbCBpbnRlcnNlY3Rpb24gZXZlbnQgYnVmZmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBKYXZhU2NyaXB0IGNsb3N1cmUgYXBwbGllZCB0byBlYWNoIGludGVyc2VjdGlvbiBldmVudC4gVGhlXG4gICAgICogY2xvc3VyZSBzaG91bGQgdGFrZSBmb3VyIGFyZ3VtZW50czogdHdvIGludGVnZXJzIHJlcHJlc2VudGluZyB0aGUgaGFuZGxlcyBvZiB0aGUgY29sbGlkZXJzXG4gICAgICogaW52b2x2ZWQgaW4gdGhlIGludGVyc2VjdGlvbiwgYW5kIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZXkgc3RhcnRlZCBpbnRlcnNlY3RpbmcgKHRydWUpIG9yXG4gICAgICogc3RvcHBlZCBpbnRlcnNlY3RpbmcgKGZhbHNlKS5cbiAgICAgKi9cbiAgICBFdmVudFF1ZXVlLnByb3RvdHlwZS5kcmFpbkludGVyc2VjdGlvbkV2ZW50cyA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHRoaXMucmF3LmRyYWluSW50ZXJzZWN0aW9uRXZlbnRzKGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgZXZlbnRzIGNvbnRhaW5lZCBieSB0aGlzIGNvbGxlY3RvclxuICAgICAqL1xuICAgIEV2ZW50UXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhdy5jbGVhcigpO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50UXVldWU7XG59KCkpO1xuZXhwb3J0IHsgRXZlbnRRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRfcXVldWUuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi93b3JsZCc7XG5leHBvcnQgKiBmcm9tICcuL3BoeXNpY3NfcGlwZWxpbmUnO1xuZXhwb3J0ICogZnJvbSAnLi9zZXJpYWxpemF0aW9uX3BpcGVsaW5lJztcbmV4cG9ydCAqIGZyb20gJy4vZXZlbnRfcXVldWUnO1xuZXhwb3J0ICogZnJvbSAnLi9waHlzaWNzX2hvb2tzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImV4cG9ydCB2YXIgQWN0aXZlSG9va3M7XG4oZnVuY3Rpb24gKEFjdGl2ZUhvb2tzKSB7XG4gICAgQWN0aXZlSG9va3NbQWN0aXZlSG9va3NbXCJGSUxURVJfQ09OVEFDVF9QQUlSU1wiXSA9IDFdID0gXCJGSUxURVJfQ09OVEFDVF9QQUlSU1wiO1xuICAgIEFjdGl2ZUhvb2tzW0FjdGl2ZUhvb2tzW1wiRklMVEVSX0lOVEVSU0VDVElPTl9QQUlSU1wiXSA9IDJdID0gXCJGSUxURVJfSU5URVJTRUNUSU9OX1BBSVJTXCI7XG4gICAgLy8gTU9ESUZZX1NPTFZFUl9DT05UQUNUUyA9IDBiMDEwMCwgLyogTm90IHN1cHBvcnRlZCB5ZXQgaW4gSlMuICovXG59KShBY3RpdmVIb29rcyB8fCAoQWN0aXZlSG9va3MgPSB7fSkpO1xuZXhwb3J0IHZhciBTb2x2ZXJGbGFncztcbihmdW5jdGlvbiAoU29sdmVyRmxhZ3MpIHtcbiAgICBTb2x2ZXJGbGFnc1tTb2x2ZXJGbGFnc1tcIkVNUFRZXCJdID0gMF0gPSBcIkVNUFRZXCI7XG4gICAgU29sdmVyRmxhZ3NbU29sdmVyRmxhZ3NbXCJDT01QVVRFX0lNUFVMU0VcIl0gPSAxXSA9IFwiQ09NUFVURV9JTVBVTFNFXCI7XG59KShTb2x2ZXJGbGFncyB8fCAoU29sdmVyRmxhZ3MgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGh5c2ljc19ob29rcy5qcy5tYXAiLCJpbXBvcnQgeyBSYXdQaHlzaWNzUGlwZWxpbmUgfSBmcm9tIFwiLi4vcmF3XCI7XG5pbXBvcnQgeyBWZWN0b3JPcHMgfSBmcm9tIFwiLi4vbWF0aFwiO1xudmFyIFBoeXNpY3NQaXBlbGluZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQaHlzaWNzUGlwZWxpbmUocmF3KSB7XG4gICAgICAgIHRoaXMucmF3ID0gcmF3IHx8IG5ldyBSYXdQaHlzaWNzUGlwZWxpbmUoKTtcbiAgICB9XG4gICAgUGh5c2ljc1BpcGVsaW5lLnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJhdy5mcmVlKCk7XG4gICAgICAgIHRoaXMucmF3ID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgUGh5c2ljc1BpcGVsaW5lLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKGdyYXZpdHksIGludGVncmF0aW9uUGFyYW1ldGVycywgaXNsYW5kcywgYnJvYWRQaGFzZSwgbmFycm93UGhhc2UsIGJvZGllcywgY29sbGlkZXJzLCBqb2ludHMsIGNjZFNvbHZlciwgZXZlbnRRdWV1ZSwgaG9va3MpIHtcbiAgICAgICAgdmFyIHJhd0cgPSBWZWN0b3JPcHMuaW50b1JhdyhncmF2aXR5KTtcbiAgICAgICAgaWYgKCEhZXZlbnRRdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy5yYXcuc3RlcFdpdGhFdmVudHMocmF3RywgaW50ZWdyYXRpb25QYXJhbWV0ZXJzLnJhdywgaXNsYW5kcy5yYXcsIGJyb2FkUGhhc2UucmF3LCBuYXJyb3dQaGFzZS5yYXcsIGJvZGllcy5yYXcsIGNvbGxpZGVycy5yYXcsIGpvaW50cy5yYXcsIGNjZFNvbHZlci5yYXcsIGV2ZW50UXVldWUucmF3LCBob29rcywgISFob29rcyA/IGhvb2tzLmZpbHRlckNvbnRhY3RQYWlyIDogbnVsbCwgISFob29rcyA/IGhvb2tzLmZpbHRlckludGVyc2VjdGlvblBhaXIgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmF3LnN0ZXAocmF3RywgaW50ZWdyYXRpb25QYXJhbWV0ZXJzLnJhdywgaXNsYW5kcy5yYXcsIGJyb2FkUGhhc2UucmF3LCBuYXJyb3dQaGFzZS5yYXcsIGJvZGllcy5yYXcsIGNvbGxpZGVycy5yYXcsIGpvaW50cy5yYXcsIGNjZFNvbHZlci5yYXcpO1xuICAgICAgICB9XG4gICAgICAgIHJhd0cuZnJlZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBoeXNpY3NQaXBlbGluZTtcbn0oKSk7XG5leHBvcnQgeyBQaHlzaWNzUGlwZWxpbmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBoeXNpY3NfcGlwZWxpbmUuanMubWFwIiwiaW1wb3J0IHsgUmF3UXVlcnlQaXBlbGluZSB9IGZyb20gXCIuLi9yYXdcIjtcbmltcG9ydCB7IFBvaW50Q29sbGlkZXJQcm9qZWN0aW9uLCBSYXlDb2xsaWRlckludGVyc2VjdGlvbiwgUmF5Q29sbGlkZXJUb2ksIFNoYXBlQ29sbGlkZXJUT0kgfSBmcm9tIFwiLi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IFJvdGF0aW9uT3BzLCBWZWN0b3JPcHMgfSBmcm9tIFwiLi4vbWF0aFwiO1xuLyoqXG4gKiBBIHBpcGVsaW5lIGZvciBwZXJmb3JtaW5nIHF1ZXJpZXMgb24gYWxsIHRoZSBjb2xsaWRlcnMgb2YgYSBzY2VuZS5cbiAqXG4gKiBUbyBhdm9pZCBsZWFraW5nIFdBU00gcmVzb3VyY2VzLCB0aGlzIE1VU1QgYmUgZnJlZWQgbWFudWFsbHkgd2l0aCBgcXVlcnlQaXBlbGluZS5mcmVlKClgXG4gKiBvbmNlIHlvdSBhcmUgZG9uZSB1c2luZyBpdCAoYW5kIGFsbCB0aGUgcmlnaWQtYm9kaWVzIGl0IGNyZWF0ZWQpLlxuICovXG52YXIgUXVlcnlQaXBlbGluZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWVyeVBpcGVsaW5lKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdyB8fCBuZXcgUmF3UXVlcnlQaXBlbGluZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWxlYXNlIHRoZSBXQVNNIG1lbW9yeSBvY2N1cGllZCBieSB0aGlzIHF1ZXJ5IHBpcGVsaW5lLlxuICAgICAqL1xuICAgIFF1ZXJ5UGlwZWxpbmUucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmF3LmZyZWUoKTtcbiAgICAgICAgdGhpcy5yYXcgPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhY2NlbGVyYXRpb24gc3RydWN0dXJlIG9mIHRoZSBxdWVyeSBwaXBlbGluZS5cbiAgICAgKiBAcGFyYW0gYm9kaWVzIC0gVGhlIHNldCBvZiByaWdpZC1ib2RpZXMgdGFraW5nIHBhcnQgaW4gdGhpcyBwaXBlbGluZS5cbiAgICAgKiBAcGFyYW0gY29sbGlkZXJzIC0gVGhlIHNldCBvZiBjb2xsaWRlcnMgdGFraW5nIHBhcnQgaW4gdGhpcyBwaXBlbGluZS5cbiAgICAgKi9cbiAgICBRdWVyeVBpcGVsaW5lLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoaXNsYW5kcywgYm9kaWVzLCBjb2xsaWRlcnMpIHtcbiAgICAgICAgdGhpcy5yYXcudXBkYXRlKGlzbGFuZHMucmF3LCBib2RpZXMucmF3LCBjb2xsaWRlcnMucmF3KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNsb3Nlc3QgaW50ZXJzZWN0aW9uIGJldHdlZW4gYSByYXkgYW5kIGEgc2V0IG9mIGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVycyAtIFRoZSBzZXQgb2YgY29sbGlkZXJzIHRha2luZyBwYXJ0IGluIHRoaXMgcGlwZWxpbmUuXG4gICAgICogQHBhcmFtIHJheSAtIFRoZSByYXkgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4VG9pIC0gVGhlIG1heGltdW0gdGltZS1vZi1pbXBhY3QgdGhhdCBjYW4gYmUgcmVwb3J0ZWQgYnkgdGhpcyBjYXN0LiBUaGlzIGVmZmVjdGl2ZWx5XG4gICAgICogICBsaW1pdHMgdGhlIGxlbmd0aCBvZiB0aGUgcmF5IHRvIGByYXkuZGlyLm5vcm0oKSAqIG1heFRvaWAuXG4gICAgICogQHBhcmFtIHNvbGlkIC0gSWYgYGZhbHNlYCB0aGVuIHRoZSByYXkgd2lsbCBhdHRlbXB0IHRvIGhpdCB0aGUgYm91bmRhcnkgb2YgYSBzaGFwZSwgZXZlbiBpZiBpdHNcbiAgICAgKiAgIG9yaWdpbiBhbHJlYWR5IGxpZXMgaW5zaWRlIG9mIGEgc2hhcGUuIEluIG90aGVyIHRlcm1zLCBgdHJ1ZWAgaW1wbGllcyB0aGF0IGFsbCBzaGFwZXMgYXJlIHBsYWluLFxuICAgICAqICAgd2hlcmVhcyBgZmFsc2VgIGltcGxpZXMgdGhhdCBhbGwgc2hhcGVzIGFyZSBob2xsb3cgZm9yIHRoaXMgcmF5LWNhc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFVzZWQgdG8gZmlsdGVyIHRoZSBjb2xsaWRlcnMgdGhhdCBjYW4gb3IgY2Fubm90IGJlIGhpdCBieSB0aGUgcmF5LlxuICAgICAqL1xuICAgIFF1ZXJ5UGlwZWxpbmUucHJvdG90eXBlLmNhc3RSYXkgPSBmdW5jdGlvbiAoY29sbGlkZXJzLCByYXksIG1heFRvaSwgc29saWQsIGdyb3Vwcykge1xuICAgICAgICB2YXIgcmF3T3JpZyA9IFZlY3Rvck9wcy5pbnRvUmF3KHJheS5vcmlnaW4pO1xuICAgICAgICB2YXIgcmF3RGlyID0gVmVjdG9yT3BzLmludG9SYXcocmF5LmRpcik7XG4gICAgICAgIHZhciByZXN1bHQgPSBSYXlDb2xsaWRlclRvaS5mcm9tUmF3KHRoaXMucmF3LmNhc3RSYXkoY29sbGlkZXJzLnJhdywgcmF3T3JpZywgcmF3RGlyLCBtYXhUb2ksIHNvbGlkLCBncm91cHMpKTtcbiAgICAgICAgcmF3T3JpZy5mcmVlKCk7XG4gICAgICAgIHJhd0Rpci5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjbG9zZXN0IGludGVyc2VjdGlvbiBiZXR3ZWVuIGEgcmF5IGFuZCBhIHNldCBvZiBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIFRoaXMgYWxzbyBjb21wdXRlcyB0aGUgbm9ybWFsIGF0IHRoZSBoaXQgcG9pbnQuXG4gICAgICogQHBhcmFtIGNvbGxpZGVycyAtIFRoZSBzZXQgb2YgY29sbGlkZXJzIHRha2luZyBwYXJ0IGluIHRoaXMgcGlwZWxpbmUuXG4gICAgICogQHBhcmFtIHJheSAtIFRoZSByYXkgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4VG9pIC0gVGhlIG1heGltdW0gdGltZS1vZi1pbXBhY3QgdGhhdCBjYW4gYmUgcmVwb3J0ZWQgYnkgdGhpcyBjYXN0LiBUaGlzIGVmZmVjdGl2ZWx5XG4gICAgICogICBsaW1pdHMgdGhlIGxlbmd0aCBvZiB0aGUgcmF5IHRvIGByYXkuZGlyLm5vcm0oKSAqIG1heFRvaWAuXG4gICAgICogQHBhcmFtIHNvbGlkIC0gSWYgYGZhbHNlYCB0aGVuIHRoZSByYXkgd2lsbCBhdHRlbXB0IHRvIGhpdCB0aGUgYm91bmRhcnkgb2YgYSBzaGFwZSwgZXZlbiBpZiBpdHNcbiAgICAgKiAgIG9yaWdpbiBhbHJlYWR5IGxpZXMgaW5zaWRlIG9mIGEgc2hhcGUuIEluIG90aGVyIHRlcm1zLCBgdHJ1ZWAgaW1wbGllcyB0aGF0IGFsbCBzaGFwZXMgYXJlIHBsYWluLFxuICAgICAqICAgd2hlcmVhcyBgZmFsc2VgIGltcGxpZXMgdGhhdCBhbGwgc2hhcGVzIGFyZSBob2xsb3cgZm9yIHRoaXMgcmF5LWNhc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFVzZWQgdG8gZmlsdGVyIHRoZSBjb2xsaWRlcnMgdGhhdCBjYW4gb3IgY2Fubm90IGJlIGhpdCBieSB0aGUgcmF5LlxuICAgICAqL1xuICAgIFF1ZXJ5UGlwZWxpbmUucHJvdG90eXBlLmNhc3RSYXlBbmRHZXROb3JtYWwgPSBmdW5jdGlvbiAoY29sbGlkZXJzLCByYXksIG1heFRvaSwgc29saWQsIGdyb3Vwcykge1xuICAgICAgICB2YXIgcmF3T3JpZyA9IFZlY3Rvck9wcy5pbnRvUmF3KHJheS5vcmlnaW4pO1xuICAgICAgICB2YXIgcmF3RGlyID0gVmVjdG9yT3BzLmludG9SYXcocmF5LmRpcik7XG4gICAgICAgIHZhciByZXN1bHQgPSBSYXlDb2xsaWRlckludGVyc2VjdGlvbi5mcm9tUmF3KHRoaXMucmF3LmNhc3RSYXlBbmRHZXROb3JtYWwoY29sbGlkZXJzLnJhdywgcmF3T3JpZywgcmF3RGlyLCBtYXhUb2ksIHNvbGlkLCBncm91cHMpKTtcbiAgICAgICAgcmF3T3JpZy5mcmVlKCk7XG4gICAgICAgIHJhd0Rpci5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYXN0IGEgcmF5IGFuZCBjb2xsZWN0cyBhbGwgdGhlIGludGVyc2VjdGlvbnMgYmV0d2VlbiBhIHJheSBhbmQgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVycyAtIFRoZSBzZXQgb2YgY29sbGlkZXJzIHRha2luZyBwYXJ0IGluIHRoaXMgcGlwZWxpbmUuXG4gICAgICogQHBhcmFtIHJheSAtIFRoZSByYXkgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4VG9pIC0gVGhlIG1heGltdW0gdGltZS1vZi1pbXBhY3QgdGhhdCBjYW4gYmUgcmVwb3J0ZWQgYnkgdGhpcyBjYXN0LiBUaGlzIGVmZmVjdGl2ZWx5XG4gICAgICogICBsaW1pdHMgdGhlIGxlbmd0aCBvZiB0aGUgcmF5IHRvIGByYXkuZGlyLm5vcm0oKSAqIG1heFRvaWAuXG4gICAgICogQHBhcmFtIHNvbGlkIC0gSWYgYGZhbHNlYCB0aGVuIHRoZSByYXkgd2lsbCBhdHRlbXB0IHRvIGhpdCB0aGUgYm91bmRhcnkgb2YgYSBzaGFwZSwgZXZlbiBpZiBpdHNcbiAgICAgKiAgIG9yaWdpbiBhbHJlYWR5IGxpZXMgaW5zaWRlIG9mIGEgc2hhcGUuIEluIG90aGVyIHRlcm1zLCBgdHJ1ZWAgaW1wbGllcyB0aGF0IGFsbCBzaGFwZXMgYXJlIHBsYWluLFxuICAgICAqICAgd2hlcmVhcyBgZmFsc2VgIGltcGxpZXMgdGhhdCBhbGwgc2hhcGVzIGFyZSBob2xsb3cgZm9yIHRoaXMgcmF5LWNhc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFVzZWQgdG8gZmlsdGVyIHRoZSBjb2xsaWRlcnMgdGhhdCBjYW4gb3IgY2Fubm90IGJlIGhpdCBieSB0aGUgcmF5LlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBjYWxsZWQgb25jZSBwZXIgaGl0IChpbiBubyBwYXJ0aWN1bGFyIG9yZGVyKSBiZXR3ZWVuIGEgcmF5IGFuZCBhIGNvbGxpZGVyLlxuICAgICAqICAgSWYgdGhpcyBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRoZW4gdGhlIGNhc3Qgd2lsbCBzdG9wIGFuZCBubyBmdXJ0aGVyIGhpdHMgd2lsbCBiZSBkZXRlY3RlZC9yZXBvcnRlZC5cbiAgICAgKi9cbiAgICBRdWVyeVBpcGVsaW5lLnByb3RvdHlwZS5pbnRlcnNlY3Rpb25zV2l0aFJheSA9IGZ1bmN0aW9uIChjb2xsaWRlcnMsIHJheSwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmF3T3JpZyA9IFZlY3Rvck9wcy5pbnRvUmF3KHJheS5vcmlnaW4pO1xuICAgICAgICB2YXIgcmF3RGlyID0gVmVjdG9yT3BzLmludG9SYXcocmF5LmRpcik7XG4gICAgICAgIHZhciByYXdDYWxsYmFjayA9IGZ1bmN0aW9uIChyYXdJbnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFJheUNvbGxpZGVySW50ZXJzZWN0aW9uLmZyb21SYXcocmF3SW50ZXIpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yYXcuaW50ZXJzZWN0aW9uc1dpdGhSYXkoY29sbGlkZXJzLnJhdywgcmF3T3JpZywgcmF3RGlyLCBtYXhUb2ksIHNvbGlkLCBncm91cHMsIHJhd0NhbGxiYWNrKTtcbiAgICAgICAgcmF3T3JpZy5mcmVlKCk7XG4gICAgICAgIHJhd0Rpci5mcmVlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoYW5kbGUgb2YgdXAgdG8gb25lIGNvbGxpZGVyIGludGVyc2VjdGluZyB0aGUgZ2l2ZW4gc2hhcGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXJzIC0gVGhlIHNldCBvZiBjb2xsaWRlcnMgdGFraW5nIHBhcnQgaW4gdGhpcyBwaXBlbGluZS5cbiAgICAgKiBAcGFyYW0gc2hhcGVQb3MgLSBUaGUgcG9zaXRpb24gb2YgdGhlIHNoYXBlIHVzZWQgZm9yIHRoZSBpbnRlcnNlY3Rpb24gdGVzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGVSb3QgLSBUaGUgb3JpZW50YXRpb24gb2YgdGhlIHNoYXBlIHVzZWQgZm9yIHRoZSBpbnRlcnNlY3Rpb24gdGVzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdXNlZCBmb3IgdGhlIGludGVyc2VjdGlvbiB0ZXN0LlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBUaGUgYml0IGdyb3VwcyBhbmQgZmlsdGVyIGFzc29jaWF0ZWQgdG8gdGhlIHJheSwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgaGl0IHRoZSBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGUgcmF5J3MgZ3JvdXAuXG4gICAgICovXG4gICAgUXVlcnlQaXBlbGluZS5wcm90b3R5cGUuaW50ZXJzZWN0aW9uV2l0aFNoYXBlID0gZnVuY3Rpb24gKGNvbGxpZGVycywgc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZSwgZ3JvdXBzKSB7XG4gICAgICAgIHZhciByYXdQb3MgPSBWZWN0b3JPcHMuaW50b1JhdyhzaGFwZVBvcyk7XG4gICAgICAgIHZhciByYXdSb3QgPSBSb3RhdGlvbk9wcy5pbnRvUmF3KHNoYXBlUm90KTtcbiAgICAgICAgdmFyIHJhd1NoYXBlID0gc2hhcGUuaW50b1JhdygpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5yYXcuaW50ZXJzZWN0aW9uV2l0aFNoYXBlKGNvbGxpZGVycy5yYXcsIHJhd1BvcywgcmF3Um90LCByYXdTaGFwZSwgZ3JvdXBzKTtcbiAgICAgICAgcmF3UG9zLmZyZWUoKTtcbiAgICAgICAgcmF3Um90LmZyZWUoKTtcbiAgICAgICAgcmF3U2hhcGUuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgcHJvamVjdGlvbiBvZiBhIHBvaW50IG9uIHRoZSBjbG9zZXN0IGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVycyAtIFRoZSBzZXQgb2YgY29sbGlkZXJzIHRha2luZyBwYXJ0IGluIHRoaXMgcGlwZWxpbmUuXG4gICAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IHRvIHByb2plY3QuXG4gICAgICogQHBhcmFtIHNvbGlkIC0gSWYgdGhpcyBpcyBzZXQgdG8gYHRydWVgIHRoZW4gdGhlIGNvbGxpZGVyIHNoYXBlcyBhcmUgY29uc2lkZXJlZCB0b1xuICAgICAqICAgYmUgcGxhaW4gKGlmIHRoZSBwb2ludCBpcyBsb2NhdGVkIGluc2lkZSBvZiBhIHBsYWluIHNoYXBlLCBpdHMgcHJvamVjdGlvbiBpcyB0aGUgcG9pbnRcbiAgICAgKiAgIGl0c2VsZikuIElmIGl0IGlzIHNldCB0byBgZmFsc2VgIHRoZSBjb2xsaWRlciBzaGFwZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgaG9sbG93XG4gICAgICogICAoaWYgdGhlIHBvaW50IGlzIGxvY2F0ZWQgaW5zaWRlIG9mIGFuIGhvbGxvdyBzaGFwZSwgaXQgaXMgcHJvamVjdGVkIG9uIHRoZSBzaGFwZSdzXG4gICAgICogICBib3VuZGFyeSkuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgcG9pbnQgdG8gcHJvamVjdCwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgcHJvamVjdCBvbiBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGUgcmF5J3MgZ3JvdXAuXG4gICAgICovXG4gICAgUXVlcnlQaXBlbGluZS5wcm90b3R5cGUucHJvamVjdFBvaW50ID0gZnVuY3Rpb24gKGNvbGxpZGVycywgcG9pbnQsIHNvbGlkLCBncm91cHMpIHtcbiAgICAgICAgdmFyIHJhd1BvaW50ID0gVmVjdG9yT3BzLmludG9SYXcocG9pbnQpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gUG9pbnRDb2xsaWRlclByb2plY3Rpb24uZnJvbVJhdyh0aGlzLnJhdy5wcm9qZWN0UG9pbnQoY29sbGlkZXJzLnJhdywgcmF3UG9pbnQsIHNvbGlkLCBncm91cHMpKTtcbiAgICAgICAgcmF3UG9pbnQuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgdGhlIGNvbGxpZGVycyBjb250YWluaW5nIHRoZSBnaXZlbiBwb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcnMgLSBUaGUgc2V0IG9mIGNvbGxpZGVycyB0YWtpbmcgcGFydCBpbiB0aGlzIHBpcGVsaW5lLlxuICAgICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB1c2VkIGZvciB0aGUgY29udGFpbm1lbnQgdGVzdC5cbiAgICAgKiBAcGFyYW0gZ3JvdXBzIC0gVGhlIGJpdCBncm91cHMgYW5kIGZpbHRlciBhc3NvY2lhdGVkIHRvIHRoZSBwb2ludCB0byB0ZXN0LCBpbiBvcmRlciB0byBvbmx5XG4gICAgICogICB0ZXN0IG9uIGNvbGxpZGVycyB3aXRoIGNvbGxpc2lvbiBncm91cHMgY29tcGF0aWJsZSB3aXRoIHRoZSByYXkncyBncm91cC5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGZ1bmN0aW9uIGNhbGxlZCB3aXRoIHRoZSBoYW5kbGVzIG9mIGVhY2ggY29sbGlkZXIgd2l0aCBhIHNoYXBlXG4gICAgICogICBjb250YWluaW5nIHRoZSBgcG9pbnRgLlxuICAgICAqL1xuICAgIFF1ZXJ5UGlwZWxpbmUucHJvdG90eXBlLmludGVyc2VjdGlvbnNXaXRoUG9pbnQgPSBmdW5jdGlvbiAoY29sbGlkZXJzLCBwb2ludCwgZ3JvdXBzLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmF3UG9pbnQgPSBWZWN0b3JPcHMuaW50b1Jhdyhwb2ludCk7XG4gICAgICAgIHRoaXMucmF3LmludGVyc2VjdGlvbnNXaXRoUG9pbnQoY29sbGlkZXJzLnJhdywgcmF3UG9pbnQsIGdyb3VwcywgY2FsbGJhY2spO1xuICAgICAgICByYXdQb2ludC5mcmVlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYXN0cyBhIHNoYXBlIGF0IGEgY29uc3RhbnQgbGluZWFyIHZlbG9jaXR5IGFuZCByZXRyaWV2ZSB0aGUgZmlyc3QgY29sbGlkZXIgaXQgaGl0cy5cbiAgICAgKiBUaGlzIGlzIHNpbWlsYXIgdG8gcmF5LWNhc3RpbmcgZXhjZXB0IHRoYXQgd2UgYXJlIGNhc3RpbmcgYSB3aG9sZSBzaGFwZSBpbnN0ZWFkIG9mXG4gICAgICoganVzdCBhIHBvaW50ICh0aGUgcmF5IG9yaWdpbikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXJzIC0gVGhlIHNldCBvZiBjb2xsaWRlcnMgdGFraW5nIHBhcnQgaW4gdGhpcyBwaXBlbGluZS5cbiAgICAgKiBAcGFyYW0gc2hhcGVQb3MgLSBUaGUgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgc2hhcGUgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGVSb3QgLSBUaGUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgc2hhcGUgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGVWZWwgLSBUaGUgY29uc3RhbnQgdmVsb2NpdHkgb2YgdGhlIHNoYXBlIHRvIGNhc3QgKGkuZS4gdGhlIGNhc3QgZGlyZWN0aW9uKS5cbiAgICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4VG9pIC0gVGhlIG1heGltdW0gdGltZS1vZi1pbXBhY3QgdGhhdCBjYW4gYmUgcmVwb3J0ZWQgYnkgdGhpcyBjYXN0LiBUaGlzIGVmZmVjdGl2ZWx5XG4gICAgICogICBsaW1pdHMgdGhlIGRpc3RhbmNlIHRyYXZlbGVkIGJ5IHRoZSBzaGFwZSB0byBgc2hhcGVWZWwubm9ybSgpICogbWF4VG9pYC5cbiAgICAgKiBAcGFyYW0gZ3JvdXBzIC0gVGhlIGJpdCBncm91cHMgYW5kIGZpbHRlciBhc3NvY2lhdGVkIHRvIHRoZSBzaGFwZSB0byBjYXN0LCBpbiBvcmRlciB0byBvbmx5XG4gICAgICogICB0ZXN0IG9uIGNvbGxpZGVycyB3aXRoIGNvbGxpc2lvbiBncm91cHMgY29tcGF0aWJsZSB3aXRoIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgUXVlcnlQaXBlbGluZS5wcm90b3R5cGUuY2FzdFNoYXBlID0gZnVuY3Rpb24gKGNvbGxpZGVycywgc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZVZlbCwgc2hhcGUsIG1heFRvaSwgZ3JvdXBzKSB7XG4gICAgICAgIHZhciByYXdQb3MgPSBWZWN0b3JPcHMuaW50b1JhdyhzaGFwZVBvcyk7XG4gICAgICAgIHZhciByYXdSb3QgPSBSb3RhdGlvbk9wcy5pbnRvUmF3KHNoYXBlUm90KTtcbiAgICAgICAgdmFyIHJhd1ZlbCA9IFZlY3Rvck9wcy5pbnRvUmF3KHNoYXBlVmVsKTtcbiAgICAgICAgdmFyIHJhd1NoYXBlID0gc2hhcGUuaW50b1JhdygpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gU2hhcGVDb2xsaWRlclRPSS5mcm9tUmF3KHRoaXMucmF3LmNhc3RTaGFwZShjb2xsaWRlcnMucmF3LCByYXdQb3MsIHJhd1JvdCwgcmF3VmVsLCByYXdTaGFwZSwgbWF4VG9pLCBncm91cHMpKTtcbiAgICAgICAgcmF3UG9zLmZyZWUoKTtcbiAgICAgICAgcmF3Um90LmZyZWUoKTtcbiAgICAgICAgcmF3VmVsLmZyZWUoKTtcbiAgICAgICAgcmF3U2hhcGUuZnJlZSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYWxsIHRoZSBjb2xsaWRlcnMgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcnMgLSBUaGUgc2V0IG9mIGNvbGxpZGVycyB0YWtpbmcgcGFydCBpbiB0aGlzIHBpcGVsaW5lLlxuICAgICAqIEBwYXJhbSBzaGFwZVBvcyAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2hhcGUgdG8gdGVzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGVSb3QgLSBUaGUgb3JpZW50YXRpb24gb2YgdGhlIHNoYXBlIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgc2hhcGUgdG8gdGVzdCwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgdGVzdCBvbiBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgZnVuY3Rpb24gY2FsbGVkIHdpdGggdGhlIGhhbmRsZXMgb2YgZWFjaCBjb2xsaWRlciBpbnRlcnNlY3RpbmcgdGhlIGBzaGFwZWAuXG4gICAgICovXG4gICAgUXVlcnlQaXBlbGluZS5wcm90b3R5cGUuaW50ZXJzZWN0aW9uc1dpdGhTaGFwZSA9IGZ1bmN0aW9uIChjb2xsaWRlcnMsIHNoYXBlUG9zLCBzaGFwZVJvdCwgc2hhcGUsIGdyb3VwcywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJhd1BvcyA9IFZlY3Rvck9wcy5pbnRvUmF3KHNoYXBlUG9zKTtcbiAgICAgICAgdmFyIHJhd1JvdCA9IFJvdGF0aW9uT3BzLmludG9SYXcoc2hhcGVSb3QpO1xuICAgICAgICB2YXIgcmF3U2hhcGUgPSBzaGFwZS5pbnRvUmF3KCk7XG4gICAgICAgIHRoaXMucmF3LmludGVyc2VjdGlvbnNXaXRoU2hhcGUoY29sbGlkZXJzLnJhdywgcmF3UG9zLCByYXdSb3QsIHJhd1NoYXBlLCBncm91cHMsIGNhbGxiYWNrKTtcbiAgICAgICAgcmF3UG9zLmZyZWUoKTtcbiAgICAgICAgcmF3Um90LmZyZWUoKTtcbiAgICAgICAgcmF3U2hhcGUuZnJlZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGhhbmRsZXMgb2YgYWxsIHRoZSBjb2xsaWRlcnMgd2l0aCBhbiBBQUJCIGludGVyc2VjdGluZyB0aGUgZ2l2ZW4gQUFCQi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhYWJiQ2VudGVyIC0gVGhlIGNlbnRlciBvZiB0aGUgQUFCQiB0byB0ZXN0LlxuICAgICAqIEBwYXJhbSBhYWJiSGFsZkV4dGVudHMgLSBUaGUgaGFsZi1leHRlbnRzIG9mIHRoZSBBQUJCIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgaGFuZGxlcyBvZiBhbGwgdGhlIGNvbGxpZGVyc1xuICAgICAqICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseSBpbnRlcnNlY3RpbmcgdGhlIGdpdmVuIEFBQkIuXG4gICAgICovXG4gICAgUXVlcnlQaXBlbGluZS5wcm90b3R5cGUuY29sbGlkZXJzV2l0aEFhYmJJbnRlcnNlY3RpbmdBYWJiID0gZnVuY3Rpb24gKGFhYmJDZW50ZXIsIGFhYmJIYWxmRXh0ZW50cywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJhd0NlbnRlciA9IFZlY3Rvck9wcy5pbnRvUmF3KGFhYmJDZW50ZXIpO1xuICAgICAgICB2YXIgcmF3SGFsZkV4dGVudHMgPSBWZWN0b3JPcHMuaW50b1JhdyhhYWJiSGFsZkV4dGVudHMpO1xuICAgICAgICB0aGlzLnJhdy5jb2xsaWRlcnNXaXRoQWFiYkludGVyc2VjdGluZ0FhYmIocmF3Q2VudGVyLCByYXdIYWxmRXh0ZW50cywgY2FsbGJhY2spO1xuICAgICAgICByYXdDZW50ZXIuZnJlZSgpO1xuICAgICAgICByYXdIYWxmRXh0ZW50cy5mcmVlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlcnlQaXBlbGluZTtcbn0oKSk7XG5leHBvcnQgeyBRdWVyeVBpcGVsaW5lIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeV9waXBlbGluZS5qcy5tYXAiLCJpbXBvcnQgeyBSYXdTZXJpYWxpemF0aW9uUGlwZWxpbmUsIH0gZnJvbSBcIi4uL3Jhd1wiO1xuaW1wb3J0IHsgVmVjdG9yT3BzIH0gZnJvbSBcIi4uL21hdGhcIjtcbmltcG9ydCB7IFdvcmxkIH0gZnJvbSBcIi4vd29ybGRcIjtcbi8qKlxuICogQSBwaXBlbGluZSBmb3Igc2VyaWFsaXppbmcgdGhlIHBoeXNpY3Mgc2NlbmUuXG4gKlxuICogVG8gYXZvaWQgbGVha2luZyBXQVNNIHJlc291cmNlcywgdGhpcyBNVVNUIGJlIGZyZWVkIG1hbnVhbGx5IHdpdGggYHF1ZXJ5UGlwZWxpbmUuZnJlZSgpYFxuICogb25jZSB5b3UgYXJlIGRvbmUgdXNpbmcgaXQgKGFuZCBhbGwgdGhlIHJpZ2lkLWJvZGllcyBpdCBjcmVhdGVkKS5cbiAqL1xudmFyIFNlcmlhbGl6YXRpb25QaXBlbGluZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTZXJpYWxpemF0aW9uUGlwZWxpbmUocmF3KSB7XG4gICAgICAgIHRoaXMucmF3ID0gcmF3IHx8IG5ldyBSYXdTZXJpYWxpemF0aW9uUGlwZWxpbmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVsZWFzZSB0aGUgV0FTTSBtZW1vcnkgb2NjdXBpZWQgYnkgdGhpcyBzZXJpYWxpemF0aW9uIHBpcGVsaW5lLlxuICAgICAqL1xuICAgIFNlcmlhbGl6YXRpb25QaXBlbGluZS5wcm90b3R5cGUuZnJlZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yYXcuZnJlZSgpO1xuICAgICAgICB0aGlzLnJhdyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZSBhIGNvbXBsZXRlIHBoeXNpY3Mgc3RhdGUgaW50byBhIHNpbmdsZSBieXRlIGFycmF5LlxuICAgICAqIEBwYXJhbSBncmF2aXR5IC0gVGhlIGN1cnJlbnQgZ3Jhdml0eSBhZmZlY3RpbmcgdGhlIHNpbXVsYXRpb24uXG4gICAgICogQHBhcmFtIGludGVncmF0aW9uUGFyYW1ldGVycyAtIFRoZSBpbnRlZ3JhdGlvbiBwYXJhbWV0ZXJzIG9mIHRoZSBzaW11bGF0aW9uLlxuICAgICAqIEBwYXJhbSBicm9hZFBoYXNlIC0gVGhlIGJyb2FkLXBoYXNlIG9mIHRoZSBzaW11bGF0aW9uLlxuICAgICAqIEBwYXJhbSBuYXJyb3dQaGFzZSAtIFRoZSBuYXJyb3ctcGhhc2Ugb2YgdGhlIHNpbXVsYXRpb24uXG4gICAgICogQHBhcmFtIGJvZGllcyAtIFRoZSByaWdpZC1ib2RpZXMgdGFraW5nIHBhcnQgaW50byB0aGUgc2ltdWxhdGlvbi5cbiAgICAgKiBAcGFyYW0gY29sbGlkZXJzIC0gVGhlIGNvbGxpZGVycyB0YWtpbmcgcGFydCBpbnRvIHRoZSBzaW11bGF0aW9uLlxuICAgICAqIEBwYXJhbSBqb2ludHMgLSBUaGUgam9pbnRzIHRha2luZyBwYXJ0IGludG8gdGhlIHNpbXVsYXRpb24uXG4gICAgICovXG4gICAgU2VyaWFsaXphdGlvblBpcGVsaW5lLnByb3RvdHlwZS5zZXJpYWxpemVBbGwgPSBmdW5jdGlvbiAoZ3Jhdml0eSwgaW50ZWdyYXRpb25QYXJhbWV0ZXJzLCBpc2xhbmRzLCBicm9hZFBoYXNlLCBuYXJyb3dQaGFzZSwgYm9kaWVzLCBjb2xsaWRlcnMsIGpvaW50cykge1xuICAgICAgICB2YXIgcmF3R3JhID0gVmVjdG9yT3BzLmludG9SYXcoZ3Jhdml0eSk7XG4gICAgICAgIHZhciByZXMgPSB0aGlzLnJhdy5zZXJpYWxpemVBbGwocmF3R3JhLCBpbnRlZ3JhdGlvblBhcmFtZXRlcnMucmF3LCBpc2xhbmRzLnJhdywgYnJvYWRQaGFzZS5yYXcsIG5hcnJvd1BoYXNlLnJhdywgYm9kaWVzLnJhdywgY29sbGlkZXJzLnJhdywgam9pbnRzLnJhdyk7XG4gICAgICAgIHJhd0dyYS5mcmVlKCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZSB0aGUgY29tcGxldGUgcGh5c2ljcyBzdGF0ZSBmcm9tIGEgc2luZ2xlIGJ5dGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBieXRlIGFycmF5IHRvIGRlc2VyaWFsaXplLlxuICAgICAqL1xuICAgIFNlcmlhbGl6YXRpb25QaXBlbGluZS5wcm90b3R5cGUuZGVzZXJpYWxpemVBbGwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gV29ybGQuZnJvbVJhdyh0aGlzLnJhdy5kZXNlcmlhbGl6ZUFsbChkYXRhKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2VyaWFsaXphdGlvblBpcGVsaW5lO1xufSgpKTtcbmV4cG9ydCB7IFNlcmlhbGl6YXRpb25QaXBlbGluZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXphdGlvbl9waXBlbGluZS5qcy5tYXAiLCJpbXBvcnQgeyBCcm9hZFBoYXNlLCBDb2xsaWRlclNldCwgTmFycm93UGhhc2UgfSBmcm9tIFwiLi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IENDRFNvbHZlciwgSW50ZWdyYXRpb25QYXJhbWV0ZXJzLCBJc2xhbmRNYW5hZ2VyLCBKb2ludFNldCwgUmlnaWRCb2R5U2V0IH0gZnJvbSBcIi4uL2R5bmFtaWNzXCI7XG5pbXBvcnQgeyBWZWN0b3JPcHMgfSBmcm9tIFwiLi4vbWF0aFwiO1xuaW1wb3J0IHsgUGh5c2ljc1BpcGVsaW5lIH0gZnJvbSBcIi4vcGh5c2ljc19waXBlbGluZVwiO1xuaW1wb3J0IHsgUXVlcnlQaXBlbGluZSB9IGZyb20gXCIuL3F1ZXJ5X3BpcGVsaW5lXCI7XG5pbXBvcnQgeyBTZXJpYWxpemF0aW9uUGlwZWxpbmUgfSBmcm9tIFwiLi9zZXJpYWxpemF0aW9uX3BpcGVsaW5lXCI7XG4vKipcbiAqIFRoZSBwaHlzaWNzIHdvcmxkLlxuICpcbiAqIFRoaXMgY29udGFpbnMgYWxsIHRoZSBkYXRhLXN0cnVjdHVyZXMgbmVjZXNzYXJ5IGZvciBjcmVhdGluZyBhbmQgc2ltdWxhdGluZ1xuICogYm9kaWVzIHdpdGggY29udGFjdHMsIGpvaW50cywgYW5kIGV4dGVybmFsIGZvcmNlcy5cbiAqL1xudmFyIFdvcmxkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdvcmxkKGdyYXZpdHksIHJhd0ludGVncmF0aW9uUGFyYW1ldGVycywgcmF3SXNsYW5kcywgcmF3QnJvYWRQaGFzZSwgcmF3TmFycm93UGhhc2UsIHJhd0JvZGllcywgcmF3Q29sbGlkZXJzLCByYXdKb2ludHMsIHJhd0NDRFNvbHZlciwgcmF3UXVlcnlQaXBlbGluZSwgcmF3UGh5c2ljc1BpcGVsaW5lLCByYXdTZXJpYWxpemF0aW9uUGlwZWxpbmUpIHtcbiAgICAgICAgdGhpcy5ncmF2aXR5ID0gZ3Jhdml0eTtcbiAgICAgICAgdGhpcy5pbnRlZ3JhdGlvblBhcmFtZXRlcnMgPSBuZXcgSW50ZWdyYXRpb25QYXJhbWV0ZXJzKHJhd0ludGVncmF0aW9uUGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaXNsYW5kcyA9IG5ldyBJc2xhbmRNYW5hZ2VyKHJhd0lzbGFuZHMpO1xuICAgICAgICB0aGlzLmJyb2FkUGhhc2UgPSBuZXcgQnJvYWRQaGFzZShyYXdCcm9hZFBoYXNlKTtcbiAgICAgICAgdGhpcy5uYXJyb3dQaGFzZSA9IG5ldyBOYXJyb3dQaGFzZShyYXdOYXJyb3dQaGFzZSk7XG4gICAgICAgIHRoaXMuYm9kaWVzID0gbmV3IFJpZ2lkQm9keVNldChyYXdCb2RpZXMpO1xuICAgICAgICB0aGlzLmNvbGxpZGVycyA9IG5ldyBDb2xsaWRlclNldChyYXdDb2xsaWRlcnMpO1xuICAgICAgICB0aGlzLmpvaW50cyA9IG5ldyBKb2ludFNldChyYXdKb2ludHMpO1xuICAgICAgICB0aGlzLmNjZFNvbHZlciA9IG5ldyBDQ0RTb2x2ZXIocmF3Q0NEU29sdmVyKTtcbiAgICAgICAgdGhpcy5xdWVyeVBpcGVsaW5lID0gbmV3IFF1ZXJ5UGlwZWxpbmUocmF3UXVlcnlQaXBlbGluZSk7XG4gICAgICAgIHRoaXMucGh5c2ljc1BpcGVsaW5lID0gbmV3IFBoeXNpY3NQaXBlbGluZShyYXdQaHlzaWNzUGlwZWxpbmUpO1xuICAgICAgICB0aGlzLnNlcmlhbGl6YXRpb25QaXBlbGluZSA9IG5ldyBTZXJpYWxpemF0aW9uUGlwZWxpbmUocmF3U2VyaWFsaXphdGlvblBpcGVsaW5lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVsZWFzZSB0aGUgV0FTTSBtZW1vcnkgb2NjdXBpZWQgYnkgdGhpcyBwaHlzaWNzIHdvcmxkLlxuICAgICAqXG4gICAgICogQWxsIHRoZSBmaWVsZHMgb2YgdGhpcyBwaHlzaWNzIHdvcmxkIHdpbGwgYmUgZnJlZWQgYXMgd2VsbCxcbiAgICAgKiBzbyB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhlaXIgYC5mcmVlKClgIG1ldGhvZHMgaW5kaXZpZHVhbGx5LlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmludGVncmF0aW9uUGFyYW1ldGVycy5mcmVlKCk7XG4gICAgICAgIHRoaXMuaXNsYW5kcy5mcmVlKCk7XG4gICAgICAgIHRoaXMuYnJvYWRQaGFzZS5mcmVlKCk7XG4gICAgICAgIHRoaXMubmFycm93UGhhc2UuZnJlZSgpO1xuICAgICAgICB0aGlzLmJvZGllcy5mcmVlKCk7XG4gICAgICAgIHRoaXMuY29sbGlkZXJzLmZyZWUoKTtcbiAgICAgICAgdGhpcy5qb2ludHMuZnJlZSgpO1xuICAgICAgICB0aGlzLmNjZFNvbHZlci5mcmVlKCk7XG4gICAgICAgIHRoaXMucXVlcnlQaXBlbGluZS5mcmVlKCk7XG4gICAgICAgIHRoaXMucGh5c2ljc1BpcGVsaW5lLmZyZWUoKTtcbiAgICAgICAgdGhpcy5zZXJpYWxpemF0aW9uUGlwZWxpbmUuZnJlZSgpO1xuICAgICAgICB0aGlzLmludGVncmF0aW9uUGFyYW1ldGVycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pc2xhbmRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmJyb2FkUGhhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubmFycm93UGhhc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYm9kaWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbGxpZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jY2RTb2x2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuam9pbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnF1ZXJ5UGlwZWxpbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucGh5c2ljc1BpcGVsaW5lID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNlcmlhbGl6YXRpb25QaXBlbGluZSA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIFdvcmxkLmZyb21SYXcgPSBmdW5jdGlvbiAocmF3KSB7XG4gICAgICAgIGlmICghcmF3KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuZXcgV29ybGQoVmVjdG9yT3BzLmZyb21SYXcocmF3LnRha2VHcmF2aXR5KCkpLCByYXcudGFrZUludGVncmF0aW9uUGFyYW1ldGVycygpLCByYXcudGFrZUlzbGFuZE1hbmFnZXIoKSwgcmF3LnRha2VCcm9hZFBoYXNlKCksIHJhdy50YWtlTmFycm93UGhhc2UoKSwgcmF3LnRha2VCb2RpZXMoKSwgcmF3LnRha2VDb2xsaWRlcnMoKSwgcmF3LnRha2VKb2ludHMoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIHNuYXBzaG90IG9mIHRoaXMgd29ybGQuXG4gICAgICpcbiAgICAgKiBVc2UgYFdvcmxkLnJlc3RvcmVTbmFwc2hvdGAgdG8gY3JlYXRlIGEgbmV3IHBoeXNpY3Mgd29ybGQgd2l0aCBhIHN0YXRlIGlkZW50aWNhbCB0b1xuICAgICAqIHRoZSBzdGF0ZSB3aGVuIGAudGFrZVNuYXBzaG90KClgIGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUudGFrZVNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemF0aW9uUGlwZWxpbmUuc2VyaWFsaXplQWxsKHRoaXMuZ3Jhdml0eSwgdGhpcy5pbnRlZ3JhdGlvblBhcmFtZXRlcnMsIHRoaXMuaXNsYW5kcywgdGhpcy5icm9hZFBoYXNlLCB0aGlzLm5hcnJvd1BoYXNlLCB0aGlzLmJvZGllcywgdGhpcy5jb2xsaWRlcnMsIHRoaXMuam9pbnRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgcGh5c2ljcyB3b3JsZCBmcm9tIGEgc25hcHNob3QuXG4gICAgICpcbiAgICAgKiBUaGlzIG5ldyBwaHlzaWNzIHdvcmxkIHdpbGwgYmUgYW4gaWRlbnRpY2FsIGNvcHkgb2YgdGhlIHNuYXBzaG90ZWQgcGh5c2ljcyB3b3JsZC5cbiAgICAgKi9cbiAgICBXb3JsZC5yZXN0b3JlU25hcHNob3QgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgZGVzZXIgPSBuZXcgU2VyaWFsaXphdGlvblBpcGVsaW5lKCk7XG4gICAgICAgIHJldHVybiBkZXNlci5kZXNlcmlhbGl6ZUFsbChkYXRhKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkdmFuY2UgdGhlIHNpbXVsYXRpb24gYnkgb25lIHRpbWUgc3RlcC5cbiAgICAgKlxuICAgICAqIEFsbCBldmVudHMgZ2VuZXJhdGVkIGJ5IHRoZSBwaHlzaWNzIGVuZ2luZSBhcmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBFdmVudFF1ZXVlIC0gKG9wdGlvbmFsKSBzdHJ1Y3R1cmUgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmdcbiAgICAgKiAgIGV2ZW50cyBnZW5lcmF0ZWQgYnkgdGhlIHBoeXNpY3MgZW5naW5lLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKGV2ZW50UXVldWUsIGhvb2tzKSB7XG4gICAgICAgIHRoaXMucGh5c2ljc1BpcGVsaW5lLnN0ZXAodGhpcy5ncmF2aXR5LCB0aGlzLmludGVncmF0aW9uUGFyYW1ldGVycywgdGhpcy5pc2xhbmRzLCB0aGlzLmJyb2FkUGhhc2UsIHRoaXMubmFycm93UGhhc2UsIHRoaXMuYm9kaWVzLCB0aGlzLmNvbGxpZGVycywgdGhpcy5qb2ludHMsIHRoaXMuY2NkU29sdmVyLCBldmVudFF1ZXVlLCBob29rcyk7XG4gICAgICAgIHRoaXMucXVlcnlQaXBlbGluZS51cGRhdGUodGhpcy5pc2xhbmRzLCB0aGlzLmJvZGllcywgdGhpcy5jb2xsaWRlcnMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdvcmxkLnByb3RvdHlwZSwgXCJ0aW1lc3RlcFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBzaW11bGF0aW9uIHRpbWVzdGVwLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlZ3JhdGlvblBhcmFtZXRlcnMuZHQ7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBuZXcgc2ltdWxhdGlvbiB0aW1lc3RlcC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHNpbXVsYXRpb24gdGltZXN0ZXAgZ292ZXJucyBieSBob3cgbXVjaCB0aGUgcGh5c2ljcyBzdGF0ZSBvZiB0aGUgd29ybGQgd2lsbFxuICAgICAgICAgKiBiZSBpbnRlZ3JhdGVkLiBBIHNpbXVsYXRpb24gdGltZXN0ZXAgc2hvdWxkOlxuICAgICAgICAgKiAtIGJlIGFzIHNtYWxsIGFzIHBvc3NpYmxlLiBUeXBpY2FsIHZhbHVlcyBldm9sdmUgYXJvdW5kIDAuMDE2IChhc3N1bWluZyB0aGUgY2hvc2VuIHVuaXQgaXMgbWlsbGlzZWNvbmRzLFxuICAgICAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgdGltZSBiZXR3ZWVuIHR3byBmcmFtZXMgb2YgYSBnYW1lIHJ1bm5pbmcgYXQgNjBGUFMpLlxuICAgICAgICAgKiAtIG5vdCB2YXJ5IHRvbyBtdWNoIGR1cmluZyB0aGUgY291cnNlIG9mIHRoZSBzaW11bGF0aW9uLiBBIHRpbWVzdGVwIHdpdGggbGFyZ2UgdmFyaWF0aW9ucyBtYXlcbiAgICAgICAgICogY2F1c2UgaW5zdGFiaWxpdGllcyBpbiB0aGUgc2ltdWxhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHRpbWVzdGVwIC0gVGhlIHRpbWVzdGVwIGxlbmd0aCwgaW4gbWlsbGlzZWNvbmRzLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoZHQpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb25QYXJhbWV0ZXJzLmR0ID0gZHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV29ybGQucHJvdG90eXBlLCBcIm1heFZlbG9jaXR5SXRlcmF0aW9uc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWF4aW11bSB2ZWxvY2l0eSBpdGVyYXRpb25zIHRoZSB2ZWxvY2l0eS1iYXNlZCBmb3JjZSBjb25zdHJhaW50IHNvbHZlciBjYW4gbWFrZS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZWdyYXRpb25QYXJhbWV0ZXJzLm1heFZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHZlbG9jaXR5IGl0ZXJhdGlvbnMgKGRlZmF1bHQ6IDQpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgZ3JlYXRlciB0aGlzIHZhbHVlIGlzLCB0aGUgbW9zdCByaWdpZCBhbmQgcmVhbGlzdGljIHRoZSBwaHlzaWNzIHNpbXVsYXRpb24gd2lsbCBiZS5cbiAgICAgICAgICogSG93ZXZlciBhIGdyZWF0ZXIgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgaXMgbW9yZSBjb21wdXRhdGlvbmFsbHkgaW50ZW5zaXZlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbml0ZXIgLSBUaGUgbmV3IG1heGltdW0gbnVtYmVyIG9mIHZlbG9jaXR5IGl0ZXJhdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuaXRlcikge1xuICAgICAgICAgICAgdGhpcy5pbnRlZ3JhdGlvblBhcmFtZXRlcnMubWF4VmVsb2NpdHlJdGVyYXRpb25zID0gbml0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV29ybGQucHJvdG90eXBlLCBcIm1heFBvc2l0aW9uSXRlcmF0aW9uc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWF4aW11bSBwb3NpdGlvbiBpdGVyYXRpb25zIHRoZSBwb3NpdGlvbi1iYXNlZCBjb25zdHJhaW50IHJlZ3VsYXJpemF0aW9uIHNvbHZlciBjYW4gbWFrZS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZWdyYXRpb25QYXJhbWV0ZXJzLm1heFBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHBvc2l0aW9uIGl0ZXJhdGlvbnMgKGRlZmF1bHQ6IDEpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgZ3JlYXRlciB0aGlzIHZhbHVlIGlzLCB0aGUgbGVzcyBwZW5ldHJhdGlvbnMgd2lsbCBiZSB2aXNpYmxlIGFmdGVyIG9uZSB0aW1lc3RlcCB3aGVyZVxuICAgICAgICAgKiB0aGUgdmVsb2NpdHkgc29sdmVyIGRpZCBub3QgY29udmVyZ2UgZW50aXJlbHkuIExhcmdlIHZhbHVlcyB3aWxsIGRlZ3JhZGUgc2lnbmlmaWNhbnRseVxuICAgICAgICAgKiB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIHNpbXVsYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRvIGluY3JlYXNlIHJlYWxpc20gb2YgdGhlIHNpbXVsYXRpb24gaXQgaXMgcmVjb21tZW5kZWQsIG1vcmUgZWZmaWNpZW50LCBhbmQgbW9yZSBlZmZlY2l2ZSxcbiAgICAgICAgICogdG8gaW5jcmVhc2UgdGhlIG51bWJlciBvZiB2ZWxvY2l0eSBpdGVyYXRpb25zIGluc3RlYWQgb2YgdGhpcyBudW1iZXIgb2YgcG9zaXRpb24gaXRlcmF0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG5pdGVyIC0gVGhlIG5ldyBtYXhpbXVtIG51bWJlciBvZiBwb3NpdGlvbiBpdGVyYXRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobml0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZWdyYXRpb25QYXJhbWV0ZXJzLm1heFBvc2l0aW9uSXRlcmF0aW9ucyA9IG5pdGVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyByaWdpZC1ib2R5IGZyb20gdGhlIGdpdmVuIHJpZ2QtYm9keSBkZXNjcmlwdGlvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBib2R5IC0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSByaWdpZC1ib2R5IHRvIGNyZWF0ZS5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuY3JlYXRlUmlnaWRCb2R5ID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9kaWVzLmdldCh0aGlzLmJvZGllcy5jcmVhdGVSaWdpZEJvZHkoYm9keSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZXNjIC0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBjb2xsaWRlci5cbiAgICAgKiBAcGFyYW0gcGFyZW50SGFuZGxlIC0gVGhlIGhhbmRsZSBvZiB0aGUgcmlnaWQtYm9keSB0aGlzIGNvbGxpZGVyIGlzIGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5jcmVhdGVDb2xsaWRlciA9IGZ1bmN0aW9uIChkZXNjLCBwYXJlbnRIYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlkZXJzLmdldCh0aGlzLmNvbGxpZGVycy5jcmVhdGVDb2xsaWRlcih0aGlzLmJvZGllcywgZGVzYywgcGFyZW50SGFuZGxlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGpvaW50IGZyb20gdGhlIGdpdmVuIGpvaW50IGRlc2NyaXB0aW9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGpvaW50IC0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBqb2ludCB0byBjcmVhdGUuXG4gICAgICogQHBhcmFtIHBhcmVudDEgLSBUaGUgZmlyc3QgcmlnaWQtYm9keSBhdHRhY2hlZCB0byB0aGlzIGpvaW50LlxuICAgICAqIEBwYXJhbSBwYXJlbnQyIC0gVGhlIHNlY29uZCByaWdpZC1ib2R5IGF0dGFjaGVkIHRvIHRoaXMgam9pbnQuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmNyZWF0ZUpvaW50ID0gZnVuY3Rpb24gKHBhcmFtcywgcGFyZW50MSwgcGFyZW50Mikge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2ludHMuZ2V0KHRoaXMuam9pbnRzLmNyZWF0ZUpvaW50KHRoaXMuYm9kaWVzLCBwYXJhbXMsIHBhcmVudDEuaGFuZGxlLCBwYXJlbnQyLmhhbmRsZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgcmlnaWQtYm9keSBmcm9tIGl0cyBoYW5kbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFuZGxlIC0gVGhlIGludGVnZXIgaGFuZGxlIG9mIHRoZSByaWdpZC1ib2R5IHRvIHJldHJpZXZlLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5nZXRSaWdpZEJvZHkgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvZGllcy5nZXQoaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIGNvbGxpZGVyIGZyb20gaXRzIGhhbmRsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaW50ZWdlciBoYW5kbGUgb2YgdGhlIGNvbGxpZGVyIHRvIHJldHJpZXZlLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5nZXRDb2xsaWRlciA9IGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlkZXJzLmdldChoYW5kbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgam9pbnQgZnJvbSBpdHMgaGFuZGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGhhbmRsZSAtIFRoZSBpbnRlZ2VyIGhhbmRsZSBvZiB0aGUgcmlnaWQtYm9keSB0byByZXRyaWV2ZS5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuZ2V0Sm9pbnQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvaW50cy5nZXQoaGFuZGxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIHJpZ2lkLWJvZHkgZnJvbSB0aGlzIHBoeXNpY3Mgd29ybGQuXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgcmVtb3ZlIHRoaXMgcmlnaWQtYm9keSBhcyB3ZWxsIGFzIGFsbCBpdHMgYXR0YWNoZWQgY29sbGlkZXJzIGFuZCBqb2ludHMuXG4gICAgICogRXZlcnkgb3RoZXIgYm9kaWVzIHRvdWNoaW5nIG9yIGF0dGFjaGVkIGJ5IGpvaW50cyB0byB0aGlzIHJpZ2lkLWJvZHkgd2lsbCBiZSB3b2tlbi11cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBib2R5IC0gVGhlIHJpZ2lkLWJvZHkgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5yZW1vdmVSaWdpZEJvZHkgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICB0aGlzLmJvZGllcy5yZW1vdmUoYm9keS5oYW5kbGUsIHRoaXMuaXNsYW5kcywgdGhpcy5jb2xsaWRlcnMsIHRoaXMuam9pbnRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGNvbGxpZGVyIGZyb20gdGhpcyBwaHlzaWNzIHdvcmxkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVyIC0gVGhlIGNvbGxpZGVyIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gd2FrZVVwIC0gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJpZ2lkLWJvZHkgdGhpcyBjb2xsaWRlciBpcyBhdHRhY2hlZCB0byB3aWxsIGJlIGF3YWtlbi5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUucmVtb3ZlQ29sbGlkZXIgPSBmdW5jdGlvbiAoY29sbGlkZXIsIHdha2VVcCkge1xuICAgICAgICB0aGlzLmNvbGxpZGVycy5yZW1vdmUoY29sbGlkZXIuaGFuZGxlLCB0aGlzLmlzbGFuZHMsIHRoaXMuYm9kaWVzLCB3YWtlVXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gam9pbnQgZnJvbSB0aGlzIHBoeXNpY3Mgd29ybGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gam9pbnQgLSBUaGUgam9pbnQgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSB3YWtlVXAgLSBJZiBzZXQgdG8gYHRydWVgLCB0aGUgcmlnaWQtYm9kaWVzIGF0dGFjaGVkIGJ5IHRoaXMgam9pbnQgd2lsbCBiZSBhd2FrZW4uXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLnJlbW92ZUpvaW50ID0gZnVuY3Rpb24gKGpvaW50LCB3YWtlVXApIHtcbiAgICAgICAgdGhpcy5qb2ludHMucmVtb3ZlKGpvaW50LmhhbmRsZSwgdGhpcy5pc2xhbmRzLCB0aGlzLmJvZGllcywgd2FrZVVwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIGNsb3N1cmUgdG8gZWFjaCBjb2xsaWRlciBtYW5hZ2VkIGJ5IHRoaXMgcGh5c2ljcyB3b3JsZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmKGNvbGxpZGVyKSAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGNvbGxpZGVyIG1hbmFnZWQgYnkgdGhpcyBwaHlzaWNzIHdvcmxkLiBDYWxsZWQgYXMgYGYoY29sbGlkZXIpYC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuZm9yRWFjaENvbGxpZGVyID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdGhpcy5jb2xsaWRlcnMuZm9yRWFjaENvbGxpZGVyKGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZ2l2ZW4gY2xvc3VyZSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCBjb2xsaWRlciBtYW5hZ2VkIGJ5IHRoaXMgcGh5c2ljcyB3b3JsZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmKGhhbmRsZSkgLSBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIGludGVnZXIgaGFuZGxlIG9mIGVhY2ggY29sbGlkZXIgbWFuYWdlZCBieSB0aGlzIHBoeXNpY3Mgd29ybGQuIENhbGxlZCBhcyBgZihjb2xsaWRlcilgLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5mb3JFYWNoQ29sbGlkZXJIYW5kbGUgPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB0aGlzLmNvbGxpZGVycy5mb3JFYWNoQ29sbGlkZXJIYW5kbGUoZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIGVhY2ggcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXMgcGh5c2ljcyB3b3JsZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmKGJvZHkpIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXMgcGh5c2ljcyB3b3JsZC4gQ2FsbGVkIGFzIGBmKGNvbGxpZGVyKWAuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmZvckVhY2hSaWdpZEJvZHkgPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB0aGlzLmJvZGllcy5mb3JFYWNoUmlnaWRCb2R5KGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgZ2l2ZW4gY2xvc3VyZSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCByaWdpZC1ib2R5IG1hbmFnZWQgYnkgdGhpcyBwaHlzaWNzIHdvcmxkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYoaGFuZGxlKSAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCByaWdpZC1ib2R5IG1hbmFnZWQgYnkgdGhpcyBwaHlzaWNzIHdvcmxkLiBDYWxsZWQgYXMgYGYoY29sbGlkZXIpYC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuZm9yRWFjaFJpZ2lkQm9keUhhbmRsZSA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHRoaXMuYm9kaWVzLmZvckVhY2hSaWdpZEJvZHlIYW5kbGUoZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIGVhY2ggYWN0aXZlIHJpZ2lkLWJvZHkgbWFuYWdlZCBieSB0aGlzIHBoeXNpY3Mgd29ybGQuXG4gICAgICpcbiAgICAgKiBBZnRlciBhIHNob3J0IHRpbWUgb2YgaW5hY3Rpdml0eSwgYSByaWdpZC1ib2R5IGlzIGF1dG9tYXRpY2FsbHkgZGVhY3RpdmF0ZWQgKFwiYXNsZWVwXCIpIGJ5XG4gICAgICogdGhlIHBoeXNpY3MgZW5naW5lIGluIG9yZGVyIHRvIHNhdmUgY29tcHV0YXRpb25hbCBwb3dlci4gQSBzbGVlcGluZyByaWdpZC1ib2R5IG5ldmVyIG1vdmVzXG4gICAgICogdW5sZXNzIGl0IGlzIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgLSBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBhY3RpdmUgcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXMgcGh5c2ljcyB3b3JsZC4gQ2FsbGVkIGFzIGBmKGNvbGxpZGVyKWAuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmZvckVhY2hBY3RpdmVSaWdpZEJvZHkgPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB0aGlzLmJvZGllcy5mb3JFYWNoQWN0aXZlUmlnaWRCb2R5KHRoaXMuaXNsYW5kcywgZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBjbG9zdXJlIHRvIHRoZSBpbnRlZ2VyIGhhbmRsZSBvZiBlYWNoIGFjdGl2ZSByaWdpZC1ib2R5XG4gICAgICogbWFuYWdlZCBieSB0aGlzIHBoeXNpY3Mgd29ybGQuXG4gICAgICpcbiAgICAgKiBBZnRlciBhIHNob3J0IHRpbWUgb2YgaW5hY3Rpdml0eSwgYSByaWdpZC1ib2R5IGlzIGF1dG9tYXRpY2FsbHkgZGVhY3RpdmF0ZWQgKFwiYXNsZWVwXCIpIGJ5XG4gICAgICogdGhlIHBoeXNpY3MgZW5naW5lIGluIG9yZGVyIHRvIHNhdmUgY29tcHV0YXRpb25hbCBwb3dlci4gQSBzbGVlcGluZyByaWdpZC1ib2R5IG5ldmVyIG1vdmVzXG4gICAgICogdW5sZXNzIGl0IGlzIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYoaGFuZGxlKSAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCBhY3RpdmUgcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXNcbiAgICAgKiAgIHBoeXNpY3Mgd29ybGQuIENhbGxlZCBhcyBgZihjb2xsaWRlcilgLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5mb3JFYWNoQWN0aXZlUmlnaWRCb2R5SGFuZGxlID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdGhpcy5pc2xhbmRzLmZvckVhY2hBY3RpdmVSaWdpZEJvZHlIYW5kbGUoZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjbG9zZXN0IGludGVyc2VjdGlvbiBiZXR3ZWVuIGEgcmF5IGFuZCB0aGUgcGh5c2ljcyB3b3JsZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByYXkgLSBUaGUgcmF5IHRvIGNhc3QuXG4gICAgICogQHBhcmFtIG1heFRvaSAtIFRoZSBtYXhpbXVtIHRpbWUtb2YtaW1wYWN0IHRoYXQgY2FuIGJlIHJlcG9ydGVkIGJ5IHRoaXMgY2FzdC4gVGhpcyBlZmZlY3RpdmVseVxuICAgICAqICAgbGltaXRzIHRoZSBsZW5ndGggb2YgdGhlIHJheSB0byBgcmF5LmRpci5ub3JtKCkgKiBtYXhUb2lgLlxuICAgICAqIEBwYXJhbSBzb2xpZCAtIElmIGBmYWxzZWAgdGhlbiB0aGUgcmF5IHdpbGwgYXR0ZW1wdCB0byBoaXQgdGhlIGJvdW5kYXJ5IG9mIGEgc2hhcGUsIGV2ZW4gaWYgaXRzXG4gICAgICogICBvcmlnaW4gYWxyZWFkeSBsaWVzIGluc2lkZSBvZiBhIHNoYXBlLiBJbiBvdGhlciB0ZXJtcywgYHRydWVgIGltcGxpZXMgdGhhdCBhbGwgc2hhcGVzIGFyZSBwbGFpbixcbiAgICAgKiAgIHdoZXJlYXMgYGZhbHNlYCBpbXBsaWVzIHRoYXQgYWxsIHNoYXBlcyBhcmUgaG9sbG93IGZvciB0aGlzIHJheS1jYXN0LlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBVc2VkIHRvIGZpbHRlciB0aGUgY29sbGlkZXJzIHRoYXQgY2FuIG9yIGNhbm5vdCBiZSBoaXQgYnkgdGhlIHJheS5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuY2FzdFJheSA9IGZ1bmN0aW9uIChyYXksIG1heFRvaSwgc29saWQsIGdyb3Vwcykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVBpcGVsaW5lLmNhc3RSYXkodGhpcy5jb2xsaWRlcnMsIHJheSwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNsb3Nlc3QgaW50ZXJzZWN0aW9uIGJldHdlZW4gYSByYXkgYW5kIHRoZSBwaHlzaWNzIHdvcmxkLlxuICAgICAqXG4gICAgICogVGhpcyBhbHNvIGNvbXB1dGVzIHRoZSBub3JtYWwgYXQgdGhlIGhpdCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcmF5IC0gVGhlIHJheSB0byBjYXN0LlxuICAgICAqIEBwYXJhbSBtYXhUb2kgLSBUaGUgbWF4aW11bSB0aW1lLW9mLWltcGFjdCB0aGF0IGNhbiBiZSByZXBvcnRlZCBieSB0aGlzIGNhc3QuIFRoaXMgZWZmZWN0aXZlbHlcbiAgICAgKiAgIGxpbWl0cyB0aGUgbGVuZ3RoIG9mIHRoZSByYXkgdG8gYHJheS5kaXIubm9ybSgpICogbWF4VG9pYC5cbiAgICAgKiBAcGFyYW0gc29saWQgLSBJZiBgZmFsc2VgIHRoZW4gdGhlIHJheSB3aWxsIGF0dGVtcHQgdG8gaGl0IHRoZSBib3VuZGFyeSBvZiBhIHNoYXBlLCBldmVuIGlmIGl0c1xuICAgICAqICAgb3JpZ2luIGFscmVhZHkgbGllcyBpbnNpZGUgb2YgYSBzaGFwZS4gSW4gb3RoZXIgdGVybXMsIGB0cnVlYCBpbXBsaWVzIHRoYXQgYWxsIHNoYXBlcyBhcmUgcGxhaW4sXG4gICAgICogICB3aGVyZWFzIGBmYWxzZWAgaW1wbGllcyB0aGF0IGFsbCBzaGFwZXMgYXJlIGhvbGxvdyBmb3IgdGhpcyByYXktY2FzdC5cbiAgICAgKiBAcGFyYW0gZ3JvdXBzIC0gVXNlZCB0byBmaWx0ZXIgdGhlIGNvbGxpZGVycyB0aGF0IGNhbiBvciBjYW5ub3QgYmUgaGl0IGJ5IHRoZSByYXkuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmNhc3RSYXlBbmRHZXROb3JtYWwgPSBmdW5jdGlvbiAocmF5LCBtYXhUb2ksIHNvbGlkLCBncm91cHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlQaXBlbGluZS5jYXN0UmF5QW5kR2V0Tm9ybWFsKHRoaXMuY29sbGlkZXJzLCByYXksIG1heFRvaSwgc29saWQsIGdyb3Vwcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYXN0IGEgcmF5IGFuZCBjb2xsZWN0cyBhbGwgdGhlIGludGVyc2VjdGlvbnMgYmV0d2VlbiBhIHJheSBhbmQgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJheSAtIFRoZSByYXkgdG8gY2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4VG9pIC0gVGhlIG1heGltdW0gdGltZS1vZi1pbXBhY3QgdGhhdCBjYW4gYmUgcmVwb3J0ZWQgYnkgdGhpcyBjYXN0LiBUaGlzIGVmZmVjdGl2ZWx5XG4gICAgICogICBsaW1pdHMgdGhlIGxlbmd0aCBvZiB0aGUgcmF5IHRvIGByYXkuZGlyLm5vcm0oKSAqIG1heFRvaWAuXG4gICAgICogQHBhcmFtIHNvbGlkIC0gSWYgYGZhbHNlYCB0aGVuIHRoZSByYXkgd2lsbCBhdHRlbXB0IHRvIGhpdCB0aGUgYm91bmRhcnkgb2YgYSBzaGFwZSwgZXZlbiBpZiBpdHNcbiAgICAgKiAgIG9yaWdpbiBhbHJlYWR5IGxpZXMgaW5zaWRlIG9mIGEgc2hhcGUuIEluIG90aGVyIHRlcm1zLCBgdHJ1ZWAgaW1wbGllcyB0aGF0IGFsbCBzaGFwZXMgYXJlIHBsYWluLFxuICAgICAqICAgd2hlcmVhcyBgZmFsc2VgIGltcGxpZXMgdGhhdCBhbGwgc2hhcGVzIGFyZSBob2xsb3cgZm9yIHRoaXMgcmF5LWNhc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFVzZWQgdG8gZmlsdGVyIHRoZSBjb2xsaWRlcnMgdGhhdCBjYW4gb3IgY2Fubm90IGJlIGhpdCBieSB0aGUgcmF5LlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBjYWxsZWQgb25jZSBwZXIgaGl0IChpbiBubyBwYXJ0aWN1bGFyIG9yZGVyKSBiZXR3ZWVuIGEgcmF5IGFuZCBhIGNvbGxpZGVyLlxuICAgICAqICAgSWYgdGhpcyBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRoZW4gdGhlIGNhc3Qgd2lsbCBzdG9wIGFuZCBubyBmdXJ0aGVyIGhpdHMgd2lsbCBiZSBkZXRlY3RlZC9yZXBvcnRlZC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuaW50ZXJzZWN0aW9uc1dpdGhSYXkgPSBmdW5jdGlvbiAocmF5LCBtYXhUb2ksIHNvbGlkLCBncm91cHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucXVlcnlQaXBlbGluZS5pbnRlcnNlY3Rpb25zV2l0aFJheSh0aGlzLmNvbGxpZGVycywgcmF5LCBtYXhUb2ksIHNvbGlkLCBncm91cHMsIGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhhbmRsZSBvZiB1cCB0byBvbmUgY29sbGlkZXIgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaGFwZVBvcyAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2hhcGUgdXNlZCBmb3IgdGhlIGludGVyc2VjdGlvbiB0ZXN0LlxuICAgICAqIEBwYXJhbSBzaGFwZVJvdCAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgc2hhcGUgdXNlZCBmb3IgdGhlIGludGVyc2VjdGlvbiB0ZXN0LlxuICAgICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB1c2VkIGZvciB0aGUgaW50ZXJzZWN0aW9uIHRlc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgcmF5LCBpbiBvcmRlciB0byBvbmx5XG4gICAgICogICBoaXQgdGhlIGNvbGxpZGVycyB3aXRoIGNvbGxpc2lvbiBncm91cHMgY29tcGF0aWJsZSB3aXRoIHRoZSByYXkncyBncm91cC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuaW50ZXJzZWN0aW9uV2l0aFNoYXBlID0gZnVuY3Rpb24gKHNoYXBlUG9zLCBzaGFwZVJvdCwgc2hhcGUsIGdyb3Vwcykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVBpcGVsaW5lLmludGVyc2VjdGlvbldpdGhTaGFwZSh0aGlzLmNvbGxpZGVycywgc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZSwgZ3JvdXBzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIHByb2plY3Rpb24gb2YgYSBwb2ludCBvbiB0aGUgY2xvc2VzdCBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB0byBwcm9qZWN0LlxuICAgICAqIEBwYXJhbSBzb2xpZCAtIElmIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCB0aGVuIHRoZSBjb2xsaWRlciBzaGFwZXMgYXJlIGNvbnNpZGVyZWQgdG9cbiAgICAgKiAgIGJlIHBsYWluIChpZiB0aGUgcG9pbnQgaXMgbG9jYXRlZCBpbnNpZGUgb2YgYSBwbGFpbiBzaGFwZSwgaXRzIHByb2plY3Rpb24gaXMgdGhlIHBvaW50XG4gICAgICogICBpdHNlbGYpLiBJZiBpdCBpcyBzZXQgdG8gYGZhbHNlYCB0aGUgY29sbGlkZXIgc2hhcGVzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGhvbGxvd1xuICAgICAqICAgKGlmIHRoZSBwb2ludCBpcyBsb2NhdGVkIGluc2lkZSBvZiBhbiBob2xsb3cgc2hhcGUsIGl0IGlzIHByb2plY3RlZCBvbiB0aGUgc2hhcGUnc1xuICAgICAqICAgYm91bmRhcnkpLlxuICAgICAqIEBwYXJhbSBncm91cHMgLSBUaGUgYml0IGdyb3VwcyBhbmQgZmlsdGVyIGFzc29jaWF0ZWQgdG8gdGhlIHBvaW50IHRvIHByb2plY3QsIGluIG9yZGVyIHRvIG9ubHlcbiAgICAgKiAgIHByb2plY3Qgb24gY29sbGlkZXJzIHdpdGggY29sbGlzaW9uIGdyb3VwcyBjb21wYXRpYmxlIHdpdGggdGhlIHJheSdzIGdyb3VwLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5wcm9qZWN0UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIHNvbGlkLCBncm91cHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlQaXBlbGluZS5wcm9qZWN0UG9pbnQodGhpcy5jb2xsaWRlcnMsIHBvaW50LCBzb2xpZCwgZ3JvdXBzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmQgYWxsIHRoZSBjb2xsaWRlcnMgY29udGFpbmluZyB0aGUgZ2l2ZW4gcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdXNlZCBmb3IgdGhlIGNvbnRhaW5tZW50IHRlc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgcG9pbnQgdG8gdGVzdCwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgdGVzdCBvbiBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGUgcmF5J3MgZ3JvdXAuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBmdW5jdGlvbiBjYWxsZWQgd2l0aCB0aGUgaGFuZGxlcyBvZiBlYWNoIGNvbGxpZGVyIHdpdGggYSBzaGFwZVxuICAgICAqICAgY29udGFpbmluZyB0aGUgYHBvaW50YC5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuaW50ZXJzZWN0aW9uc1dpdGhQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgZ3JvdXBzLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnF1ZXJ5UGlwZWxpbmUuaW50ZXJzZWN0aW9uc1dpdGhQb2ludCh0aGlzLmNvbGxpZGVycywgcG9pbnQsIGdyb3VwcywgY2FsbGJhY2spO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FzdHMgYSBzaGFwZSBhdCBhIGNvbnN0YW50IGxpbmVhciB2ZWxvY2l0eSBhbmQgcmV0cmlldmUgdGhlIGZpcnN0IGNvbGxpZGVyIGl0IGhpdHMuXG4gICAgICogVGhpcyBpcyBzaW1pbGFyIHRvIHJheS1jYXN0aW5nIGV4Y2VwdCB0aGF0IHdlIGFyZSBjYXN0aW5nIGEgd2hvbGUgc2hhcGUgaW5zdGVhZCBvZlxuICAgICAqIGp1c3QgYSBwb2ludCAodGhlIHJheSBvcmlnaW4pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNoYXBlUG9zIC0gVGhlIGluaXRpYWwgcG9zaXRpb24gb2YgdGhlIHNoYXBlIHRvIGNhc3QuXG4gICAgICogQHBhcmFtIHNoYXBlUm90IC0gVGhlIGluaXRpYWwgcm90YXRpb24gb2YgdGhlIHNoYXBlIHRvIGNhc3QuXG4gICAgICogQHBhcmFtIHNoYXBlVmVsIC0gVGhlIGNvbnN0YW50IHZlbG9jaXR5IG9mIHRoZSBzaGFwZSB0byBjYXN0IChpLmUuIHRoZSBjYXN0IGRpcmVjdGlvbikuXG4gICAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHRvIGNhc3QuXG4gICAgICogQHBhcmFtIG1heFRvaSAtIFRoZSBtYXhpbXVtIHRpbWUtb2YtaW1wYWN0IHRoYXQgY2FuIGJlIHJlcG9ydGVkIGJ5IHRoaXMgY2FzdC4gVGhpcyBlZmZlY3RpdmVseVxuICAgICAqICAgbGltaXRzIHRoZSBkaXN0YW5jZSB0cmF2ZWxlZCBieSB0aGUgc2hhcGUgdG8gYHNoYXBlVmVsLm5vcm0oKSAqIG1heFRvaWAuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgc2hhcGUgdG8gY2FzdCwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgdGVzdCBvbiBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5jYXN0U2hhcGUgPSBmdW5jdGlvbiAoc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZVZlbCwgc2hhcGUsIG1heFRvaSwgZ3JvdXBzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5UGlwZWxpbmUuY2FzdFNoYXBlKHRoaXMuY29sbGlkZXJzLCBzaGFwZVBvcywgc2hhcGVSb3QsIHNoYXBlVmVsLCBzaGFwZSwgbWF4VG9pLCBncm91cHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYWxsIHRoZSBjb2xsaWRlcnMgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBzaGFwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaGFwZVBvcyAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2hhcGUgdG8gdGVzdC5cbiAgICAgKiBAcGFyYW0gc2hhcGVSb3QgLSBUaGUgb3JpZW50YXRpb24gb2YgdGhlIHNoYXBlIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIGdyb3VwcyAtIFRoZSBiaXQgZ3JvdXBzIGFuZCBmaWx0ZXIgYXNzb2NpYXRlZCB0byB0aGUgc2hhcGUgdG8gdGVzdCwgaW4gb3JkZXIgdG8gb25seVxuICAgICAqICAgdGVzdCBvbiBjb2xsaWRlcnMgd2l0aCBjb2xsaXNpb24gZ3JvdXBzIGNvbXBhdGlibGUgd2l0aCB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgZnVuY3Rpb24gY2FsbGVkIHdpdGggdGhlIGhhbmRsZXMgb2YgZWFjaCBjb2xsaWRlciBpbnRlcnNlY3RpbmcgdGhlIGBzaGFwZWAuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmludGVyc2VjdGlvbnNXaXRoU2hhcGUgPSBmdW5jdGlvbiAoc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZSwgZ3JvdXBzLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnF1ZXJ5UGlwZWxpbmUuaW50ZXJzZWN0aW9uc1dpdGhTaGFwZSh0aGlzLmNvbGxpZGVycywgc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZSwgZ3JvdXBzLCBjYWxsYmFjayk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaGFuZGxlcyBvZiBhbGwgdGhlIGNvbGxpZGVycyB3aXRoIGFuIEFBQkIgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBBQUJCLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFhYmJDZW50ZXIgLSBUaGUgY2VudGVyIG9mIHRoZSBBQUJCIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIGFhYmJIYWxmRXh0ZW50cyAtIFRoZSBoYWxmLWV4dGVudHMgb2YgdGhlIEFBQkIgdG8gdGVzdC5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBoYW5kbGVzIG9mIGFsbCB0aGUgY29sbGlkZXJzXG4gICAgICogICAgICAgICAgICAgICAgICAgY3VycmVudGx5IGludGVyc2VjdGluZyB0aGUgZ2l2ZW4gQUFCQi5cbiAgICAgKi9cbiAgICBXb3JsZC5wcm90b3R5cGUuY29sbGlkZXJzV2l0aEFhYmJJbnRlcnNlY3RpbmdBYWJiID0gZnVuY3Rpb24gKGFhYmJDZW50ZXIsIGFhYmJIYWxmRXh0ZW50cywgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5xdWVyeVBpcGVsaW5lLmNvbGxpZGVyc1dpdGhBYWJiSW50ZXJzZWN0aW5nQWFiYihhYWJiQ2VudGVyLCBhYWJiSGFsZkV4dGVudHMsIGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIHRoZSBjb2xsaWRlcnMgcG90ZW50aWFsbHkgaW4gY29udGFjdCB3aXRoIHRoZSBnaXZlbiBjb2xsaWRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcjEgLSBUaGUgc2Vjb25kIGNvbGxpZGVyIGludm9sdmVkIGluIHRoZSBjb250YWN0LlxuICAgICAqIEBwYXJhbSBmIC0gQ2xvc3VyZSB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggY29sbGlkZXIgdGhhdCBpcyBpbiBjb250YWN0IHdpdGggYGNvbGxpZGVyMWAuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmNvbnRhY3RzV2l0aCA9IGZ1bmN0aW9uIChjb2xsaWRlcjEsIGYpIHtcbiAgICAgICAgdGhpcy5uYXJyb3dQaGFzZS5jb250YWN0c1dpdGgoY29sbGlkZXIxLCBmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIHRoZSBjb2xsaWRlcnMgaW50ZXJzZWN0aW5nIHRoZSBnaXZlbiBjb2xsaWRlcnMsIGFzc3VtaW5nIG9uZSBvZiB0aGVtXG4gICAgICogaXMgYSBzZW5zb3IuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmludGVyc2VjdGlvbnNXaXRoID0gZnVuY3Rpb24gKGNvbGxpZGVyMSwgZikge1xuICAgICAgICB0aGlzLm5hcnJvd1BoYXNlLmludGVyc2VjdGlvbnNXaXRoKGNvbGxpZGVyMSwgZik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyB0aHJvdWdoIGFsbCB0aGUgY29udGFjdCBtYW5pZm9sZHMgYmV0d2VlbiB0aGUgZ2l2ZW4gcGFpciBvZiBjb2xsaWRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXIxIC0gVGhlIGZpcnN0IGNvbGxpZGVyIGludm9sdmVkIGluIHRoZSBjb250YWN0LlxuICAgICAqIEBwYXJhbSBjb2xsaWRlcjIgLSBUaGUgc2Vjb25kIGNvbGxpZGVyIGludm9sdmVkIGluIHRoZSBjb250YWN0LlxuICAgICAqIEBwYXJhbSBmIC0gQ2xvc3VyZSB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggY29udGFjdCBtYW5pZm9sZCBiZXR3ZWVuIHRoZSB0d28gY29sbGlkZXJzLiBJZiB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGhpcyBjbG9zdXJlIGlzIGB0cnVlYCwgdGhlbiB0aGUgY29udGFjdCBtYW5pZm9sZCBkYXRhIGlzIGZsaXBwZWQsIGkuZS4sIG1ldGhvZHMgbGlrZSBgbG9jYWxOb3JtYWwxYFxuICAgICAqICAgICAgICAgICAgYWN0dWFsbHkgYXBwbHkgdG8gdGhlIGBjb2xsaWRlcjJgIGFuZCBmaWVsZHMgbGlrZSBgbG9jYWxOb3JtYWwyYCBhcHBseSB0byB0aGUgYGNvbGxpZGVyMWAuXG4gICAgICovXG4gICAgV29ybGQucHJvdG90eXBlLmNvbnRhY3RQYWlyID0gZnVuY3Rpb24gKGNvbGxpZGVyMSwgY29sbGlkZXIyLCBmKSB7XG4gICAgICAgIHRoaXMubmFycm93UGhhc2UuY29udGFjdFBhaXIoY29sbGlkZXIxLCBjb2xsaWRlcjIsIGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgYGNvbGxpZGVyMWAgYW5kIGBjb2xsaWRlcjJgIGludGVyc2VjdCBhbmQgYXQgbGVhc3Qgb25lIG9mIHRoZW0gaXMgYSBzZW5zb3IuXG4gICAgICogQHBhcmFtIGNvbGxpZGVyMSDiiJIgVGhlIGZpcnN0IGNvbGxpZGVyIGludm9sdmVkIGluIHRoZSBpbnRlcnNlY3Rpb24uXG4gICAgICogQHBhcmFtIGNvbGxpZGVyMiDiiJIgVGhlIHNlY29uZCBjb2xsaWRlciBpbnZvbHZlZCBpbiB0aGUgaW50ZXJzZWN0aW9uLlxuICAgICAqL1xuICAgIFdvcmxkLnByb3RvdHlwZS5pbnRlcnNlY3Rpb25QYWlyID0gZnVuY3Rpb24gKGNvbGxpZGVyMSwgY29sbGlkZXIyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hcnJvd1BoYXNlLmludGVyc2VjdGlvblBhaXIoY29sbGlkZXIxLCBjb2xsaWRlcjIpO1xuICAgIH07XG4gICAgcmV0dXJuIFdvcmxkO1xufSgpKTtcbmV4cG9ydCB7IFdvcmxkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13b3JsZC5qcy5tYXAiLCJpbXBvcnQgKiBhcyBSQVBJRVIgZnJvbSAnLi9leHBvcnRzJztcbmV4cG9ydCAqIGZyb20gJy4vZXhwb3J0cyc7XG5leHBvcnQgZGVmYXVsdCBSQVBJRVI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYXBpZXIuanMubWFwIiwiaW1wb3J0ICogYXMgd2FzbSBmcm9tICcuL3JhcGllcl93YXNtMmRfYmcud2FzbSc7XG5cbmNvbnN0IGhlYXAgPSBuZXcgQXJyYXkoMzIpLmZpbGwodW5kZWZpbmVkKTtcblxuaGVhcC5wdXNoKHVuZGVmaW5lZCwgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xuXG5mdW5jdGlvbiBnZXRPYmplY3QoaWR4KSB7IHJldHVybiBoZWFwW2lkeF07IH1cblxubGV0IGhlYXBfbmV4dCA9IGhlYXAubGVuZ3RoO1xuXG5mdW5jdGlvbiBkcm9wT2JqZWN0KGlkeCkge1xuICAgIGlmIChpZHggPCAzNikgcmV0dXJuO1xuICAgIGhlYXBbaWR4XSA9IGhlYXBfbmV4dDtcbiAgICBoZWFwX25leHQgPSBpZHg7XG59XG5cbmZ1bmN0aW9uIHRha2VPYmplY3QoaWR4KSB7XG4gICAgY29uc3QgcmV0ID0gZ2V0T2JqZWN0KGlkeCk7XG4gICAgZHJvcE9iamVjdChpZHgpO1xuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGFkZEhlYXBPYmplY3Qob2JqKSB7XG4gICAgaWYgKGhlYXBfbmV4dCA9PT0gaGVhcC5sZW5ndGgpIGhlYXAucHVzaChoZWFwLmxlbmd0aCArIDEpO1xuICAgIGNvbnN0IGlkeCA9IGhlYXBfbmV4dDtcbiAgICBoZWFwX25leHQgPSBoZWFwW2lkeF07XG5cbiAgICBoZWFwW2lkeF0gPSBvYmo7XG4gICAgcmV0dXJuIGlkeDtcbn1cblxuY29uc3QgbFRleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAndW5kZWZpbmVkJyA/ICgwLCBtb2R1bGUucmVxdWlyZSkoJ3V0aWwnKS5UZXh0RGVjb2RlciA6IFRleHREZWNvZGVyO1xuXG5sZXQgY2FjaGVkVGV4dERlY29kZXIgPSBuZXcgbFRleHREZWNvZGVyKCd1dGYtOCcsIHsgaWdub3JlQk9NOiB0cnVlLCBmYXRhbDogdHJ1ZSB9KTtcblxuY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKCk7XG5cbmxldCBjYWNoZWdldFVpbnQ4TWVtb3J5MCA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZ2V0VWludDhNZW1vcnkwID09PSBudWxsIHx8IGNhY2hlZ2V0VWludDhNZW1vcnkwLmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDhNZW1vcnkwID0gbmV3IFVpbnQ4QXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZ2V0VWludDhNZW1vcnkwO1xufVxuXG5mdW5jdGlvbiBnZXRTdHJpbmdGcm9tV2FzbTAocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4TWVtb3J5MCgpLnN1YmFycmF5KHB0ciwgcHRyICsgbGVuKSk7XG59XG5cbmZ1bmN0aW9uIGlzTGlrZU5vbmUoeCkge1xuICAgIHJldHVybiB4ID09PSB1bmRlZmluZWQgfHwgeCA9PT0gbnVsbDtcbn1cblxubGV0IGNhY2hlZ2V0RmxvYXQ2NE1lbW9yeTAgPSBudWxsO1xuZnVuY3Rpb24gZ2V0RmxvYXQ2NE1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZ2V0RmxvYXQ2NE1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVnZXRGbG9hdDY0TWVtb3J5MC5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikge1xuICAgICAgICBjYWNoZWdldEZsb2F0NjRNZW1vcnkwID0gbmV3IEZsb2F0NjRBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRGbG9hdDY0TWVtb3J5MDtcbn1cblxubGV0IGNhY2hlZ2V0SW50MzJNZW1vcnkwID0gbnVsbDtcbmZ1bmN0aW9uIGdldEludDMyTWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVnZXRJbnQzMk1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVnZXRJbnQzMk1lbW9yeTAuYnVmZmVyICE9PSB3YXNtLm1lbW9yeS5idWZmZXIpIHtcbiAgICAgICAgY2FjaGVnZXRJbnQzMk1lbW9yeTAgPSBuZXcgSW50MzJBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRJbnQzMk1lbW9yeTA7XG59XG5cbmZ1bmN0aW9uIGRlYnVnU3RyaW5nKHZhbCkge1xuICAgIC8vIHByaW1pdGl2ZSB0eXBlc1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsO1xuICAgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nIHx8IHZhbCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAgYCR7dmFsfWA7XG4gICAgfVxuICAgIGlmICh0eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBgXCIke3ZhbH1cImA7XG4gICAgfVxuICAgIGlmICh0eXBlID09ICdzeW1ib2wnKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdmFsLmRlc2NyaXB0aW9uO1xuICAgICAgICBpZiAoZGVzY3JpcHRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuICdTeW1ib2wnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGBTeW1ib2woJHtkZXNjcmlwdGlvbn0pYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB2YWwubmFtZTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnICYmIG5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGBGdW5jdGlvbigke25hbWV9KWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Z1bmN0aW9uJztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBvYmplY3RzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSB2YWwubGVuZ3RoO1xuICAgICAgICBsZXQgZGVidWcgPSAnWyc7XG4gICAgICAgIGlmIChsZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkZWJ1ZyArPSBkZWJ1Z1N0cmluZyh2YWxbMF0pO1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGVidWcgKz0gJywgJyArIGRlYnVnU3RyaW5nKHZhbFtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcgKz0gJ10nO1xuICAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIC8vIFRlc3QgZm9yIGJ1aWx0LWluXG4gICAgY29uc3QgYnVpbHRJbk1hdGNoZXMgPSAvXFxbb2JqZWN0IChbXlxcXV0rKVxcXS8uZXhlYyh0b1N0cmluZy5jYWxsKHZhbCkpO1xuICAgIGxldCBjbGFzc05hbWU7XG4gICAgaWYgKGJ1aWx0SW5NYXRjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gYnVpbHRJbk1hdGNoZXNbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFpbGVkIHRvIG1hdGNoIHRoZSBzdGFuZGFyZCAnW29iamVjdCBDbGFzc05hbWVdJ1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpO1xuICAgIH1cbiAgICBpZiAoY2xhc3NOYW1lID09ICdPYmplY3QnKSB7XG4gICAgICAgIC8vIHdlJ3JlIGEgdXNlciBkZWZpbmVkIGNsYXNzIG9yIE9iamVjdFxuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSBhdm9pZHMgcHJvYmxlbXMgd2l0aCBjeWNsZXMsIGFuZCBpcyBnZW5lcmFsbHkgbXVjaFxuICAgICAgICAvLyBlYXNpZXIgdGhhbiBsb29waW5nIHRocm91Z2ggb3duUHJvcGVydGllcyBvZiBgdmFsYC5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiAnT2JqZWN0KCcgKyBKU09OLnN0cmluZ2lmeSh2YWwpICsgJyknO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICByZXR1cm4gJ09iamVjdCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZXJyb3JzXG4gICAgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiBgJHt2YWwubmFtZX06ICR7dmFsLm1lc3NhZ2V9XFxuJHt2YWwuc3RhY2t9YDtcbiAgICB9XG4gICAgLy8gVE9ETyB3ZSBjb3VsZCB0ZXN0IGZvciBtb3JlIHRoaW5ncyBoZXJlLCBsaWtlIGBTZXRgcyBhbmQgYE1hcGBzLlxuICAgIHJldHVybiBjbGFzc05hbWU7XG59XG5cbmxldCBXQVNNX1ZFQ1RPUl9MRU4gPSAwO1xuXG5jb25zdCBsVGV4dEVuY29kZXIgPSB0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnID8gKDAsIG1vZHVsZS5yZXF1aXJlKSgndXRpbCcpLlRleHRFbmNvZGVyIDogVGV4dEVuY29kZXI7XG5cbmxldCBjYWNoZWRUZXh0RW5jb2RlciA9IG5ldyBsVGV4dEVuY29kZXIoJ3V0Zi04Jyk7XG5cbmNvbnN0IGVuY29kZVN0cmluZyA9ICh0eXBlb2YgY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlSW50byA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gZnVuY3Rpb24gKGFyZywgdmlldykge1xuICAgIHJldHVybiBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGVJbnRvKGFyZywgdmlldyk7XG59XG4gICAgOiBmdW5jdGlvbiAoYXJnLCB2aWV3KSB7XG4gICAgY29uc3QgYnVmID0gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlKGFyZyk7XG4gICAgdmlldy5zZXQoYnVmKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWFkOiBhcmcubGVuZ3RoLFxuICAgICAgICB3cml0dGVuOiBidWYubGVuZ3RoXG4gICAgfTtcbn0pO1xuXG5mdW5jdGlvbiBwYXNzU3RyaW5nVG9XYXNtMChhcmcsIG1hbGxvYywgcmVhbGxvYykge1xuXG4gICAgaWYgKHJlYWxsb2MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBidWYgPSBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGUoYXJnKTtcbiAgICAgICAgY29uc3QgcHRyID0gbWFsbG9jKGJ1Zi5sZW5ndGgpO1xuICAgICAgICBnZXRVaW50OE1lbW9yeTAoKS5zdWJhcnJheShwdHIsIHB0ciArIGJ1Zi5sZW5ndGgpLnNldChidWYpO1xuICAgICAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBidWYubGVuZ3RoO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBhcmcubGVuZ3RoO1xuICAgIGxldCBwdHIgPSBtYWxsb2MobGVuKTtcblxuICAgIGNvbnN0IG1lbSA9IGdldFVpbnQ4TWVtb3J5MCgpO1xuXG4gICAgbGV0IG9mZnNldCA9IDA7XG5cbiAgICBmb3IgKDsgb2Zmc2V0IDwgbGVuOyBvZmZzZXQrKykge1xuICAgICAgICBjb25zdCBjb2RlID0gYXJnLmNoYXJDb2RlQXQob2Zmc2V0KTtcbiAgICAgICAgaWYgKGNvZGUgPiAweDdGKSBicmVhaztcbiAgICAgICAgbWVtW3B0ciArIG9mZnNldF0gPSBjb2RlO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgIT09IGxlbikge1xuICAgICAgICBpZiAob2Zmc2V0ICE9PSAwKSB7XG4gICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2Uob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBwdHIgPSByZWFsbG9jKHB0ciwgbGVuLCBsZW4gPSBvZmZzZXQgKyBhcmcubGVuZ3RoICogMyk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBnZXRVaW50OE1lbW9yeTAoKS5zdWJhcnJheShwdHIgKyBvZmZzZXQsIHB0ciArIGxlbik7XG4gICAgICAgIGNvbnN0IHJldCA9IGVuY29kZVN0cmluZyhhcmcsIHZpZXcpO1xuXG4gICAgICAgIG9mZnNldCArPSByZXQud3JpdHRlbjtcbiAgICB9XG5cbiAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBvZmZzZXQ7XG4gICAgcmV0dXJuIHB0cjtcbn1cbi8qKlxuKiBAcmV0dXJucyB7c3RyaW5nfVxuKi9cbmV4cG9ydCBmdW5jdGlvbiB2ZXJzaW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICB3YXNtLnZlcnNpb24ocmV0cHRyKTtcbiAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgIHJldHVybiBnZXRTdHJpbmdGcm9tV2FzbTAocjAsIHIxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEpO1xuICAgIH1cbn1cblxubGV0IHN0YWNrX3BvaW50ZXIgPSAzMjtcblxuZnVuY3Rpb24gYWRkQm9ycm93ZWRPYmplY3Qob2JqKSB7XG4gICAgaWYgKHN0YWNrX3BvaW50ZXIgPT0gMSkgdGhyb3cgbmV3IEVycm9yKCdvdXQgb2YganMgc3RhY2snKTtcbiAgICBoZWFwWy0tc3RhY2tfcG9pbnRlcl0gPSBvYmo7XG4gICAgcmV0dXJuIHN0YWNrX3BvaW50ZXI7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRDbGFzcyhpbnN0YW5jZSwga2xhc3MpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIGtsYXNzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkIGluc3RhbmNlIG9mICR7a2xhc3MubmFtZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlLnB0cjtcbn1cblxubGV0IGNhY2hlZ2V0RmxvYXQzMk1lbW9yeTAgPSBudWxsO1xuZnVuY3Rpb24gZ2V0RmxvYXQzMk1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZ2V0RmxvYXQzMk1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVnZXRGbG9hdDMyTWVtb3J5MC5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikge1xuICAgICAgICBjYWNoZWdldEZsb2F0MzJNZW1vcnkwID0gbmV3IEZsb2F0MzJBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRGbG9hdDMyTWVtb3J5MDtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlGMzJGcm9tV2FzbTAocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gZ2V0RmxvYXQzMk1lbW9yeTAoKS5zdWJhcnJheShwdHIgLyA0LCBwdHIgLyA0ICsgbGVuKTtcbn1cblxubGV0IGNhY2hlZ2V0VWludDMyTWVtb3J5MCA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50MzJNZW1vcnkwKCkge1xuICAgIGlmIChjYWNoZWdldFVpbnQzMk1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVnZXRVaW50MzJNZW1vcnkwLmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDMyTWVtb3J5MCA9IG5ldyBVaW50MzJBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRVaW50MzJNZW1vcnkwO1xufVxuXG5mdW5jdGlvbiBnZXRBcnJheVUzMkZyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHJldHVybiBnZXRVaW50MzJNZW1vcnkwKCkuc3ViYXJyYXkocHRyIC8gNCwgcHRyIC8gNCArIGxlbik7XG59XG5cbmZ1bmN0aW9uIHBhc3NBcnJheUYzMlRvV2FzbTAoYXJnLCBtYWxsb2MpIHtcbiAgICBjb25zdCBwdHIgPSBtYWxsb2MoYXJnLmxlbmd0aCAqIDQpO1xuICAgIGdldEZsb2F0MzJNZW1vcnkwKCkuc2V0KGFyZywgcHRyIC8gNCk7XG4gICAgV0FTTV9WRUNUT1JfTEVOID0gYXJnLmxlbmd0aDtcbiAgICByZXR1cm4gcHRyO1xufVxuXG5mdW5jdGlvbiBwYXNzQXJyYXkzMlRvV2FzbTAoYXJnLCBtYWxsb2MpIHtcbiAgICBjb25zdCBwdHIgPSBtYWxsb2MoYXJnLmxlbmd0aCAqIDQpO1xuICAgIGdldFVpbnQzMk1lbW9yeTAoKS5zZXQoYXJnLCBwdHIgLyA0KTtcbiAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBhcmcubGVuZ3RoO1xuICAgIHJldHVybiBwdHI7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGYsIGFyZ3MpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9leG5fc3RvcmUoYWRkSGVhcE9iamVjdChlKSk7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNvbnN0IFJhd0pvaW50VHlwZSA9IE9iamVjdC5mcmVlemUoeyBCYWxsOjAsXCIwXCI6XCJCYWxsXCIsRml4ZWQ6MSxcIjFcIjpcIkZpeGVkXCIsUHJpc21hdGljOjIsXCIyXCI6XCJQcmlzbWF0aWNcIixSZXZvbHV0ZTozLFwiM1wiOlwiUmV2b2x1dGVcIiwgfSk7XG4vKipcbiovXG5leHBvcnQgY29uc3QgUmF3U3ByaW5nTW9kZWwgPSBPYmplY3QuZnJlZXplKHsgRGlzYWJsZWQ6MCxcIjBcIjpcIkRpc2FibGVkXCIsVmVsb2NpdHlCYXNlZDoxLFwiMVwiOlwiVmVsb2NpdHlCYXNlZFwiLEFjY2VsZXJhdGlvbkJhc2VkOjIsXCIyXCI6XCJBY2NlbGVyYXRpb25CYXNlZFwiLEZvcmNlQmFzZWQ6MyxcIjNcIjpcIkZvcmNlQmFzZWRcIiwgfSk7XG4vKipcbiovXG5leHBvcnQgY29uc3QgUmF3UmlnaWRCb2R5VHlwZSA9IE9iamVjdC5mcmVlemUoeyBEeW5hbWljOjAsXCIwXCI6XCJEeW5hbWljXCIsU3RhdGljOjEsXCIxXCI6XCJTdGF0aWNcIixLaW5lbWF0aWNQb3NpdGlvbkJhc2VkOjIsXCIyXCI6XCJLaW5lbWF0aWNQb3NpdGlvbkJhc2VkXCIsS2luZW1hdGljVmVsb2NpdHlCYXNlZDozLFwiM1wiOlwiS2luZW1hdGljVmVsb2NpdHlCYXNlZFwiLCB9KTtcbi8qKlxuKi9cbmV4cG9ydCBjb25zdCBSYXdTaGFwZVR5cGUgPSBPYmplY3QuZnJlZXplKHsgQmFsbDowLFwiMFwiOlwiQmFsbFwiLEN1Ym9pZDoxLFwiMVwiOlwiQ3Vib2lkXCIsQ2Fwc3VsZToyLFwiMlwiOlwiQ2Fwc3VsZVwiLFNlZ21lbnQ6MyxcIjNcIjpcIlNlZ21lbnRcIixQb2x5bGluZTo0LFwiNFwiOlwiUG9seWxpbmVcIixUcmlhbmdsZTo1LFwiNVwiOlwiVHJpYW5nbGVcIixUcmlNZXNoOjYsXCI2XCI6XCJUcmlNZXNoXCIsSGVpZ2h0RmllbGQ6NyxcIjdcIjpcIkhlaWdodEZpZWxkXCIsQ29tcG91bmQ6OCxcIjhcIjpcIkNvbXBvdW5kXCIsQ29udmV4UG9seWdvbjo5LFwiOVwiOlwiQ29udmV4UG9seWdvblwiLFJvdW5kQ3Vib2lkOjEwLFwiMTBcIjpcIlJvdW5kQ3Vib2lkXCIsUm91bmRUcmlhbmdsZToxMSxcIjExXCI6XCJSb3VuZFRyaWFuZ2xlXCIsUm91bmRDb252ZXhQb2x5Z29uOjEyLFwiMTJcIjpcIlJvdW5kQ29udmV4UG9seWdvblwiLCB9KTtcbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdCcm9hZFBoYXNlIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3QnJvYWRQaGFzZS5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19yYXdicm9hZHBoYXNlX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3YnJvYWRwaGFzZV9uZXcoKTtcbiAgICAgICAgcmV0dXJuIFJhd0Jyb2FkUGhhc2UuX193cmFwKHJldCk7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd0NDRFNvbHZlciB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd0NDRFNvbHZlci5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19yYXdjY2Rzb2x2ZXJfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjY2Rzb2x2ZXJfbmV3KCk7XG4gICAgICAgIHJldHVybiBSYXdDQ0RTb2x2ZXIuX193cmFwKHJldCk7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd0NvbGxpZGVyU2V0IHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3Q29sbGlkZXJTZXQucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3Y29sbGlkZXJzZXRfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSB3b3JsZC1zcGFjZSB0cmFuc2xhdGlvbiBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIGNvVHJhbnNsYXRpb24oaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvVHJhbnNsYXRpb24odGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHdvcmxkLXNwYWNlIG9yaWVudGF0aW9uIG9mIHRoaXMgY29sbGlkZXIuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3Um90YXRpb259XG4gICAgKi9cbiAgICBjb1JvdGF0aW9uKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb1JvdGF0aW9uKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gUmF3Um90YXRpb24uX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogU2V0cyB0aGUgdHJhbnNsYXRpb24gb2YgdGhpcyBjb2xsaWRlci5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYHhgOiB0aGUgd29ybGQtc3BhY2UgcG9zaXRpb24gb2YgdGhlIGNvbGxpZGVyIGFsb25nIHRoZSBgeGAgYXhpcy5cbiAgICAqIC0gYHlgOiB0aGUgd29ybGQtc3BhY2UgcG9zaXRpb24gb2YgdGhlIGNvbGxpZGVyIGFsb25nIHRoZSBgeWAgYXhpcy5cbiAgICAqIC0gYHdha2VVcGA6IGZvcmNlcyB0aGUgY29sbGlkZXIgdG8gd2FrZS11cCBzbyBpdCBpcyBwcm9wZXJseSBhZmZlY3RlZCBieSBmb3JjZXMgaWYgaXRcbiAgICAqIHdhc24ndCBtb3ZpbmcgYmVmb3JlIG1vZGlmeWluZyBpdHMgcG9zaXRpb24uXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAqL1xuICAgIGNvU2V0VHJhbnNsYXRpb24oaGFuZGxlLCB4LCB5KSB7XG4gICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29TZXRUcmFuc2xhdGlvbih0aGlzLnB0ciwgaGFuZGxlLCB4LCB5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAqL1xuICAgIGNvU2V0VHJhbnNsYXRpb25XcnRQYXJlbnQoaGFuZGxlLCB4LCB5KSB7XG4gICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29TZXRUcmFuc2xhdGlvbldydFBhcmVudCh0aGlzLnB0ciwgaGFuZGxlLCB4LCB5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBTZXRzIHRoZSByb3RhdGlvbiBhbmdsZSBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgYW5nbGVgOiB0aGUgcm90YXRpb24gYW5nbGUsIGluIHJhZGlhbnMuXG4gICAgKiAtIGB3YWtlVXBgOiBmb3JjZXMgdGhlIGNvbGxpZGVyIHRvIHdha2UtdXAgc28gaXQgaXMgcHJvcGVybHkgYWZmZWN0ZWQgYnkgZm9yY2VzIGlmIGl0XG4gICAgKiB3YXNuJ3QgbW92aW5nIGJlZm9yZSBtb2RpZnlpbmcgaXRzIHBvc2l0aW9uLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlXG4gICAgKi9cbiAgICBjb1NldFJvdGF0aW9uKGhhbmRsZSwgYW5nbGUpIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldFJvdGF0aW9uKHRoaXMucHRyLCBoYW5kbGUsIGFuZ2xlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGVcbiAgICAqL1xuICAgIGNvU2V0Um90YXRpb25XcnRQYXJlbnQoaGFuZGxlLCBhbmdsZSkge1xuICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvU2V0Um90YXRpb25XcnRQYXJlbnQodGhpcy5wdHIsIGhhbmRsZSwgYW5nbGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElzIHRoaXMgY29sbGlkZXIgYSBzZW5zb3I/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGNvSXNTZW5zb3IoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvSXNTZW5zb3IodGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgIT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHR5cGUgb2YgdGhlIHNoYXBlIG9mIHRoaXMgY29sbGlkZXIuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY29TaGFwZVR5cGUoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvU2hhcGVUeXBlKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBoYWxmLWV4dGVudHMgb2YgdGhpcyBjb2xsaWRlciBpZiBpdCBpcyBoYXMgYSBjdWJvaWQgc2hhcGUuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY29IYWxmRXh0ZW50cyhoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29sbGlkZXJzZXRfY29IYWxmRXh0ZW50cyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgcmFkaXVzIG9mIHRoaXMgY29sbGlkZXIgaWYgaXQgaXMgYSBiYWxsLCBjYXBzdWxlLCBjeWxpbmRlciwgb3IgY29uZSBzaGFwZS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjb1JhZGl1cyhoYW5kbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1JhZGl1cyhyZXRwdHIsIHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0RmxvYXQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICByZXR1cm4gcjAgPT09IDAgPyB1bmRlZmluZWQgOiByMTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgcmFkaXVzIG9mIHRoaXMgY29sbGlkZXIgaWYgaXQgaXMgYSBjYXBzdWxlLCBjeWxpbmRlciwgb3IgY29uZSBzaGFwZS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjb0hhbGZIZWlnaHQoaGFuZGxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29IYWxmSGVpZ2h0KHJldHB0ciwgdGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRGbG9hdDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIHJldHVybiByMCA9PT0gMCA/IHVuZGVmaW5lZCA6IHIxO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHJvdW5kIGVkZ2VzIG9mIHRoaXMgY29sbGlkZXIgaWYgaXQgaXMgYSByb3VuZCBjeWxpbmRlci5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjb1JvdW5kUmFkaXVzKGhhbmRsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvUm91bmRSYWRpdXMocmV0cHRyLCB0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEZsb2F0MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuIHIwID09PSAwID8gdW5kZWZpbmVkIDogcjE7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHZlcnRpY2VzIG9mIHRoaXMgdHJpYW5nbGUgbWVzaCwgcG9seWxpbmUsIGNvbnZleCBwb2x5aGVkcm9uLCBvciBjb252ZXggcG9seWhlZHJvbiwgaWYgaXQgaXMgb25lLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge0Zsb2F0MzJBcnJheSB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIGNvVmVydGljZXMoaGFuZGxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29WZXJ0aWNlcyhyZXRwdHIsIHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICAgICAgbGV0IHYwO1xuICAgICAgICAgICAgaWYgKHIwICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdjAgPSBnZXRBcnJheUYzMkZyb21XYXNtMChyMCwgcjEpLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUocjAsIHIxICogNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdjA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIGluZGljZXMgb2YgdGhpcyB0cmlhbmdsZSBtZXNoLCBwb2x5bGluZSwgb3IgY29udmV4IHBvbHloZWRyb24sIGlmIGl0IGlzIG9uZS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtVaW50MzJBcnJheSB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIGNvSW5kaWNlcyhoYW5kbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb0luZGljZXMocmV0cHRyLCB0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIGxldCB2MDtcbiAgICAgICAgICAgIGlmIChyMCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHYwID0gZ2V0QXJyYXlVMzJGcm9tV2FzbTAocjAsIHIxKS5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHIwLCByMSAqIDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHYwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBoZWlnaHQgb2YgdGhpcyBoZWlnaHRmaWVsZCBpZiBpdCBpcyBvbmUuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5IHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY29IZWlnaHRmaWVsZEhlaWdodHMoaGFuZGxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29IZWlnaHRmaWVsZEhlaWdodHMocmV0cHRyLCB0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIGxldCB2MDtcbiAgICAgICAgICAgIGlmIChyMCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHYwID0gZ2V0QXJyYXlGMzJGcm9tV2FzbTAocjAsIHIxKS5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9mcmVlKHIwLCByMSAqIDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHYwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBzY2FsaW5nIGZhY3RvciBhcHBsaWVkIG9mIHRoaXMgaGVpZ2h0ZmllbGQgaWYgaXQgaXMgb25lLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge1Jhd1ZlY3RvciB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIGNvSGVpZ2h0ZmllbGRTY2FsZShoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29sbGlkZXJzZXRfY29IZWlnaHRmaWVsZFNjYWxlKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSB1bmlxdWUgaW50ZWdlciBpZGVudGlmaWVyIG9mIHRoZSBjb2xsaWRlciB0aGlzIGNvbGxpZGVyIGlzIGF0dGFjaGVkIHRvLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvUGFyZW50KGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb1BhcmVudCh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgZnJpY3Rpb24gY29lZmZpY2llbnQgb2YgdGhpcyBjb2xsaWRlci5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBjb0ZyaWN0aW9uKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb0ZyaWN0aW9uKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBkZW5zaXR5IG9mIHRoaXMgY29sbGlkZXIuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY29EZW5zaXR5KGhhbmRsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvRGVuc2l0eShyZXRwdHIsIHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0RmxvYXQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICByZXR1cm4gcjAgPT09IDAgPyB1bmRlZmluZWQgOiByMTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwcyBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvQ29sbGlzaW9uR3JvdXBzKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb0NvbGxpc2lvbkdyb3Vwcyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgc29sdmVyIGdyb3VwcyBvZiB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvU29sdmVyR3JvdXBzKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NvbHZlckdyb3Vwcyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgcGh5c2ljcyBob29rcyBlbmFibGVkIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvQWN0aXZlSG9va3MoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvQWN0aXZlSG9va3ModGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIGNvbGxpc2lvbiB0eXBlcyBlbmFibGVkIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvQWN0aXZlQ29sbGlzaW9uVHlwZXMoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvQWN0aXZlQ29sbGlzaW9uVHlwZXModGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIGV2ZW50cyBlbmFibGVkIGZvciB0aGlzIGNvbGxpZGVyLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvQWN0aXZlRXZlbnRzKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb0FjdGl2ZUV2ZW50cyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzX3NlbnNvclxuICAgICovXG4gICAgY29TZXRTZW5zb3IoaGFuZGxlLCBpc19zZW5zb3IpIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldFNlbnNvcih0aGlzLnB0ciwgaGFuZGxlLCBpc19zZW5zb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXN0aXR1dGlvblxuICAgICovXG4gICAgY29TZXRSZXN0aXR1dGlvbihoYW5kbGUsIHJlc3RpdHV0aW9uKSB7XG4gICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29TZXRSZXN0aXR1dGlvbih0aGlzLnB0ciwgaGFuZGxlLCByZXN0aXR1dGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGZyaWN0aW9uXG4gICAgKi9cbiAgICBjb1NldEZyaWN0aW9uKGhhbmRsZSwgZnJpY3Rpb24pIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldEZyaWN0aW9uKHRoaXMucHRyLCBoYW5kbGUsIGZyaWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY29GcmljdGlvbkNvbWJpbmVSdWxlKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9jb0ZyaWN0aW9uQ29tYmluZVJ1bGUodGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IHJ1bGVcbiAgICAqL1xuICAgIGNvU2V0RnJpY3Rpb25Db21iaW5lUnVsZShoYW5kbGUsIHJ1bGUpIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldEZyaWN0aW9uQ29tYmluZVJ1bGUodGhpcy5wdHIsIGhhbmRsZSwgcnVsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvUmVzdGl0dXRpb25Db21iaW5lUnVsZShoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29sbGlkZXJzZXRfY29SZXN0aXR1dGlvbkNvbWJpbmVSdWxlKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBydWxlXG4gICAgKi9cbiAgICBjb1NldFJlc3RpdHV0aW9uQ29tYmluZVJ1bGUoaGFuZGxlLCBydWxlKSB7XG4gICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29TZXRSZXN0aXR1dGlvbkNvbWJpbmVSdWxlKHRoaXMucHRyLCBoYW5kbGUsIHJ1bGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBncm91cHNcbiAgICAqL1xuICAgIGNvU2V0Q29sbGlzaW9uR3JvdXBzKGhhbmRsZSwgZ3JvdXBzKSB7XG4gICAgICAgIHdhc20ucmF3Y29sbGlkZXJzZXRfY29TZXRDb2xsaXNpb25Hcm91cHModGhpcy5wdHIsIGhhbmRsZSwgZ3JvdXBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBzXG4gICAgKi9cbiAgICBjb1NldFNvbHZlckdyb3VwcyhoYW5kbGUsIGdyb3Vwcykge1xuICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvU2V0U29sdmVyR3JvdXBzKHRoaXMucHRyLCBoYW5kbGUsIGdyb3Vwcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhvb2tzXG4gICAgKi9cbiAgICBjb1NldEFjdGl2ZUhvb2tzKGhhbmRsZSwgaG9va3MpIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldEFjdGl2ZUhvb2tzKHRoaXMucHRyLCBoYW5kbGUsIGhvb2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZXZlbnRzXG4gICAgKi9cbiAgICBjb1NldEFjdGl2ZUV2ZW50cyhoYW5kbGUsIGV2ZW50cykge1xuICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvU2V0QWN0aXZlRXZlbnRzKHRoaXMucHRyLCBoYW5kbGUsIGV2ZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IHR5cGVzXG4gICAgKi9cbiAgICBjb1NldEFjdGl2ZUNvbGxpc2lvblR5cGVzKGhhbmRsZSwgdHlwZXMpIHtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldEFjdGl2ZUNvbGxpc2lvblR5cGVzKHRoaXMucHRyLCBoYW5kbGUsIHR5cGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge1Jhd1NoYXBlfSBzaGFwZVxuICAgICovXG4gICAgY29TZXRTaGFwZShoYW5kbGUsIHNoYXBlKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhzaGFwZSwgUmF3U2hhcGUpO1xuICAgICAgICB2YXIgcHRyMCA9IHNoYXBlLnB0cjtcbiAgICAgICAgc2hhcGUucHRyID0gMDtcbiAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jb1NldFNoYXBlKHRoaXMucHRyLCBoYW5kbGUsIHB0cjApO1xuICAgIH1cbiAgICAvKipcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb2xsaWRlcnNldF9uZXcoKTtcbiAgICAgICAgcmV0dXJuIFJhd0NvbGxpZGVyU2V0Ll9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBsZW4oKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2xlbih0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgKi9cbiAgICBjb250YWlucyhoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29sbGlkZXJzZXRfY29udGFpbnModGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgIT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdTaGFwZX0gc2hhcGVcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSB0cmFuc2xhdGlvblxuICAgICogQHBhcmFtIHtSYXdSb3RhdGlvbn0gcm90YXRpb25cbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlTWFzc1Byb3BzXG4gICAgKiBAcGFyYW0ge251bWJlcn0gbWFzc1xuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGNlbnRlck9mTWFzc1xuICAgICogQHBhcmFtIHtudW1iZXJ9IHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZGVuc2l0eVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGZyaWN0aW9uXG4gICAgKiBAcGFyYW0ge251bWJlcn0gcmVzdGl0dXRpb25cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBmcmljdGlvbkNvbWJpbmVSdWxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gcmVzdGl0dXRpb25Db21iaW5lUnVsZVxuICAgICogQHBhcmFtIHtib29sZWFufSBpc1NlbnNvclxuICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbGxpc2lvbkdyb3Vwc1xuICAgICogQHBhcmFtIHtudW1iZXJ9IHNvbHZlckdyb3Vwc1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGFjdGl2ZUNvbGxpc2lvblR5cGVzXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYWN0aXZlSG9va3NcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhY3RpdmVFdmVudHNcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGFyZW50XG4gICAgKiBAcGFyYW0ge251bWJlcn0gcGFyZW50XG4gICAgKiBAcGFyYW0ge1Jhd1JpZ2lkQm9keVNldH0gYm9kaWVzXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY3JlYXRlQ29sbGlkZXIoc2hhcGUsIHRyYW5zbGF0aW9uLCByb3RhdGlvbiwgdXNlTWFzc1Byb3BzLCBtYXNzLCBjZW50ZXJPZk1hc3MsIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhLCBkZW5zaXR5LCBmcmljdGlvbiwgcmVzdGl0dXRpb24sIGZyaWN0aW9uQ29tYmluZVJ1bGUsIHJlc3RpdHV0aW9uQ29tYmluZVJ1bGUsIGlzU2Vuc29yLCBjb2xsaXNpb25Hcm91cHMsIHNvbHZlckdyb3VwcywgYWN0aXZlQ29sbGlzaW9uVHlwZXMsIGFjdGl2ZUhvb2tzLCBhY3RpdmVFdmVudHMsIGhhc1BhcmVudCwgcGFyZW50LCBib2RpZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKHNoYXBlLCBSYXdTaGFwZSk7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3ModHJhbnNsYXRpb24sIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3Mocm90YXRpb24sIFJhd1JvdGF0aW9uKTtcbiAgICAgICAgICAgIF9hc3NlcnRDbGFzcyhjZW50ZXJPZk1hc3MsIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3MoYm9kaWVzLCBSYXdSaWdpZEJvZHlTZXQpO1xuICAgICAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9jcmVhdGVDb2xsaWRlcihyZXRwdHIsIHRoaXMucHRyLCBzaGFwZS5wdHIsIHRyYW5zbGF0aW9uLnB0ciwgcm90YXRpb24ucHRyLCB1c2VNYXNzUHJvcHMsIG1hc3MsIGNlbnRlck9mTWFzcy5wdHIsIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhLCBkZW5zaXR5LCBmcmljdGlvbiwgcmVzdGl0dXRpb24sIGZyaWN0aW9uQ29tYmluZVJ1bGUsIHJlc3RpdHV0aW9uQ29tYmluZVJ1bGUsIGlzU2Vuc29yLCBjb2xsaXNpb25Hcm91cHMsIHNvbHZlckdyb3VwcywgYWN0aXZlQ29sbGlzaW9uVHlwZXMsIGFjdGl2ZUhvb2tzLCBhY3RpdmVFdmVudHMsIGhhc1BhcmVudCwgcGFyZW50LCBib2RpZXMucHRyKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIHJldHVybiByMCA9PT0gMCA/IHVuZGVmaW5lZCA6IHIxID4+PiAwO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIFJlbW92ZXMgYSBjb2xsaWRlciBmcm9tIHRoaXMgc2V0IGFuZCB3YWtlLXVwIHRoZSByaWdpZC1ib2R5IGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtSYXdJc2xhbmRNYW5hZ2VyfSBpc2xhbmRzXG4gICAgKiBAcGFyYW0ge1Jhd1JpZ2lkQm9keVNldH0gYm9kaWVzXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmVtb3ZlKGhhbmRsZSwgaXNsYW5kcywgYm9kaWVzLCB3YWtlVXApIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGlzbGFuZHMsIFJhd0lzbGFuZE1hbmFnZXIpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoYm9kaWVzLCBSYXdSaWdpZEJvZHlTZXQpO1xuICAgICAgICB3YXNtLnJhd2NvbGxpZGVyc2V0X3JlbW92ZSh0aGlzLnB0ciwgaGFuZGxlLCBpc2xhbmRzLnB0ciwgYm9kaWVzLnB0ciwgd2FrZVVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBDaGVja3MgaWYgYSBjb2xsaWRlciB3aXRoIHRoZSBnaXZlbiBpbnRlZ2VyIGhhbmRsZSBleGlzdHMuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGlzSGFuZGxlVmFsaWQoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbGxpZGVyc2V0X2NvbnRhaW5zKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIEphdmFTY3JpcHQgZnVuY3Rpb24gdG8gdGhlIGludGVnZXIgaGFuZGxlIG9mIGVhY2ggY29sbGlkZXIgbWFuYWdlZCBieSB0aGlzIGNvbGxpZGVyIHNldC5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYGYoaGFuZGxlKWA6IHRoZSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCBjb2xsaWRlciBtYW5hZ2VkIGJ5IHRoaXMgY29sbGlkZXIgc2V0LiBDYWxsZWQgYXMgYGYoaGFuZGxlKWAuXG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgKi9cbiAgICBmb3JFYWNoQ29sbGlkZXJIYW5kbGUoZikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2FzbS5yYXdjb2xsaWRlcnNldF9mb3JFYWNoQ29sbGlkZXJIYW5kbGUodGhpcy5wdHIsIGFkZEJvcnJvd2VkT2JqZWN0KGYpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGhlYXBbc3RhY2tfcG9pbnRlcisrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdDb250YWN0TWFuaWZvbGQge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdDb250YWN0TWFuaWZvbGQucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3Y29udGFjdG1hbmlmb2xkX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgbm9ybWFsKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfbm9ybWFsKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgbG9jYWxfbjEoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9sb2NhbF9uMSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIGxvY2FsX24yKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfbG9jYWxfbjEodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBzdWJzaGFwZTEoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9zdWJzaGFwZTEodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBzdWJzaGFwZTIoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9zdWJzaGFwZTEodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBudW1fY29udGFjdHMoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9udW1fY29udGFjdHModGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY29udGFjdF9sb2NhbF9wMShpKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9jb250YWN0X2xvY2FsX3AxKHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge1Jhd1ZlY3RvciB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIGNvbnRhY3RfbG9jYWxfcDIoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfY29udGFjdF9sb2NhbF9wMSh0aGlzLnB0ciwgaSk7XG4gICAgICAgIHJldHVybiByZXQgPT09IDAgPyB1bmRlZmluZWQgOiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGlcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBjb250YWN0X2Rpc3QoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfY29udGFjdF9kaXN0KHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvbnRhY3RfZmlkMShpKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9jb250YWN0X2ZpZDEodGhpcy5wdHIsIGkpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY29udGFjdF9maWQyKGkpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdG1hbmlmb2xkX2NvbnRhY3RfZmlkMih0aGlzLnB0ciwgaSk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGlcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBjb250YWN0X2ltcHVsc2UoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfY29udGFjdF9pbXB1bHNlKHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvbnRhY3RfdGFuZ2VudF9pbXB1bHNlKGkpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdG1hbmlmb2xkX2NvbnRhY3RfdGFuZ2VudF9pbXB1bHNlKHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgbnVtX3NvbHZlcl9jb250YWN0cygpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdG1hbmlmb2xkX251bV9zb2x2ZXJfY29udGFjdHModGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgc29sdmVyX2NvbnRhY3RfcG9pbnQoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfc29sdmVyX2NvbnRhY3RfcG9pbnQodGhpcy5wdHIsIGkpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgc29sdmVyX2NvbnRhY3RfZGlzdChpKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RtYW5pZm9sZF9zb2x2ZXJfY29udGFjdF9kaXN0KHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHNvbHZlcl9jb250YWN0X2ZyaWN0aW9uKGkpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdG1hbmlmb2xkX3NvbHZlcl9jb250YWN0X2ZyaWN0aW9uKHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHNvbHZlcl9jb250YWN0X3Jlc3RpdHV0aW9uKGkpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdG1hbmlmb2xkX3NvbHZlcl9jb250YWN0X3Jlc3RpdHV0aW9uKHRoaXMucHRyLCBpKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaVxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIHNvbHZlcl9jb250YWN0X3RhbmdlbnRfdmVsb2NpdHkoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0bWFuaWZvbGRfc29sdmVyX2NvbnRhY3RfdGFuZ2VudF92ZWxvY2l0eSh0aGlzLnB0ciwgaSk7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd0NvbnRhY3RQYWlyIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3Q29udGFjdFBhaXIucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3Y29udGFjdHBhaXJfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBjb2xsaWRlcjEoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2NvbnRhY3RwYWlyX2NvbGxpZGVyMSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvbGxpZGVyMigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdHBhaXJfY29sbGlkZXIyKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgbnVtQ29udGFjdE1hbmlmb2xkcygpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3Y29udGFjdHBhaXJfbnVtQ29udGFjdE1hbmlmb2xkcyh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGlcbiAgICAqIEByZXR1cm5zIHtSYXdDb250YWN0TWFuaWZvbGQgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjb250YWN0TWFuaWZvbGQoaSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdjb250YWN0cGFpcl9jb250YWN0TWFuaWZvbGQodGhpcy5wdHIsIGkpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3Q29udGFjdE1hbmlmb2xkLl9fd3JhcChyZXQpO1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdEZXNlcmlhbGl6ZWRXb3JsZCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd0Rlc2VyaWFsaXplZFdvcmxkLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd2Rlc2VyaWFsaXplZHdvcmxkX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgdGFrZUdyYXZpdHkoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2Rlc2VyaWFsaXplZHdvcmxkX3Rha2VHcmF2aXR5KHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3SW50ZWdyYXRpb25QYXJhbWV0ZXJzIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgdGFrZUludGVncmF0aW9uUGFyYW1ldGVycygpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3ZGVzZXJpYWxpemVkd29ybGRfdGFrZUludGVncmF0aW9uUGFyYW1ldGVycyh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPT09IDAgPyB1bmRlZmluZWQgOiBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge1Jhd0lzbGFuZE1hbmFnZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICB0YWtlSXNsYW5kTWFuYWdlcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3ZGVzZXJpYWxpemVkd29ybGRfdGFrZUlzbGFuZE1hbmFnZXIodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3SXNsYW5kTWFuYWdlci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3QnJvYWRQaGFzZSB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHRha2VCcm9hZFBoYXNlKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdkZXNlcmlhbGl6ZWR3b3JsZF90YWtlQnJvYWRQaGFzZSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPT09IDAgPyB1bmRlZmluZWQgOiBSYXdCcm9hZFBoYXNlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtSYXdOYXJyb3dQaGFzZSB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHRha2VOYXJyb3dQaGFzZSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3ZGVzZXJpYWxpemVkd29ybGRfdGFrZU5hcnJvd1BoYXNlKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd05hcnJvd1BoYXNlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtSYXdSaWdpZEJvZHlTZXQgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICB0YWtlQm9kaWVzKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdkZXNlcmlhbGl6ZWR3b3JsZF90YWtlQm9kaWVzKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1JpZ2lkQm9keVNldC5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3Q29sbGlkZXJTZXQgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICB0YWtlQ29sbGlkZXJzKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdkZXNlcmlhbGl6ZWR3b3JsZF90YWtlQ29sbGlkZXJzKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd0NvbGxpZGVyU2V0Ll9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtSYXdKb2ludFNldCB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHRha2VKb2ludHMoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2Rlc2VyaWFsaXplZHdvcmxkX3Rha2VKb2ludHModGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3Sm9pbnRTZXQuX193cmFwKHJldCk7XG4gICAgfVxufVxuLyoqXG4qIEEgc3RydWN0dXJlIHJlc3BvbnNpYmxlIGZvciBjb2xsZWN0aW5nIGV2ZW50cyBnZW5lcmF0ZWRcbiogYnkgdGhlIHBoeXNpY3MgZW5naW5lLlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdFdmVudFF1ZXVlIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3RXZlbnRRdWV1ZS5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19yYXdldmVudHF1ZXVlX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBDcmVhdGVzIGEgbmV3IGV2ZW50IGNvbGxlY3Rvci5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYGF1dG9EcmFpbmA6IHNldHRpbmcgdGhpcyB0byBgdHJ1ZWAgaXMgc3Ryb25nbHkgcmVjb21tZW5kZWQuIElmIHRydWUsIHRoZSBjb2xsZWN0b3Igd2lsbFxuICAgICogYmUgYXV0b21hdGljYWxseSBkcmFpbmVkIGJlZm9yZSBlYWNoIGB3b3JsZC5zdGVwKGNvbGxlY3RvcilgLiBJZiBmYWxzZSwgdGhlIGNvbGxlY3RvciB3aWxsXG4gICAgKiBrZWVwIGFsbCBldmVudHMgaW4gbWVtb3J5IHVubGVzcyBpdCBpcyBtYW51YWxseSBkcmFpbmVkL2NsZWFyZWQ7IHRoaXMgbWF5IGxlYWQgdG8gdW5ib3VuZGVkIHVzZSBvZlxuICAgICogUkFNIGlmIG5vIGRyYWluIGlzIHBlcmZvcm1lZC5cbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXV0b0RyYWluXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdXRvRHJhaW4pIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3ZXZlbnRxdWV1ZV9uZXcoYXV0b0RyYWluKTtcbiAgICAgICAgcmV0dXJuIFJhd0V2ZW50UXVldWUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQXBwbGllcyB0aGUgZ2l2ZW4gamF2YXNjcmlwdCBjbG9zdXJlIG9uIGVhY2ggY29udGFjdCBldmVudCBvZiB0aGlzIGNvbGxlY3RvciwgdGhlbiBjbGVhclxuICAgICogdGhlIGludGVybmFsIGNvbnRhY3QgZXZlbnQgYnVmZmVyLlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgZihoYW5kbGUxLCBoYW5kbGUyLCBzdGFydGVkKWA6ICBKYXZhU2NyaXB0IGNsb3N1cmUgYXBwbGllZCB0byBlYWNoIGNvbnRhY3QgZXZlbnQuIFRoZVxuICAgICogY2xvc3VyZSBzaG91bGQgdGFrZSB0aHJlZSBhcmd1bWVudHM6IHR3byBpbnRlZ2VycyByZXByZXNlbnRpbmcgdGhlIGhhbmRsZXMgb2YgdGhlIGNvbGxpZGVyc1xuICAgICogaW52b2x2ZWQgaW4gdGhlIGNvbnRhY3QsIGFuZCBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgY29udGFjdCBzdGFydGVkICh0cnVlKSBvciBzdG9wcGVkXG4gICAgKiAoZmFsc2UpLlxuICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICovXG4gICAgZHJhaW5Db250YWN0RXZlbnRzKGYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdhc20ucmF3ZXZlbnRxdWV1ZV9kcmFpbkNvbnRhY3RFdmVudHModGhpcy5wdHIsIGFkZEJvcnJvd2VkT2JqZWN0KGYpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGhlYXBbc3RhY2tfcG9pbnRlcisrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIGphdmFzY3JpcHQgY2xvc3VyZSBvbiBlYWNoIHByb3hpbWl0eSBldmVudCBvZiB0aGlzIGNvbGxlY3RvciwgdGhlbiBjbGVhclxuICAgICogdGhlIGludGVybmFsIHByb3hpbWl0eSBldmVudCBidWZmZXIuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGBmKGhhbmRsZTEsIGhhbmRsZTIsIHByZXZfcHJveCwgbmV3X3Byb3gpYDogIEphdmFTY3JpcHQgY2xvc3VyZSBhcHBsaWVkIHRvIGVhY2ggcHJveGltaXR5IGV2ZW50LiBUaGVcbiAgICAqIGNsb3N1cmUgc2hvdWxkIHRha2UgZm91ciBhcmd1bWVudHM6IHR3byBpbnRlZ2VycyByZXByZXNlbnRpbmcgdGhlIGhhbmRsZXMgb2YgdGhlIGNvbGxpZGVyc1xuICAgICogaW52b2x2ZWQgaW4gdGhlIHByb3hpbWl0eSwgYW5kIG9uZSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgaW50ZXJzZWN0aW9uIHN0YXR1cy5cbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAqL1xuICAgIGRyYWluSW50ZXJzZWN0aW9uRXZlbnRzKGYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdhc20ucmF3ZXZlbnRxdWV1ZV9kcmFpbkludGVyc2VjdGlvbkV2ZW50cyh0aGlzLnB0ciwgYWRkQm9ycm93ZWRPYmplY3QoZikpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaGVhcFtzdGFja19wb2ludGVyKytdID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogUmVtb3ZlcyBhbGwgZXZlbnRzIGNvbnRhaW5lZCBieSB0aGlzIGNvbGxlY3Rvci5cbiAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB3YXNtLnJhd2V2ZW50cXVldWVfY2xlYXIodGhpcy5wdHIpO1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX25ldygpO1xuICAgICAgICByZXR1cm4gUmF3SW50ZWdyYXRpb25QYXJhbWV0ZXJzLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgZHQoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19kdCh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCBlcnAoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19lcnAodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgam9pbnRFcnAoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19qb2ludEVycCh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCB3YXJtc3RhcnRDb2VmZigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX3dhcm1zdGFydENvZWZmKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IGFsbG93ZWRMaW5lYXJFcnJvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX2FsbG93ZWRMaW5lYXJFcnJvcih0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCBwcmVkaWN0aW9uRGlzdGFuY2UoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19wcmVkaWN0aW9uRGlzdGFuY2UodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgYWxsb3dlZEFuZ3VsYXJFcnJvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX2FsbG93ZWRBbmd1bGFyRXJyb3IodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgbWF4TGluZWFyQ29ycmVjdGlvbigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX21heExpbmVhckNvcnJlY3Rpb24odGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgbWF4QW5ndWxhckNvcnJlY3Rpb24oKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19tYXhBbmd1bGFyQ29ycmVjdGlvbih0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCBtYXhWZWxvY2l0eUl0ZXJhdGlvbnMoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19tYXhWZWxvY2l0eUl0ZXJhdGlvbnModGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgbWF4UG9zaXRpb25JdGVyYXRpb25zKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfbWF4UG9zaXRpb25JdGVyYXRpb25zKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IG1pbklzbGFuZFNpemUoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19taW5Jc2xhbmRTaXplKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IG1heENjZFN1YnN0ZXBzKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfbWF4Q2NkU3Vic3RlcHModGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICovXG4gICAgc2V0IGR0KHZhbHVlKSB7XG4gICAgICAgIHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX3NldF9kdCh0aGlzLnB0ciwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICovXG4gICAgc2V0IGVycCh2YWx1ZSkge1xuICAgICAgICB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19zZXRfZXJwKHRoaXMucHRyLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgKi9cbiAgICBzZXQgam9pbnRFcnAodmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X2pvaW50RXJwKHRoaXMucHRyLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgKi9cbiAgICBzZXQgd2FybXN0YXJ0Q29lZmYodmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X3dhcm1zdGFydENvZWZmKHRoaXMucHRyLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgKi9cbiAgICBzZXQgYWxsb3dlZExpbmVhckVycm9yKHZhbHVlKSB7XG4gICAgICAgIHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX3NldF9hbGxvd2VkTGluZWFyRXJyb3IodGhpcy5wdHIsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAqL1xuICAgIHNldCBwcmVkaWN0aW9uRGlzdGFuY2UodmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X3ByZWRpY3Rpb25EaXN0YW5jZSh0aGlzLnB0ciwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICovXG4gICAgc2V0IGFsbG93ZWRBbmd1bGFyRXJyb3IodmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X2FsbG93ZWRBbmd1bGFyRXJyb3IodGhpcy5wdHIsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAqL1xuICAgIHNldCBtYXhMaW5lYXJDb3JyZWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX3NldF9tYXhMaW5lYXJDb3JyZWN0aW9uKHRoaXMucHRyLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgKi9cbiAgICBzZXQgbWF4QW5ndWxhckNvcnJlY3Rpb24odmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X21heEFuZ3VsYXJDb3JyZWN0aW9uKHRoaXMucHRyLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgKi9cbiAgICBzZXQgbWF4VmVsb2NpdHlJdGVyYXRpb25zKHZhbHVlKSB7XG4gICAgICAgIHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX3NldF9tYXhWZWxvY2l0eUl0ZXJhdGlvbnModGhpcy5wdHIsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAqL1xuICAgIHNldCBtYXhQb3NpdGlvbkl0ZXJhdGlvbnModmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X21heFBvc2l0aW9uSXRlcmF0aW9ucyh0aGlzLnB0ciwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICovXG4gICAgc2V0IG1pbklzbGFuZFNpemUodmFsdWUpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X21pbklzbGFuZFNpemUodGhpcy5wdHIsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAqL1xuICAgIHNldCBtYXhDY2RTdWJzdGVwcyh2YWx1ZSkge1xuICAgICAgICB3YXNtLnJhd2ludGVncmF0aW9ucGFyYW1ldGVyc19zZXRfbWF4Q2NkU3Vic3RlcHModGhpcy5wdHIsIHZhbHVlKTtcbiAgICB9XG59XG4vKipcbiovXG5leHBvcnQgY2xhc3MgUmF3SXNsYW5kTWFuYWdlciB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd0lzbGFuZE1hbmFnZXIucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3aXNsYW5kbWFuYWdlcl9mcmVlKHB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2lzbGFuZG1hbmFnZXJfbmV3KCk7XG4gICAgICAgIHJldHVybiBSYXdJc2xhbmRNYW5hZ2VyLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIEphdmFTY3JpcHQgZnVuY3Rpb24gdG8gdGhlIGludGVnZXIgaGFuZGxlIG9mIGVhY2ggYWN0aXZlIHJpZ2lkLWJvZHlcbiAgICAqIG1hbmFnZWQgYnkgdGhpcyBpc2xhbmQgbWFuYWdlci5cbiAgICAqXG4gICAgKiBBZnRlciBhIHNob3J0IHRpbWUgb2YgaW5hY3Rpdml0eSwgYSByaWdpZC1ib2R5IGlzIGF1dG9tYXRpY2FsbHkgZGVhY3RpdmF0ZWQgKFwiYXNsZWVwXCIpIGJ5XG4gICAgKiB0aGUgcGh5c2ljcyBlbmdpbmUgaW4gb3JkZXIgdG8gc2F2ZSBjb21wdXRhdGlvbmFsIHBvd2VyLiBBIHNsZWVwaW5nIHJpZ2lkLWJvZHkgbmV2ZXIgbW92ZXNcbiAgICAqIHVubGVzcyBpdCBpcyBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlci5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYGYoaGFuZGxlKWA6IHRoZSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgaW50ZWdlciBoYW5kbGUgb2YgZWFjaCBhY3RpdmUgcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXNcbiAgICAqICAgc2V0LiBDYWxsZWQgYXMgYGYoY29sbGlkZXIpYC5cbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAqL1xuICAgIGZvckVhY2hBY3RpdmVSaWdpZEJvZHlIYW5kbGUoZikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2FzbS5yYXdpc2xhbmRtYW5hZ2VyX2ZvckVhY2hBY3RpdmVSaWdpZEJvZHlIYW5kbGUodGhpcy5wdHIsIGFkZEJvcnJvd2VkT2JqZWN0KGYpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGhlYXBbc3RhY2tfcG9pbnRlcisrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdKb2ludFBhcmFtcyB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd0pvaW50UGFyYW1zLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd2pvaW50cGFyYW1zX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBDcmVhdGUgYSBuZXcgam9pbnQgZGVzY3JpcHRvciB0aGF0IGJ1aWxkcyBCYWxsIGpvaW50cy5cbiAgICAqXG4gICAgKiBBIGJhbGwgam9pbnRzIGFsbG93cyB0aHJlZSByZWxhdGl2ZSByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbVxuICAgICogYnkgcHJldmVudGluZyBhbnkgcmVsYXRpdmUgdHJhbnNsYXRpb24gYmV0d2VlbiB0aGUgYW5jaG9ycyBvZiB0aGVcbiAgICAqIHR3byBhdHRhY2hlZCByaWdpZC1ib2RpZXMuXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gYW5jaG9yMVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGFuY2hvcjJcbiAgICAqIEByZXR1cm5zIHtSYXdKb2ludFBhcmFtc31cbiAgICAqL1xuICAgIHN0YXRpYyBiYWxsKGFuY2hvcjEsIGFuY2hvcjIpIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGFuY2hvcjEsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhhbmNob3IyLCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHBhcmFtc19iYWxsKGFuY2hvcjEucHRyLCBhbmNob3IyLnB0cik7XG4gICAgICAgIHJldHVybiBSYXdKb2ludFBhcmFtcy5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBDcmVhdGVzIGEgbmV3IGpvaW50IGRlc2NyaXB0b3IgdGhhdCBidWlsZHMgYSBQcmlzbWF0aWMgam9pbnQuXG4gICAgKlxuICAgICogQSBwcmlzbWF0aWMgam9pbnQgcmVtb3ZlcyBhbGwgdGhlIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZVxuICAgICogYWZmZWN0ZWQgYm9kaWVzLCBleGNlcHQgZm9yIHRoZSB0cmFuc2xhdGlvbiBhbG9uZyBvbmUgYXhpcy5cbiAgICAqXG4gICAgKiBSZXR1cm5zIGBOb25lYCBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIGF4ZXMgY2Fubm90IGJlIG5vcm1hbGl6ZWQuXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gYW5jaG9yMVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGF4aXMxXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gYW5jaG9yMlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGF4aXMyXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxpbWl0c0VuYWJsZWRcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdHNNaW5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdHNNYXhcbiAgICAqIEByZXR1cm5zIHtSYXdKb2ludFBhcmFtcyB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHN0YXRpYyBwcmlzbWF0aWMoYW5jaG9yMSwgYXhpczEsIGFuY2hvcjIsIGF4aXMyLCBsaW1pdHNFbmFibGVkLCBsaW1pdHNNaW4sIGxpbWl0c01heCkge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoYW5jaG9yMSwgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGF4aXMxLCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoYW5jaG9yMiwgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGF4aXMyLCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHBhcmFtc19wcmlzbWF0aWMoYW5jaG9yMS5wdHIsIGF4aXMxLnB0ciwgYW5jaG9yMi5wdHIsIGF4aXMyLnB0ciwgbGltaXRzRW5hYmxlZCwgbGltaXRzTWluLCBsaW1pdHNNYXgpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3Sm9pbnRQYXJhbXMuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQ3JlYXRlcyBhIG5ldyBqb2ludCBkZXNjcmlwdG9yIHRoYXQgYnVpbGRzIGEgRml4ZWQgam9pbnQuXG4gICAgKlxuICAgICogQSBmaXhlZCBqb2ludCByZW1vdmVzIGFsbCB0aGUgZGVncmVlcyBvZiBmcmVlZG9tIGJldHdlZW4gdGhlIGFmZmVjdGVkIGJvZGllcy5cbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBhbmNob3IxXG4gICAgKiBAcGFyYW0ge1Jhd1JvdGF0aW9ufSBheGVzMVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGFuY2hvcjJcbiAgICAqIEBwYXJhbSB7UmF3Um90YXRpb259IGF4ZXMyXG4gICAgKiBAcmV0dXJucyB7UmF3Sm9pbnRQYXJhbXN9XG4gICAgKi9cbiAgICBzdGF0aWMgZml4ZWQoYW5jaG9yMSwgYXhlczEsIGFuY2hvcjIsIGF4ZXMyKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhhbmNob3IxLCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoYXhlczEsIFJhd1JvdGF0aW9uKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGFuY2hvcjIsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhheGVzMiwgUmF3Um90YXRpb24pO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHBhcmFtc19maXhlZChhbmNob3IxLnB0ciwgYXhlczEucHRyLCBhbmNob3IyLnB0ciwgYXhlczIucHRyKTtcbiAgICAgICAgcmV0dXJuIFJhd0pvaW50UGFyYW1zLl9fd3JhcChyZXQpO1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdKb2ludFNldCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd0pvaW50U2V0LnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd2pvaW50c2V0X2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgdW5pcXVlIGludGVnZXIgaWRlbnRpZmllciBvZiB0aGUgZmlyc3QgcmlnaWQtYm9keSB0aGlzIGpvaW50IGl0IGF0dGFjaGVkIHRvLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGpvaW50Qm9keUhhbmRsZTEoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd2pvaW50c2V0X2pvaW50Qm9keUhhbmRsZTEodGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHVuaXF1ZSBpbnRlZ2VyIGlkZW50aWZpZXIgb2YgdGhlIHNlY29uZCByaWdpZC1ib2R5IHRoaXMgam9pbnQgaXMgYXR0YWNoZWQgdG8uXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgam9pbnRCb2R5SGFuZGxlMihoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRCb2R5SGFuZGxlMih0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgdHlwZSBvZiB0aGlzIGpvaW50IGdpdmVuIGFzIGEgc3RyaW5nLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGpvaW50VHlwZShoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRUeXBlKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoaXMgam9pbnQuXG4gICAgKlxuICAgICogVGhlIGZpcnN0IGFuY2hvciBnaXZlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHBvaW50cyBhcHBsaWNhdGlvbiBwb2ludCBvbiB0aGVcbiAgICAqIGxvY2FsIGZyYW1lIG9mIHRoZSBmaXJzdCByaWdpZC1ib2R5IGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIGpvaW50QW5jaG9yMShoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRBbmNob3IxKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgc2Vjb25kIGFuY2hvciBvZiB0aGlzIGpvaW50LlxuICAgICpcbiAgICAqIFRoZSBzZWNvbmQgYW5jaG9yIGdpdmVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRzIGFwcGxpY2F0aW9uIHBvaW50IG9uIHRoZVxuICAgICogbG9jYWwgZnJhbWUgb2YgdGhlIHNlY29uZCByaWdpZC1ib2R5IGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIGpvaW50QW5jaG9yMihoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRBbmNob3IyKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBmaXJzdCBheGlzIG9mIHRoaXMgam9pbnQsIGlmIGFueS5cbiAgICAqXG4gICAgKiBGb3Igam9pbnRzIHdoZXJlIGFuIGFwcGxpY2F0aW9uIGF4aXMgbWFrZXMgc2Vuc2UgKGUuZy4gdGhlIHJldm9sdXRlIGFuZCBwcmlzbWF0aWMgam9pbnMpLFxuICAgICogdGhpcyByZXR1cm5zIHRoZSBhcHBsaWNhdGlvbiBheGlzIG9uIHRoZSBmaXJzdCByaWdpZC1ib2R5IHRoaXMgam9pbnQgaXMgYXR0YWNoZWQgdG8sIGV4cHJlc3NlZFxuICAgICogaW4gdGhlIGxvY2FsLXNwYWNlIG9mIHRoaXMgZmlyc3QgcmlnaWQtYm9keS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtSYXdWZWN0b3IgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBqb2ludEF4aXMxKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHNldF9qb2ludEF4aXMxKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBzZWNvbmQgYXhpcyBvZiB0aGlzIGpvaW50LCBpZiBhbnkuXG4gICAgKlxuICAgICogRm9yIGpvaW50cyB3aGVyZSBhbiBhcHBsaWNhdGlvbiBheGlzIG1ha2VzIHNlbnNlIChlLmcuIHRoZSByZXZvbHV0ZSBhbmQgcHJpc21hdGljIGpvaW5zKSxcbiAgICAqIHRoaXMgcmV0dXJucyB0aGUgYXBwbGljYXRpb24gYXhpcyBvbiB0aGUgc2Vjb25kIHJpZ2lkLWJvZHkgdGhpcyBqb2ludCBpcyBhdHRhY2hlZCB0bywgZXhwcmVzc2VkXG4gICAgKiBpbiB0aGUgbG9jYWwtc3BhY2Ugb2YgdGhpcyBzZWNvbmQgcmlnaWQtYm9keS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtSYXdWZWN0b3IgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBqb2ludEF4aXMyKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHNldF9qb2ludEF4aXMyKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFyZSB0aGUgbGltaXRzIGZvciB0aGlzIGpvaW50IGVuYWJsZWQ/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGpvaW50TGltaXRzRW5hYmxlZChoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRMaW1pdHNFbmFibGVkKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElmIHRoaXMgaXMgYSBwcmlzbWF0aWMgam9pbnQsIHJldHVybnMgaXRzIGxvd2VyIGxpbWl0LlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGpvaW50TGltaXRzTWluKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHNldF9qb2ludExpbWl0c01pbih0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBJZiB0aGlzIGlzIGEgcHJpc21hdGljIGpvaW50LCByZXR1cm5zIGl0cyB1cHBlciBsaW1pdC5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBqb2ludExpbWl0c01heChoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfam9pbnRMaW1pdHNNYXgodGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IG1vZGVsXG4gICAgKi9cbiAgICBqb2ludENvbmZpZ3VyZU1vdG9yTW9kZWwoaGFuZGxlLCBtb2RlbCkge1xuICAgICAgICB3YXNtLnJhd2pvaW50c2V0X2pvaW50Q29uZmlndXJlTW90b3JNb2RlbCh0aGlzLnB0ciwgaGFuZGxlLCBtb2RlbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFZlbFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGZhY3RvclxuICAgICovXG4gICAgam9pbnRDb25maWd1cmVVbml0TW90b3JWZWxvY2l0eShoYW5kbGUsIHRhcmdldFZlbCwgZmFjdG9yKSB7XG4gICAgICAgIHdhc20ucmF3am9pbnRzZXRfam9pbnRDb25maWd1cmVVbml0TW90b3JWZWxvY2l0eSh0aGlzLnB0ciwgaGFuZGxlLCB0YXJnZXRWZWwsIGZhY3Rvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFBvc1xuICAgICogQHBhcmFtIHtudW1iZXJ9IHN0aWZmbmVzc1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGRhbXBpbmdcbiAgICAqL1xuICAgIGpvaW50Q29uZmlndXJlVW5pdE1vdG9yUG9zaXRpb24oaGFuZGxlLCB0YXJnZXRQb3MsIHN0aWZmbmVzcywgZGFtcGluZykge1xuICAgICAgICB3YXNtLnJhd2pvaW50c2V0X2pvaW50Q29uZmlndXJlVW5pdE1vdG9yUG9zaXRpb24odGhpcy5wdHIsIGhhbmRsZSwgdGFyZ2V0UG9zLCBzdGlmZm5lc3MsIGRhbXBpbmcpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRQb3NcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRWZWxcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGlmZm5lc3NcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYW1waW5nXG4gICAgKi9cbiAgICBqb2ludENvbmZpZ3VyZVVuaXRNb3RvcihoYW5kbGUsIHRhcmdldFBvcywgdGFyZ2V0VmVsLCBzdGlmZm5lc3MsIGRhbXBpbmcpIHtcbiAgICAgICAgd2FzbS5yYXdqb2ludHNldF9qb2ludENvbmZpZ3VyZVVuaXRNb3Rvcih0aGlzLnB0ciwgaGFuZGxlLCB0YXJnZXRQb3MsIHRhcmdldFZlbCwgc3RpZmZuZXNzLCBkYW1waW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfbmV3KCk7XG4gICAgICAgIHJldHVybiBSYXdKb2ludFNldC5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd1JpZ2lkQm9keVNldH0gYm9kaWVzXG4gICAgKiBAcGFyYW0ge1Jhd0pvaW50UGFyYW1zfSBwYXJhbXNcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBwYXJlbnQxXG4gICAgKiBAcGFyYW0ge251bWJlcn0gcGFyZW50MlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNyZWF0ZUpvaW50KGJvZGllcywgcGFyYW1zLCBwYXJlbnQxLCBwYXJlbnQyKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhib2RpZXMsIFJhd1JpZ2lkQm9keVNldCk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhwYXJhbXMsIFJhd0pvaW50UGFyYW1zKTtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfY3JlYXRlSm9pbnQodGhpcy5wdHIsIGJvZGllcy5wdHIsIHBhcmFtcy5wdHIsIHBhcmVudDEsIHBhcmVudDIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7UmF3SXNsYW5kTWFuYWdlcn0gaXNsYW5kc1xuICAgICogQHBhcmFtIHtSYXdSaWdpZEJvZHlTZXR9IGJvZGllc1xuICAgICogQHBhcmFtIHtib29sZWFufSB3YWtlVXBcbiAgICAqL1xuICAgIHJlbW92ZShoYW5kbGUsIGlzbGFuZHMsIGJvZGllcywgd2FrZVVwKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhpc2xhbmRzLCBSYXdJc2xhbmRNYW5hZ2VyKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGJvZGllcywgUmF3UmlnaWRCb2R5U2V0KTtcbiAgICAgICAgd2FzbS5yYXdqb2ludHNldF9yZW1vdmUodGhpcy5wdHIsIGhhbmRsZSwgaXNsYW5kcy5wdHIsIGJvZGllcy5wdHIsIHdha2VVcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGxlbigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3am9pbnRzZXRfbGVuKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGNvbnRhaW5zKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdqb2ludHNldF9jb250YWlucyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCAhPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBBcHBsaWVzIHRoZSBnaXZlbiBKYXZhU2NyaXB0IGZ1bmN0aW9uIHRvIHRoZSBpbnRlZ2VyIGhhbmRsZSBvZiBlYWNoIGpvaW50IG1hbmFnZWQgYnkgdGhpcyBwaHlzaWNzIHdvcmxkLlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgZihoYW5kbGUpYDogdGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSBpbnRlZ2VyIGhhbmRsZSBvZiBlYWNoIGpvaW50IG1hbmFnZWQgYnkgdGhpcyBzZXQuIENhbGxlZCBhcyBgZihjb2xsaWRlcilgLlxuICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICovXG4gICAgZm9yRWFjaEpvaW50SGFuZGxlKGYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdhc20ucmF3am9pbnRzZXRfZm9yRWFjaEpvaW50SGFuZGxlKHRoaXMucHRyLCBhZGRCb3Jyb3dlZE9iamVjdChmKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBoZWFwW3N0YWNrX3BvaW50ZXIrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiovXG5leHBvcnQgY2xhc3MgUmF3TmFycm93UGhhc2Uge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdOYXJyb3dQaGFzZS5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19yYXduYXJyb3dwaGFzZV9mcmVlKHB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd25hcnJvd3BoYXNlX25ldygpO1xuICAgICAgICByZXR1cm4gUmF3TmFycm93UGhhc2UuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZTFcbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAqL1xuICAgIGNvbnRhY3RzX3dpdGgoaGFuZGxlMSwgZikge1xuICAgICAgICB3YXNtLnJhd25hcnJvd3BoYXNlX2NvbnRhY3RzX3dpdGgodGhpcy5wdHIsIGhhbmRsZTEsIGFkZEhlYXBPYmplY3QoZikpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUxXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlMlxuICAgICogQHJldHVybnMge1Jhd0NvbnRhY3RQYWlyIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY29udGFjdF9wYWlyKGhhbmRsZTEsIGhhbmRsZTIpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3bmFycm93cGhhc2VfY29udGFjdF9wYWlyKHRoaXMucHRyLCBoYW5kbGUxLCBoYW5kbGUyKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd0NvbnRhY3RQYWlyLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUxXG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgKi9cbiAgICBpbnRlcnNlY3Rpb25zX3dpdGgoaGFuZGxlMSwgZikge1xuICAgICAgICB3YXNtLnJhd25hcnJvd3BoYXNlX2ludGVyc2VjdGlvbnNfd2l0aCh0aGlzLnB0ciwgaGFuZGxlMSwgYWRkSGVhcE9iamVjdChmKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZTFcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUyXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGludGVyc2VjdGlvbl9wYWlyKGhhbmRsZTEsIGhhbmRsZTIpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3bmFycm93cGhhc2VfaW50ZXJzZWN0aW9uX3BhaXIodGhpcy5wdHIsIGhhbmRsZTEsIGhhbmRsZTIpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdQaHlzaWNzUGlwZWxpbmUge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdQaHlzaWNzUGlwZWxpbmUucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3cGh5c2ljc3BpcGVsaW5lX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cGh5c2ljc3BpcGVsaW5lX25ldygpO1xuICAgICAgICByZXR1cm4gUmF3UGh5c2ljc1BpcGVsaW5lLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBncmF2aXR5XG4gICAgKiBAcGFyYW0ge1Jhd0ludGVncmF0aW9uUGFyYW1ldGVyc30gaW50ZWdyYXRpb25QYXJhbWV0ZXJzXG4gICAgKiBAcGFyYW0ge1Jhd0lzbGFuZE1hbmFnZXJ9IGlzbGFuZHNcbiAgICAqIEBwYXJhbSB7UmF3QnJvYWRQaGFzZX0gYnJvYWRQaGFzZVxuICAgICogQHBhcmFtIHtSYXdOYXJyb3dQaGFzZX0gbmFycm93UGhhc2VcbiAgICAqIEBwYXJhbSB7UmF3UmlnaWRCb2R5U2V0fSBib2RpZXNcbiAgICAqIEBwYXJhbSB7UmF3Q29sbGlkZXJTZXR9IGNvbGxpZGVyc1xuICAgICogQHBhcmFtIHtSYXdKb2ludFNldH0gam9pbnRzXG4gICAgKiBAcGFyYW0ge1Jhd0NDRFNvbHZlcn0gY2NkX3NvbHZlclxuICAgICovXG4gICAgc3RlcChncmF2aXR5LCBpbnRlZ3JhdGlvblBhcmFtZXRlcnMsIGlzbGFuZHMsIGJyb2FkUGhhc2UsIG5hcnJvd1BoYXNlLCBib2RpZXMsIGNvbGxpZGVycywgam9pbnRzLCBjY2Rfc29sdmVyKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhncmF2aXR5LCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaW50ZWdyYXRpb25QYXJhbWV0ZXJzLCBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaXNsYW5kcywgUmF3SXNsYW5kTWFuYWdlcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhicm9hZFBoYXNlLCBSYXdCcm9hZFBoYXNlKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKG5hcnJvd1BoYXNlLCBSYXdOYXJyb3dQaGFzZSk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhib2RpZXMsIFJhd1JpZ2lkQm9keVNldCk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGpvaW50cywgUmF3Sm9pbnRTZXQpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoY2NkX3NvbHZlciwgUmF3Q0NEU29sdmVyKTtcbiAgICAgICAgd2FzbS5yYXdwaHlzaWNzcGlwZWxpbmVfc3RlcCh0aGlzLnB0ciwgZ3Jhdml0eS5wdHIsIGludGVncmF0aW9uUGFyYW1ldGVycy5wdHIsIGlzbGFuZHMucHRyLCBicm9hZFBoYXNlLnB0ciwgbmFycm93UGhhc2UucHRyLCBib2RpZXMucHRyLCBjb2xsaWRlcnMucHRyLCBqb2ludHMucHRyLCBjY2Rfc29sdmVyLnB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGdyYXZpdHlcbiAgICAqIEBwYXJhbSB7UmF3SW50ZWdyYXRpb25QYXJhbWV0ZXJzfSBpbnRlZ3JhdGlvblBhcmFtZXRlcnNcbiAgICAqIEBwYXJhbSB7UmF3SXNsYW5kTWFuYWdlcn0gaXNsYW5kc1xuICAgICogQHBhcmFtIHtSYXdCcm9hZFBoYXNlfSBicm9hZFBoYXNlXG4gICAgKiBAcGFyYW0ge1Jhd05hcnJvd1BoYXNlfSBuYXJyb3dQaGFzZVxuICAgICogQHBhcmFtIHtSYXdSaWdpZEJvZHlTZXR9IGJvZGllc1xuICAgICogQHBhcmFtIHtSYXdDb2xsaWRlclNldH0gY29sbGlkZXJzXG4gICAgKiBAcGFyYW0ge1Jhd0pvaW50U2V0fSBqb2ludHNcbiAgICAqIEBwYXJhbSB7UmF3Q0NEU29sdmVyfSBjY2Rfc29sdmVyXG4gICAgKiBAcGFyYW0ge1Jhd0V2ZW50UXVldWV9IGV2ZW50UXVldWVcbiAgICAqIEBwYXJhbSB7b2JqZWN0fSBob29rT2JqZWN0XG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rRmlsdGVyQ29udGFjdFBhaXJcbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tGaWx0ZXJJbnRlcnNlY3Rpb25QYWlyXG4gICAgKi9cbiAgICBzdGVwV2l0aEV2ZW50cyhncmF2aXR5LCBpbnRlZ3JhdGlvblBhcmFtZXRlcnMsIGlzbGFuZHMsIGJyb2FkUGhhc2UsIG5hcnJvd1BoYXNlLCBib2RpZXMsIGNvbGxpZGVycywgam9pbnRzLCBjY2Rfc29sdmVyLCBldmVudFF1ZXVlLCBob29rT2JqZWN0LCBob29rRmlsdGVyQ29udGFjdFBhaXIsIGhvb2tGaWx0ZXJJbnRlcnNlY3Rpb25QYWlyKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhncmF2aXR5LCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaW50ZWdyYXRpb25QYXJhbWV0ZXJzLCBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaXNsYW5kcywgUmF3SXNsYW5kTWFuYWdlcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhicm9hZFBoYXNlLCBSYXdCcm9hZFBoYXNlKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKG5hcnJvd1BoYXNlLCBSYXdOYXJyb3dQaGFzZSk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhib2RpZXMsIFJhd1JpZ2lkQm9keVNldCk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGpvaW50cywgUmF3Sm9pbnRTZXQpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoY2NkX3NvbHZlciwgUmF3Q0NEU29sdmVyKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGV2ZW50UXVldWUsIFJhd0V2ZW50UXVldWUpO1xuICAgICAgICB3YXNtLnJhd3BoeXNpY3NwaXBlbGluZV9zdGVwV2l0aEV2ZW50cyh0aGlzLnB0ciwgZ3Jhdml0eS5wdHIsIGludGVncmF0aW9uUGFyYW1ldGVycy5wdHIsIGlzbGFuZHMucHRyLCBicm9hZFBoYXNlLnB0ciwgbmFycm93UGhhc2UucHRyLCBib2RpZXMucHRyLCBjb2xsaWRlcnMucHRyLCBqb2ludHMucHRyLCBjY2Rfc29sdmVyLnB0ciwgZXZlbnRRdWV1ZS5wdHIsIGFkZEhlYXBPYmplY3QoaG9va09iamVjdCksIGFkZEhlYXBPYmplY3QoaG9va0ZpbHRlckNvbnRhY3RQYWlyKSwgYWRkSGVhcE9iamVjdChob29rRmlsdGVySW50ZXJzZWN0aW9uUGFpcikpO1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdQb2ludENvbGxpZGVyUHJvamVjdGlvbiB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd1BvaW50Q29sbGlkZXJQcm9qZWN0aW9uLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd3BvaW50Y29sbGlkZXJwcm9qZWN0aW9uX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY29sbGlkZXJIYW5kbGUoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3BvaW50Y29sbGlkZXJwcm9qZWN0aW9uX2NvbGxpZGVySGFuZGxlKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgcG9pbnQoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3BvaW50Y29sbGlkZXJwcm9qZWN0aW9uX3BvaW50KHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIGlzSW5zaWRlKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdwb2ludGNvbGxpZGVycHJvamVjdGlvbl9pc0luc2lkZSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgIT09IDA7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd1F1ZXJ5UGlwZWxpbmUge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdRdWVyeVBpcGVsaW5lLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd3F1ZXJ5cGlwZWxpbmVfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdxdWVyeXBpcGVsaW5lX25ldygpO1xuICAgICAgICByZXR1cm4gUmF3UXVlcnlQaXBlbGluZS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd0lzbGFuZE1hbmFnZXJ9IGlzbGFuZHNcbiAgICAqIEBwYXJhbSB7UmF3UmlnaWRCb2R5U2V0fSBib2RpZXNcbiAgICAqIEBwYXJhbSB7UmF3Q29sbGlkZXJTZXR9IGNvbGxpZGVyc1xuICAgICovXG4gICAgdXBkYXRlKGlzbGFuZHMsIGJvZGllcywgY29sbGlkZXJzKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhpc2xhbmRzLCBSYXdJc2xhbmRNYW5hZ2VyKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGJvZGllcywgUmF3UmlnaWRCb2R5U2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGNvbGxpZGVycywgUmF3Q29sbGlkZXJTZXQpO1xuICAgICAgICB3YXNtLnJhd3F1ZXJ5cGlwZWxpbmVfdXBkYXRlKHRoaXMucHRyLCBpc2xhbmRzLnB0ciwgYm9kaWVzLnB0ciwgY29sbGlkZXJzLnB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdDb2xsaWRlclNldH0gY29sbGlkZXJzXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcmF5T3JpZ1xuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHJheURpclxuICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvaVxuICAgICogQHBhcmFtIHtib29sZWFufSBzb2xpZFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGdyb3Vwc1xuICAgICogQHJldHVybnMge1Jhd1JheUNvbGxpZGVyVG9pIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY2FzdFJheShjb2xsaWRlcnMsIHJheU9yaWcsIHJheURpciwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHJheU9yaWcsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhyYXlEaXIsIFJhd1ZlY3Rvcik7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3F1ZXJ5cGlwZWxpbmVfY2FzdFJheSh0aGlzLnB0ciwgY29sbGlkZXJzLnB0ciwgcmF5T3JpZy5wdHIsIHJheURpci5wdHIsIG1heFRvaSwgc29saWQsIGdyb3Vwcyk7XG4gICAgICAgIHJldHVybiByZXQgPT09IDAgPyB1bmRlZmluZWQgOiBSYXdSYXlDb2xsaWRlclRvaS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd0NvbGxpZGVyU2V0fSBjb2xsaWRlcnNcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSByYXlPcmlnXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcmF5RGlyXG4gICAgKiBAcGFyYW0ge251bWJlcn0gbWF4VG9pXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNvbGlkXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBzXG4gICAgKiBAcmV0dXJucyB7UmF3UmF5Q29sbGlkZXJJbnRlcnNlY3Rpb24gfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjYXN0UmF5QW5kR2V0Tm9ybWFsKGNvbGxpZGVycywgcmF5T3JpZywgcmF5RGlyLCBtYXhUb2ksIHNvbGlkLCBncm91cHMpIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGNvbGxpZGVycywgUmF3Q29sbGlkZXJTZXQpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MocmF5T3JpZywgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHJheURpciwgUmF3VmVjdG9yKTtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cXVlcnlwaXBlbGluZV9jYXN0UmF5QW5kR2V0Tm9ybWFsKHRoaXMucHRyLCBjb2xsaWRlcnMucHRyLCByYXlPcmlnLnB0ciwgcmF5RGlyLnB0ciwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1JheUNvbGxpZGVySW50ZXJzZWN0aW9uLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7UmF3Q29sbGlkZXJTZXR9IGNvbGxpZGVyc1xuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHJheU9yaWdcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSByYXlEaXJcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb2lcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc29saWRcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBncm91cHNcbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgKi9cbiAgICBpbnRlcnNlY3Rpb25zV2l0aFJheShjb2xsaWRlcnMsIHJheU9yaWcsIHJheURpciwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzLCBjYWxsYmFjaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKGNvbGxpZGVycywgUmF3Q29sbGlkZXJTZXQpO1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKHJheU9yaWcsIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3MocmF5RGlyLCBSYXdWZWN0b3IpO1xuICAgICAgICAgICAgd2FzbS5yYXdxdWVyeXBpcGVsaW5lX2ludGVyc2VjdGlvbnNXaXRoUmF5KHRoaXMucHRyLCBjb2xsaWRlcnMucHRyLCByYXlPcmlnLnB0ciwgcmF5RGlyLnB0ciwgbWF4VG9pLCBzb2xpZCwgZ3JvdXBzLCBhZGRCb3Jyb3dlZE9iamVjdChjYWxsYmFjaykpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaGVhcFtzdGFja19wb2ludGVyKytdID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdDb2xsaWRlclNldH0gY29sbGlkZXJzXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gc2hhcGVQb3NcbiAgICAqIEBwYXJhbSB7UmF3Um90YXRpb259IHNoYXBlUm90XG4gICAgKiBAcGFyYW0ge1Jhd1NoYXBlfSBzaGFwZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGdyb3Vwc1xuICAgICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIGludGVyc2VjdGlvbldpdGhTaGFwZShjb2xsaWRlcnMsIHNoYXBlUG9zLCBzaGFwZVJvdCwgc2hhcGUsIGdyb3Vwcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3MoY29sbGlkZXJzLCBSYXdDb2xsaWRlclNldCk7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3Moc2hhcGVQb3MsIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3Moc2hhcGVSb3QsIFJhd1JvdGF0aW9uKTtcbiAgICAgICAgICAgIF9hc3NlcnRDbGFzcyhzaGFwZSwgUmF3U2hhcGUpO1xuICAgICAgICAgICAgd2FzbS5yYXdxdWVyeXBpcGVsaW5lX2ludGVyc2VjdGlvbldpdGhTaGFwZShyZXRwdHIsIHRoaXMucHRyLCBjb2xsaWRlcnMucHRyLCBzaGFwZVBvcy5wdHIsIHNoYXBlUm90LnB0ciwgc2hhcGUucHRyLCBncm91cHMpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDBdO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0SW50MzJNZW1vcnkwKClbcmV0cHRyIC8gNCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuIHIwID09PSAwID8gdW5kZWZpbmVkIDogcjEgPj4+IDA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdDb2xsaWRlclNldH0gY29sbGlkZXJzXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcG9pbnRcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc29saWRcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBncm91cHNcbiAgICAqIEByZXR1cm5zIHtSYXdQb2ludENvbGxpZGVyUHJvamVjdGlvbiB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHByb2plY3RQb2ludChjb2xsaWRlcnMsIHBvaW50LCBzb2xpZCwgZ3JvdXBzKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHBvaW50LCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdxdWVyeXBpcGVsaW5lX3Byb2plY3RQb2ludCh0aGlzLnB0ciwgY29sbGlkZXJzLnB0ciwgcG9pbnQucHRyLCBzb2xpZCwgZ3JvdXBzKTtcbiAgICAgICAgcmV0dXJuIHJldCA9PT0gMCA/IHVuZGVmaW5lZCA6IFJhd1BvaW50Q29sbGlkZXJQcm9qZWN0aW9uLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7UmF3Q29sbGlkZXJTZXR9IGNvbGxpZGVyc1xuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHBvaW50XG4gICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBzXG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICovXG4gICAgaW50ZXJzZWN0aW9uc1dpdGhQb2ludChjb2xsaWRlcnMsIHBvaW50LCBncm91cHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3MoY29sbGlkZXJzLCBSYXdDb2xsaWRlclNldCk7XG4gICAgICAgICAgICBfYXNzZXJ0Q2xhc3MocG9pbnQsIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICB3YXNtLnJhd3F1ZXJ5cGlwZWxpbmVfaW50ZXJzZWN0aW9uc1dpdGhQb2ludCh0aGlzLnB0ciwgY29sbGlkZXJzLnB0ciwgcG9pbnQucHRyLCBncm91cHMsIGFkZEJvcnJvd2VkT2JqZWN0KGNhbGxiYWNrKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBoZWFwW3N0YWNrX3BvaW50ZXIrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd0NvbGxpZGVyU2V0fSBjb2xsaWRlcnNcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBzaGFwZVBvc1xuICAgICogQHBhcmFtIHtSYXdSb3RhdGlvbn0gc2hhcGVSb3RcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBzaGFwZVZlbFxuICAgICogQHBhcmFtIHtSYXdTaGFwZX0gc2hhcGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb2lcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBncm91cHNcbiAgICAqIEByZXR1cm5zIHtSYXdTaGFwZUNvbGxpZGVyVE9JIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgY2FzdFNoYXBlKGNvbGxpZGVycywgc2hhcGVQb3MsIHNoYXBlUm90LCBzaGFwZVZlbCwgc2hhcGUsIG1heFRvaSwgZ3JvdXBzKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHNoYXBlUG9zLCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3Moc2hhcGVSb3QsIFJhd1JvdGF0aW9uKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHNoYXBlVmVsLCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3Moc2hhcGUsIFJhd1NoYXBlKTtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cXVlcnlwaXBlbGluZV9jYXN0U2hhcGUodGhpcy5wdHIsIGNvbGxpZGVycy5wdHIsIHNoYXBlUG9zLnB0ciwgc2hhcGVSb3QucHRyLCBzaGFwZVZlbC5wdHIsIHNoYXBlLnB0ciwgbWF4VG9pLCBncm91cHMpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3U2hhcGVDb2xsaWRlclRPSS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd0NvbGxpZGVyU2V0fSBjb2xsaWRlcnNcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBzaGFwZVBvc1xuICAgICogQHBhcmFtIHtSYXdSb3RhdGlvbn0gc2hhcGVSb3RcbiAgICAqIEBwYXJhbSB7UmF3U2hhcGV9IHNoYXBlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBzXG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICovXG4gICAgaW50ZXJzZWN0aW9uc1dpdGhTaGFwZShjb2xsaWRlcnMsIHNoYXBlUG9zLCBzaGFwZVJvdCwgc2hhcGUsIGdyb3VwcywgY2FsbGJhY2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgICAgIF9hc3NlcnRDbGFzcyhzaGFwZVBvcywgUmF3VmVjdG9yKTtcbiAgICAgICAgICAgIF9hc3NlcnRDbGFzcyhzaGFwZVJvdCwgUmF3Um90YXRpb24pO1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKHNoYXBlLCBSYXdTaGFwZSk7XG4gICAgICAgICAgICB3YXNtLnJhd3F1ZXJ5cGlwZWxpbmVfaW50ZXJzZWN0aW9uc1dpdGhTaGFwZSh0aGlzLnB0ciwgY29sbGlkZXJzLnB0ciwgc2hhcGVQb3MucHRyLCBzaGFwZVJvdC5wdHIsIHNoYXBlLnB0ciwgZ3JvdXBzLCBhZGRCb3Jyb3dlZE9iamVjdChjYWxsYmFjaykpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaGVhcFtzdGFja19wb2ludGVyKytdID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGFhYmJDZW50ZXJcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBhYWJiSGFsZkV4dGVudHNcbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgKi9cbiAgICBjb2xsaWRlcnNXaXRoQWFiYkludGVyc2VjdGluZ0FhYmIoYWFiYkNlbnRlciwgYWFiYkhhbGZFeHRlbnRzLCBjYWxsYmFjaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKGFhYmJDZW50ZXIsIFJhd1ZlY3Rvcik7XG4gICAgICAgICAgICB2YXIgcHRyMCA9IGFhYmJDZW50ZXIucHRyO1xuICAgICAgICAgICAgYWFiYkNlbnRlci5wdHIgPSAwO1xuICAgICAgICAgICAgX2Fzc2VydENsYXNzKGFhYmJIYWxmRXh0ZW50cywgUmF3VmVjdG9yKTtcbiAgICAgICAgICAgIHZhciBwdHIxID0gYWFiYkhhbGZFeHRlbnRzLnB0cjtcbiAgICAgICAgICAgIGFhYmJIYWxmRXh0ZW50cy5wdHIgPSAwO1xuICAgICAgICAgICAgd2FzbS5yYXdxdWVyeXBpcGVsaW5lX2NvbGxpZGVyc1dpdGhBYWJiSW50ZXJzZWN0aW5nQWFiYih0aGlzLnB0ciwgcHRyMCwgcHRyMSwgYWRkQm9ycm93ZWRPYmplY3QoY2FsbGJhY2spKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGhlYXBbc3RhY2tfcG9pbnRlcisrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdSYXlDb2xsaWRlckludGVyc2VjdGlvbiB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd1JheUNvbGxpZGVySW50ZXJzZWN0aW9uLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd3JheWNvbGxpZGVyaW50ZXJzZWN0aW9uX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY29sbGlkZXJIYW5kbGUoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3BvaW50Y29sbGlkZXJwcm9qZWN0aW9uX2NvbGxpZGVySGFuZGxlKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldCA+Pj4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgbm9ybWFsKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyYXljb2xsaWRlcmludGVyc2VjdGlvbl9ub3JtYWwodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICB0b2koKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JheWNvbGxpZGVyaW50ZXJzZWN0aW9uX3RvaSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd1JheUNvbGxpZGVyVG9pIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3UmF5Q29sbGlkZXJUb2kucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3cmF5Y29sbGlkZXJ0b2lfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBjb2xsaWRlckhhbmRsZSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cG9pbnRjb2xsaWRlcnByb2plY3Rpb25fY29sbGlkZXJIYW5kbGUodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICB0b2koKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JheWNvbGxpZGVyaW50ZXJzZWN0aW9uX3RvaSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd1JpZ2lkQm9keVNldCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd1JpZ2lkQm9keVNldC5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19yYXdyaWdpZGJvZHlzZXRfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSB3b3JsZC1zcGFjZSB0cmFuc2xhdGlvbiBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgcmJUcmFuc2xhdGlvbihoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmlnaWRib2R5c2V0X3JiVHJhbnNsYXRpb24odGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHdvcmxkLXNwYWNlIG9yaWVudGF0aW9uIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtSYXdSb3RhdGlvbn1cbiAgICAqL1xuICAgIHJiUm90YXRpb24oaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYlJvdGF0aW9uKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gUmF3Um90YXRpb24uX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogUHV0IHRoZSBnaXZlbiByaWdpZC1ib2R5IHRvIHNsZWVwLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICovXG4gICAgcmJTbGVlcChoYW5kbGUpIHtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJTbGVlcCh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBJcyB0aGlzIHJpZ2lkLWJvZHkgc2xlZXBpbmc/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIHJiSXNTbGVlcGluZyhoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmlnaWRib2R5c2V0X3JiSXNTbGVlcGluZyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCAhPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBJcyB0aGUgdmVsb2NpdHkgb2YgdGhpcyByaWdpZC1ib2R5IG5vdCB6ZXJvP1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgKi9cbiAgICByYklzTW92aW5nKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJJc01vdmluZyh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldCAhPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgd29ybGQtc3BhY2UgcHJlZGljdGVkIHRyYW5zbGF0aW9uIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqXG4gICAgKiBJZiB0aGlzIHJpZ2lkLWJvZHkgaXMga2luZW1hdGljIHRoaXMgdmFsdWUgaXMgc2V0IGJ5IHRoZSBgc2V0TmV4dEtpbmVtYXRpY1RyYW5zbGF0aW9uYFxuICAgICogbWV0aG9kIGFuZCBpcyB1c2VkIGZvciBlc3RpbWF0aW5nIHRoZSBraW5lbWF0aWMgYm9keSB2ZWxvY2l0eSBhdCB0aGUgbmV4dCB0aW1lc3RlcC5cbiAgICAqIEZvciBub24ta2luZW1hdGljIGJvZGllcywgdGhpcyB2YWx1ZSBpcyBjdXJyZW50bHkgdW5zcGVjaWZpZWQuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgcmJOZXh0VHJhbnNsYXRpb24oaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYk5leHRUcmFuc2xhdGlvbih0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgd29ybGQtc3BhY2UgcHJlZGljdGVkIG9yaWVudGF0aW9uIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqXG4gICAgKiBJZiB0aGlzIHJpZ2lkLWJvZHkgaXMga2luZW1hdGljIHRoaXMgdmFsdWUgaXMgc2V0IGJ5IHRoZSBgc2V0TmV4dEtpbmVtYXRpY1JvdGF0aW9uYFxuICAgICogbWV0aG9kIGFuZCBpcyB1c2VkIGZvciBlc3RpbWF0aW5nIHRoZSBraW5lbWF0aWMgYm9keSB2ZWxvY2l0eSBhdCB0aGUgbmV4dCB0aW1lc3RlcC5cbiAgICAqIEZvciBub24ta2luZW1hdGljIGJvZGllcywgdGhpcyB2YWx1ZSBpcyBjdXJyZW50bHkgdW5zcGVjaWZpZWQuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3Um90YXRpb259XG4gICAgKi9cbiAgICByYk5leHRSb3RhdGlvbihoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmlnaWRib2R5c2V0X3JiTmV4dFJvdGF0aW9uKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gUmF3Um90YXRpb24uX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogU2V0cyB0aGUgdHJhbnNsYXRpb24gb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgeGA6IHRoZSB3b3JsZC1zcGFjZSBwb3NpdGlvbiBvZiB0aGUgcmlnaWQtYm9keSBhbG9uZyB0aGUgYHhgIGF4aXMuXG4gICAgKiAtIGB5YDogdGhlIHdvcmxkLXNwYWNlIHBvc2l0aW9uIG9mIHRoZSByaWdpZC1ib2R5IGFsb25nIHRoZSBgeWAgYXhpcy5cbiAgICAqIC0gYHdha2VVcGA6IGZvcmNlcyB0aGUgcmlnaWQtYm9keSB0byB3YWtlLXVwIHNvIGl0IGlzIHByb3Blcmx5IGFmZmVjdGVkIGJ5IGZvcmNlcyBpZiBpdFxuICAgICogd2Fzbid0IG1vdmluZyBiZWZvcmUgbW9kaWZ5aW5nIGl0cyBwb3NpdGlvbi5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICogQHBhcmFtIHtib29sZWFufSB3YWtlVXBcbiAgICAqL1xuICAgIHJiU2V0VHJhbnNsYXRpb24oaGFuZGxlLCB4LCB5LCB3YWtlVXApIHtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJTZXRUcmFuc2xhdGlvbih0aGlzLnB0ciwgaGFuZGxlLCB4LCB5LCB3YWtlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFNldHMgdGhlIHJvdGF0aW9uIGFuZ2xlIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYGFuZ2xlYDogdGhlIHJvdGF0aW9uIGFuZ2xlLCBpbiByYWRpYW5zLlxuICAgICogLSBgd2FrZVVwYDogZm9yY2VzIHRoZSByaWdpZC1ib2R5IHRvIHdha2UtdXAgc28gaXQgaXMgcHJvcGVybHkgYWZmZWN0ZWQgYnkgZm9yY2VzIGlmIGl0XG4gICAgKiB3YXNuJ3QgbW92aW5nIGJlZm9yZSBtb2RpZnlpbmcgaXRzIHBvc2l0aW9uLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmJTZXRSb3RhdGlvbihoYW5kbGUsIGFuZ2xlLCB3YWtlVXApIHtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJTZXRSb3RhdGlvbih0aGlzLnB0ciwgaGFuZGxlLCBhbmdsZSwgd2FrZVVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBTZXRzIHRoZSBsaW5lYXIgdmVsb2NpdHkgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGxpbnZlbFxuICAgICogQHBhcmFtIHtib29sZWFufSB3YWtlVXBcbiAgICAqL1xuICAgIHJiU2V0TGludmVsKGhhbmRsZSwgbGludmVsLCB3YWtlVXApIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGxpbnZlbCwgUmF3VmVjdG9yKTtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJTZXRMaW52ZWwodGhpcy5wdHIsIGhhbmRsZSwgbGludmVsLnB0ciwgd2FrZVVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBTZXRzIHRoZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmd2ZWxcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2FrZVVwXG4gICAgKi9cbiAgICByYlNldEFuZ3ZlbChoYW5kbGUsIGFuZ3ZlbCwgd2FrZVVwKSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiU2V0QW5ndmVsKHRoaXMucHRyLCBoYW5kbGUsIGFuZ3ZlbCwgd2FrZVVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBJZiB0aGlzIHJpZ2lkIGJvZHkgaXMga2luZW1hdGljLCBzZXRzIGl0cyBmdXR1cmUgdHJhbnNsYXRpb24gYWZ0ZXIgdGhlIG5leHQgdGltZXN0ZXAgaW50ZWdyYXRpb24uXG4gICAgKlxuICAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIGByaWdpZEJvZHkuc2V0VHJhbnNsYXRpb25gIHRvIG1ha2UgdGhlIGR5bmFtaWMgb2JqZWN0XG4gICAgKiBpbnRlcmFjdGluZyB3aXRoIHRoaXMga2luZW1hdGljIGJvZHkgYmVoYXZlIGFzIGV4cGVjdGVkLiBJbnRlcm5hbGx5LCBSYXBpZXIgd2lsbCBjb21wdXRlXG4gICAgKiBhbiBhcnRpZmljaWFsIHZlbG9jaXR5IGZvciB0aGlzIHJpZ2lkLWJvZHkgZnJvbSBpdHMgY3VycmVudCBwb3NpdGlvbiBhbmQgaXRzIG5leHQga2luZW1hdGljXG4gICAgKiBwb3NpdGlvbi4gVGhpcyB2ZWxvY2l0eSB3aWxsIGJlIHVzZWQgdG8gY29tcHV0ZSBmb3JjZXMgb24gZHluYW1pYyBib2RpZXMgaW50ZXJhY3Rpbmcgd2l0aFxuICAgICogdGhpcyBib2R5LlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgeGA6IHRoZSB3b3JsZC1zcGFjZSBwb3NpdGlvbiBvZiB0aGUgcmlnaWQtYm9keSBhbG9uZyB0aGUgYHhgIGF4aXMuXG4gICAgKiAtIGB5YDogdGhlIHdvcmxkLXNwYWNlIHBvc2l0aW9uIG9mIHRoZSByaWdpZC1ib2R5IGFsb25nIHRoZSBgeWAgYXhpcy5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICovXG4gICAgcmJTZXROZXh0S2luZW1hdGljVHJhbnNsYXRpb24oaGFuZGxlLCB4LCB5KSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiU2V0TmV4dEtpbmVtYXRpY1RyYW5zbGF0aW9uKHRoaXMucHRyLCBoYW5kbGUsIHgsIHkpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElmIHRoaXMgcmlnaWQgYm9keSBpcyBraW5lbWF0aWMsIHNldHMgaXRzIGZ1dHVyZSByb3RhdGlvbiBhZnRlciB0aGUgbmV4dCB0aW1lc3RlcCBpbnRlZ3JhdGlvbi5cbiAgICAqXG4gICAgKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluc3RlYWQgb2YgYHJpZ2lkQm9keS5zZXRSb3RhdGlvbmAgdG8gbWFrZSB0aGUgZHluYW1pYyBvYmplY3RcbiAgICAqIGludGVyYWN0aW5nIHdpdGggdGhpcyBraW5lbWF0aWMgYm9keSBiZWhhdmUgYXMgZXhwZWN0ZWQuIEludGVybmFsbHksIFJhcGllciB3aWxsIGNvbXB1dGVcbiAgICAqIGFuIGFydGlmaWNpYWwgdmVsb2NpdHkgZm9yIHRoaXMgcmlnaWQtYm9keSBmcm9tIGl0cyBjdXJyZW50IHBvc2l0aW9uIGFuZCBpdHMgbmV4dCBraW5lbWF0aWNcbiAgICAqIHBvc2l0aW9uLiBUaGlzIHZlbG9jaXR5IHdpbGwgYmUgdXNlZCB0byBjb21wdXRlIGZvcmNlcyBvbiBkeW5hbWljIGJvZGllcyBpbnRlcmFjdGluZyB3aXRoXG4gICAgKiB0aGlzIGJvZHkuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGBhbmdsZWA6IHRoZSByb3RhdGlvbiBhbmdsZSwgaW4gcmFkaWFucy5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZVxuICAgICovXG4gICAgcmJTZXROZXh0S2luZW1hdGljUm90YXRpb24oaGFuZGxlLCBhbmdsZSkge1xuICAgICAgICB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYlNldE5leHRLaW5lbWF0aWNSb3RhdGlvbih0aGlzLnB0ciwgaGFuZGxlLCBhbmdsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIGxpbmVhciB2ZWxvY2l0eSBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgcmJMaW52ZWwoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkxpbnZlbCh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgcmJBbmd2ZWwoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkFuZ3ZlbCh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvY2tlZFxuICAgICogQHBhcmFtIHtib29sZWFufSB3YWtlX3VwXG4gICAgKi9cbiAgICByYkxvY2tUcmFuc2xhdGlvbnMoaGFuZGxlLCBsb2NrZWQsIHdha2VfdXApIHtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJMb2NrUm90YXRpb25zKHRoaXMucHRyLCBoYW5kbGUsIGxvY2tlZCwgd2FrZV91cCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtib29sZWFufSBsb2NrZWRcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2FrZV91cFxuICAgICovXG4gICAgcmJMb2NrUm90YXRpb25zKGhhbmRsZSwgbG9ja2VkLCB3YWtlX3VwKSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiTG9ja1JvdGF0aW9ucyh0aGlzLnB0ciwgaGFuZGxlLCBsb2NrZWQsIHdha2VfdXApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICByYkRvbWluYW5jZUdyb3VwKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJEb21pbmFuY2VHcm91cCh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBcbiAgICAqL1xuICAgIHJiU2V0RG9taW5hbmNlR3JvdXAoaGFuZGxlLCBncm91cCkge1xuICAgICAgICB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYlNldERvbWluYW5jZUdyb3VwKHRoaXMucHRyLCBoYW5kbGUsIGdyb3VwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWRcbiAgICAqL1xuICAgIHJiRW5hYmxlQ2NkKGhhbmRsZSwgZW5hYmxlZCkge1xuICAgICAgICB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkVuYWJsZUNjZCh0aGlzLnB0ciwgaGFuZGxlLCBlbmFibGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgcmJNYXNzKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJNYXNzKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIFdha2VzIHRoaXMgcmlnaWQtYm9keSB1cC5cbiAgICAqXG4gICAgKiBBIGR5bmFtaWMgcmlnaWQtYm9keSB0aGF0IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNldmVyYWwgY29uc2VjdXRpdmUgZnJhbWVzIHdpbGxcbiAgICAqIGJlIHB1dCB0byBzbGVlcCBieSB0aGUgcGh5c2ljcyBlbmdpbmUsIGkuZS4sIGl0IHdpbGwgc3RvcCBiZWluZyBzaW11bGF0ZWQgaW4gb3JkZXJcbiAgICAqIHRvIGF2b2lkIHVzZWxlc3MgY29tcHV0YXRpb25zLlxuICAgICogVGhpcyBtZXRob2RzIGZvcmNlcyBhIHNsZWVwaW5nIHJpZ2lkLWJvZHkgdG8gd2FrZS11cC4gVGhpcyBpcyB1c2VmdWwsIGUuZy4sIGJlZm9yZSBtb2RpZnlpbmdcbiAgICAqIHRoZSBwb3NpdGlvbiBvZiBhIGR5bmFtaWMgYm9keSBzbyB0aGF0IGl0IGlzIHByb3Blcmx5IHNpbXVsYXRlZCBhZnRlcndhcmRzLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICovXG4gICAgcmJXYWtlVXAoaGFuZGxlKSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiV2FrZVVwKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElzIENvbnRpbnVvdXMgQ29sbGlzaW9uIERldGVjdGlvbiBlbmFibGVkIGZvciB0aGlzIHJpZ2lkLWJvZHk/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIHJiSXNDY2RFbmFibGVkKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJJc0NjZEVuYWJsZWQodGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgIT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIG51bWJlciBvZiBjb2xsaWRlcnMgYXR0YWNoZWQgdG8gdGhpcyByaWdpZC1ib2R5LlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHJiTnVtQ29sbGlkZXJzKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJOdW1Db2xsaWRlcnModGhpcy5wdHIsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0cmlldmVzIHRoZSBgaS10aGAgY29sbGlkZXIgYXR0YWNoZWQgdG8gdGhpcyByaWdpZC1ib2R5LlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgYXRgOiBUaGUgaW5kZXggb2YgdGhlIGNvbGxpZGVyIHRvIHJldHJpZXZlLiBNdXN0IGJlIGEgbnVtYmVyIGluIGBbMCwgdGhpcy5udW1Db2xsaWRlcnMoKVtgLlxuICAgICogICAgICAgICBUaGlzIGluZGV4IGlzICoqbm90KiogdGhlIHNhbWUgYXMgdGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBjb2xsaWRlci5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdFxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHJiQ29sbGlkZXIoaGFuZGxlLCBhdCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJDb2xsaWRlcih0aGlzLnB0ciwgaGFuZGxlLCBhdCk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHN0YXR1cyBvZiB0aGlzIHJpZ2lkLWJvZHk6IHN0YXRpYywgZHluYW1pYywgb3Iga2luZW1hdGljLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHJiQm9keVR5cGUoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkJvZHlUeXBlKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElzIHRoaXMgcmlnaWQtYm9keSBzdGF0aWM/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIHJiSXNTdGF0aWMoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYklzU3RhdGljKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElzIHRoaXMgcmlnaWQtYm9keSBraW5lbWF0aWM/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAqL1xuICAgIHJiSXNLaW5lbWF0aWMoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYklzS2luZW1hdGljKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIElzIHRoaXMgcmlnaWQtYm9keSBkeW5hbWljP1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgKi9cbiAgICByYklzRHluYW1pYyhoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmlnaWRib2R5c2V0X3JiSXNEeW5hbWljKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBsaW5lYXIgZGFtcGluZyBjb2VmZmljaWVudCBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgcmJMaW5lYXJEYW1waW5nKGhhbmRsZSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJMaW5lYXJEYW1waW5nKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBhbmd1bGFyIGRhbXBpbmcgY29lZmZpY2llbnQgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHJiQW5ndWxhckRhbXBpbmcoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkFuZ3VsYXJEYW1waW5nKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3JcbiAgICAqL1xuICAgIHJiU2V0TGluZWFyRGFtcGluZyhoYW5kbGUsIGZhY3Rvcikge1xuICAgICAgICB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYlNldExpbmVhckRhbXBpbmcodGhpcy5wdHIsIGhhbmRsZSwgZmFjdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZmFjdG9yXG4gICAgKi9cbiAgICByYlNldEFuZ3VsYXJEYW1waW5nKGhhbmRsZSwgZmFjdG9yKSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiU2V0QW5ndWxhckRhbXBpbmcodGhpcy5wdHIsIGhhbmRsZSwgZmFjdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgcmJHcmF2aXR5U2NhbGUoaGFuZGxlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYkdyYXZpdHlTY2FsZSh0aGlzLnB0ciwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge251bWJlcn0gZmFjdG9yXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmJTZXRHcmF2aXR5U2NhbGUoaGFuZGxlLCBmYWN0b3IsIHdha2VVcCkge1xuICAgICAgICB3YXNtLnJhd3JpZ2lkYm9keXNldF9yYlNldEdyYXZpdHlTY2FsZSh0aGlzLnB0ciwgaGFuZGxlLCBmYWN0b3IsIHdha2VVcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQXBwbGllcyBhIGZvcmNlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGBmb3JjZWA6IHRoZSB3b3JsZC1zcGFjZSBmb3JjZSB0byBhcHBseSBvbiB0aGUgcmlnaWQtYm9keS5cbiAgICAqIC0gYHdha2VVcGA6IHNob3VsZCB0aGUgcmlnaWQtYm9keSBiZSBhdXRvbWF0aWNhbGx5IHdva2VuLXVwP1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IGZvcmNlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmJBcHBseUZvcmNlKGhhbmRsZSwgZm9yY2UsIHdha2VVcCkge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoZm9yY2UsIFJhd1ZlY3Rvcik7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiQXBwbHlGb3JjZSh0aGlzLnB0ciwgaGFuZGxlLCBmb3JjZS5wdHIsIHdha2VVcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQXBwbGllcyBhbiBpbXB1bHNlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGBpbXB1bHNlYDogdGhlIHdvcmxkLXNwYWNlIGltcHVsc2UgdG8gYXBwbHkgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgKiAtIGB3YWtlVXBgOiBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBpbXB1bHNlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmJBcHBseUltcHVsc2UoaGFuZGxlLCBpbXB1bHNlLCB3YWtlVXApIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGltcHVsc2UsIFJhd1ZlY3Rvcik7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiQXBwbHlJbXB1bHNlKHRoaXMucHRyLCBoYW5kbGUsIGltcHVsc2UucHRyLCB3YWtlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgYSB0b3JxdWUgYXQgdGhlIGNlbnRlci1vZi1tYXNzIG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYHRvcnF1ZWA6IHRoZSB0b3JxdWUgdG8gYXBwbHkgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgKiAtIGB3YWtlVXBgOiBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3JxdWVcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2FrZVVwXG4gICAgKi9cbiAgICByYkFwcGx5VG9ycXVlKGhhbmRsZSwgdG9ycXVlLCB3YWtlVXApIHtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJBcHBseVRvcnF1ZSh0aGlzLnB0ciwgaGFuZGxlLCB0b3JxdWUsIHdha2VVcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQXBwbGllcyBhbiBpbXB1bHNpdmUgdG9ycXVlIGF0IHRoZSBjZW50ZXItb2YtbWFzcyBvZiB0aGlzIHJpZ2lkLWJvZHkuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGB0b3JxdWUgaW1wdWxzZWA6IHRoZSB0b3JxdWUgaW1wdWxzZSB0byBhcHBseSBvbiB0aGUgcmlnaWQtYm9keS5cbiAgICAqIC0gYHdha2VVcGA6IHNob3VsZCB0aGUgcmlnaWQtYm9keSBiZSBhdXRvbWF0aWNhbGx5IHdva2VuLXVwP1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IHRvcnF1ZV9pbXB1bHNlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdha2VVcFxuICAgICovXG4gICAgcmJBcHBseVRvcnF1ZUltcHVsc2UoaGFuZGxlLCB0b3JxdWVfaW1wdWxzZSwgd2FrZVVwKSB7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiQXBwbHlUb3JxdWVJbXB1bHNlKHRoaXMucHRyLCBoYW5kbGUsIHRvcnF1ZV9pbXB1bHNlLCB3YWtlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgYSBmb3JjZSBhdCB0aGUgZ2l2ZW4gd29ybGQtc3BhY2UgcG9pbnQgb2YgdGhpcyByaWdpZC1ib2R5LlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgZm9yY2VgOiB0aGUgd29ybGQtc3BhY2UgZm9yY2UgdG8gYXBwbHkgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgKiAtIGBwb2ludGA6IHRoZSB3b3JsZC1zcGFjZSBwb2ludCB3aGVyZSB0aGUgaW1wdWxzZSBpcyB0byBiZSBhcHBsaWVkIG9uIHRoZSByaWdpZC1ib2R5LlxuICAgICogLSBgd2FrZVVwYDogc2hvdWxkIHRoZSByaWdpZC1ib2R5IGJlIGF1dG9tYXRpY2FsbHkgd29rZW4tdXA/XG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gZm9yY2VcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBwb2ludFxuICAgICogQHBhcmFtIHtib29sZWFufSB3YWtlVXBcbiAgICAqL1xuICAgIHJiQXBwbHlGb3JjZUF0UG9pbnQoaGFuZGxlLCBmb3JjZSwgcG9pbnQsIHdha2VVcCkge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoZm9yY2UsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhwb2ludCwgUmF3VmVjdG9yKTtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmJBcHBseUZvcmNlQXRQb2ludCh0aGlzLnB0ciwgaGFuZGxlLCBmb3JjZS5wdHIsIHBvaW50LnB0ciwgd2FrZVVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBBcHBsaWVzIGFuIGltcHVsc2UgYXQgdGhlIGdpdmVuIHdvcmxkLXNwYWNlIHBvaW50IG9mIHRoaXMgcmlnaWQtYm9keS5cbiAgICAqXG4gICAgKiAjIFBhcmFtZXRlcnNcbiAgICAqIC0gYGltcHVsc2VgOiB0aGUgd29ybGQtc3BhY2UgaW1wdWxzZSB0byBhcHBseSBvbiB0aGUgcmlnaWQtYm9keS5cbiAgICAqIC0gYHBvaW50YDogdGhlIHdvcmxkLXNwYWNlIHBvaW50IHdoZXJlIHRoZSBpbXB1bHNlIGlzIHRvIGJlIGFwcGxpZWQgb24gdGhlIHJpZ2lkLWJvZHkuXG4gICAgKiAtIGB3YWtlVXBgOiBzaG91bGQgdGhlIHJpZ2lkLWJvZHkgYmUgYXV0b21hdGljYWxseSB3b2tlbi11cD9cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBpbXB1bHNlXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcG9pbnRcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gd2FrZVVwXG4gICAgKi9cbiAgICByYkFwcGx5SW1wdWxzZUF0UG9pbnQoaGFuZGxlLCBpbXB1bHNlLCBwb2ludCwgd2FrZVVwKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhpbXB1bHNlLCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MocG9pbnQsIFJhd1ZlY3Rvcik7XG4gICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X3JiQXBwbHlJbXB1bHNlQXRQb2ludCh0aGlzLnB0ciwgaGFuZGxlLCBpbXB1bHNlLnB0ciwgcG9pbnQucHRyLCB3YWtlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyaWdpZGJvZHlzZXRfbmV3KCk7XG4gICAgICAgIHJldHVybiBSYXdSaWdpZEJvZHlTZXQuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHRyYW5zbGF0aW9uXG4gICAgKiBAcGFyYW0ge1Jhd1JvdGF0aW9ufSByb3RhdGlvblxuICAgICogQHBhcmFtIHtudW1iZXJ9IGdyYXZpdHlTY2FsZVxuICAgICogQHBhcmFtIHtudW1iZXJ9IG1hc3NcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdHJhbnNhdGlvbnNFbmFibGVkXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gY2VudGVyT2ZNYXNzXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gbGludmVsXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYW5ndmVsXG4gICAgKiBAcGFyYW0ge251bWJlcn0gcHJpbmNpcGFsQW5ndWxhckluZXJ0aWFcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcm90YXRpb25zRW5hYmxlZFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVhckRhbXBpbmdcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmd1bGFyRGFtcGluZ1xuICAgICogQHBhcmFtIHtudW1iZXJ9IHJiX3R5cGVcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2FuU2xlZXBcbiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2NkRW5hYmxlZFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGRvbWluYW5jZUdyb3VwXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgY3JlYXRlUmlnaWRCb2R5KHRyYW5zbGF0aW9uLCByb3RhdGlvbiwgZ3Jhdml0eVNjYWxlLCBtYXNzLCB0cmFuc2F0aW9uc0VuYWJsZWQsIGNlbnRlck9mTWFzcywgbGludmVsLCBhbmd2ZWwsIHByaW5jaXBhbEFuZ3VsYXJJbmVydGlhLCByb3RhdGlvbnNFbmFibGVkLCBsaW5lYXJEYW1waW5nLCBhbmd1bGFyRGFtcGluZywgcmJfdHlwZSwgY2FuU2xlZXAsIGNjZEVuYWJsZWQsIGRvbWluYW5jZUdyb3VwKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyh0cmFuc2xhdGlvbiwgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHJvdGF0aW9uLCBSYXdSb3RhdGlvbik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjZW50ZXJPZk1hc3MsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhsaW52ZWwsIFJhd1ZlY3Rvcik7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9jcmVhdGVSaWdpZEJvZHkodGhpcy5wdHIsIHRyYW5zbGF0aW9uLnB0ciwgcm90YXRpb24ucHRyLCBncmF2aXR5U2NhbGUsIG1hc3MsIHRyYW5zYXRpb25zRW5hYmxlZCwgY2VudGVyT2ZNYXNzLnB0ciwgbGludmVsLnB0ciwgYW5ndmVsLCBwcmluY2lwYWxBbmd1bGFySW5lcnRpYSwgcm90YXRpb25zRW5hYmxlZCwgbGluZWFyRGFtcGluZywgYW5ndWxhckRhbXBpbmcsIHJiX3R5cGUsIGNhblNsZWVwLCBjY2RFbmFibGVkLCBkb21pbmFuY2VHcm91cCk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHBhcmFtIHtSYXdJc2xhbmRNYW5hZ2VyfSBpc2xhbmRzXG4gICAgKiBAcGFyYW0ge1Jhd0NvbGxpZGVyU2V0fSBjb2xsaWRlcnNcbiAgICAqIEBwYXJhbSB7UmF3Sm9pbnRTZXR9IGpvaW50c1xuICAgICovXG4gICAgcmVtb3ZlKGhhbmRsZSwgaXNsYW5kcywgY29sbGlkZXJzLCBqb2ludHMpIHtcbiAgICAgICAgX2Fzc2VydENsYXNzKGlzbGFuZHMsIFJhd0lzbGFuZE1hbmFnZXIpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoY29sbGlkZXJzLCBSYXdDb2xsaWRlclNldCk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhqb2ludHMsIFJhd0pvaW50U2V0KTtcbiAgICAgICAgd2FzbS5yYXdyaWdpZGJvZHlzZXRfcmVtb3ZlKHRoaXMucHRyLCBoYW5kbGUsIGlzbGFuZHMucHRyLCBjb2xsaWRlcnMucHRyLCBqb2ludHMucHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgbnVtYmVyIG9mIHJpZ2lkLWJvZGllcyBvbiB0aGlzIHNldC5cbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBsZW4oKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JpZ2lkYm9keXNldF9sZW4odGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIENoZWNrcyBpZiBhIHJpZ2lkLWJvZHkgd2l0aCB0aGUgZ2l2ZW4gaW50ZWdlciBoYW5kbGUgZXhpc3RzLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgKi9cbiAgICBjb250YWlucyhoYW5kbGUpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmlnaWRib2R5c2V0X2NvbnRhaW5zKHRoaXMucHRyLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gcmV0ICE9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEFwcGxpZXMgdGhlIGdpdmVuIEphdmFTY3JpcHQgZnVuY3Rpb24gdG8gdGhlIGludGVnZXIgaGFuZGxlIG9mIGVhY2ggcmlnaWQtYm9keSBtYW5hZ2VkIGJ5IHRoaXMgc2V0LlxuICAgICpcbiAgICAqICMgUGFyYW1ldGVyc1xuICAgICogLSBgZihoYW5kbGUpYDogdGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSBpbnRlZ2VyIGhhbmRsZSBvZiBlYWNoIHJpZ2lkLWJvZHkgbWFuYWdlZCBieSB0aGlzIHNldC4gQ2FsbGVkIGFzIGBmKGNvbGxpZGVyKWAuXG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgKi9cbiAgICBmb3JFYWNoUmlnaWRCb2R5SGFuZGxlKGYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdhc20ucmF3cmlnaWRib2R5c2V0X2ZvckVhY2hSaWdpZEJvZHlIYW5kbGUodGhpcy5wdHIsIGFkZEJvcnJvd2VkT2JqZWN0KGYpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGhlYXBbc3RhY2tfcG9pbnRlcisrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuKiBBIHJvdGF0aW9uIHF1YXRlcm5pb24uXG4qL1xuZXhwb3J0IGNsYXNzIFJhd1JvdGF0aW9uIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3Um90YXRpb24ucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3cm90YXRpb25fZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSBpZGVudGl0eSByb3RhdGlvbi5cbiAgICAqIEByZXR1cm5zIHtSYXdSb3RhdGlvbn1cbiAgICAqL1xuICAgIHN0YXRpYyBpZGVudGl0eSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cm90YXRpb25faWRlbnRpdHkoKTtcbiAgICAgICAgcmV0dXJuIFJhd1JvdGF0aW9uLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSByb3RhdGlvbiB3aXRoIHRoZWdpdmVuIGFuZ2xlLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlXG4gICAgKiBAcmV0dXJucyB7UmF3Um90YXRpb259XG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUFuZ2xlKGFuZ2xlKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JvdGF0aW9uX2Zyb21BbmdsZShhbmdsZSk7XG4gICAgICAgIHJldHVybiBSYXdSb3RhdGlvbi5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgaW1hZ2luYXJ5IHBhcnQgb2YgdGhpcyBjb21wbGV4IG51bWJlci5cbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgaW0oKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JvdGF0aW9uX2ltKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgcmVhbCBwYXJ0IG9mIHRoaXMgY29tcGxleCBudW1iZXIuXG4gICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICovXG4gICAgZ2V0IHJlKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfZHQodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIFRoZSByb3RhdGlvbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldCBhbmdsZSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cm90YXRpb25fYW5nbGUodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbn1cbi8qKlxuKi9cbmV4cG9ydCBjbGFzcyBSYXdTZXJpYWxpemF0aW9uUGlwZWxpbmUge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShSYXdTZXJpYWxpemF0aW9uUGlwZWxpbmUucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3c2VyaWFsaXphdGlvbnBpcGVsaW5lX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3c2VyaWFsaXphdGlvbnBpcGVsaW5lX25ldygpO1xuICAgICAgICByZXR1cm4gUmF3U2VyaWFsaXphdGlvblBpcGVsaW5lLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBncmF2aXR5XG4gICAgKiBAcGFyYW0ge1Jhd0ludGVncmF0aW9uUGFyYW1ldGVyc30gaW50ZWdyYXRpb25QYXJhbWV0ZXJzXG4gICAgKiBAcGFyYW0ge1Jhd0lzbGFuZE1hbmFnZXJ9IGlzbGFuZHNcbiAgICAqIEBwYXJhbSB7UmF3QnJvYWRQaGFzZX0gYnJvYWRQaGFzZVxuICAgICogQHBhcmFtIHtSYXdOYXJyb3dQaGFzZX0gbmFycm93UGhhc2VcbiAgICAqIEBwYXJhbSB7UmF3UmlnaWRCb2R5U2V0fSBib2RpZXNcbiAgICAqIEBwYXJhbSB7UmF3Q29sbGlkZXJTZXR9IGNvbGxpZGVyc1xuICAgICogQHBhcmFtIHtSYXdKb2ludFNldH0gam9pbnRzXG4gICAgKiBAcmV0dXJucyB7VWludDhBcnJheSB8IHVuZGVmaW5lZH1cbiAgICAqL1xuICAgIHNlcmlhbGl6ZUFsbChncmF2aXR5LCBpbnRlZ3JhdGlvblBhcmFtZXRlcnMsIGlzbGFuZHMsIGJyb2FkUGhhc2UsIG5hcnJvd1BoYXNlLCBib2RpZXMsIGNvbGxpZGVycywgam9pbnRzKSB7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhncmF2aXR5LCBSYXdWZWN0b3IpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaW50ZWdyYXRpb25QYXJhbWV0ZXJzLCBSYXdJbnRlZ3JhdGlvblBhcmFtZXRlcnMpO1xuICAgICAgICBfYXNzZXJ0Q2xhc3MoaXNsYW5kcywgUmF3SXNsYW5kTWFuYWdlcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhicm9hZFBoYXNlLCBSYXdCcm9hZFBoYXNlKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKG5hcnJvd1BoYXNlLCBSYXdOYXJyb3dQaGFzZSk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhib2RpZXMsIFJhd1JpZ2lkQm9keVNldCk7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhjb2xsaWRlcnMsIFJhd0NvbGxpZGVyU2V0KTtcbiAgICAgICAgX2Fzc2VydENsYXNzKGpvaW50cywgUmF3Sm9pbnRTZXQpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzZXJpYWxpemF0aW9ucGlwZWxpbmVfc2VyaWFsaXplQWxsKHRoaXMucHRyLCBncmF2aXR5LnB0ciwgaW50ZWdyYXRpb25QYXJhbWV0ZXJzLnB0ciwgaXNsYW5kcy5wdHIsIGJyb2FkUGhhc2UucHRyLCBuYXJyb3dQaGFzZS5wdHIsIGJvZGllcy5wdHIsIGNvbGxpZGVycy5wdHIsIGpvaW50cy5wdHIpO1xuICAgICAgICByZXR1cm4gdGFrZU9iamVjdChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gZGF0YVxuICAgICogQHJldHVybnMge1Jhd0Rlc2VyaWFsaXplZFdvcmxkIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgZGVzZXJpYWxpemVBbGwoZGF0YSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzZXJpYWxpemF0aW9ucGlwZWxpbmVfZGVzZXJpYWxpemVBbGwodGhpcy5wdHIsIGFkZEhlYXBPYmplY3QoZGF0YSkpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3RGVzZXJpYWxpemVkV29ybGQuX193cmFwKHJldCk7XG4gICAgfVxufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFJhd1NoYXBlIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3U2hhcGUucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3c2hhcGVfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoeFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGh5XG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgY3Vib2lkKGh4LCBoeSkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV9jdWJvaWQoaHgsIGh5KTtcbiAgICAgICAgcmV0dXJuIFJhd1NoYXBlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoeFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGh5XG4gICAgKiBAcGFyYW0ge251bWJlcn0gYm9yZGVyUmFkaXVzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgcm91bmRDdWJvaWQoaHgsIGh5LCBib3JkZXJSYWRpdXMpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3c2hhcGVfcm91bmRDdWJvaWQoaHgsIGh5LCBib3JkZXJSYWRpdXMpO1xuICAgICAgICByZXR1cm4gUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1c1xuICAgICogQHJldHVybnMge1Jhd1NoYXBlfVxuICAgICovXG4gICAgc3RhdGljIGJhbGwocmFkaXVzKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3NoYXBlX2JhbGwocmFkaXVzKTtcbiAgICAgICAgcmV0dXJuIFJhd1NoYXBlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYWxmSGVpZ2h0XG4gICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgY2Fwc3VsZShoYWxmSGVpZ2h0LCByYWRpdXMpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3c2hhcGVfY2Fwc3VsZShoYWxmSGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICByZXR1cm4gUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRpY2VzXG4gICAgKiBAcGFyYW0ge1VpbnQzMkFycmF5fSBpbmRpY2VzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgcG9seWxpbmUodmVydGljZXMsIGluZGljZXMpIHtcbiAgICAgICAgdmFyIHB0cjAgPSBwYXNzQXJyYXlGMzJUb1dhc20wKHZlcnRpY2VzLCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciBwdHIxID0gcGFzc0FycmF5MzJUb1dhc20wKGluZGljZXMsIHdhc20uX193YmluZGdlbl9tYWxsb2MpO1xuICAgICAgICB2YXIgbGVuMSA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3c2hhcGVfcG9seWxpbmUocHRyMCwgbGVuMCwgcHRyMSwgbGVuMSk7XG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gdmVydGljZXNcbiAgICAqIEBwYXJhbSB7VWludDMyQXJyYXl9IGluZGljZXNcbiAgICAqIEByZXR1cm5zIHtSYXdTaGFwZX1cbiAgICAqL1xuICAgIHN0YXRpYyB0cmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKSB7XG4gICAgICAgIHZhciBwdHIwID0gcGFzc0FycmF5RjMyVG9XYXNtMCh2ZXJ0aWNlcywgd2FzbS5fX3diaW5kZ2VuX21hbGxvYyk7XG4gICAgICAgIHZhciBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICB2YXIgcHRyMSA9IHBhc3NBcnJheTMyVG9XYXNtMChpbmRpY2VzLCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjEgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3NoYXBlX3RyaW1lc2gocHRyMCwgbGVuMCwgcHRyMSwgbGVuMSk7XG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gaGVpZ2h0c1xuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHNjYWxlXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgaGVpZ2h0ZmllbGQoaGVpZ2h0cywgc2NhbGUpIHtcbiAgICAgICAgdmFyIHB0cjAgPSBwYXNzQXJyYXlGMzJUb1dhc20wKGhlaWdodHMsIHdhc20uX193YmluZGdlbl9tYWxsb2MpO1xuICAgICAgICB2YXIgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgX2Fzc2VydENsYXNzKHNjYWxlLCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV9oZWlnaHRmaWVsZChwdHIwLCBsZW4wLCBzY2FsZS5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHAxXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcDJcbiAgICAqIEByZXR1cm5zIHtSYXdTaGFwZX1cbiAgICAqL1xuICAgIHN0YXRpYyBzZWdtZW50KHAxLCBwMikge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MocDEsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhwMiwgUmF3VmVjdG9yKTtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3c2hhcGVfc2VnbWVudChwMS5wdHIsIHAyLnB0cik7XG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcDFcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBwMlxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHAzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGV9XG4gICAgKi9cbiAgICBzdGF0aWMgdHJpYW5nbGUocDEsIHAyLCBwMykge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MocDEsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhwMiwgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHAzLCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV90cmlhbmdsZShwMS5wdHIsIHAyLnB0ciwgcDMucHRyKTtcbiAgICAgICAgcmV0dXJuIFJhd1NoYXBlLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBwYXJhbSB7UmF3VmVjdG9yfSBwMVxuICAgICogQHBhcmFtIHtSYXdWZWN0b3J9IHAyXG4gICAgKiBAcGFyYW0ge1Jhd1ZlY3Rvcn0gcDNcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBib3JkZXJSYWRpdXNcbiAgICAqIEByZXR1cm5zIHtSYXdTaGFwZX1cbiAgICAqL1xuICAgIHN0YXRpYyByb3VuZFRyaWFuZ2xlKHAxLCBwMiwgcDMsIGJvcmRlclJhZGl1cykge1xuICAgICAgICBfYXNzZXJ0Q2xhc3MocDEsIFJhd1ZlY3Rvcik7XG4gICAgICAgIF9hc3NlcnRDbGFzcyhwMiwgUmF3VmVjdG9yKTtcbiAgICAgICAgX2Fzc2VydENsYXNzKHAzLCBSYXdWZWN0b3IpO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV9yb3VuZFRyaWFuZ2xlKHAxLnB0ciwgcDIucHRyLCBwMy5wdHIsIGJvcmRlclJhZGl1cyk7XG4gICAgICAgIHJldHVybiBSYXdTaGFwZS5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gcG9pbnRzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGUgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBzdGF0aWMgY29udmV4SHVsbChwb2ludHMpIHtcbiAgICAgICAgdmFyIHB0cjAgPSBwYXNzQXJyYXlGMzJUb1dhc20wKHBvaW50cywgd2FzbS5fX3diaW5kZ2VuX21hbGxvYyk7XG4gICAgICAgIHZhciBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV9jb252ZXhIdWxsKHB0cjAsIGxlbjApO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHBvaW50c1xuICAgICogQHBhcmFtIHtudW1iZXJ9IGJvcmRlclJhZGl1c1xuICAgICogQHJldHVybnMge1Jhd1NoYXBlIHwgdW5kZWZpbmVkfVxuICAgICovXG4gICAgc3RhdGljIHJvdW5kQ29udmV4SHVsbChwb2ludHMsIGJvcmRlclJhZGl1cykge1xuICAgICAgICB2YXIgcHRyMCA9IHBhc3NBcnJheUYzMlRvV2FzbTAocG9pbnRzLCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3NoYXBlX3JvdW5kQ29udmV4SHVsbChwdHIwLCBsZW4wLCBib3JkZXJSYWRpdXMpO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRpY2VzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGUgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBzdGF0aWMgY29udmV4UG9seWxpbmUodmVydGljZXMpIHtcbiAgICAgICAgdmFyIHB0cjAgPSBwYXNzQXJyYXlGMzJUb1dhc20wKHZlcnRpY2VzLCB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jKTtcbiAgICAgICAgdmFyIGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3NoYXBlX2NvbnZleFBvbHlsaW5lKHB0cjAsIGxlbjApO1xuICAgICAgICByZXR1cm4gcmV0ID09PSAwID8gdW5kZWZpbmVkIDogUmF3U2hhcGUuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHZlcnRpY2VzXG4gICAgKiBAcGFyYW0ge251bWJlcn0gYm9yZGVyUmFkaXVzXG4gICAgKiBAcmV0dXJucyB7UmF3U2hhcGUgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBzdGF0aWMgcm91bmRDb252ZXhQb2x5bGluZSh2ZXJ0aWNlcywgYm9yZGVyUmFkaXVzKSB7XG4gICAgICAgIHZhciBwdHIwID0gcGFzc0FycmF5RjMyVG9XYXNtMCh2ZXJ0aWNlcywgd2FzbS5fX3diaW5kZ2VuX21hbGxvYyk7XG4gICAgICAgIHZhciBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZV9yb3VuZENvbnZleFBvbHlsaW5lKHB0cjAsIGxlbjAsIGJvcmRlclJhZGl1cyk7XG4gICAgICAgIHJldHVybiByZXQgPT09IDAgPyB1bmRlZmluZWQgOiBSYXdTaGFwZS5fX3dyYXAocmV0KTtcbiAgICB9XG59XG4vKipcbiovXG5leHBvcnQgY2xhc3MgUmF3U2hhcGVDb2xsaWRlclRPSSB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFJhd1NoYXBlQ29sbGlkZXJUT0kucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnB0ciA9IHB0cjtcblxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIF9fZGVzdHJveV9pbnRvX3JhdygpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfcmF3c2hhcGVjb2xsaWRlcnRvaV9mcmVlKHB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGNvbGxpZGVySGFuZGxlKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdwb2ludGNvbGxpZGVycHJvamVjdGlvbl9jb2xsaWRlckhhbmRsZSh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIHRvaSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cmF5Y29sbGlkZXJpbnRlcnNlY3Rpb25fdG9pKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgd2l0bmVzczEoKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3JheWNvbGxpZGVyaW50ZXJzZWN0aW9uX25vcm1hbCh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIHdpdG5lc3MyKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdyYXljb2xsaWRlcmludGVyc2VjdGlvbl9ub3JtYWwodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtSYXdWZWN0b3J9XG4gICAgKi9cbiAgICBub3JtYWwxKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZWNvbGxpZGVydG9pX25vcm1hbDEodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEByZXR1cm5zIHtSYXdWZWN0b3J9XG4gICAgKi9cbiAgICBub3JtYWwyKCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXdzaGFwZWNvbGxpZGVydG9pX25vcm1hbDEodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbn1cbi8qKlxuKiBBIHZlY3Rvci5cbiovXG5leHBvcnQgY2xhc3MgUmF3VmVjdG9yIHtcblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUoUmF3VmVjdG9yLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX3Jhd3ZlY3Rvcl9mcmVlKHB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQ3JlYXRlcyBhIG5ldyB2ZWN0b3IgZmlsbGVkIHdpdGggemVyb3MuXG4gICAgKiBAcmV0dXJucyB7UmF3VmVjdG9yfVxuICAgICovXG4gICAgc3RhdGljIHplcm8oKSB7XG4gICAgICAgIHZhciByZXQgPSB3YXNtLnJhd3ZlY3Rvcl96ZXJvKCk7XG4gICAgICAgIHJldHVybiBSYXdWZWN0b3IuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQ3JlYXRlcyBhIG5ldyAyRCB2ZWN0b3IgZnJvbSBpdHMgdHdvIGNvbXBvbmVudHMuXG4gICAgKlxuICAgICogIyBQYXJhbWV0ZXJzXG4gICAgKiAtIGB4YDogdGhlIGB4YCBjb21wb25lbnQgb2YgdGhpcyAyRCB2ZWN0b3IuXG4gICAgKiAtIGB5YDogdGhlIGB5YCBjb21wb25lbnQgb2YgdGhpcyAyRCB2ZWN0b3IuXG4gICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3dmVjdG9yX25ldyh4LCB5KTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgYHhgIGNvbXBvbmVudCBvZiB0aGlzIHZlY3Rvci5cbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgeCgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3aW50ZWdyYXRpb25wYXJhbWV0ZXJzX2R0KHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBTZXRzIHRoZSBgeGAgY29tcG9uZW50IG9mIHRoaXMgdmVjdG9yLlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICAqL1xuICAgIHNldCB4KHgpIHtcbiAgICAgICAgd2FzbS5yYXdpbnRlZ3JhdGlvbnBhcmFtZXRlcnNfc2V0X2R0KHRoaXMucHRyLCB4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgYHlgIGNvbXBvbmVudCBvZiB0aGlzIHZlY3Rvci5cbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICBnZXQgeSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3cm90YXRpb25faW0odGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAqIFNldHMgdGhlIGB5YCBjb21wb25lbnQgb2YgdGhpcyB2ZWN0b3IuXG4gICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICovXG4gICAgc2V0IHkoeSkge1xuICAgICAgICB3YXNtLnJhd3ZlY3Rvcl9zZXRfeSh0aGlzLnB0ciwgeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQ3JlYXRlIGEgbmV3IDJEIHZlY3RvciBmcm9tIHRoaXMgdmVjdG9yIHdpdGggaXRzIGNvbXBvbmVudHMgcmVhcnJhbmdlZCBhcyBge3gsIHl9YC5cbiAgICAqIEByZXR1cm5zIHtSYXdWZWN0b3J9XG4gICAgKi9cbiAgICB4eSgpIHtcbiAgICAgICAgdmFyIHJldCA9IHdhc20ucmF3dmVjdG9yX3h5KHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIFJhd1ZlY3Rvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBDcmVhdGUgYSBuZXcgMkQgdmVjdG9yIGZyb20gdGhpcyB2ZWN0b3Igd2l0aCBpdHMgY29tcG9uZW50cyByZWFycmFuZ2VkIGFzIGB7eSwgeH1gLlxuICAgICogQHJldHVybnMge1Jhd1ZlY3Rvcn1cbiAgICAqL1xuICAgIHl4KCkge1xuICAgICAgICB2YXIgcmV0ID0gd2FzbS5yYXd2ZWN0b3JfeXgodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gUmF3VmVjdG9yLl9fd3JhcChyZXQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmKGFyZzApIHtcbiAgICB0YWtlT2JqZWN0KGFyZzApO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fbnVtYmVyX25ldyhhcmcwKSB7XG4gICAgdmFyIHJldCA9IGFyZzA7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19yYXdyYXljb2xsaWRlcmludGVyc2VjdGlvbl9uZXcoYXJnMCkge1xuICAgIHZhciByZXQgPSBSYXdSYXlDb2xsaWRlckludGVyc2VjdGlvbi5fX3dyYXAoYXJnMCk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX3N0cmluZ19uZXcoYXJnMCwgYXJnMSkge1xuICAgIHZhciByZXQgPSBnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19ub3dfODg1Y2E4OGZhZmVlMGZkMShhcmcwKSB7XG4gICAgdmFyIHJldCA9IGdldE9iamVjdChhcmcwKS5ub3coKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX25ld25vYXJnc18xYTExZTdlOGM5MDY5OTZjKGFyZzAsIGFyZzEpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEZ1bmN0aW9uKGdldFN0cmluZ0Zyb21XYXNtMChhcmcwLCBhcmcxKSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19nZXRfNmQyNmM3MTJhYTczYzhiMigpIHsgcmV0dXJuIGhhbmRsZUVycm9yKGZ1bmN0aW9uIChhcmcwLCBhcmcxKSB7XG4gICAgdmFyIHJldCA9IFJlZmxlY3QuZ2V0KGdldE9iamVjdChhcmcwKSwgZ2V0T2JqZWN0KGFyZzEpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfY2FsbF9lOTFmNzFkZGYxZjQ1Y2ZmKCkgeyByZXR1cm4gaGFuZGxlRXJyb3IoZnVuY3Rpb24gKGFyZzAsIGFyZzEpIHtcbiAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzApLmNhbGwoZ2V0T2JqZWN0KGFyZzEpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9vYmplY3RfY2xvbmVfcmVmKGFyZzApIHtcbiAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzApO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfY2FsbF9lM2M3MjM1NWQwOTFkNWQ0KCkgeyByZXR1cm4gaGFuZGxlRXJyb3IoZnVuY3Rpb24gKGFyZzAsIGFyZzEsIGFyZzIpIHtcbiAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzApLmNhbGwoZ2V0T2JqZWN0KGFyZzEpLCBnZXRPYmplY3QoYXJnMikpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59LCBhcmd1bWVudHMpIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19jYWxsX2MxNDNiMTlkODcxMzk5NDQoKSB7IHJldHVybiBoYW5kbGVFcnJvcihmdW5jdGlvbiAoYXJnMCwgYXJnMSwgYXJnMiwgYXJnMykge1xuICAgIHZhciByZXQgPSBnZXRPYmplY3QoYXJnMCkuY2FsbChnZXRPYmplY3QoYXJnMSksIGdldE9iamVjdChhcmcyKSwgZ2V0T2JqZWN0KGFyZzMpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfY2FsbF83MmZhY2QzN2RiYzk3ZGRiKCkgeyByZXR1cm4gaGFuZGxlRXJyb3IoZnVuY3Rpb24gKGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzQpIHtcbiAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzApLmNhbGwoZ2V0T2JqZWN0KGFyZzEpLCBnZXRPYmplY3QoYXJnMiksIGdldE9iamVjdChhcmczKSwgZ2V0T2JqZWN0KGFyZzQpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfYmluZF8wNzgzOTU3OWY1MjNhYTg5KGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICB2YXIgcmV0ID0gZ2V0T2JqZWN0KGFyZzApLmJpbmQoZ2V0T2JqZWN0KGFyZzEpLCBnZXRPYmplY3QoYXJnMiksIGdldE9iamVjdChhcmczKSk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19idWZmZXJfNzlhMzI5NDI2NmQ0ZTc4MyhhcmcwKSB7XG4gICAgdmFyIHJldCA9IGdldE9iamVjdChhcmcwKS5idWZmZXI7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19zZWxmX2I0NTQ2ZWE3YjU5MDUzOWUoKSB7IHJldHVybiBoYW5kbGVFcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHNlbGYuc2VsZjtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193Ymdfd2luZG93X2MyNzlmZWE4MWY0MjZhNjgoKSB7IHJldHVybiBoYW5kbGVFcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldCA9IHdpbmRvdy53aW5kb3c7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn0sIGFyZ3VtZW50cykgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2dsb2JhbFRoaXNfMDM4YTZlYTBmZjE3Nzg5ZigpIHsgcmV0dXJuIGhhbmRsZUVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0ID0gZ2xvYmFsVGhpcy5nbG9iYWxUaGlzO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59LCBhcmd1bWVudHMpIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19nbG9iYWxfNGY5M2NlODg0YmNlZTU5NygpIHsgcmV0dXJuIGhhbmRsZUVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0ID0gZ2xvYmFsLmdsb2JhbDtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufSwgYXJndW1lbnRzKSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9pc191bmRlZmluZWQoYXJnMCkge1xuICAgIHZhciByZXQgPSBnZXRPYmplY3QoYXJnMCkgPT09IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX25ld3dpdGhieXRlb2Zmc2V0YW5kbGVuZ3RoXzIyYTM2ZTYwMjNhZDNjZDAoYXJnMCwgYXJnMSwgYXJnMikge1xuICAgIHZhciByZXQgPSBuZXcgVWludDhBcnJheShnZXRPYmplY3QoYXJnMCksIGFyZzEgPj4+IDAsIGFyZzIgPj4+IDApO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfbmV3Xzk0NTM5N2ZiMDlmZWMwYjgoYXJnMCkge1xuICAgIHZhciByZXQgPSBuZXcgVWludDhBcnJheShnZXRPYmplY3QoYXJnMCkpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193Ymdfc2V0XzIyMzg3MzIyM2FjZjZkMDcoYXJnMCwgYXJnMSwgYXJnMikge1xuICAgIGdldE9iamVjdChhcmcwKS5zZXQoZ2V0T2JqZWN0KGFyZzEpLCBhcmcyID4+PiAwKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19sZW5ndGhfNjhlMTNlN2JiZDkxODQ2NChhcmcwKSB7XG4gICAgdmFyIHJldCA9IGdldE9iamVjdChhcmcwKS5sZW5ndGg7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX251bWJlcl9nZXQoYXJnMCwgYXJnMSkge1xuICAgIGNvbnN0IG9iaiA9IGdldE9iamVjdChhcmcxKTtcbiAgICB2YXIgcmV0ID0gdHlwZW9mKG9iaikgPT09ICdudW1iZXInID8gb2JqIDogdW5kZWZpbmVkO1xuICAgIGdldEZsb2F0NjRNZW1vcnkwKClbYXJnMCAvIDggKyAxXSA9IGlzTGlrZU5vbmUocmV0KSA/IDAgOiByZXQ7XG4gICAgZ2V0SW50MzJNZW1vcnkwKClbYXJnMCAvIDQgKyAwXSA9ICFpc0xpa2VOb25lKHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9ib29sZWFuX2dldChhcmcwKSB7XG4gICAgY29uc3QgdiA9IGdldE9iamVjdChhcmcwKTtcbiAgICB2YXIgcmV0ID0gdHlwZW9mKHYpID09PSAnYm9vbGVhbicgPyAodiA/IDEgOiAwKSA6IDI7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX2RlYnVnX3N0cmluZyhhcmcwLCBhcmcxKSB7XG4gICAgdmFyIHJldCA9IGRlYnVnU3RyaW5nKGdldE9iamVjdChhcmcxKSk7XG4gICAgdmFyIHB0cjAgPSBwYXNzU3RyaW5nVG9XYXNtMChyZXQsIHdhc20uX193YmluZGdlbl9tYWxsb2MsIHdhc20uX193YmluZGdlbl9yZWFsbG9jKTtcbiAgICB2YXIgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICBnZXRJbnQzMk1lbW9yeTAoKVthcmcwIC8gNCArIDFdID0gbGVuMDtcbiAgICBnZXRJbnQzMk1lbW9yeTAoKVthcmcwIC8gNCArIDBdID0gcHRyMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX3Rocm93KGFyZzAsIGFyZzEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0U3RyaW5nRnJvbVdhc20wKGFyZzAsIGFyZzEpKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diaW5kZ2VuX21lbW9yeSgpIHtcbiAgICB2YXIgcmV0ID0gd2FzbS5tZW1vcnk7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==